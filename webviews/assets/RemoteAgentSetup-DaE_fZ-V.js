import{S as oe,d as re,e as se,h as pe,j as h,k as R,l as v,n as G,m as y,y as C,a as j,t as d,c as J,b as m,ad as fe,ao as ye,Z as Ge,z as b,A as k,B as L,K,ap as X,aq as ee,a0 as Q,Q as I,a2 as ce,a4 as $e,ag as Ve,o as ne,H as xe,u as _e,v as be,w as ke,p as ae,x as Le,q as Re,r as le,P as Xe,E as Fe,V as et,W as tt,X as nt,J as Be,G as ue,ar as qe,I as ot,a5 as rt,a7 as st,ae as ct,_ as Ye,$ as de}from"./index-p4Dt6o3z.js";import{A as it}from"./Keybindings-BPBUBuVi.js";import{V as we}from"./VSCodeCodicon-CtqaAH8u.js";import{C as Se,R as ve}from"./github-hmyLGe0b.js";import{f as ge}from"./index-DwagmzSc.js";import{a as Ee,e as he,u as Ze,o as je}from"./ButtonAugment-DueOA3_V.js";import{G as Je,C as Qe}from"./main-panel-BDgbRPZU.js";import{a as De}from"./Content-7zb4jZEH.js";import{T as Ae,D as te,C as at}from"./index-CkBhOCxh.js";import{T as ie}from"./TextTooltipAugment-C0ygVke5.js";import{I as lt}from"./IconButtonAugment-B0XoCIXT.js";import"./chat-context-Dq8CyOam.js";import{R as Ke,T as pt}from"./circle-backslash-B3nG_JMr.js";import"./MaterialIcon-9THX1buP.js";import"./exclamation-triangle-BQxrhBcR.js";import"./pen-to-square-DUXCbbi7.js";import"./augment-logo-C66YBCMf.js";import"./design-system-init-Bqt81Pxb.js";import"./magnifying-glass-Dmz0PV9T.js";import"./CollapseButtonAugment-C3mt1EeR.js";import"./toggleHighContrast-CKn954qg.js";import"./preload-helper-Dv6uf1Os.js";import"./ellipsis-Bz-dObmZ.js";import"./isObjectLike-Dcghr38G.js";import"./globals-D0QH3NT1.js";import"./await_block-CgSfNRTu.js";import"./keypress-DD1aQVr0.js";import"./file-paths-BEF4tZXQ.js";import"./autofix-state-d-ymFdyn.js";import"./index-BOPL8f7w.js";function ft(c){let e,t;return{c(){e=pe("svg"),t=pe("path"),h(t,"d","M11.45 7.25C11.9167 7.68333 12.15 8.21667 12.15 8.85C12.15 9.45 11.95 9.98333 11.55 10.45C11.15 10.8833 10.65 11.1333 10.05 11.2C9.45 11.2333 8.9 11.0833 8.4 10.75C7.93333 10.3833 7.63333 9.9 7.5 9.3C6.83333 9.26667 6.18333 9.08333 5.55 8.75C4.81667 8.38333 4.2 7.85 3.7 7.15V9.4C4.06667 9.46667 4.4 9.63333 4.7 9.9C5 10.1333 5.21667 10.4167 5.35 10.75C5.51667 11.0833 5.58333 11.4 5.55 11.7C5.55 12.2 5.41667 12.65 5.15 13.05C4.91667 13.4167 4.56667 13.7 4.1 13.9C3.66667 14.0667 3.21667 14.1 2.75 14C2.28333 13.9 1.88333 13.6833 1.55 13.35C1.21667 13.0167 1 12.6333 0.9 12.2C0.833333 11.7333 0.883333 11.2833 1.05 10.85C1.25 10.3833 1.53333 10.0167 1.9 9.75C2.16667 9.58333 2.45 9.46667 2.75 9.4V4.65C2.28333 4.55 1.88333 4.33333 1.55 4C1.21667 3.66667 1 3.26667 0.9 2.8C0.833333 2.33333 0.883333 1.88333 1.05 1.45C1.25 1.01667 1.53333 0.666666 1.9 0.4C2.3 0.133333 2.73333 0 3.2 0C3.53333 0 3.85 0.0666666 4.15 0.2C4.75 0.433333 5.16667 0.849999 5.4 1.45C5.53333 1.75 5.6 2.06667 5.6 2.4C5.6 2.86667 5.46667 3.3 5.2 3.7C4.93333 4.06667 4.58333 4.35 4.15 4.55C4.01667 4.61667 3.88333 4.65 3.75 4.65C3.85 5.65 4.25 6.5 4.95 7.2C5.65 7.9 6.5 8.3 7.5 8.4C7.53333 8.26667 7.56667 8.13333 7.6 8C7.8 7.56667 8.1 7.21667 8.5 6.95C8.96667 6.65 9.46667 6.53333 10 6.6C10.5667 6.63333 11.05 6.85 11.45 7.25ZM3.75 10.4C3.48333 10.3 3.21667 10.2833 2.95 10.35C2.68333 10.3833 2.43333 10.5167 2.2 10.75C2 10.95 1.86667 11.1833 1.8 11.45C1.76667 11.7167 1.8 11.9833 1.9 12.25C2.03333 12.5167 2.21667 12.7333 2.45 12.9C2.71667 13.0667 3.01667 13.1333 3.35 13.1C3.68333 13.0667 3.96667 12.9333 4.2 12.7C4.43333 12.4667 4.56667 12.1833 4.6 11.85C4.63333 11.5167 4.56667 11.2333 4.4 11C4.23333 10.7333 4.01667 10.5333 3.75 10.4ZM3.2 3.75C3.56667 3.75 3.86667 3.65 4.1 3.45C4.36667 3.21667 4.53333 2.93333 4.6 2.6C4.66667 2.26667 4.61667 1.96667 4.45 1.7C4.28333 1.4 4.05 1.2 3.75 1.1C3.48333 0.966667 3.21667 0.933333 2.95 1C2.68333 1.03333 2.43333 1.15 2.2 1.35C2 1.55 1.86667 1.8 1.8 2.1C1.76667 2.36667 1.8 2.63333 1.9 2.9C2.03333 3.13333 2.21667 3.33333 2.45 3.5C2.68333 3.66667 2.93333 3.75 3.2 3.75ZM10.8 9.9C10.9667 9.73333 11.0833 9.53333 11.15 9.3C11.2167 9.06667 11.2167 8.85 11.15 8.65C11.1167 8.41667 11.0167 8.21667 10.85 8.05C10.7167 7.85 10.5333 7.7 10.3 7.6C10.0667 7.5 9.8 7.48333 9.5 7.55C9.23333 7.58333 9 7.7 8.8 7.9C8.6 8.1 8.46667 8.35 8.4 8.65C8.33333 8.91667 8.35 9.16667 8.45 9.4C8.55 9.63333 8.68333 9.83333 8.85 10C9.05 10.1333 9.26667 10.2333 9.5 10.3C9.73333 10.3333 9.96667 10.3167 10.2 10.25C10.4333 10.1833 10.6333 10.0667 10.8 9.9Z"),h(e,"width","15"),h(e,"height","15"),h(e,"viewBox","-1 0 15 15"),h(e,"fill","currentColor"),h(e,"xmlns","http://www.w3.org/2000/svg")},m(n,o){R(n,e,o),v(e,t)},p:G,i:G,o:G,d(n){n&&y(e)}}}class ut extends oe{constructor(e){super(),re(this,e,null,ft,se,{})}}function Ie(c,e,t){const n=c.slice();return n[35]=e[t],n}function $t(c){let e,t,n;return t=new Se({props:{color:"warning",variant:"soft",size:2,$$slots:{default:[yt]},$$scope:{ctx:c}}}),{c(){e=C("div"),b(t.$$.fragment),h(e,"class","c-commit-ref-selector__error svelte-1759ld0")},m(o,r){R(o,e,r),k(t,e,null),n=!0},p(o,r){const a={};257&r[0]|128&r[1]&&(a.$$scope={dirty:r,ctx:o}),t.$set(a)},i(o){n||(m(t.$$.fragment,o),n=!0)},o(o){d(t.$$.fragment,o),n=!1},d(o){o&&y(e),L(t)}}}function mt(c){let e,t,n,o,r;function a(i){c[25](i)}let s={type:"dropdown",title:c[11],noItemsLabel:"No branches found",onDropdownOpenChange:c[18],$$slots:{"dropdown-content":[It],iconLeft:[bt]},$$scope:{ctx:c}};return c[10]!==void 0&&(s.requestClose=c[10]),n=new Qe({props:s}),K.push(()=>X(n,"requestClose",a)),{c(){e=C("div"),t=C("div"),b(n.$$.fragment),h(t,"class","c-commit-ref-selector__branch-line svelte-1759ld0"),h(e,"class","c-commit-ref-selector__branch-line-container svelte-1759ld0")},m(i,l){R(i,e,l),v(e,t),k(n,t,null),r=!0},p(i,l){const u={};2048&l[0]&&(u.title=i[11]),4861&l[0]|128&l[1]&&(u.$$scope={dirty:l,ctx:i}),!o&&1024&l[0]&&(o=!0,u.requestClose=i[10],ee(()=>o=!1)),n.$set(u)},i(i){r||(m(n.$$.fragment,i),r=!0)},o(i){d(n.$$.fragment,i),r=!1},d(i){i&&y(e),L(n)}}}function dt(c){let e,t;return e=new Ee({props:{variant:"ghost",color:"warning",size:1,loading:c[0],class:"c-commit-ref-selector__fetch-button",title:"Run 'git fetch' to update remote branches",$$slots:{iconLeft:[wt],default:[ht]},$$scope:{ctx:c}}}),e.$on("click",c[15]),{c(){b(e.$$.fragment)},m(n,o){k(e,n,o),t=!0},p(n,o){const r={};1&o[0]&&(r.loading=n[0]),128&o[1]&&(r.$$scope={dirty:o,ctx:n}),e.$set(r)},i(n){t||(m(e.$$.fragment,n),t=!0)},o(n){d(e.$$.fragment,n),t=!1},d(n){L(e,n)}}}function gt(c){let e,t;return e=new Ee({props:{variant:"ghost",color:"warning",size:1,loading:c[0],$$slots:{iconLeft:[Ct],default:[vt]},$$scope:{ctx:c}}}),e.$on("click",c[14]),{c(){b(e.$$.fragment)},m(n,o){k(e,n,o),t=!0},p(n,o){const r={};1&o[0]&&(r.loading=n[0]),128&o[1]&&(r.$$scope={dirty:o,ctx:n}),e.$set(r)},i(n){t||(m(e.$$.fragment,n),t=!0)},o(n){d(e.$$.fragment,n),t=!1},d(n){L(e,n)}}}function ht(c){let e;return{c(){e=Q("Run git fetch to refresh branches")},m(t,n){R(t,e,n)},d(t){t&&y(e)}}}function wt(c){let e,t,n;return t=new ve({}),{c(){e=C("span"),b(t.$$.fragment),h(e,"slot","iconLeft")},m(o,r){R(o,e,r),k(t,e,null),n=!0},p:G,i(o){n||(m(t.$$.fragment,o),n=!0)},o(o){d(t.$$.fragment,o),n=!1},d(o){o&&y(e),L(t)}}}function vt(c){let e;return{c(){e=Q("Reload")},m(t,n){R(t,e,n)},d(t){t&&y(e)}}}function Ct(c){let e,t,n;return t=new ve({}),{c(){e=C("span"),b(t.$$.fragment),h(e,"slot","iconLeft")},m(o,r){R(o,e,r),k(t,e,null),n=!0},p:G,i(o){n||(m(t.$$.fragment,o),n=!0)},o(o){d(t.$$.fragment,o),n=!1},d(o){o&&y(e),L(t)}}}function yt(c){let e,t,n,o,r,a,s;const i=[gt,dt],l=[];function u(g,w){return g[8]===g[13].notAGitRepository?0:1}return r=u(c),a=l[r]=i[r](c),{c(){e=C("div"),t=C("div"),n=Q(c[8]),o=I(),a.c(),h(t,"class","c-commit-ref-selector__error-message svelte-1759ld0"),h(e,"class","c-commit-ref-selector__error-content svelte-1759ld0")},m(g,w){R(g,e,w),v(e,t),v(t,n),v(e,o),l[r].m(e,null),s=!0},p(g,w){(!s||256&w[0])&&ce(n,g[8]);let f=r;r=u(g),r===f?l[r].p(g,w):(j(),d(l[f],1,1,()=>{l[f]=null}),J(),a=l[r],a?a.p(g,w):(a=l[r]=i[r](g),a.c()),m(a,1),a.m(e,null))},i(g){s||(m(a),s=!0)},o(g){d(a),s=!1},d(g){g&&y(e),l[r].d()}}}function xt(c){let e,t;return e=new ut({}),{c(){b(e.$$.fragment)},m(n,o){k(e,n,o),t=!0},i(n){t||(m(e.$$.fragment,n),t=!0)},o(n){d(e.$$.fragment,n),t=!1},d(n){L(e,n)}}}function _t(c){let e,t;return e=new Ve({props:{size:1,useCurrentColor:!0}}),{c(){b(e.$$.fragment)},m(n,o){k(e,n,o),t=!0},i(n){t||(m(e.$$.fragment,n),t=!0)},o(n){d(e.$$.fragment,n),t=!1},d(n){L(e,n)}}}function bt(c){let e,t,n,o;const r=[_t,xt],a=[];function s(i,l){return i[0]?0:1}return t=s(c),n=a[t]=r[t](c),{c(){e=C("div"),n.c(),h(e,"slot","iconLeft"),h(e,"class","c-commit-ref-selector__icon svelte-1759ld0")},m(i,l){R(i,e,l),a[t].m(e,null),o=!0},p(i,l){let u=t;t=s(i),t!==u&&(j(),d(a[u],1,1,()=>{a[u]=null}),J(),n=a[t],n||(n=a[t]=r[t](i),n.c()),m(n,1),n.m(e,null))},i(i){o||(m(n),o=!0)},o(i){d(n),o=!1},d(i){i&&y(e),a[t].d()}}}function kt(c){let e,t;return e=new ve({}),{c(){b(e.$$.fragment)},m(n,o){k(e,n,o),t=!0},i(n){t||(m(e.$$.fragment,n),t=!0)},o(n){d(e.$$.fragment,n),t=!1},d(n){L(e,n)}}}function Lt(c){let e,t;return e=new lt({props:{variant:"soft",color:"neutral",size:1,loading:c[0],$$slots:{default:[kt]},$$scope:{ctx:c}}}),e.$on("click",c[15]),{c(){b(e.$$.fragment)},m(n,o){k(e,n,o),t=!0},p(n,o){const r={};1&o[0]&&(r.loading=n[0]),128&o[1]&&(r.$$scope={dirty:o,ctx:n}),e.$set(r)},i(n){t||(m(e.$$.fragment,n),t=!0)},o(n){d(e.$$.fragment,n),t=!1},d(n){L(e,n)}}}function Rt(c){let e,t,n,o,r;return t=new we({props:{icon:"folder"}}),{c(){e=C("div"),b(t.$$.fragment),n=I(),o=C("span"),o.textContent="Current workspace",h(o,"class","c-commit-ref-selector__branch-name svelte-1759ld0"),h(e,"class","c-commit-ref-selector__branch-item-content svelte-1759ld0")},m(a,s){R(a,e,s),k(t,e,null),v(e,n),v(e,o),r=!0},p:G,i(a){r||(m(t.$$.fragment,a),r=!0)},o(a){d(t.$$.fragment,a),r=!1},d(a){a&&y(e),L(t)}}}function St(c){let e,t;return e=new ie({props:{side:"top",content:Pt,triggerOn:[De.Hover],class:"c-commit-ref-selector__workspace-tooltip",$$slots:{default:[Dt]},$$scope:{ctx:c}}}),{c(){b(e.$$.fragment)},m(n,o){k(e,n,o),t=!0},p(n,o){const r={};128&o[1]&&(r.$$scope={dirty:o,ctx:n}),e.$set(r)},i(n){t||(m(e.$$.fragment,n),t=!0)},o(n){d(e.$$.fragment,n),t=!1},d(n){L(e,n)}}}function Et(c){let e,t;return e=new ie({props:{side:"top",content:Wt,triggerOn:[De.Hover],class:"c-commit-ref-selector__workspace-tooltip",$$slots:{default:[At]},$$scope:{ctx:c}}}),{c(){b(e.$$.fragment)},m(n,o){k(e,n,o),t=!0},p(n,o){const r={};128&o[1]&&(r.$$scope={dirty:o,ctx:n}),e.$set(r)},i(n){t||(m(e.$$.fragment,n),t=!0)},o(n){d(e.$$.fragment,n),t=!1},d(n){L(e,n)}}}function Dt(c){let e,t,n,o,r;return t=new we({props:{icon:"folder"}}),{c(){e=C("div"),b(t.$$.fragment),n=I(),o=C("span"),o.textContent="Current workspace",h(o,"class","c-commit-ref-selector__branch-name svelte-1759ld0"),h(e,"class","c-commit-ref-selector__branch-item-content svelte-1759ld0")},m(a,s){R(a,e,s),k(t,e,null),v(e,n),v(e,o),r=!0},p:G,i(a){r||(m(t.$$.fragment,a),r=!0)},o(a){d(t.$$.fragment,a),r=!1},d(a){a&&y(e),L(t)}}}function At(c){let e,t,n,o,r;return t=new we({props:{icon:"folder"}}),{c(){e=C("div"),b(t.$$.fragment),n=I(),o=C("span"),o.textContent="Current workspace",h(o,"class","c-commit-ref-selector__branch-name svelte-1759ld0"),h(e,"class","c-commit-ref-selector__branch-item-content svelte-1759ld0")},m(a,s){R(a,e,s),k(t,e,null),v(e,n),v(e,o),r=!0},p:G,i(a){r||(m(t.$$.fragment,a),r=!0)},o(a){d(t.$$.fragment,a),r=!1},d(a){a&&y(e),L(t)}}}function Nt(c){let e,t,n,o;const r=[Et,St,Rt],a=[];function s(i,l){return i[2]?0:i[9]?1:2}return e=s(c),t=a[e]=r[e](c),{c(){t.c(),n=$e()},m(i,l){a[e].m(i,l),R(i,n,l),o=!0},p(i,l){let u=e;e=s(i),e===u?a[e].p(i,l):(j(),d(a[u],1,1,()=>{a[u]=null}),J(),t=a[e],t?t.p(i,l):(t=a[e]=r[e](i),t.c()),m(t,1),t.m(n.parentNode,n))},i(i){o||(m(t),o=!0)},o(i){d(t),o=!1},d(i){i&&y(n),a[e].d(i)}}}function zt(c){let e,t;return e=new te.Label({props:{$$slots:{default:[Bt]},$$scope:{ctx:c}}}),{c(){b(e.$$.fragment)},m(n,o){k(e,n,o),t=!0},p(n,o){const r={};128&o[1]&&(r.$$scope={dirty:o,ctx:n}),e.$set(r)},i(n){t||(m(e.$$.fragment,n),t=!0)},o(n){d(e.$$.fragment,n),t=!1},d(n){L(e,n)}}}function Ft(c){let e,t,n=[],o=new Map,r=he(c[12]);const a=s=>s[35].name;for(let s=0;s<r.length;s+=1){let i=Ie(c,r,s),l=a(i);o.set(l,n[s]=Te(l,i))}return{c(){for(let s=0;s<n.length;s+=1)n[s].c();e=$e()},m(s,i){for(let l=0;l<n.length;l+=1)n[l]&&n[l].m(s,i);R(s,e,i),t=!0},p(s,i){135216&i[0]&&(r=he(s[12]),j(),n=Ze(n,i,a,1,s,r,o,e.parentNode,je,Te,e,Ie),J())},i(s){if(!t){for(let i=0;i<r.length;i+=1)m(n[i]);t=!0}},o(s){for(let i=0;i<n.length;i+=1)d(n[i]);t=!1},d(s){s&&y(e);for(let i=0;i<n.length;i+=1)n[i].d(s)}}}function Bt(c){let e;return{c(){e=Q("No branches found")},m(t,n){R(t,e,n)},d(t){t&&y(e)}}}function qt(c){let e,t,n,o,r=c[35].name.replace("origin/","")+"";return{c(){e=C("div"),t=C("span"),n=Q(r),o=I(),h(t,"class","c-commit-ref-selector__branch-name svelte-1759ld0"),h(e,"class","c-commit-ref-selector__branch-item-content svelte-1759ld0")},m(a,s){R(a,e,s),v(e,t),v(t,n),R(a,o,s)},p(a,s){4096&s[0]&&r!==(r=a[35].name.replace("origin/","")+"")&&ce(n,r)},d(a){a&&(y(e),y(o))}}}function Te(c,e){var a;let t,n,o;function r(){return e[24](e[35])}return n=new te.Item({props:{onSelect:r,highlight:!e[5]&&((a=e[4])==null?void 0:a.name)===e[35].name,$$slots:{default:[qt]},$$scope:{ctx:e}}}),{key:c,first:null,c(){t=$e(),b(n.$$.fragment),this.first=t},m(s,i){R(s,t,i),k(n,s,i),o=!0},p(s,i){var u;e=s;const l={};4096&i[0]&&(l.onSelect=r),4144&i[0]&&(l.highlight=!e[5]&&((u=e[4])==null?void 0:u.name)===e[35].name),4096&i[0]|128&i[1]&&(l.$$scope={dirty:i,ctx:e}),n.$set(l)},i(s){o||(m(n.$$.fragment,s),o=!0)},o(s){d(n.$$.fragment,s),o=!1},d(s){s&&y(t),L(n,s)}}}function It(c){let e,t,n,o,r,a,s,i,l,u,g,w,f,$,S,N,D;function E(x){c[20](x)}function W(x){c[21](x)}let U={placeholder:"Search branches",size:2};c[6]!==void 0&&(U.value=c[6]),c[7]!==void 0&&(U.textInput=c[7]),n=new Ae({props:U}),K.push(()=>X(n,"value",E)),K.push(()=>X(n,"textInput",W)),n.$on("input",c[22]),i=new ie({props:{side:"top",content:"Run 'git fetch' to update remote branches",class:"c-commit-ref-selector__fetch-tooltip",triggerOn:[De.Hover],$$slots:{default:[Lt]},$$scope:{ctx:c}}}),g=new te.Item({props:{onSelect:c[23],class:"c-commit-ref-selector__workspace-option",disabled:c[9]||c[2],highlight:c[5],$$slots:{default:[Nt]},$$scope:{ctx:c}}}),f=new te.Separator({});const M=[Ft,zt],q=[];function V(x,z){return x[3].length>0?0:1}return S=V(c),N=q[S]=M[S](c),{c(){e=C("div"),t=C("div"),b(n.$$.fragment),a=I(),s=C("div"),b(i.$$.fragment),l=I(),u=C("div"),b(g.$$.fragment),w=I(),b(f.$$.fragment),$=I(),N.c(),h(s,"class","c-commit-ref-selector__refresh-icon svelte-1759ld0"),h(t,"class","c-commit-ref-selector__search-field svelte-1759ld0"),h(u,"class","c-commit-ref-selector__branches-container svelte-1759ld0"),h(e,"slot","dropdown-content")},m(x,z){R(x,e,z),v(e,t),k(n,t,null),v(t,a),v(t,s),k(i,s,null),v(e,l),v(e,u),k(g,u,null),v(u,w),k(f,u,null),v(u,$),q[S].m(u,null),D=!0},p(x,z){const _={};!o&&64&z[0]&&(o=!0,_.value=x[6],ee(()=>o=!1)),!r&&128&z[0]&&(r=!0,_.textInput=x[7],ee(()=>r=!1)),n.$set(_);const T={};1&z[0]|128&z[1]&&(T.$$scope={dirty:z,ctx:x}),i.$set(T);const O={};516&z[0]&&(O.onSelect=x[23]),516&z[0]&&(O.disabled=x[9]||x[2]),32&z[0]&&(O.highlight=x[5]),516&z[0]|128&z[1]&&(O.$$scope={dirty:z,ctx:x}),g.$set(O);let H=S;S=V(x),S===H?q[S].p(x,z):(j(),d(q[H],1,1,()=>{q[H]=null}),J(),N=q[S],N?N.p(x,z):(N=q[S]=M[S](x),N.c()),m(N,1),N.m(u,null))},i(x){D||(m(n.$$.fragment,x),m(i.$$.fragment,x),m(g.$$.fragment,x),m(f.$$.fragment,x),m(N),D=!0)},o(x){d(n.$$.fragment,x),d(i.$$.fragment,x),d(g.$$.fragment,x),d(f.$$.fragment,x),d(N),D=!1},d(x){x&&y(e),L(n),L(i),L(g),L(f),q[S].d()}}}function Tt(c){let e,t,n,o,r;const a=[mt,$t],s=[];function i(l,u){return l[1]?l[1]?1:-1:0}return~(n=i(c))&&(o=s[n]=a[n](c)),{c(){e=C("div"),t=C("div"),o&&o.c(),h(t,"class","c-commit-ref-selector__content svelte-1759ld0"),h(e,"class","c-commit-ref-selector svelte-1759ld0")},m(l,u){R(l,e,u),v(e,t),~n&&s[n].m(t,null),r=!0},p(l,u){let g=n;n=i(l),n===g?~n&&s[n].p(l,u):(o&&(j(),d(s[g],1,1,()=>{s[g]=null}),J()),~n?(o=s[n],o?o.p(l,u):(o=s[n]=a[n](l),o.c()),m(o,1),o.m(t,null)):o=null)},i(l){r||(m(o),r=!0)},o(l){d(o),r=!1},d(l){l&&y(e),~n&&s[n].d()}}}const Pt="Your current branch has not been pushed. If you want to use your current workspace, please push your branch and run git fetch to refresh.",Wt="You have too many local changes for us to create an agent from your current workspace. Please select a remote branch or commit and push your changes first.";function Ut(c,e,t){let n,o,r;const a=fe(Je.key),s=ye();let i,l,u,{hasError:g=!1}=e,{isLoading:w=!1}=e,{isWorkspaceTooLarge:f=!1}=e,$=[],S="",N="",D=!0,E="",W=!1,U=()=>{};const M={noRemoteBranches:"No remote branches found. Remote agents require remote branches to work properly. Please push your current branch to remote and then run git fetch to refresh.",failedToFetchBranches:"Failed to fetch branches. Please try again.",notAGitRepository:"You're not inside a git repository. Remote agents require a git repository to work properly."};async function q(){t(0,w=!0);try{await V()}catch(p){console.error("Error syncing branches:",p),z("Failed to sync with remote. Please try again.")}finally{t(0,w=!1)}}async function V(){t(0,w=!0),_();try{if(!await a.isGitRepository())return z(M.notAGitRepository),void t(0,w=!1);const p=await a.listBranches();t(3,$=p.branches),i=$.find(A=>A.isCurrentBranch),t(4,l=i),S=await a.getRemoteUrl(),x(),g||H()}catch(p){console.error("Error fetching git data:",p),z(M.failedToFetchBranches)}finally{t(0,w=!1)}}function x(){if($.length!==0){if(!i||i.isRemote)t(9,W=!1),_();else if(t(9,W=!0),D){const p=$.find(B=>B.isDefault),A=$.find(B=>B.isRemote);(A||p)&&(t(4,l=p??A),t(5,D=!1),H())}}else z(M.noRemoteBranches)}function z(p){t(1,g=!0),t(8,E=p)}function _(){t(1,g=!1),t(8,E="")}async function T(p=""){const A=p||N;t(1,g=!1);try{const B=await a.listBranches(A);t(3,$=B.branches),x()}catch(B){console.error("Error fetching branches:",B),t(3,$=[]),z(M.failedToFetchBranches)}}async function O(p){p==="workspace"?(t(4,l=i),t(5,D=!0)):(t(4,l=p),t(5,D=!1)),H(),U()}function H(){if(!l||!S)return;const p={github_commit_ref:{repository_url:S,git_ref:l.name}};s("commitRefChange",{commitRef:p,isUsingWorkspace:D,selectedBranch:l})}return Ge(async()=>{await q()}),c.$$set=p=>{"hasError"in p&&t(1,g=p.hasError),"isLoading"in p&&t(0,w=p.isLoading),"isWorkspaceTooLarge"in p&&t(2,f=p.isWorkspaceTooLarge)},c.$$.update=()=>{if(8&c.$$.dirty[0]&&t(12,n=(()=>{const p=$.find(Y=>Y.isCurrentBranch),A=$.find(Y=>Y.isDefault),B=!!p&&(p==null?void 0:p.name)===(A==null?void 0:A.name.replace("origin/",""));return $.filter(Y=>(!B||!Y.isDefault)&&Y.isRemote)})()),44&c.$$.dirty[0]&&f&&D){const p=$.find(B=>B.isDefault),A=$.find(B=>B.isRemote);(A||p)&&(t(4,l=p??A),t(5,D=!1),H())}49&c.$$.dirty[0]&&t(19,o=()=>w?"...":D?"Current workspace":(l==null?void 0:l.name.replace("origin/",""))||"Select a branch"),524288&c.$$.dirty[0]&&t(11,r=o())},[w,g,f,$,l,D,N,u,E,W,U,r,n,M,q,async function(){t(0,w=!0);try{await a.fetch(),await V()}catch(p){console.error("Error fetching and syncing branches:",p),z("Failed to fetch from remote. Please try again.")}finally{t(0,w=!1)}},T,O,function(p){if(x(),f&&D){const A=$.find(Y=>Y.isDefault),B=$.find(Y=>Y.isRemote);(B||A)&&(t(4,l=A??B),t(5,D=!1),H())}p&&u&&setTimeout(()=>{u==null||u.focus(),T()},0)},o,function(p){N=p,t(6,N)},function(p){u=p,t(7,u)},()=>T(),()=>!W&&!f&&O("workspace"),p=>O(p),function(p){U=p,t(10,U)}]}class Mt extends oe{constructor(e){super(),re(this,e,Ut,Tt,se,{hasError:1,isLoading:0,isWorkspaceTooLarge:2},null,[-1,-1])}}function Ot(c){let e,t,n=[{xmlns:"http://www.w3.org/2000/svg"},{"data-ds-icon":"fa"},{viewBox:"0 0 512 512"},c[0]],o={};for(let r=0;r<n.length;r+=1)o=ne(o,n[r]);return{c(){e=pe("svg"),t=new xe(!0),this.h()},l(r){e=_e(r,"svg",{xmlns:!0,"data-ds-icon":!0,viewBox:!0});var a=be(e);t=ke(a,!0),a.forEach(y),this.h()},h(){t.a=null,ae(e,o)},m(r,a){Le(r,e,a),t.m('<!--! Font Awesome Pro 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2024 Fonticons, Inc.--><path d="M304 24c0 13.3 10.7 24 24 24h102.1L207 271c-9.4 9.4-9.4 24.6 0 33.9s24.6 9.4 33.9 0l223-223L464 184c0 13.3 10.7 24 24 24s24-10.7 24-24V24c0-13.3-10.7-24-24-24H328c-13.3 0-24 10.7-24 24M72 32C32.2 32 0 64.2 0 104v336c0 39.8 32.2 72 72 72h336c39.8 0 72-32.2 72-72V312c0-13.3-10.7-24-24-24s-24 10.7-24 24v128c0 13.3-10.7 24-24 24H72c-13.3 0-24-10.7-24-24V104c0-13.3 10.7-24 24-24h128c13.3 0 24-10.7 24-24s-10.7-24-24-24z"/>',e)},p(r,[a]){ae(e,o=Re(n,[{xmlns:"http://www.w3.org/2000/svg"},{"data-ds-icon":"fa"},{viewBox:"0 0 512 512"},1&a&&r[0]]))},i:G,o:G,d(r){r&&y(e)}}}function Ht(c,e,t){return c.$$set=n=>{t(0,e=ne(ne({},e),le(n)))},[e=le(e)]}class Gt extends oe{constructor(e){super(),re(this,e,Ht,Ot,se,{})}}function Vt(c){let e,t,n=[{xmlns:"http://www.w3.org/2000/svg"},{"data-ds-icon":"fa"},{viewBox:"0 0 512 512"},c[0]],o={};for(let r=0;r<n.length;r+=1)o=ne(o,n[r]);return{c(){e=pe("svg"),t=new xe(!0),this.h()},l(r){e=_e(r,"svg",{xmlns:!0,"data-ds-icon":!0,viewBox:!0});var a=be(e);t=ke(a,!0),a.forEach(y),this.h()},h(){t.a=null,ae(e,o)},m(r,a){Le(r,e,a),t.m('<!--! Font Awesome Pro 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2024 Fonticons, Inc.--><path d="m36.4 360.9-23 78.1L1 481.2c-2.5 8.5-.2 17.6 6 23.8s15.3 8.5 23.7 6.1L73 498.6l78.1-23c12.4-3.6 23.7-9.9 33.4-18.4 1.4-1.2 2.7-2.5 4-3.8l304.2-304.1c21.9-21.9 24.6-55.6 8.2-80.5-2.3-3.5-5.1-6.9-8.2-10l-39.4-39.5c-25-25-65.5-25-90.5 0L58.6 323.5c-10.4 10.4-18 23.3-22.2 37.4m46 13.5c1.7-5.6 4.5-10.8 8.4-15.2.6-.6 1.1-1.2 1.7-1.8L321 129l62 62-228.4 228.5c-4.7 4.7-10.6 8.2-17 10.1l-23.4 6.9-54.8 16.1 16.1-54.8z"/>',e)},p(r,[a]){ae(e,o=Re(n,[{xmlns:"http://www.w3.org/2000/svg"},{"data-ds-icon":"fa"},{viewBox:"0 0 512 512"},1&a&&r[0]]))},i:G,o:G,d(r){r&&y(e)}}}function Yt(c,e,t){return c.$$set=n=>{t(0,e=ne(ne({},e),le(n)))},[e=le(e)]}class Zt extends oe{constructor(e){super(),re(this,e,Yt,Vt,se,{})}}function jt(c){let e,t,n=[{xmlns:"http://www.w3.org/2000/svg"},{"data-ds-icon":"fa"},{viewBox:"0 0 448 512"},c[0]],o={};for(let r=0;r<n.length;r+=1)o=ne(o,n[r]);return{c(){e=pe("svg"),t=new xe(!0),this.h()},l(r){e=_e(r,"svg",{xmlns:!0,"data-ds-icon":!0,viewBox:!0});var a=be(e);t=ke(a,!0),a.forEach(y),this.h()},h(){t.a=null,ae(e,o)},m(r,a){Le(r,e,a),t.m('<!--! Font Awesome Pro 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2024 Fonticons, Inc.--><path d="M177.1 48h93.7c2.7 0 5.2 1.3 6.7 3.6l19 28.4h-145l19-28.4c1.5-2.2 4-3.6 6.7-3.6zm177.1 32-36.7-55.1C307.1 9.4 289.6 0 270.9 0h-93.8c-18.7 0-36.2 9.4-46.6 24.9L93.8 80H24C10.7 80 0 90.7 0 104s10.7 24 24 24h11.6l24 324.7c2.5 33.4 30.3 59.3 63.8 59.3h201.1c33.5 0 61.3-25.9 63.8-59.3L412.4 128H424c13.3 0 24-10.7 24-24s-10.7-24-24-24h-56.1zm10.1 48-23.8 321.2c-.6 8.4-7.6 14.8-16 14.8H123.4c-8.4 0-15.3-6.5-16-14.8L83.7 128z"/>',e)},p(r,[a]){ae(e,o=Re(n,[{xmlns:"http://www.w3.org/2000/svg"},{"data-ds-icon":"fa"},{viewBox:"0 0 448 512"},1&a&&r[0]]))},i:G,o:G,d(r){r&&y(e)}}}function Jt(c,e,t){return c.$$set=n=>{t(0,e=ne(ne({},e),le(n)))},[e=le(e)]}class Qt extends oe{constructor(e){super(),re(this,e,Jt,jt,se,{})}}function Kt(c){let e,t,n,o,r;return{c(){e=C("span"),t=Q(c[0]),n=I(),o=C("span"),r=Q(c[1]),h(e,"class","c-setup-script-selector__script-name svelte-pt1peo"),h(o,"class","c-setup-script-selector__script-path svelte-pt1peo")},m(a,s){R(a,e,s),v(e,t),R(a,n,s),R(a,o,s),v(o,r)},p(a,s){1&s&&ce(t,a[0]),2&s&&ce(r,a[1])},i:G,o:G,d(a){a&&(y(e),y(n),y(o))}}}function Xt(c){let e,t,n,o,r,a,s,i,l;function u($){c[12]($)}function g($){c[13]($)}let w={size:1,variant:"surface"};c[4]!==void 0&&(w.value=c[4]),c[3]!==void 0&&(w.textInput=c[3]),n=new Ae({props:w}),K.push(()=>X(n,"value",u)),K.push(()=>X(n,"textInput",g)),n.$on("keydown",c[6]),n.$on("blur",c[7]);let f=c[5]&&function($){let S;return{c(){S=C("span"),S.textContent=`${$[5]}`,h(S,"class","c-setup-script-selector__extension svelte-pt1peo")},m(N,D){R(N,S,D)},p:G,d(N){N&&y(S)}}}(c);return{c(){e=C("div"),t=C("div"),b(n.$$.fragment),a=I(),f&&f.c(),h(t,"class","c-setup-script-selector__rename-input-container svelte-pt1peo"),h(t,"role","presentation"),h(e,"class","c-setup-script-selector__rename-input svelte-pt1peo"),h(e,"role","presentation")},m($,S){R($,e,S),v(e,t),k(n,t,null),v(t,a),f&&f.m(t,null),s=!0,i||(l=[ue(e,"click",qe(c[10])),ue(e,"mousedown",qe(c[11]))],i=!0)},p($,S){const N={};!o&&16&S&&(o=!0,N.value=$[4],ee(()=>o=!1)),!r&&8&S&&(r=!0,N.textInput=$[3],ee(()=>r=!1)),n.$set(N),$[5]&&f.p($,S)},i($){s||(m(n.$$.fragment,$),s=!0)},o($){d(n.$$.fragment,$),s=!1},d($){$&&y(e),L(n),f&&f.d(),i=!1,ot(l)}}}function en(c){let e,t,n,o,r,a,s;const i=[Xt,Kt],l=[];function u(f,$){return f[2]?0:1}n=u(c),o=l[n]=i[n](c);const g=c[9].default,w=Xe(g,c,c[8],null);return{c(){e=C("div"),t=C("div"),o.c(),r=I(),a=C("div"),w&&w.c(),h(t,"class","c-setup-script-selector__script-info svelte-pt1peo"),h(t,"title",c[1]),h(a,"class","c-setup-script-selector__script-actions svelte-pt1peo"),h(e,"class","c-setup-script-selector__script-item-content svelte-pt1peo"),h(e,"role","presentation"),Fe(e,"c-setup-script-selector__script-item-content--renaming",c[2])},m(f,$){R(f,e,$),v(e,t),l[n].m(t,null),v(e,r),v(e,a),w&&w.m(a,null),s=!0},p(f,[$]){let S=n;n=u(f),n===S?l[n].p(f,$):(j(),d(l[S],1,1,()=>{l[S]=null}),J(),o=l[n],o?o.p(f,$):(o=l[n]=i[n](f),o.c()),m(o,1),o.m(t,null)),(!s||2&$)&&h(t,"title",f[1]),w&&w.p&&(!s||256&$)&&et(w,g,f,f[8],s?nt(g,f[8],$,null):tt(f[8]),null),(!s||4&$)&&Fe(e,"c-setup-script-selector__script-item-content--renaming",f[2])},i(f){s||(m(o),m(w,f),s=!0)},o(f){d(o),d(w,f),s=!1},d(f){f&&y(e),l[n].d(),w&&w.d(f)}}}function tn(c,e,t){let{$$slots:n={},$$scope:o}=e,{name:r}=e,{path:a}=e,{isRenaming:s=!1}=e;const i=ye(),{baseName:l,extension:u}=function(f){const $=f.lastIndexOf(".");return $===-1?{baseName:f,extension:""}:{baseName:f.substring(0,$),extension:f.substring($)}}(r);let g,w=l;return c.$$set=f=>{"name"in f&&t(0,r=f.name),"path"in f&&t(1,a=f.path),"isRenaming"in f&&t(2,s=f.isRenaming),"$$scope"in f&&t(8,o=f.$$scope)},c.$$.update=()=>{12&c.$$.dirty&&s&&g&&setTimeout(()=>{g==null||g.focus(),g==null||g.select()},0)},[r,a,s,g,w,u,function(f){if(f.key!=="ArrowLeft"&&f.key!=="ArrowRight"&&f.key!=="ArrowUp"&&f.key!=="ArrowDown")if(f.key==="Enter")if(f.preventDefault(),w.trim()&&w!==l){const $=w.trim()+u;i("rename",{oldName:r,newName:$})}else i("cancelRename");else f.key==="Escape"&&(f.preventDefault(),f.stopPropagation(),i("cancelRename"));else f.stopPropagation()},function(){i("cancelRename")},o,n,function(f){Be.call(this,c,f)},function(f){Be.call(this,c,f)},function(f){w=f,t(4,w)},function(f){g=f,t(3,g)}]}class Ne extends oe{constructor(e){super(),re(this,e,tn,en,se,{name:0,path:1,isRenaming:2})}}function Pe(c,e,t){const n=c.slice();return n[40]=e[t],n}function We(c){let e,t,n,o,r;function a(i){c[32](i)}let s={type:"dropdown",title:c[9],onDropdownOpenChange:c[21],$$slots:{"dropdown-content":[hn],iconLeft:[rn]},$$scope:{ctx:c}};return c[7]!==void 0&&(s.requestClose=c[7]),n=new Qe({props:s}),K.push(()=>X(n,"requestClose",a)),{c(){e=C("div"),t=C("div"),b(n.$$.fragment),h(t,"class","c-setup-script-selector__script-line svelte-1mqisdt"),h(e,"class","c-setup-script-selector__script-line-container svelte-1mqisdt")},m(i,l){R(i,e,l),v(e,t),k(n,t,null),r=!0},p(i,l){const u={};512&l[0]&&(u.title=i[9]),1342&l[0]|4096&l[1]&&(u.$$scope={dirty:l,ctx:i}),!o&&128&l[0]&&(o=!0,u.requestClose=i[7],ee(()=>o=!1)),n.$set(u)},i(i){r||(m(n.$$.fragment,i),r=!0)},o(i){d(n.$$.fragment,i),r=!1},d(i){i&&y(e),L(n)}}}function nn(c){let e,t;return e=new pt({}),{c(){b(e.$$.fragment)},m(n,o){k(e,n,o),t=!0},i(n){t||(m(e.$$.fragment,n),t=!0)},o(n){d(e.$$.fragment,n),t=!1},d(n){L(e,n)}}}function on(c){let e,t;return e=new Ve({props:{size:1,useCurrentColor:!0}}),{c(){b(e.$$.fragment)},m(n,o){k(e,n,o),t=!0},i(n){t||(m(e.$$.fragment,n),t=!0)},o(n){d(e.$$.fragment,n),t=!1},d(n){L(e,n)}}}function rn(c){let e,t,n,o;const r=[on,nn],a=[];function s(i,l){return i[1]?0:1}return t=s(c),n=a[t]=r[t](c),{c(){e=C("div"),n.c(),h(e,"slot","iconLeft"),h(e,"class","c-setup-script-selector__icon svelte-1mqisdt")},m(i,l){R(i,e,l),a[t].m(e,null),o=!0},p(i,l){let u=t;t=s(i),t!==u&&(j(),d(a[u],1,1,()=>{a[u]=null}),J(),n=a[t],n||(n=a[t]=r[t](i),n.c()),m(n,1),n.m(e,null))},i(i){o||(m(n),o=!0)},o(i){d(n),o=!1},d(i){i&&y(e),a[t].d()}}}function sn(c){let e,t;return e=new Ne({props:{name:"No setup",path:"Your environment will be used as-is."}}),{c(){b(e.$$.fragment)},m(n,o){k(e,n,o),t=!0},p:G,i(n){t||(m(e.$$.fragment,n),t=!0)},o(n){d(e.$$.fragment,n),t=!1},d(n){L(e,n)}}}function cn(c){let e,t,n,o,r;return e=new Ne({props:{name:"Generate a new setup script",path:"We'll spin up an agent to help out."}}),o=new at({}),{c(){b(e.$$.fragment),t=I(),n=C("div"),b(o.$$.fragment),h(n,"class","c-setup-script-selector__button-container svelte-1mqisdt")},m(a,s){k(e,a,s),R(a,t,s),R(a,n,s),k(o,n,null),r=!0},p:G,i(a){r||(m(e.$$.fragment,a),m(o.$$.fragment,a),r=!0)},o(a){d(e.$$.fragment,a),d(o.$$.fragment,a),r=!1},d(a){a&&(y(t),y(n)),L(e,a),L(o)}}}function an(c){let e;return{c(){e=Q("Available Setup Scripts")},m(t,n){R(t,e,n)},d(t){t&&y(e)}}}function ln(c){let e,t;return e=new te.Label({props:{$$slots:{default:[fn]},$$scope:{ctx:c}}}),{c(){b(e.$$.fragment)},m(n,o){k(e,n,o),t=!0},p(n,o){const r={};4096&o[1]&&(r.$$scope={dirty:o,ctx:n}),e.$set(r)},i(n){t||(m(e.$$.fragment,n),t=!0)},o(n){d(e.$$.fragment,n),t=!1},d(n){L(e,n)}}}function pn(c){let e,t,n=[],o=new Map,r=he(c[10]);const a=s=>s[40].path;for(let s=0;s<r.length;s+=1){let i=Pe(c,r,s),l=a(i);o.set(l,n[s]=Ue(l,i))}return{c(){for(let s=0;s<n.length;s+=1)n[s].c();e=$e()},m(s,i){for(let l=0;l<n.length;l+=1)n[l]&&n[l].m(s,i);R(s,e,i),t=!0},p(s,i){1543432&i[0]&&(r=he(s[10]),j(),n=Ze(n,i,a,1,s,r,o,e.parentNode,je,Ue,e,Pe),J())},i(s){if(!t){for(let i=0;i<r.length;i+=1)m(n[i]);t=!0}},o(s){for(let i=0;i<n.length;i+=1)d(n[i]);t=!1},d(s){s&&y(e);for(let i=0;i<n.length;i+=1)n[i].d(s)}}}function fn(c){let e;return{c(){e=Q("No setup scripts found")},m(t,n){R(t,e,n)},d(t){t&&y(e)}}}function un(c){let e,t,n,o,r;function a(...s){return c[27](c[40],...s)}return t=new Gt({}),{c(){e=C("button"),b(t.$$.fragment),h(e,"class","c-setup-script-selector__action-button svelte-1mqisdt")},m(s,i){R(s,e,i),k(t,e,null),n=!0,o||(r=ue(e,"click",a),o=!0)},p(s,i){c=s},i(s){n||(m(t.$$.fragment,s),n=!0)},o(s){d(t.$$.fragment,s),n=!1},d(s){s&&y(e),L(t),o=!1,r()}}}function $n(c){let e,t,n,o,r;function a(...s){return c[28](c[40],...s)}return t=new Zt({}),{c(){e=C("button"),b(t.$$.fragment),h(e,"class","c-setup-script-selector__action-button svelte-1mqisdt")},m(s,i){R(s,e,i),k(t,e,null),n=!0,o||(r=ue(e,"click",a),o=!0)},p(s,i){c=s},i(s){n||(m(t.$$.fragment,s),n=!0)},o(s){d(t.$$.fragment,s),n=!1},d(s){s&&y(e),L(t),o=!1,r()}}}function mn(c){let e,t,n,o,r;function a(...s){return c[29](c[40],...s)}return t=new Qt({}),{c(){e=C("button"),b(t.$$.fragment),h(e,"class","c-setup-script-selector__action-button svelte-1mqisdt")},m(s,i){R(s,e,i),k(t,e,null),n=!0,o||(r=ue(e,"click",a),o=!0)},p(s,i){c=s},i(s){n||(m(t.$$.fragment,s),n=!0)},o(s){d(t.$$.fragment,s),n=!1},d(s){s&&y(e),L(t),o=!1,r()}}}function dn(c){let e,t,n,o,r,a;return e=new ie({props:{content:"Open script in editor",$$slots:{default:[un]},$$scope:{ctx:c}}}),n=new ie({props:{content:"Rename script",$$slots:{default:[$n]},$$scope:{ctx:c}}}),r=new ie({props:{content:"Delete script",$$slots:{default:[mn]},$$scope:{ctx:c}}}),{c(){b(e.$$.fragment),t=I(),b(n.$$.fragment),o=I(),b(r.$$.fragment)},m(s,i){k(e,s,i),R(s,t,i),k(n,s,i),R(s,o,i),k(r,s,i),a=!0},p(s,i){const l={};1024&i[0]|4096&i[1]&&(l.$$scope={dirty:i,ctx:s}),e.$set(l);const u={};1024&i[0]|4096&i[1]&&(u.$$scope={dirty:i,ctx:s}),n.$set(u);const g={};1024&i[0]|4096&i[1]&&(g.$$scope={dirty:i,ctx:s}),r.$set(g)},i(s){a||(m(e.$$.fragment,s),m(n.$$.fragment,s),m(r.$$.fragment,s),a=!0)},o(s){d(e.$$.fragment,s),d(n.$$.fragment,s),d(r.$$.fragment,s),a=!1},d(s){s&&(y(t),y(o)),L(e,s),L(n,s),L(r,s)}}}function gn(c){var o;let e,t,n;return e=new Ne({props:{name:c[40].name,path:c[40].path,isRenaming:((o=c[8])==null?void 0:o.path)===c[40].path,$$slots:{default:[dn]},$$scope:{ctx:c}}}),e.$on("rename",function(...r){return c[30](c[40],...r)}),e.$on("cancelRename",c[18]),{c(){b(e.$$.fragment),t=I()},m(r,a){k(e,r,a),R(r,t,a),n=!0},p(r,a){var i;c=r;const s={};1024&a[0]&&(s.name=c[40].name),1024&a[0]&&(s.path=c[40].path),1280&a[0]&&(s.isRenaming=((i=c[8])==null?void 0:i.path)===c[40].path),1024&a[0]|4096&a[1]&&(s.$$scope={dirty:a,ctx:c}),e.$set(s)},i(r){n||(m(e.$$.fragment,r),n=!0)},o(r){d(e.$$.fragment,r),n=!1},d(r){r&&y(t),L(e,r)}}}function Ue(c,e){var a;let t,n,o;function r(){return e[31](e[40])}return n=new te.Item({props:{onSelect:r,highlight:((a=e[3])==null?void 0:a.path)===e[40].path,$$slots:{default:[gn]},$$scope:{ctx:e}}}),{key:c,first:null,c(){t=$e(),b(n.$$.fragment),this.first=t},m(s,i){R(s,t,i),k(n,s,i),o=!0},p(s,i){var u;e=s;const l={};1280&i[0]&&(l.onSelect=r),1032&i[0]&&(l.highlight=((u=e[3])==null?void 0:u.path)===e[40].path),1280&i[0]|4096&i[1]&&(l.$$scope={dirty:i,ctx:e}),n.$set(l)},i(s){o||(m(n.$$.fragment,s),o=!0)},o(s){d(n.$$.fragment,s),o=!1},d(s){s&&y(t),L(n,s)}}}function hn(c){let e,t,n,o,r,a,s,i,l,u,g,w,f,$,S,N,D,E,W;function U(_){c[23](_)}function M(_){c[24](_)}let q={placeholder:"Search scripts",size:2};c[4]!==void 0&&(q.value=c[4]),c[5]!==void 0&&(q.textInput=c[5]),n=new Ae({props:q}),K.push(()=>X(n,"value",U)),K.push(()=>X(n,"textInput",M)),n.$on("input",c[25]),i=new te.Item({props:{onSelect:c[26],highlight:c[3]===null,$$slots:{default:[sn]},$$scope:{ctx:c}}}),u=new te.Item({props:{onSelect:c[12],highlight:!1,$$slots:{default:[cn]},$$scope:{ctx:c}}}),w=new te.Separator({}),$=new te.Label({props:{$$slots:{default:[an]},$$scope:{ctx:c}}});const V=[pn,ln],x=[];function z(_,T){return _[2].length>0?0:1}return D=z(c),E=x[D]=V[D](c),{c(){e=C("div"),t=C("div"),b(n.$$.fragment),a=I(),s=C("div"),b(i.$$.fragment),l=I(),b(u.$$.fragment),g=I(),b(w.$$.fragment),f=I(),b($.$$.fragment),S=I(),N=C("div"),E.c(),h(t,"class","c-setup-script-selector__search-field svelte-1mqisdt"),h(s,"class","c-setup-script-selector__create-option-container svelte-1mqisdt"),h(N,"class","c-setup-script-selector__scripts-container svelte-1mqisdt"),h(e,"slot","dropdown-content")},m(_,T){R(_,e,T),v(e,t),k(n,t,null),v(e,a),v(e,s),k(i,s,null),v(s,l),k(u,s,null),v(e,g),k(w,e,null),v(e,f),k($,e,null),v(e,S),v(e,N),x[D].m(N,null),W=!0},p(_,T){const O={};!o&&16&T[0]&&(o=!0,O.value=_[4],ee(()=>o=!1)),!r&&32&T[0]&&(r=!0,O.textInput=_[5],ee(()=>r=!1)),n.$set(O);const H={};8&T[0]&&(H.highlight=_[3]===null),4096&T[1]&&(H.$$scope={dirty:T,ctx:_}),i.$set(H);const p={};4096&T[1]&&(p.$$scope={dirty:T,ctx:_}),u.$set(p);const A={};4096&T[1]&&(A.$$scope={dirty:T,ctx:_}),$.$set(A);let B=D;D=z(_),D===B?x[D].p(_,T):(j(),d(x[B],1,1,()=>{x[B]=null}),J(),E=x[D],E?E.p(_,T):(E=x[D]=V[D](_),E.c()),m(E,1),E.m(N,null))},i(_){W||(m(n.$$.fragment,_),m(i.$$.fragment,_),m(u.$$.fragment,_),m(w.$$.fragment,_),m($.$$.fragment,_),m(E),W=!0)},o(_){d(n.$$.fragment,_),d(i.$$.fragment,_),d(u.$$.fragment,_),d(w.$$.fragment,_),d($.$$.fragment,_),d(E),W=!1},d(_){_&&y(e),L(n),L(i),L(u),L(w),L($),x[D].d()}}}function Me(c){let e,t,n;return t=new Se({props:{color:"warning",variant:"soft",size:2,$$slots:{default:[Cn]},$$scope:{ctx:c}}}),{c(){e=C("div"),b(t.$$.fragment),h(e,"class","c-setup-script-selector__error svelte-1mqisdt")},m(o,r){R(o,e,r),k(t,e,null),n=!0},p(o,r){const a={};66&r[0]|4096&r[1]&&(a.$$scope={dirty:r,ctx:o}),t.$set(a)},i(o){n||(m(t.$$.fragment,o),n=!0)},o(o){d(t.$$.fragment,o),n=!1},d(o){o&&y(e),L(t)}}}function wn(c){let e;return{c(){e=Q("Refresh")},m(t,n){R(t,e,n)},d(t){t&&y(e)}}}function vn(c){let e,t,n;return t=new ve({}),{c(){e=C("span"),b(t.$$.fragment),h(e,"slot","iconLeft")},m(o,r){R(o,e,r),k(t,e,null),n=!0},p:G,i(o){n||(m(t.$$.fragment,o),n=!0)},o(o){d(t.$$.fragment,o),n=!1},d(o){o&&y(e),L(t)}}}function Cn(c){let e,t,n,o,r,a;return r=new Ee({props:{variant:"ghost",color:"warning",size:1,loading:c[1],$$slots:{iconLeft:[vn],default:[wn]},$$scope:{ctx:c}}}),r.$on("click",c[14]),{c(){e=C("div"),t=C("div"),n=Q(c[6]),o=I(),b(r.$$.fragment),h(t,"class","c-setup-script-selector__error-message svelte-1mqisdt"),h(e,"class","c-setup-script-selector__error-content svelte-1mqisdt")},m(s,i){R(s,e,i),v(e,t),v(t,n),v(e,o),k(r,e,null),a=!0},p(s,i){(!a||64&i[0])&&ce(n,s[6]);const l={};2&i[0]&&(l.loading=s[1]),4096&i[1]&&(l.$$scope={dirty:i,ctx:s}),r.$set(l)},i(s){a||(m(r.$$.fragment,s),a=!0)},o(s){d(r.$$.fragment,s),a=!1},d(s){s&&y(e),L(r)}}}function yn(c){let e,t,n,o,r=(!c[0]||c[6]===c[13].noScriptsFound)&&We(c),a=c[0]&&c[6]!==c[13].noScriptsFound&&Me(c);return{c(){e=C("div"),t=C("div"),r&&r.c(),n=I(),a&&a.c(),h(t,"class","c-setup-script-selector__content svelte-1mqisdt"),h(e,"class","c-setup-script-selector svelte-1mqisdt")},m(s,i){R(s,e,i),v(e,t),r&&r.m(t,null),v(t,n),a&&a.m(t,null),o=!0},p(s,i){s[0]&&s[6]!==s[13].noScriptsFound?r&&(j(),d(r,1,1,()=>{r=null}),J()):r?(r.p(s,i),65&i[0]&&m(r,1)):(r=We(s),r.c(),m(r,1),r.m(t,n)),s[0]&&s[6]!==s[13].noScriptsFound?a?(a.p(s,i),65&i[0]&&m(a,1)):(a=Me(s),a.c(),m(a,1),a.m(t,null)):a&&(j(),d(a,1,1,()=>{a=null}),J())},i(s){o||(m(r),m(a),o=!0)},o(s){d(r),d(a),o=!1},d(s){s&&y(e),r&&r.d(),a&&a.d()}}}function xn(c,e,t){var H;let n,o,r;const a=fe("chatModel").extensionClient,s=p=>{a.openFile({repoRoot:"",pathName:p.path,allowOutOfWorkspace:!0,openLocalUri:p.location==="home"})},i=fe(Ke.key),l=ye();let u,{hasError:g=!1}=e,{isLoading:w=!1}=e,f=[],$=((H=i.newAgentDraft)==null?void 0:H.setupScript)??null,S="",N="",D=()=>{},E=null;const W={noScriptsFound:"No setup scripts found. You can create one in ~/.augment/env/, <git root>/.augment/env/, or <workspace root>/.augment/env/.",failedToFetchScripts:"Failed to fetch setup scripts. Please try again."};async function U(){_();try{t(2,f=await i.listSetupScripts()),f.length===0?z(W.noScriptsFound):_()}catch(p){console.error("Error fetching setup scripts:",p),z(W.failedToFetchScripts)}}async function M(p,A){A&&A.stopPropagation();try{const B=await i.deleteSetupScript(p.name,p.location);B.success?(($==null?void 0:$.path)===p.path&&O(null,!1),await U()):(console.error("Failed to delete script:",B.error),z(`Failed to delete script: ${B.error||"Unknown error"}`))}catch(B){console.error("Error deleting script:",B),z(`Error deleting script: ${B instanceof Error?B.message:String(B)}`)}}async function q(p,A){A&&A.stopPropagation(),t(8,E=p)}async function V(p,A){const{oldName:B,newName:Y}=A.detail;try{const P=await i.renameSetupScript(B,Y,p.location);if(P.success){await U();const F=f.find(Z=>Z.path===P.path);F&&O(F,!1)}else console.error("Failed to rename script:",P.error),z(`Failed to rename script: ${P.error||"Unknown error"}`)}catch(P){console.error("Error renaming script:",P),z(`Error renaming script: ${P instanceof Error?P.message:String(P)}`)}finally{x()}}function x(){t(8,E=null)}function z(p){t(0,g=!0),t(6,N=p)}function _(){t(0,g=!1),t(6,N="")}function T(p=""){const A=p||S;return A?f.filter(B=>B.name.toLowerCase().includes(A.toLowerCase())||B.path.toLowerCase().includes(A.toLowerCase())):f}async function O(p,A=!0){t(3,$=p),l("setupScriptChange",{script:$}),A&&D()}return Ge(async()=>{var p;await U(),(p=i.newAgentDraft)!=null&&p.setupScript&&O(i.newAgentDraft.setupScript)}),c.$$set=p=>{"hasError"in p&&t(0,g=p.hasError),"isLoading"in p&&t(1,w=p.isLoading)},c.$$.update=()=>{20&c.$$.dirty[0]&&t(10,n=f.length>0?T(S):[]),10&c.$$.dirty[0]&&t(22,o=()=>w?"...":$?$.location==="home"?"~/.augment/env/"+$.name:$.path:"No setup"),4194304&c.$$.dirty[0]&&t(9,r=o())},[g,w,f,$,S,u,N,D,E,r,n,s,async()=>{try{const p=await i.createRemoteAgentFromDraft("SETUP_MODE");return p&&i.setCurrentAgent(p),p}catch(p){console.error("Failed to create new setup script:",p)}},W,U,M,q,V,x,T,O,function(p){p&&u&&(setTimeout(()=>{u==null||u.focus()},0),U())},o,function(p){S=p,t(4,S)},function(p){u=p,t(5,u)},()=>T(),()=>O(null,!0),(p,A)=>{A.stopPropagation(),s(p),O(p,!0)},(p,A)=>{A.stopPropagation(),q(p)},(p,A)=>{A.stopPropagation(),M(p)},(p,A)=>V(p,A),p=>{(E==null?void 0:E.path)!==p.path&&O(p,!0)},function(p){D=p,t(7,D)}]}class _n extends oe{constructor(e){super(),re(this,e,xn,yn,se,{hasError:0,isLoading:1},null,[-1,-1])}}function bn(c){let e;return{c(){e=Q("Let's kick off a remote agent!")},m(t,n){R(t,e,n)},d(t){t&&y(e)}}}function Oe(c){let e,t,n,o,r,a,s;return t=new we({props:{icon:"info",class:"diff-warning__icon"}}),{c(){e=C("div"),b(t.$$.fragment),n=I(),o=C("p"),r=Q(c[2]),h(o,"class","svelte-14zw2en"),h(e,"class","diff-warning svelte-14zw2en")},m(i,l){R(i,e,l),k(t,e,null),v(e,n),v(e,o),v(o,r),s=!0},p(i,l){(!s||4&l)&&ce(r,i[2])},i(i){s||(m(t.$$.fragment,i),i&&Ye(()=>{s&&(a||(a=de(e,ge,{x:-10},!0)),a.run(1))}),s=!0)},o(i){d(t.$$.fragment,i),i&&(a||(a=de(e,ge,{x:-10},!1)),a.run(0)),s=!1},d(i){i&&y(e),L(t),i&&a&&a.end()}}}function He(c){let e,t,n,o;return t=new Se({props:{color:"error",variant:"soft",size:2,$$slots:{default:[kn]},$$scope:{ctx:c}}}),{c(){e=C("div"),b(t.$$.fragment),h(e,"class","error-message svelte-14zw2en")},m(r,a){R(r,e,a),k(t,e,null),o=!0},p(r,a){const s={};8388672&a&&(s.$$scope={dirty:a,ctx:r}),t.$set(s)},i(r){o||(m(t.$$.fragment,r),r&&Ye(()=>{o&&(n||(n=de(e,ge,{y:10},!0)),n.run(1))}),o=!0)},o(r){d(t.$$.fragment,r),r&&(n||(n=de(e,ge,{y:10},!1)),n.run(0)),o=!1},d(r){r&&y(e),L(t),r&&n&&n.end()}}}function kn(c){let e,t=c[6].remoteAgentCreationError+"";return{c(){e=Q(t)},m(n,o){R(n,e,o)},p(n,o){64&o&&t!==(t=n[6].remoteAgentCreationError+"")&&ce(e,t)},d(n){n&&y(e)}}}function Ln(c){let e,t,n,o,r,a,s,i,l,u,g,w,f,$,S,N,D,E,W,U,M,q,V,x,z,_;function T(F){c[11](F)}function O(F){c[12](F)}o=new it({props:{heightPx:30,floatHeight:4,animationDuration:6,showShadow:!1}}),s=new rt({props:{size:3,weight:"bold",$$slots:{default:[bn]},$$scope:{ctx:c}}});let H={isWorkspaceTooLarge:c[3]};c[0]!==void 0&&(H.hasError=c[0]),c[1]!==void 0&&(H.isLoading=c[1]),$=new Mt({props:H}),K.push(()=>X($,"hasError",T)),K.push(()=>X($,"isLoading",O)),$.$on("commitRefChange",c[8]);let p=c[2]&&Oe(c);function A(F){c[13](F)}function B(F){c[14](F)}let Y={};c[4]!==void 0&&(Y.hasError=c[4]),c[5]!==void 0&&(Y.isLoading=c[5]),q=new _n({props:Y}),K.push(()=>X(q,"hasError",A)),K.push(()=>X(q,"isLoading",B)),q.$on("setupScriptChange",c[9]);let P=c[6].remoteAgentCreationError&&He(c);return{c(){e=C("div"),t=C("div"),n=C("div"),b(o.$$.fragment),r=I(),a=C("div"),b(s.$$.fragment),i=I(),l=C("div"),l.textContent=`Spin off a chunk of work and let an agent work on it in their own environment. Once they're
      done, you can apply their changes locally or have them create a PR.`,u=I(),g=C("div"),g.textContent="They can start from your current workspace or a specific branch:",w=I(),f=C("div"),b($.$$.fragment),D=I(),p&&p.c(),E=I(),W=C("div"),W.textContent="You can set up a custom environment for them to work in:",U=I(),M=C("div"),b(q.$$.fragment),z=I(),P&&P.c(),h(n,"class","logo svelte-14zw2en"),h(a,"class","section svelte-14zw2en"),h(l,"class","description svelte-14zw2en"),h(g,"class","description svelte-14zw2en"),h(f,"class","commit-ref-selector svelte-14zw2en"),h(W,"class","description svelte-14zw2en"),h(M,"class","setup-script svelte-14zw2en"),h(t,"class","content svelte-14zw2en"),h(e,"class","remote-agent-setup svelte-14zw2en")},m(F,Z){R(F,e,Z),v(e,t),v(t,n),k(o,n,null),v(t,r),v(t,a),k(s,a,null),v(t,i),v(t,l),v(t,u),v(t,g),v(t,w),v(t,f),k($,f,null),v(f,D),p&&p.m(f,null),v(t,E),v(t,W),v(t,U),v(t,M),k(q,M,null),v(e,z),P&&P.m(e,null),_=!0},p(F,[Z]){const ze={};8388608&Z&&(ze.$$scope={dirty:Z,ctx:F}),s.$set(ze);const me={};8&Z&&(me.isWorkspaceTooLarge=F[3]),!S&&1&Z&&(S=!0,me.hasError=F[0],ee(()=>S=!1)),!N&&2&Z&&(N=!0,me.isLoading=F[1],ee(()=>N=!1)),$.$set(me),F[2]?p?(p.p(F,Z),4&Z&&m(p,1)):(p=Oe(F),p.c(),m(p,1),p.m(f,null)):p&&(j(),d(p,1,1,()=>{p=null}),J());const Ce={};!V&&16&Z&&(V=!0,Ce.hasError=F[4],ee(()=>V=!1)),!x&&32&Z&&(x=!0,Ce.isLoading=F[5],ee(()=>x=!1)),q.$set(Ce),F[6].remoteAgentCreationError?P?(P.p(F,Z),64&Z&&m(P,1)):(P=He(F),P.c(),m(P,1),P.m(e,null)):P&&(j(),d(P,1,1,()=>{P=null}),J())},i(F){_||(m(o.$$.fragment,F),m(s.$$.fragment,F),m($.$$.fragment,F),m(p),m(q.$$.fragment,F),m(P),_=!0)},o(F){d(o.$$.fragment,F),d(s.$$.fragment,F),d($.$$.fragment,F),d(p),d(q.$$.fragment,F),d(P),_=!1},d(F){F&&y(e),L(o),L(s),L($),p&&p.d(),L(q),P&&P.d()}}}const Rn="Failed to calculate workspace diff. The agent may not include your latest changes.";function Sn(c,e,t){let n;const o=fe(Je.key),r=fe(Ke.key);st(c,r,E=>t(6,n=E));const a=786432;let s,i=null,{hasError:l=!1}=e,u=!1,g=!1,w=null,{isDiffLoading:f=!1}=e,$=!1,S=!1,N=!1,D=null;return ct(()=>{r.setNewAgentDraft(null)}),c.$$set=E=>{"hasError"in E&&t(0,l=E.hasError),"isDiffLoading"in E&&t(10,f=E.isDiffLoading)},[l,u,w,$,S,N,n,r,async function(E){var W;if(r.setRemoteAgentCreationError(null),i=E.detail.commitRef,g=E.detail.isUsingWorkspace,s=E.detail.selectedBranch,g&&s&&!s.isRemote&&(g=!1),g?async function(U,M){var V,x,z;t(10,f=!0);let q={...M};try{const _=await o.getWorkspaceDiff(U.name);if(_&&_.length>a?t(3,$=!0):t(3,$=!1),t(2,w=null),q={...M,github_commit_ref:{...M.github_commit_ref,patch:_}},s){const T={commitRef:q,isUsingWorkspace:g,selectedBranch:s,setupScript:D,isDisabled:l||f,enableNotification:((V=r.newAgentDraft)==null?void 0:V.enableNotification)??!1};r.setNewAgentDraft(T)}}catch(_){if(console.error("Error getting workspace diff:",_),t(2,w=Rn),s){const T={commitRef:M,isUsingWorkspace:g,selectedBranch:s,setupScript:D,isDisabled:!0,enableNotification:((x=r.newAgentDraft)==null?void 0:x.enableNotification)??!1};r.setNewAgentDraft(T)}}finally{if(t(10,f=!1),!w&&s){const _={commitRef:q||M,isUsingWorkspace:g,selectedBranch:s,setupScript:D,isDisabled:l,enableNotification:((z=r.newAgentDraft)==null?void 0:z.enableNotification)??!1};r.setNewAgentDraft(_)}}}(s,i):t(2,w=null),i&&s){const U={commitRef:i,isUsingWorkspace:g,selectedBranch:s,setupScript:D,isDisabled:l||f,enableNotification:((W=r.newAgentDraft)==null?void 0:W.enableNotification)??!1};r.setNewAgentDraft(U)}},function(E){var W;if(r.setRemoteAgentCreationError(null),D=E.detail.script,i&&s){const U={commitRef:i,isUsingWorkspace:g,selectedBranch:s,setupScript:D,isDisabled:l||f,enableNotification:((W=r.newAgentDraft)==null?void 0:W.enableNotification)??!1};r.setNewAgentDraft(U)}},f,function(E){l=E,t(0,l)},function(E){u=E,t(1,u)},function(E){S=E,t(4,S)},function(E){N=E,t(5,N)}]}class so extends oe{constructor(e){super(),re(this,e,Sn,Ln,se,{hasError:0,isDiffLoading:10})}}export{so as default};
