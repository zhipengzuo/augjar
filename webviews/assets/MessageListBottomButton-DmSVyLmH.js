var Et=Object.defineProperty;var St=(o,e,n)=>e in o?Et(o,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):o[e]=n;var K=(o,e,n)=>St(o,typeof e!="symbol"?e+"":e,n);import{S as H,d as O,e as D,a4 as Y,k as v,b as $,a as Z,t as m,c as j,m as h,ad as ae,a7 as re,o as pe,ak as Pe,y as q,z as b,Q as J,a0 as L,j as x,D as Ne,E as U,A as I,l as z,G as te,q as Te,a6 as Tt,a2 as G,B as _,I as Me,P as fe,R as Be,V as ge,W as he,X as ve,ar as Rt,n as A,af as $e,ac as pt,J as Lt,K as ee,ae as Mt,ap as be,aq as Ie,aF as _e,a1 as He,T as ft,Y as xe,Z as qe,ag as gt,h as ie,a5 as ht,as as qt,aj as Ft,H as zt,u as At,v as Pt,w as Nt,p as Oe,x as Bt,r as De}from"./index-p4Dt6o3z.js";import{M as Ht}from"./MaterialIcon-9THX1buP.js";import{o as vt}from"./keypress-DD1aQVr0.js";import{A as Je,a as B}from"./autofix-state-d-ymFdyn.js";import{b6 as Ot,b7 as Fe,b8 as Dt,aG as Jt,b9 as Vt,ba as xt,bb as Ut,bc as Zt,bd as jt,be as Wt}from"./AugmentMessage-x438MRdb.js";import{E as ce,h as Ve,p as Ue,k as Gt,o as Kt,S as Yt,q as Ce}from"./chat-context-Dq8CyOam.js";import{a as ze}from"./Content-7zb4jZEH.js";import{R as Ee,a as Xt,b as wt,c as Qt,P as en,E as tn,d as nn,T as yt}from"./Keybindings-BPBUBuVi.js";import{I as sn,R as on,D as rn,a as an,b as Ct,c as cn,f as ke,E as ln,A as un}from"./main-panel-BDgbRPZU.js";import{a as kt,e as Ze}from"./ButtonAugment-DueOA3_V.js";import{E as dn}from"./expand-Ccnb8uFO.js";import{R as bt}from"./circle-backslash-B3nG_JMr.js";import{P as $n}from"./pen-to-square-DUXCbbi7.js";import{T as Ae}from"./TextTooltipAugment-C0ygVke5.js";import{I as Se}from"./IconButtonAugment-B0XoCIXT.js";import{e as mn,f as pn,M as fn,d as gn,c as hn}from"./CollapseButtonAugment-C3mt1EeR.js";import{a as vn}from"./index-CkBhOCxh.js";function je(o){let e,n,t,s,r,i,a,c;const l=[o[4][o[1]]];let d={};for(let g=0;g<l.length;g+=1)d=pe(d,l[g]);n=new Ht({props:d});let u=[{class:"stage-container"},o[1]?Pe(o[3][o[1]]):{},{role:"button"},{tabindex:"0"}],f={};for(let g=0;g<u.length;g+=1)f=pe(f,u[g]);return{c(){e=q("div"),b(n.$$.fragment),t=J(),s=q("div"),r=L(o[1]),x(s,"class","message svelte-1etsput"),Ne(e,f),U(e,"active",o[0]),U(e,"svelte-1etsput",!0)},m(g,w){v(g,e,w),I(n,e,null),z(e,t),z(e,s),z(s,r),i=!0,a||(c=[te(e,"click",o[5]),te(e,"keydown",vt("Enter",o[5]))],a=!0)},p(g,w){const R=18&w?Te(l,[Tt(g[4][g[1]])]):{};n.$set(R),(!i||2&w)&&G(r,g[1]),Ne(e,f=Te(u,[{class:"stage-container"},2&w&&(g[1]?Pe(g[3][g[1]]):{}),{role:"button"},{tabindex:"0"}])),U(e,"active",g[0]),U(e,"svelte-1etsput",!0)},i(g){i||($(n.$$.fragment,g),i=!0)},o(g){m(n.$$.fragment,g),i=!1},d(g){g&&h(e),_(n),a=!1,Me(c)}}}function xn(o){let e,n,t=o[1]&&je(o);return{c(){t&&t.c(),e=Y()},m(s,r){t&&t.m(s,r),v(s,e,r),n=!0},p(s,[r]){s[1]?t?(t.p(s,r),2&r&&$(t,1)):(t=je(s),t.c(),$(t,1),t.m(e.parentNode,e)):t&&(Z(),m(t,1,1,()=>{t=null}),j())},i(s){n||($(t),n=!0)},o(s){m(t),n=!1},d(s){s&&h(e),t&&t.d(s)}}}function wn(o,e,n){let t,s,r,i,{stage:a}=e,{iterationId:c}=e,{stageCount:l}=e;const d=ae("autofixConversationModel");re(o,d,g=>n(10,i=g));const u={[B.retesting]:"info",[B.testRunning]:"info",[B.testFailed]:"error",[B.testPassed]:"success",[B.generatingSolutions]:"info",[B.suggestedSolutions]:"warning",[B.selectedSolutions]:"success"},f={[B.retesting]:{iconName:"cached",color:"#FFFFFF"},[B.testRunning]:{iconName:"cached",color:"#FFFFFF"},[B.testFailed]:{iconName:"error",color:"#DB3B4B"},[B.testPassed]:{iconName:"check_circle",color:"#388A34"},[B.generatingSolutions]:{iconName:"cached",color:"#FFFFFF"},[B.suggestedSolutions]:{iconName:"edit",color:"#FFFFFF"},[B.selectedSolutions]:{iconName:"edit",color:"#FFFFFF"}};return o.$$set=g=>{"stage"in g&&n(6,a=g.stage),"iterationId"in g&&n(7,c=g.iterationId),"stageCount"in g&&n(8,l=g.stageCount)},o.$$.update=()=>{var g,w,R;1152&o.$$.dirty&&n(9,t=i==null?void 0:i.getAutofixIteration(c)),1600&o.$$.dirty&&n(0,s=t&&((R=(w=(g=i.extraData)==null?void 0:g.autofixIterations)==null?void 0:w.at(-1))==null?void 0:R.id)===t.id&&t.currentStage===a),833&o.$$.dirty&&n(1,r=function(p,y,S,M){var C;return p?y===Je.runTest?p.commandFailed===void 0&&M?p.isFirstIteration?B.testRunning:B.retesting:p.commandFailed===!0?B.testFailed:B.testPassed:y===Je.applyFix?S===(((C=p.suggestedSolutions)==null?void 0:C.length)||0)?p.selectedSolutions?B.selectedSolutions:B.generatingSolutions:B.suggestedSolutions:null:null}(t,a,l,s))},[s,r,d,u,f,()=>{r!==B.generatingSolutions&&d.launchAutofixPanel(c,a)},a,c,l,t,i]}class Eo extends H{constructor(e){super(),O(this,e,wn,xn,D,{stage:6,iterationId:7,stageCount:8})}}function So(o,e){const n=Math.abs(o);let t=200,s=500;typeof e=="number"?t=e:e&&(t=e.baseThreshold??200,s=e.predictTime??500);const r=n*s/1e3;return Math.max(t,r)}function To(o,e=10){const n=Math.abs(o);return n>1e3?2*e:n>500?1.5*e:n>200?e:.5*e}function We(o){const{scrollTop:e,clientHeight:n,scrollHeight:t}=o;return t-e-n}function Ro(o,e={}){let n=e,t={scrollTop:0,scrollBottom:0,scrollHeight:0,scrolledIntoBottom:!0,scrolledAwayFromBottom:!0};const s=()=>{var p,y,S;const{scrollTop:r,scrollHeight:i,offsetHeight:a}=o,c=We(o),l=r>t.scrollTop+1,d=i-t.scrollHeight,u=!(d<0&&t.scrollBottom<-d)&&r<t.scrollTop-1&&c>t.scrollBottom+1,f=i>a,g=((M,C=40)=>We(M)<=C)(o),w=g&&f&&l,R=u||!f;w&&!t.scrolledIntoBottom?(p=n.onScrollIntoBottom)==null||p.call(n):R&&!t.scrolledAwayFromBottom&&((y=n.onScrollAwayFromBottom)==null||y.call(n)),t={scrollTop:r,scrollBottom:c,scrolledIntoBottom:w,scrolledAwayFromBottom:R,scrollHeight:i},(S=n.onScroll)==null||S.call(n,r)};return o.addEventListener("scroll",s),{update(r){n=r},destroy(){o.removeEventListener("scroll",s)}}}function yn(o){let e,n,t;const s=o[4].default,r=fe(s,o,o[3],null);return{c(){e=q("div"),r&&r.c(),x(e,"class",n="c-gradient-mask "+o[2]+" svelte-1v5ymz0"),Be(e,"--fade-size",o[1]+"px"),U(e,"is-horizontal",o[0]==="horizontal")},m(i,a){v(i,e,a),r&&r.m(e,null),t=!0},p(i,[a]){r&&r.p&&(!t||8&a)&&ge(r,s,i,i[3],t?ve(s,i[3],a,null):he(i[3]),null),(!t||4&a&&n!==(n="c-gradient-mask "+i[2]+" svelte-1v5ymz0"))&&x(e,"class",n),(!t||2&a)&&Be(e,"--fade-size",i[1]+"px"),(!t||5&a)&&U(e,"is-horizontal",i[0]==="horizontal")},i(i){t||($(r,i),t=!0)},o(i){m(r,i),t=!1},d(i){i&&h(e),r&&r.d(i)}}}function Cn(o,e,n){let{$$slots:t={},$$scope:s}=e,{direction:r="vertical"}=e,{fadeSize:i=30}=e,{class:a=""}=e;return o.$$set=c=>{"direction"in c&&n(0,r=c.direction),"fadeSize"in c&&n(1,i=c.fadeSize),"class"in c&&n(2,a=c.class),"$$scope"in c&&n(3,s=c.$$scope)},[r,i,a,s,t]}class Lo extends H{constructor(e){super(),O(this,e,Cn,yn,D,{direction:0,fadeSize:1,class:2})}}function Mo(o,e){var r;let n=o.offsetHeight,t=e;const s=new ResizeObserver(i=>{var c;const a=i[0].contentRect.height;i.length===1?a!==n&&((c=t.onHeightChange)==null||c.call(t,a),n=a):console.warn("Unexpected number of resize entries: ",i)});return s.observe(o),(r=t==null?void 0:t.onHeightChange)==null||r.call(t,n),{update(i){t=i},destroy:()=>s.disconnect()}}function qo(o,e){let n=e;const t=Ot(()=>{n.onSeen()},1e3,{leading:!0,trailing:!0}),s=new IntersectionObserver(i=>{i.length===1?i[0].isIntersecting&&t():console.warn("Unexpected number of intersection entries: ",i)},{threshold:.5}),r=()=>{s.disconnect(),n.track&&s.observe(o)};return r(),{update(i){const a=n;n=i,n.track!==a.track&&r()},destroy:()=>{s.disconnect(),n.onSeen()}}}function Ge(o){let e,n,t,s=o[6]&&Ke();return n=new on({props:{changeImageMode:o[32],saveImage:o[9].saveImage,deleteImage:o[9].deleteImage,renderImage:o[9].renderImage,isEditable:o[33]}}),{c(){s&&s.c(),e=J(),b(n.$$.fragment)},m(r,i){s&&s.m(r,i),v(r,e,i),I(n,r,i),t=!0},p(r,i){r[6]?s?64&i[0]&&$(s,1):(s=Ke(),s.c(),$(s,1),s.m(e.parentNode,e)):s&&(Z(),m(s,1,1,()=>{s=null}),j());const a={};258&i[0]&&(a.changeImageMode=r[32]),512&i[0]&&(a.saveImage=r[9].saveImage),512&i[0]&&(a.deleteImage=r[9].deleteImage),512&i[0]&&(a.renderImage=r[9].renderImage),64&i[0]&&(a.isEditable=r[33]),n.$set(a)},i(r){t||($(s),$(n.$$.fragment,r),t=!0)},o(r){m(s),m(n.$$.fragment,r),t=!1},d(r){r&&h(e),s&&s.d(r),_(n,r)}}}function Ke(o){let e,n;return e=new rn({}),{c(){b(e.$$.fragment)},m(t,s){I(e,t,s),n=!0},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){m(e.$$.fragment,t),n=!1},d(t){_(e,t)}}}function kn(o){var R;let e,n,t,s,r,i,a,c,l,d,u=o[9].flags.enableChatMultimodal&&Ge(o);n=new Xt({props:{shortcuts:o[13]}});let f={requestEditorFocus:o[22],onMentionItemsUpdated:o[21]};s=new wt({props:f}),o[34](s),i=new Qt({props:{placeholder:o[2]}}),c=new Ee.Content({props:{content:((R=o[7])==null?void 0:R.richTextJsonRepr)??o[3],onContentChanged:o[20]}});const g=o[29].default,w=fe(g,o,o[37],null);return{c(){u&&u.c(),e=J(),b(n.$$.fragment),t=J(),b(s.$$.fragment),r=J(),b(i.$$.fragment),a=J(),b(c.$$.fragment),l=J(),w&&w.c()},m(p,y){u&&u.m(p,y),v(p,e,y),I(n,p,y),v(p,t,y),I(s,p,y),v(p,r,y),I(i,p,y),v(p,a,y),I(c,p,y),v(p,l,y),w&&w.m(p,y),d=!0},p(p,y){var V;p[9].flags.enableChatMultimodal?u?(u.p(p,y),512&y[0]&&$(u,1)):(u=Ge(p),u.c(),$(u,1),u.m(e.parentNode,e)):u&&(Z(),m(u,1,1,()=>{u=null}),j());const S={};8192&y[0]&&(S.shortcuts=p[13]),n.$set(S),s.$set({});const M={};4&y[0]&&(M.placeholder=p[2]),i.$set(M);const C={};136&y[0]&&(C.content=((V=p[7])==null?void 0:V.richTextJsonRepr)??p[3]),c.$set(C),w&&w.p&&(!d||64&y[1])&&ge(w,g,p,p[37],d?ve(g,p[37],y,null):he(p[37]),null)},i(p){d||($(u),$(n.$$.fragment,p),$(s.$$.fragment,p),$(i.$$.fragment,p),$(c.$$.fragment,p),$(w,p),d=!0)},o(p){m(u),m(n.$$.fragment,p),m(s.$$.fragment,p),m(i.$$.fragment,p),m(c.$$.fragment,p),m(w,p),d=!1},d(p){p&&(h(e),h(t),h(r),h(a),h(l)),u&&u.d(p),_(n,p),o[34](null),_(s,p),_(i,p),_(c,p),w&&w.d(p)}}}function Ye(o){let e,n;return e=new an({props:{chatModel:o[16]}}),{c(){b(e.$$.fragment)},m(t,s){I(e,t,s),n=!0},p:A,i(t){n||($(e.$$.fragment,t),n=!0)},o(t){m(e.$$.fragment,t),n=!1},d(t){_(e,t)}}}function bn(o){let e,n,t=o[6]&&Ye(o);return{c(){t&&t.c(),e=Y()},m(s,r){t&&t.m(s,r),v(s,e,r),n=!0},p(s,r){s[6]?t?(t.p(s,r),64&r[0]&&$(t,1)):(t=Ye(s),t.c(),$(t,1),t.m(e.parentNode,e)):t&&(Z(),m(t,1,1,()=>{t=null}),j())},i(s){n||($(t),n=!0)},o(s){m(t),n=!1},d(s){s&&h(e),t&&t.d(s)}}}function Xe(o){let e,n;return e=new Ct.Root({props:{$$slots:{rightAlign:[En],leftAlign:[In]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment)},m(t,s){I(e,t,s),n=!0},p(t,s){const r={};17408&s[0]|64&s[1]&&(r.$$scope={dirty:s,ctx:t}),e.$set(r)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){m(e.$$.fragment,t),n=!1},d(t){_(e,t)}}}function In(o){var t;let e,n;return e=new Ct.ContextMenu({props:{slot:"leftAlign",onCloseDropdown:o[22],onInsertMentionable:(t=o[10])==null?void 0:t.insertMentionNode}}),{c(){b(e.$$.fragment)},m(s,r){I(e,s,r),n=!0},p(s,r){var a;const i={};1024&r[0]&&(i.onInsertMentionable=(a=s[10])==null?void 0:a.insertMentionNode),e.$set(i)},i(s){n||($(e.$$.fragment,s),n=!0)},o(s){m(e.$$.fragment,s),n=!1},d(s){_(e,s)}}}function _n(o){let e,n;return e=new en({}),{c(){b(e.$$.fragment)},m(t,s){I(e,t,s),n=!0},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){m(e.$$.fragment,t),n=!1},d(t){_(e,t)}}}function En(o){let e,n;return e=new kt({props:{size:1,variant:"solid",disabled:!o[14],$$slots:{default:[_n]},$$scope:{ctx:o}}}),e.$on("click",o[18]),{c(){b(e.$$.fragment)},m(t,s){I(e,t,s),n=!0},p(t,s){const r={};16384&s[0]&&(r.disabled=!t[14]),64&s[1]&&(r.$$scope={dirty:s,ctx:t}),e.$set(r)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){m(e.$$.fragment,t),n=!1},d(t){_(e,t)}}}function Qe(o){let e,n,t;return n=new kt({props:{variant:"solid",color:"neutral",size:1,$$slots:{iconLeft:[Tn],default:[Sn]},$$scope:{ctx:o}}}),n.$on("click",o[31]),{c(){e=q("div"),b(n.$$.fragment),x(e,"class","c-user-msg__collapse-button svelte-9vyoe0")},m(s,r){v(s,e,r),I(n,e,null),t=!0},p(s,r){const i={};64&r[1]&&(i.$$scope={dirty:r,ctx:s}),n.$set(i)},i(s){t||($(n.$$.fragment,s),t=!0)},o(s){m(n.$$.fragment,s),t=!1},d(s){s&&h(e),_(n)}}}function Sn(o){let e;return{c(){e=q("span"),e.textContent="Expand"},m(n,t){v(n,e,t)},p:A,d(n){n&&h(e)}}}function Tn(o){let e,n;return e=new dn({props:{slot:"iconLeft"}}),{c(){b(e.$$.fragment)},m(t,s){I(e,t,s),n=!0},p:A,i(t){n||($(e.$$.fragment,t),n=!0)},o(t){m(e.$$.fragment,t),n=!1},d(t){_(e,t)}}}function Rn(o){let e,n,t,s=o[6]&&Xe(o),r=o[4]&&Qe(o);return{c(){s&&s.c(),e=J(),r&&r.c(),n=Y()},m(i,a){s&&s.m(i,a),v(i,e,a),r&&r.m(i,a),v(i,n,a),t=!0},p(i,a){i[6]?s?(s.p(i,a),64&a[0]&&$(s,1)):(s=Xe(i),s.c(),$(s,1),s.m(e.parentNode,e)):s&&(Z(),m(s,1,1,()=>{s=null}),j()),i[4]?r?(r.p(i,a),16&a[0]&&$(r,1)):(r=Qe(i),r.c(),$(r,1),r.m(n.parentNode,n)):r&&(Z(),m(r,1,1,()=>{r=null}),j())},i(i){t||($(s),$(r),t=!0)},o(i){m(s),m(r),t=!1},d(i){i&&(h(e),h(n)),s&&s.d(i),r&&r.d(i)}}}function Ln(o){let e,n,t,s,r,i={editable:o[6],$$slots:{footer:[Rn],header:[bn],default:[kn]},$$scope:{ctx:o}};return n=new Ee.Root({props:i}),o[35](n),n.$on("click",Mn),n.$on("dblclick",o[17]),{c(){e=q("div"),b(n.$$.fragment),x(e,"class","c-chat-input svelte-9vyoe0"),x(e,"role","button"),x(e,"tabindex","-1"),U(e,"is-collapsed",o[4]),U(e,"is-editing",o[6])},m(a,c){v(a,e,c),I(n,e,null),o[36](e),t=!0,s||(r=[te(window,"mousedown",o[19]),te(e,"mousedown",Rt(o[30]))],s=!0)},p(a,c){const l={};64&c[0]&&(l.editable=a[6]),26623&c[0]|64&c[1]&&(l.$$scope={dirty:c,ctx:a}),n.$set(l),(!t||16&c[0])&&U(e,"is-collapsed",a[4]),(!t||64&c[0])&&U(e,"is-editing",a[6])},i(a){t||($(n.$$.fragment,a),t=!0)},o(a){m(n.$$.fragment,a),t=!1},d(a){a&&h(e),o[35](null),_(n),o[36](null),s=!1,Me(r)}}}const Mn=o=>o.stopPropagation();function qn(o,e,n){let t,s,r,i,a,c,l,d=A;o.$$.on_destroy.push(()=>d());let{$$slots:u={},$$scope:f}=e;const g=ae("chatModel");re(o,g,k=>n(9,l=k));const w=ae(bt.key);let{requestId:R}=e,{placeholder:p="Edit your message..."}=e,{content:y}=e,{collapsed:S=!1}=e,{onSubmitEdit:M}=e,{onCancelEdit:C}=e,{setIsCollapsed:V}=e,{userExpanded:T}=e,P,W,F,E=!1,X=[];async function oe(){r&&(n(0,T=!0),S&&V(!1),n(6,E=!0),await pt(),we())}function de(){return!(!i||!P)&&(M(P,X),!0)}function N(){return n(0,T=!1),n(6,E=!1),n(7,P=void 0),C(),!0}const we=()=>F==null?void 0:F.forceFocus();let le;return o.$$set=k=>{"requestId"in k&&n(1,R=k.requestId),"placeholder"in k&&n(2,p=k.placeholder),"content"in k&&n(3,y=k.content),"collapsed"in k&&n(4,S=k.collapsed),"onSubmitEdit"in k&&n(23,M=k.onSubmitEdit),"onCancelEdit"in k&&n(24,C=k.onCancelEdit),"setIsCollapsed"in k&&n(5,V=k.setIsCollapsed),"userExpanded"in k&&n(0,T=k.userExpanded),"$$scope"in k&&n(37,f=k.$$scope)},o.$$.update=()=>{512&o.$$.dirty[0]&&(n(15,t=l.currentConversationModel),d(),d=$e(t,k=>n(8,c=k))),268435968&o.$$.dirty[0]&&n(27,r=l.flags.enableEditableHistory&&!s),134218184&o.$$.dirty[0]&&n(14,i=E&&r&&P!==void 0&&P.rawText.trim()!==""&&P.rawText!==y&&P.richTextJsonRepr!==y&&!c.awaitingReply&&!sn.hasLoadingImages(P.richTextJsonRepr))},n(28,s=!!(w!=null&&w.isActive)),n(13,a={Enter:de,Escape:N}),[T,R,p,y,S,V,E,P,c,l,W,F,le,a,i,t,g,oe,de,N,function(k){k!==P&&n(7,P=k)},function(k){X=k.current},()=>F==null?void 0:F.requestFocus(),M,C,()=>{oe()},function(){return le},r,s,u,function(k){Lt.call(this,o,k)},()=>{n(0,T=!0),V(!1)},k=>{R&&k&&c.updateChatItem(R,{rich_text_json_repr:k})},()=>E,function(k){ee[k?"unshift":"push"](()=>{W=k,n(10,W)})},function(k){ee[k?"unshift":"push"](()=>{F=k,n(11,F)})},function(k){ee[k?"unshift":"push"](()=>{le=k,n(12,le)})},f]}class Fn extends H{constructor(e){super(),O(this,e,qn,Ln,D,{requestId:1,placeholder:2,content:3,collapsed:4,onSubmitEdit:23,onCancelEdit:24,setIsCollapsed:5,userExpanded:0,requestStartEdit:25,getEditorContainer:26},null,[-1,-1])}get requestStartEdit(){return this.$$.ctx[25]}get getEditorContainer(){return this.$$.ctx[26]}}const Q=class Q{constructor(e){K(this,"_tipTapExtension");K(this,"_resizeObserver");K(this,"_checkHeight",e=>{var t,s;const n=e.getBoundingClientRect().height;(s=(t=this._options).onResize)==null||s.call(t,n)});K(this,"_setResizeObserver",e=>{var t;const n=(t=e.view)==null?void 0:t.dom;n&&(this._resizeObserver=new ResizeObserver(s=>{for(const r of s)this._checkHeight(r.target)}),this._resizeObserver.observe(n),this._checkHeight(n))});K(this,"_clearResizeObserver",()=>{var e;(e=this._resizeObserver)==null||e.disconnect(),this._resizeObserver=void 0});K(this,"updateOptions",e=>{this._options={...this._options,...e}});this._options=e;const n=Q._getNextPluginId(),t=this._setResizeObserver,s=this._clearResizeObserver,r=this._checkHeight;this._tipTapExtension=tn.create({name:n,onCreate:function(){var a;((a=this.editor.view)==null?void 0:a.dom)&&(t(this.editor),this.editor.on("destroy",s))},onUpdate:function(){var a;const i=(a=this.editor.view)==null?void 0:a.dom;i&&r(i)},onDestroy:()=>{var i;(i=this._resizeObserver)==null||i.disconnect(),this._resizeObserver=void 0}})}get tipTapExtension(){return this._tipTapExtension}};K(Q,"_sequenceId",0),K(Q,"RESIZE_OBSERVER_PLUGIN_KEY_BASE","augment-resize-observer-plugin-{}"),K(Q,"_getSequenceId",()=>Q._sequenceId++),K(Q,"_getNextPluginId",()=>{const e=Q._getSequenceId().toString();return Q.RESIZE_OBSERVER_PLUGIN_KEY_BASE.replace("{}",e)});let Re=Q;function zn(o,e,n){let{height:t=0}=e;const s=c=>{n(0,t=c)},r=ae(nn.CONTEXT_KEY),i=new Re({onResize:s}),a=r.pluginManager.registerPlugin(i);return Mt(a),o.$$set=c=>{"height"in c&&n(0,t=c.height)},i.updateOptions({onResize:s}),[t]}let An=class extends H{constructor(o){super(),O(this,o,zn,null,D,{height:0})}};function Pn(o){let e,n,t;function s(i){o[21](i)}let r={};return o[6]!==void 0&&(r.height=o[6]),e=new An({props:r}),ee.push(()=>be(e,"height",s)),{c(){b(e.$$.fragment)},m(i,a){I(e,i,a),t=!0},p(i,a){const c={};!n&&64&a&&(n=!0,c.height=i[6],Ie(()=>n=!1)),e.$set(c)},i(i){t||($(e.$$.fragment,i),t=!0)},o(i){m(e.$$.fragment,i),t=!1},d(i){_(e,i)}}}function Nn(o){let e,n,t;function s(i){o[23](i)}let r={collapsed:o[7],content:o[3]??o[1],requestId:o[2],onSubmitEdit:o[13],onCancelEdit:o[5],setIsCollapsed:o[11],$$slots:{default:[Pn]},$$scope:{ctx:o}};return o[8]!==void 0&&(r.userExpanded=o[8]),e=new Fn({props:r}),o[22](e),ee.push(()=>be(e,"userExpanded",s)),{c(){b(e.$$.fragment)},m(i,a){I(e,i,a),t=!0},p(i,a){const c={};128&a&&(c.collapsed=i[7]),10&a&&(c.content=i[3]??i[1]),4&a&&(c.requestId=i[2]),32&a&&(c.onCancelEdit=i[5]),134217792&a&&(c.$$scope={dirty:a,ctx:i}),!n&&256&a&&(n=!0,c.userExpanded=i[8],Ie(()=>n=!1)),e.$set(c)},i(i){t||($(e.$$.fragment,i),t=!0)},o(i){m(e.$$.fragment,i),t=!1},d(i){o[22](null),_(e,i)}}}function Bn(o){let e,n,t;return n=new Dt({props:{items:o[10]}}),{c(){e=q("div"),b(n.$$.fragment),x(e,"slot","edit"),x(e,"class","c-user-msg__actions svelte-ln0veu")},m(s,r){v(s,e,r),I(n,e,null),t=!0},p(s,r){const i={};1024&r&&(i.items=s[10]),n.$set(i)},i(s){t||($(n.$$.fragment,s),t=!0)},o(s){m(n.$$.fragment,s),t=!1},d(s){s&&h(e),_(n)}}}function Hn(o){let e,n,t,s;return e=new Fe({props:{timestamp:o[4],$$slots:{edit:[Bn],content:[Nn]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment)},m(r,i){I(e,r,i),n=!0,t||(s=[te(window,"keydown",vt("Escape",o[12])),te(window,"mousedown",o[12])],t=!0)},p(r,[i]){const a={};16&i&&(a.timestamp=r[4]),134219758&i&&(a.$$scope={dirty:i,ctx:r}),e.$set(a)},i(r){n||($(e.$$.fragment,r),n=!0)},o(r){m(e.$$.fragment,r),n=!1},d(r){_(e,r),t=!1,Me(s)}}}function On(o,e,n){let t,s,r,i,a,c,l,d=A,u=()=>(d(),d=$e(f,E=>n(20,l=E)),f);o.$$.on_destroy.push(()=>d());let{chatModel:f}=e;u();let{msg:g}=e,{requestId:w}=e,{richTextJsonRepr:R}=e,{timestamp:p}=e,{onStartEdit:y=()=>{}}=e,{onAcceptEdit:S=()=>{}}=e,{onCancelEdit:M=()=>{}}=e;const C=ae(bt.key);let V=!1,T=!1;async function P(E){await pt(),n(7,V=E&&r&&!T)}const W=E=>{a&&w&&(P(!1),F==null||F.requestStartEdit(),y(),E.stopPropagation())};let F;return o.$$set=E=>{"chatModel"in E&&u(n(0,f=E.chatModel)),"msg"in E&&n(1,g=E.msg),"requestId"in E&&n(2,w=E.requestId),"richTextJsonRepr"in E&&n(3,R=E.richTextJsonRepr),"timestamp"in E&&n(4,p=E.timestamp),"onStartEdit"in E&&n(14,y=E.onStartEdit),"onAcceptEdit"in E&&n(15,S=E.onAcceptEdit),"onCancelEdit"in E&&n(5,M=E.onCancelEdit)},o.$$.update=()=>{var E,X;1048580&o.$$.dirty&&n(19,s=w===void 0||w===((X=(E=l==null?void 0:l.currentConversationModel)==null?void 0:E.lastExchange)==null?void 0:X.request_id)),524288&o.$$.dirty&&n(16,r=!s&&!0),1310724&o.$$.dirty&&n(17,a=w!==void 0&&l.flags.fullFeatured&&l.flags.enableEditableHistory&&!t),131072&o.$$.dirty&&n(10,c=[...a?[{label:"Edit message",action:W,id:"edit-message",disabled:!1,icon:$n}]:[]]),65600&o.$$.dirty&&i&&r&&(F!=null&&F.getEditorContainer())&&i&&r&&P(!(V&&i<120)&&i>120)},n(18,t=!!(C!=null&&C.isActive)),n(6,i=0),[f,g,w,R,p,M,i,V,T,F,c,P,()=>{},function(E,X){if(!w)return;f.currentConversationModel.clearHistoryFrom(w);const oe=l.flags.enableChatMultimodal&&E.richTextJsonRepr?f.currentConversationModel.createStructuredRequestNodes(E.richTextJsonRepr):void 0;f.currentConversationModel.sendExchange({request_message:E.rawText,rich_text_json_repr:E.richTextJsonRepr,status:ce.draft,mentioned_items:X,structured_request_nodes:oe}),S()},y,S,r,a,t,s,l,function(E){i=E,n(6,i)},function(E){ee[E?"unshift":"push"](()=>{F=E,n(9,F)})},function(E){T=E,n(8,T)}]}class Dn extends H{constructor(e){super(),O(this,e,On,Hn,D,{chatModel:0,msg:1,requestId:2,richTextJsonRepr:3,timestamp:4,onStartEdit:14,onAcceptEdit:15,onCancelEdit:5})}}function et(o){let e,n;return e=new Dn({props:{msg:o[1].request_message??"",richTextJsonRepr:o[10],chatModel:o[0],requestId:o[8],timestamp:o[1].timestamp}}),{c(){b(e.$$.fragment)},m(t,s){I(e,t,s),n=!0},p(t,s){const r={};2&s&&(r.msg=t[1].request_message??""),1024&s&&(r.richTextJsonRepr=t[10]),1&s&&(r.chatModel=t[0]),256&s&&(r.requestId=t[8]),2&s&&(r.timestamp=t[1].timestamp),e.$set(r)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){m(e.$$.fragment,t),n=!1},d(t){_(e,t)}}}function tt(o){let e,n,t;function s(c,l){return c[1].display_error_message?Un:c[1].response_text&&c[1].response_text.length>0?Vn:Jn}let r=s(o),i=r(o),a=o[8]&&nt(o);return{c(){e=q("div"),i.c(),n=J(),a&&a.c(),x(e,"class","c-msg-list__turn-response-failure svelte-1d1manc")},m(c,l){v(c,e,l),i.m(e,null),z(e,n),a&&a.m(e,null),t=!0},p(c,l){r===(r=s(c))&&i?i.p(c,l):(i.d(1),i=r(c),i&&(i.c(),i.m(e,n))),c[8]?a?(a.p(c,l),256&l&&$(a,1)):(a=nt(c),a.c(),$(a,1),a.m(e,null)):a&&(Z(),m(a,1,1,()=>{a=null}),j())},i(c){t||($(a),t=!0)},o(c){m(a),t=!1},d(c){c&&h(e),i.d(),a&&a.d()}}}function Jn(o){let e,n,t,s;return{c(){e=L(`We encountered an issue sending your message. Please
        `),n=q("button"),n.textContent="try again",x(n,"class","svelte-1d1manc")},m(r,i){v(r,e,i),v(r,n,i),t||(s=te(n,"click",_e(o[12])),t=!0)},p:A,d(r){r&&(h(e),h(n)),t=!1,s()}}}function Vn(o){let e,n,t,s,r;return{c(){e=L(`Connection lost. Please
        `),n=q("button"),n.textContent="try again",t=L(`
        to restart the conversation!`),x(n,"class","svelte-1d1manc")},m(i,a){v(i,e,a),v(i,n,a),v(i,t,a),s||(r=te(n,"click",_e(o[12])),s=!0)},p:A,d(i){i&&(h(e),h(n),h(t)),s=!1,r()}}}function Un(o){let e,n=o[1].display_error_message+"";return{c(){e=L(n)},m(t,s){v(t,e,s)},p(t,s){2&s&&n!==(n=t[1].display_error_message+"")&&G(e,n)},d(t){t&&h(e)}}}function nt(o){let e,n,t,s,r,i,a,c;function l(u){o[15](u)}let d={onOpenChange:o[13],content:o[6],triggerOn:[ze.Hover],$$slots:{default:[jn]},$$scope:{ctx:o}};return o[7]!==void 0&&(d.requestClose=o[7]),i=new Ae({props:d}),ee.push(()=>be(i,"requestClose",l)),{c(){e=q("div"),n=q("span"),t=L("Request ID: "),s=L(o[8]),r=J(),b(i.$$.fragment),x(e,"class","c-msg-list__request-id svelte-1d1manc")},m(u,f){v(u,e,f),z(e,n),z(n,t),z(n,s),z(e,r),I(i,e,null),c=!0},p(u,f){(!c||256&f)&&G(s,u[8]);const g={};64&f&&(g.content=u[6]),262144&f&&(g.$$scope={dirty:f,ctx:u}),!a&&128&f&&(a=!0,g.requestClose=u[7],Ie(()=>a=!1)),i.$set(g)},i(u){c||($(i.$$.fragment,u),c=!0)},o(u){m(i.$$.fragment,u),c=!1},d(u){u&&h(e),_(i)}}}function Zn(o){let e,n;return e=new Kt({}),{c(){b(e.$$.fragment)},m(t,s){I(e,t,s),n=!0},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){m(e.$$.fragment,t),n=!1},d(t){_(e,t)}}}function jn(o){let e,n;return e=new Se({props:{variant:"ghost",color:"neutral",size:1,$$slots:{default:[Zn]},$$scope:{ctx:o}}}),e.$on("click",o[14]),{c(){b(e.$$.fragment)},m(t,s){I(e,t,s),n=!0},p(t,s){const r={};262144&s&&(r.$$scope={dirty:s,ctx:t}),e.$set(r)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){m(e.$$.fragment,t),n=!1},d(t){_(e,t)}}}function Wn(o){let e,n,t,s,r,i=!o[9]&&!Ve(o[1]),a=i&&et(o);t=new Jt({props:{chatModel:o[5],turn:o[1],turnIndex:o[3],requestId:o[8],isLastTurn:o[2],showName:!o[9],showFooter:!Ue(o[1]),markdown:o[1].response_text??"",timestamp:o[1].timestamp,messageListContainer:o[4]}});let c=o[1].status===ce.failed&&tt(o);return{c(){e=q("div"),a&&a.c(),n=J(),b(t.$$.fragment),s=J(),c&&c.c(),x(e,"class","c-msg-list__turn svelte-1d1manc")},m(l,d){v(l,e,d),a&&a.m(e,null),z(e,n),I(t,e,null),z(e,s),c&&c.m(e,null),r=!0},p(l,[d]){514&d&&(i=!l[9]&&!Ve(l[1])),i?a?(a.p(l,d),514&d&&$(a,1)):(a=et(l),a.c(),$(a,1),a.m(e,n)):a&&(Z(),m(a,1,1,()=>{a=null}),j());const u={};32&d&&(u.chatModel=l[5]),2&d&&(u.turn=l[1]),8&d&&(u.turnIndex=l[3]),256&d&&(u.requestId=l[8]),4&d&&(u.isLastTurn=l[2]),512&d&&(u.showName=!l[9]),2&d&&(u.showFooter=!Ue(l[1])),2&d&&(u.markdown=l[1].response_text??""),2&d&&(u.timestamp=l[1].timestamp),16&d&&(u.messageListContainer=l[4]),t.$set(u),l[1].status===ce.failed?c?(c.p(l,d),2&d&&$(c,1)):(c=tt(l),c.c(),$(c,1),c.m(e,null)):c&&(Z(),m(c,1,1,()=>{c=null}),j())},i(l){r||($(a),$(t.$$.fragment,l),$(c),r=!0)},o(l){m(a),m(t.$$.fragment,l),m(c),r=!1},d(l){l&&h(e),a&&a.d(),_(t),c&&c.d()}}}function Gn(o,e,n){let t,s,r,i,a,c,l=A,d=()=>(l(),l=$e(f,C=>n(5,a=C)),f),u=A;o.$$.on_destroy.push(()=>l()),o.$$.on_destroy.push(()=>u());let{chatModel:f}=e;d();let{turn:g}=e,{isLastTurn:w=!1}=e,{turnIndex:R=0}=e,{messageListContainer:p}=e,y,S="Copy request ID",M=()=>{};return o.$$set=C=>{"chatModel"in C&&d(n(0,f=C.chatModel)),"turn"in C&&n(1,g=C.turn),"isLastTurn"in C&&n(2,w=C.isLastTurn),"turnIndex"in C&&n(3,R=C.turnIndex),"messageListContainer"in C&&n(4,p=C.messageListContainer)},o.$$.update=()=>{2&o.$$.dirty&&n(8,t=g.request_id),32&o.$$.dirty&&(n(11,s=a==null?void 0:a.currentConversationModel),u(),u=$e(s,C=>n(17,c=C))),34&o.$$.dirty&&n(10,r=a.flags.enableRichTextHistory?g.rich_text_json_repr:void 0),2&o.$$.dirty&&n(9,i=Gt(g))},[f,g,w,R,p,a,S,M,t,i,r,s,()=>{c.resendTurn(g)},function(C){C||(clearTimeout(y),y=void 0,n(6,S="Copy request ID"))},async function(){t&&(await navigator.clipboard.writeText(t),n(6,S="Copied!"),clearTimeout(y),y=setTimeout(M,1500))},function(C){M=C,n(7,M)}]}class Fo extends H{constructor(e){super(),O(this,e,Gn,Wn,D,{chatModel:0,turn:1,isLastTurn:2,turnIndex:3,messageListContainer:4})}}function Kn(o){let e,n,t,s,r,i,a;const c=o[15].default,l=fe(c,o,o[14],null);return{c(){e=q("div"),l&&l.c(),x(e,"class",n=He(`c-msg-list__item ${o[5]}`)+" svelte-1s0uz2w"),x(e,"style",t=`min-height: calc(${o[4]}px - (var(--msg-list-item-spacing) * 2));`),x(e,"data-request-id",o[6])},m(d,u){v(d,e,u),l&&l.m(e,null),o[16](e),r=!0,i||(a=ft(s=Vt.call(null,e,{follow:!o[2]&&o[1],scrollContainer:o[3],disableScrollUp:!0,smooth:!0,bottom:!0})),i=!0)},p(d,[u]){l&&l.p&&(!r||16384&u)&&ge(l,c,d,d[14],r?ve(c,d[14],u,null):he(d[14]),null),(!r||32&u&&n!==(n=He(`c-msg-list__item ${d[5]}`)+" svelte-1s0uz2w"))&&x(e,"class",n),(!r||16&u&&t!==(t=`min-height: calc(${d[4]}px - (var(--msg-list-item-spacing) * 2));`))&&x(e,"style",t),(!r||64&u)&&x(e,"data-request-id",d[6]),s&&xe(s.update)&&14&u&&s.update.call(null,{follow:!d[2]&&d[1],scrollContainer:d[3],disableScrollUp:!0,smooth:!0,bottom:!0})},i(d){r||($(l,d),r=!0)},o(d){m(l,d),r=!1},d(d){d&&h(e),l&&l.d(d),o[16](null),i=!1,a()}}}function Yn(o,e,n){let t,s,r,i,a=A,c=A,l=()=>(c(),c=$e(g,T=>n(13,i=T)),g);o.$$.on_destroy.push(()=>a()),o.$$.on_destroy.push(()=>c());let{$$slots:d={},$$scope:u}=e,{requestId:f}=e,{chatModel:g}=e;l();let w,{isLastItem:R=!1}=e,{userControlsScroll:p=!1}=e,{releaseScroll:y=()=>{}}=e,{messageListContainer:S}=e,{minHeight:M}=e,{class:C=""}=e,{dataRequestId:V}=e;return qe(()=>{S&&R&&xt(S,{smooth:!0,onScrollFinish:y})}),o.$$set=T=>{"requestId"in T&&n(9,f=T.requestId),"chatModel"in T&&l(n(0,g=T.chatModel)),"isLastItem"in T&&n(1,R=T.isLastItem),"userControlsScroll"in T&&n(2,p=T.userControlsScroll),"releaseScroll"in T&&n(10,y=T.releaseScroll),"messageListContainer"in T&&n(3,S=T.messageListContainer),"minHeight"in T&&n(4,M=T.minHeight),"class"in T&&n(5,C=T.class),"dataRequestId"in T&&n(6,V=T.dataRequestId),"$$scope"in T&&n(14,u=T.$$scope)},o.$$.update=()=>{var T,P;8192&o.$$.dirty&&(n(8,t=(T=i==null?void 0:i.currentConversationModel)==null?void 0:T.focusModel),a(),a=$e(t,W=>n(12,r=W))),4608&o.$$.dirty&&n(11,s=((P=r.focusedItem)==null?void 0:P.request_id)===f),2048&o.$$.dirty&&s&&S&&w&&Ut(S,w,{topBuffer:0,smooth:!0,scrollDuration:100,onScrollFinish:y})},[g,R,p,S,M,C,V,w,t,f,y,s,r,i,u,d,function(T){ee[T?"unshift":"push"](()=>{w=T,n(7,w)})}]}class zo extends H{constructor(e){super(),O(this,e,Yn,Kn,D,{requestId:9,chatModel:0,isLastItem:1,userControlsScroll:2,releaseScroll:10,messageListContainer:3,minHeight:4,class:5,dataRequestId:6})}}function Xn(o){let e,n,t,s;return n=new gt({props:{size:1}}),{c(){e=q("span"),b(n.$$.fragment),t=L(`
  Generating response...`),x(e,"class","c-gen-response svelte-5is5us")},m(r,i){v(r,e,i),I(n,e,null),z(e,t),s=!0},p:A,i(r){s||($(n.$$.fragment,r),s=!0)},o(r){m(n.$$.fragment,r),s=!1},d(r){r&&h(e),_(n)}}}class Qn extends H{constructor(e){super(),O(this,e,null,Xn,D,{})}}class se{constructor(e){K(this,"type","plainText");this.text=e}}class ye{constructor(e){K(this,"type","specialBlock");this.text=e}}function Le(o){return o.map(e=>e.text).join("")}function es(o){let e,n,t,s,r=(!o[0].status||o[0].status===ce.success)&&o[4]===Le(o[3]);e=new fn({props:{renderers:o[5],markdown:o[1]+o[4]}});let i=r&&st(o);return{c(){b(e.$$.fragment),n=J(),i&&i.c(),t=Y()},m(a,c){I(e,a,c),v(a,n,c),i&&i.m(a,c),v(a,t,c),s=!0},p(a,c){const l={};18&c&&(l.markdown=a[1]+a[4]),e.$set(l),25&c&&(r=(!a[0].status||a[0].status===ce.success)&&a[4]===Le(a[3])),r?i?(i.p(a,c),25&c&&$(i,1)):(i=st(a),i.c(),$(i,1),i.m(t.parentNode,t)):i&&(Z(),m(i,1,1,()=>{i=null}),j())},i(a){s||($(e.$$.fragment,a),$(i),s=!0)},o(a){m(e.$$.fragment,a),m(i),s=!1},d(a){a&&(h(n),h(t)),_(e,a),i&&i.d(a)}}}function ts(o){let e;function n(r,i){return r[0].display_error_message?rs:r[0].response_text&&r[0].response_text.length>0?os:ss}let t=n(o),s=t(o);return{c(){e=q("div"),s.c(),x(e,"class","c-msg-failure svelte-9a9fi8")},m(r,i){v(r,e,i),s.m(e,null)},p(r,i){t===(t=n(r))&&s?s.p(r,i):(s.d(1),s=t(r),s&&(s.c(),s.m(e,null)))},i:A,o:A,d(r){r&&h(e),s.d()}}}function ns(o){let e,n;return e=new Qn({}),{c(){b(e.$$.fragment)},m(t,s){I(e,t,s),n=!0},p:A,i(t){n||($(e.$$.fragment,t),n=!0)},o(t){m(e.$$.fragment,t),n=!1},d(t){_(e,t)}}}function st(o){let e;const n=o[7].default,t=fe(n,o,o[8],null);return{c(){t&&t.c()},m(s,r){t&&t.m(s,r),e=!0},p(s,r){t&&t.p&&(!e||256&r)&&ge(t,n,s,s[8],e?ve(n,s[8],r,null):he(s[8]),null)},i(s){e||($(t,s),e=!0)},o(s){m(t,s),e=!1},d(s){t&&t.d(s)}}}function ss(o){let e,n,t=o[2]&&ot(o);return{c(){e=L("We encountered an issue sending your message."),t&&t.c(),n=L(".")},m(s,r){v(s,e,r),t&&t.m(s,r),v(s,n,r)},p(s,r){s[2]?t?t.p(s,r):(t=ot(s),t.c(),t.m(n.parentNode,n)):t&&(t.d(1),t=null)},d(s){s&&(h(e),h(n)),t&&t.d(s)}}}function os(o){let e,n,t=o[2]&&rt(o);return{c(){e=L("Connection lost."),t&&t.c(),n=Y()},m(s,r){v(s,e,r),t&&t.m(s,r),v(s,n,r)},p(s,r){s[2]?t?t.p(s,r):(t=rt(s),t.c(),t.m(n.parentNode,n)):t&&(t.d(1),t=null)},d(s){s&&(h(e),h(n)),t&&t.d(s)}}}function rs(o){let e,n=o[0].display_error_message+"";return{c(){e=L(n)},m(t,s){v(t,e,s)},p(t,s){1&s&&n!==(n=t[0].display_error_message+"")&&G(e,n)},d(t){t&&h(e)}}}function ot(o){let e,n,t,s;return{c(){e=L(`Please
            `),n=q("button"),n.textContent="try again",x(n,"class","svelte-9a9fi8")},m(r,i){v(r,e,i),v(r,n,i),t||(s=te(n,"click",_e(function(){xe(o[2])&&o[2].apply(this,arguments)})),t=!0)},p(r,i){o=r},d(r){r&&(h(e),h(n)),t=!1,s()}}}function rt(o){let e,n,t,s,r;return{c(){e=L(`Please
            `),n=q("button"),n.textContent="try again",t=L("."),x(n,"class","svelte-9a9fi8")},m(i,a){v(i,e,a),v(i,n,a),v(i,t,a),s||(r=te(n,"click",_e(function(){xe(o[2])&&o[2].apply(this,arguments)})),s=!0)},p(i,a){o=i},d(i){i&&(h(e),h(n),h(t)),s=!1,r()}}}function is(o){let e,n,t,s;const r=[ns,ts,es],i=[];function a(c,l){return(!c[0].status||c[0].status===ce.sent)&&c[4].length<=0?0:c[0].status===ce.failed?1:2}return e=a(o),n=i[e]=r[e](o),{c(){n.c(),t=Y()},m(c,l){i[e].m(c,l),v(c,t,l),s=!0},p(c,l){let d=e;e=a(c),e===d?i[e].p(c,l):(Z(),m(i[d],1,1,()=>{i[d]=null}),j(),n=i[e],n?n.p(c,l):(n=i[e]=r[e](c),n.c()),$(n,1),n.m(t.parentNode,t))},i(c){s||($(n),s=!0)},o(c){m(n),s=!1},d(c){c&&h(t),i[e].d(c)}}}function as(o){let e,n;return e=new Fe({props:{isAugment:!0,$$slots:{content:[is]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment)},m(t,s){I(e,t,s),n=!0},p(t,[s]){const r={};287&s&&(r.$$scope={dirty:s,ctx:t}),e.$set(r)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){m(e.$$.fragment,t),n=!1},d(t){_(e,t)}}}function cs(o,e,n){let t,s,{$$slots:r={},$$scope:i}=e,{turn:a}=e,{preamble:c=""}=e,{resendTurn:l}=e,{markdownBlocks:d=[]}=e,u={code:mn,codespan:pn,link:Zt};return qe(()=>{if(a.seen_state===Yt.seen)return void n(0,a.response_text=Le(t),a);let f=Date.now();const g=function*(p){for(const y of p)if(y.type==="specialBlock")yield y.text;else for(const S of y.text)yield S}(t);let w=g.next();const R=()=>{let p=Date.now();const y=Math.round((p-f)/8);let S="";for(let M=0;M<y&&!w.done;M++)S+=w.value,w=g.next();n(0,a.response_text+=S,a),f=p,w.done||requestAnimationFrame(R)};R()}),o.$$set=f=>{"turn"in f&&n(0,a=f.turn),"preamble"in f&&n(1,c=f.preamble),"resendTurn"in f&&n(2,l=f.resendTurn),"markdownBlocks"in f&&n(6,d=f.markdownBlocks),"$$scope"in f&&n(8,i=f.$$scope)},o.$$.update=()=>{1&o.$$.dirty&&n(0,a.response_text=a.response_text??"",a),65&o.$$.dirty&&n(3,t=a.response_text?[new se(a.response_text)]:d),1&o.$$.dirty&&n(4,s=a.response_text??"")},[a,c,l,t,s,u,d,r,i]}class ls extends H{constructor(e){super(),O(this,e,cs,as,D,{turn:0,preamble:1,resendTurn:2,markdownBlocks:6})}}function us(o){let e,n,t,s;return e=new Ee.Content({props:{content:o[2]}}),t=new wt({props:{requestEditorFocus:o[4]}}),{c(){b(e.$$.fragment),n=J(),b(t.$$.fragment)},m(r,i){I(e,r,i),v(r,n,i),I(t,r,i),s=!0},p:A,i(r){s||($(e.$$.fragment,r),$(t.$$.fragment,r),s=!0)},o(r){m(e.$$.fragment,r),m(t.$$.fragment,r),s=!1},d(r){r&&h(n),_(e,r),_(t,r)}}}function ds(o){let e,n,t={slot:"content",$$slots:{default:[us]},$$scope:{ctx:o}};return e=new Ee.Root({props:t}),o[7](e),{c(){b(e.$$.fragment)},m(s,r){I(e,s,r),n=!0},p(s,r){const i={};512&r&&(i.$$scope={dirty:r,ctx:s}),e.$set(i)},i(s){n||($(e.$$.fragment,s),n=!0)},o(s){m(e.$$.fragment,s),n=!1},d(s){o[7](null),_(e,s)}}}function $s(o){let e,n,t,s;return e=new Fe({props:{$$slots:{content:[ds]},$$scope:{ctx:o}}}),t=new ls({props:{turn:o[1],markdownBlocks:o[3]}}),{c(){b(e.$$.fragment),n=J(),b(t.$$.fragment)},m(r,i){I(e,r,i),v(r,n,i),I(t,r,i),s=!0},p(r,[i]){const a={};513&i&&(a.$$scope={dirty:i,ctx:r}),e.$set(a)},i(r){s||($(e.$$.fragment,r),$(t.$$.fragment,r),s=!0)},o(r){m(e.$$.fragment,r),m(t.$$.fragment,r),s=!1},d(r){r&&h(n),_(e,r),_(t,r)}}}function ms(o,e,n){let{flagsModel:t}=e,{turn:s}=e;const r={seen_state:s.seen_state,status:ce.success},i=[[new ye("[**Chat**](https://docs.augmentcode.com/using-augment/chat)"),new se(": Explore your codebase, get up to speed on unfamiliar code, and work through technical problems using natural language.")],[new ye("[**Code Completions**](https://docs.augmentcode.com/using-augment/completions)"),new se(": Receive intelligent code suggestions that take your entire codebase into account as you type.")],[new ye("[**Instructions**](https://docs.augmentcode.com/using-augment/instructions)"),new se(": Use natural language prompts to write or modify code, applied as a diff for your review.")]];t.suggestedEditsAvailable&&i.push([new ye("[**Suggested Edits**](https://docs.augmentcode.com/using-augment/suggested-edits)"),new se(": Take your completions beyond the cursor and across your workspace.")]);let a,c=[new se(`Welcome to Augment!

Augment can help you understand code, debug issues, and ship faster with its deep understanding of your codebase. Here is what Augment can do for you:

`),...i.flatMap((l,d)=>[new se(`${d+1}. `),...l,new se(`

`)]),new se("Ask questions to learn more! Just remember to tag **@Augment** when asking about Augment's capabilities.")];return o.$$set=l=>{"flagsModel"in l&&n(5,t=l.flagsModel),"turn"in l&&n(6,s=l.turn)},[a,r,{type:"doc",content:[{type:"paragraph",content:[{type:"text",text:"What can "},{type:"mention",attrs:{id:"Augment",label:"Augment",data:{id:"Augment",label:"Augment"}}},{type:"text",text:" do?"}]}]},c,function(){a==null||a.requestFocus()},t,s,function(l){ee[l?"unshift":"push"](()=>{a=l,n(0,a)})}]}class Ao extends H{constructor(e){super(),O(this,e,ms,$s,D,{flagsModel:5,turn:6})}}function ps(o){let e,n;return{c(){e=ie("svg"),n=ie("path"),x(n,"d","M6.04995 2.74998C6.04995 2.44623 5.80371 2.19998 5.49995 2.19998C5.19619 2.19998 4.94995 2.44623 4.94995 2.74998V12.25C4.94995 12.5537 5.19619 12.8 5.49995 12.8C5.80371 12.8 6.04995 12.5537 6.04995 12.25V2.74998ZM10.05 2.74998C10.05 2.44623 9.80371 2.19998 9.49995 2.19998C9.19619 2.19998 8.94995 2.44623 8.94995 2.74998V12.25C8.94995 12.5537 9.19619 12.8 9.49995 12.8C9.80371 12.8 10.05 12.5537 10.05 12.25V2.74998Z"),x(n,"fill","currentColor"),x(n,"fill-rule","evenodd"),x(n,"clip-rule","evenodd"),x(e,"width","15"),x(e,"height","15"),x(e,"viewBox","0 0 15 15"),x(e,"fill","none"),x(e,"xmlns","http://www.w3.org/2000/svg")},m(t,s){v(t,e,s),z(e,n)},p:A,i:A,o:A,d(t){t&&h(e)}}}class fs extends H{constructor(e){super(),O(this,e,null,ps,D,{})}}function gs(o){let e,n,t,s,r;return n=new fs({}),{c(){e=q("span"),b(n.$$.fragment),t=L(`
  Waiting for user input`),s=L(o[0]),x(e,"class","c-gen-response svelte-5is5us")},m(i,a){v(i,e,a),I(n,e,null),z(e,t),z(e,s),r=!0},p(i,[a]){(!r||1&a)&&G(s,i[0])},i(i){r||($(n.$$.fragment,i),r=!0)},o(i){m(n.$$.fragment,i),r=!1},d(i){i&&h(e),_(n)}}}function hs(o,e,n){let t=".";return qe(()=>{const s=setInterval(()=>{n(0,t=t.length>=3?".":t+".")},500);return()=>clearInterval(s)}),[t]}class Po extends H{constructor(e){super(),O(this,e,hs,gs,D,{})}}function vs(o){let e,n,t,s,r;return n=new gt({props:{size:1}}),{c(){e=q("span"),b(n.$$.fragment),t=J(),s=L(o[0]),x(e,"class","c-retry-response svelte-1lxm8qk")},m(i,a){v(i,e,a),I(n,e,null),z(e,t),z(e,s),r=!0},p(i,[a]){(!r||1&a)&&G(s,i[0])},i(i){r||($(n.$$.fragment,i),r=!0)},o(i){m(n.$$.fragment,i),r=!1},d(i){i&&h(e),_(n)}}}function xs(o,e,n){let{message:t="Retrying..."}=e;return o.$$set=s=>{"message"in s&&n(0,t=s.message)},[t]}class No extends H{constructor(e){super(),O(this,e,xs,vs,D,{message:0})}}function ws(o){let e,n,t;return e=new cn({}),{c(){b(e.$$.fragment),n=L(`
    Stopped`)},m(s,r){I(e,s,r),v(s,n,r),t=!0},i(s){t||($(e.$$.fragment,s),t=!0)},o(s){m(e.$$.fragment,s),t=!1},d(s){s&&h(n),_(e,s)}}}function ys(o){let e,n,t;return n=new ht({props:{size:1,$$slots:{default:[ws]},$$scope:{ctx:o}}}),{c(){e=q("span"),b(n.$$.fragment),x(e,"class","c-stopped svelte-lv19x6")},m(s,r){v(s,e,r),I(n,e,null),t=!0},p(s,[r]){const i={};1&r&&(i.$$scope={dirty:r,ctx:s}),n.$set(i)},i(s){t||($(n.$$.fragment,s),t=!0)},o(s){m(n.$$.fragment,s),t=!1},d(s){s&&h(e),_(n)}}}class Bo extends H{constructor(e){super(),O(this,e,null,ys,D,{})}}function Cs(o){let e,n;return{c(){e=ie("svg"),n=ie("path"),x(n,"fill-rule","evenodd"),x(n,"clip-rule","evenodd"),x(n,"d","M4.85355 2.14645C5.04882 2.34171 5.04882 2.65829 4.85355 2.85355L3.70711 4H9C11.4853 4 13.5 6.01472 13.5 8.5C13.5 10.9853 11.4853 13 9 13H5C4.72386 13 4.5 12.7761 4.5 12.5C4.5 12.2239 4.72386 12 5 12H9C10.933 12 12.5 10.433 12.5 8.5C12.5 6.567 10.933 5 9 5H3.70711L4.85355 6.14645C5.04882 6.34171 5.04882 6.65829 4.85355 6.85355C4.65829 7.04882 4.34171 7.04882 4.14645 6.85355L2.14645 4.85355C1.95118 4.65829 1.95118 4.34171 2.14645 4.14645L4.14645 2.14645C4.34171 1.95118 4.65829 1.95118 4.85355 2.14645Z"),x(n,"fill","currentColor"),x(e,"width","15"),x(e,"height","15"),x(e,"viewBox","0 0 15 15"),x(e,"fill","none"),x(e,"xmlns","http://www.w3.org/2000/svg")},m(t,s){v(t,e,s),z(e,n)},p:A,i:A,o:A,d(t){t&&h(e)}}}class It extends H{constructor(e){super(),O(this,e,null,Cs,D,{})}}function ks(o){let e,n,t;return{c(){e=ie("svg"),n=ie("path"),t=ie("path"),x(n,"fill-rule","evenodd"),x(n,"clip-rule","evenodd"),x(n,"d","M3.1784 5.56111C3.17842 5.85569 3.41722 6.09449 3.71173 6.09444L9.92275 6.09447C10.0585 6.09447 10.1929 6.06857 10.3189 6.01818L13.9947 4.54786C14.1973 4.46681 14.33 4.27071 14.3301 4.05261C14.33 3.83458 14.1973 3.63846 13.9948 3.55744L10.3189 2.08711C10.1929 2.0367 10.0584 2.01083 9.92278 2.01079L3.71173 2.01079C3.41722 2.01084 3.17844 2.24962 3.1784 2.54412L3.1784 5.56111ZM9.92275 5.0278L4.2451 5.02781L4.24509 3.07749L9.92278 3.07745L11.5339 3.72196L12.2527 4.05263C12.2527 4.05263 11.8167 4.25864 11.534 4.38331C10.9139 4.65675 9.92275 5.0278 9.92275 5.0278Z"),x(n,"fill","currentColor"),x(t,"fill-rule","evenodd"),x(t,"clip-rule","evenodd"),x(t,"d","M8.53346 1.59998C8.53346 1.30543 8.29468 1.06665 8.00013 1.06665C7.70558 1.06665 7.4668 1.30543 7.4668 1.59998V3.07746L8.53346 3.07745V1.59998ZM8.53346 5.0278L7.4668 5.0278V14.4C7.4668 14.6945 7.70558 14.9333 8.00013 14.9333C8.29468 14.9333 8.53346 14.6945 8.53346 14.4V5.0278Z"),x(t,"fill","currentColor"),x(e,"width","15"),x(e,"height","15"),x(e,"viewBox","0 0 15 15"),x(e,"fill","none"),x(e,"xmlns","http://www.w3.org/2000/svg")},m(s,r){v(s,e,r),z(e,n),z(e,t)},p:A,i:A,o:A,d(s){s&&h(e)}}}class _t extends H{constructor(e){super(),O(this,e,null,ks,D,{})}}function it(o){let e,n,t,s,r;return n=new vn({props:{size:1,insetContent:!0,variant:"ghost",class:"c-checkpoint-tag","data-testid":"checkpoint-version-tag",$$slots:{default:[Ts]},$$scope:{ctx:o}}}),n.$on("click",o[17]),s=new Se({props:{variant:o[6]?"soft":"ghost-block",color:"neutral",size:1,disabled:o[6]||o[4],class:"c-revert-button","data-testid":"revert-button",$$slots:{default:[Ls]},$$scope:{ctx:o}}}),s.$on("click",o[12]),{c(){e=q("div"),b(n.$$.fragment),t=J(),b(s.$$.fragment),x(e,"class","c-checkpoint-container svelte-q20gs5"),x(e,"data-checkpoint-number",o[0]),U(e,"c-checkpoint-container--target-checkpoint",o[6]),U(e,"c-checkpoint-container--dimmed-marker",o[5])},m(i,a){v(i,e,a),I(n,e,null),z(e,t),I(s,e,null),r=!0},p(i,a){const c={};1048778&a&&(c.$$scope={dirty:a,ctx:i}),n.$set(c);const l={};64&a&&(l.variant=i[6]?"soft":"ghost-block"),80&a&&(l.disabled=i[6]||i[4]),1048656&a&&(l.$$scope={dirty:a,ctx:i}),s.$set(l),(!r||1&a)&&x(e,"data-checkpoint-number",i[0]),(!r||64&a)&&U(e,"c-checkpoint-container--target-checkpoint",i[6]),(!r||32&a)&&U(e,"c-checkpoint-container--dimmed-marker",i[5])},i(i){r||($(n.$$.fragment,i),$(s.$$.fragment,i),r=!0)},o(i){m(n.$$.fragment,i),m(s.$$.fragment,i),r=!1},d(i){i&&h(e),_(n),_(s)}}}function bs(o){let e,n;return e=new _t({props:{slot:"leftIcon"}}),{c(){b(e.$$.fragment)},m(t,s){I(e,t,s),n=!0},p:A,i(t){n||($(e.$$.fragment,t),n=!0)},o(t){m(e.$$.fragment,t),n=!1},d(t){_(e,t)}}}function Is(o){let e,n;return{c(){e=L("Checkpoint "),n=L(o[3])},m(t,s){v(t,e,s),v(t,n,s)},p(t,s){8&s&&G(n,t[3])},d(t){t&&(h(e),h(n))}}}function _s(o){let e,n=ke(o[7])+"";return{c(){e=L(n)},m(t,s){v(t,e,s)},p(t,s){128&s&&n!==(n=ke(t[7])+"")&&G(e,n)},d(t){t&&h(e)}}}function Es(o){let e;return{c(){e=L(o[1])},m(n,t){v(n,e,t)},p(n,t){2&t&&G(e,n[1])},d(n){n&&h(e)}}}function Ss(o){let e;function n(r,i){return r[1]?Es:r[6]?_s:void 0}let t=n(o),s=t&&t(o);return{c(){s&&s.c(),e=Y()},m(r,i){s&&s.m(r,i),v(r,e,i)},p(r,i){t===(t=n(r))&&s?s.p(r,i):(s&&s.d(1),s=t&&t(r),s&&(s.c(),s.m(e.parentNode,e)))},d(r){r&&h(e),s&&s.d(r)}}}function Ts(o){let e,n;return e=new yt({props:{size:1,shrink:!0,align:"left",$$slots:{grayText:[Ss],text:[Is],leftIcon:[bs]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment)},m(t,s){I(e,t,s),n=!0},p(t,s){const r={};1048778&s&&(r.$$scope={dirty:s,ctx:t}),e.$set(r)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){m(e.$$.fragment,t),n=!1},d(t){_(e,t)}}}function Rs(o){let e,n;return e=new It({}),{c(){b(e.$$.fragment)},m(t,s){I(e,t,s),n=!0},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){m(e.$$.fragment,t),n=!1},d(t){_(e,t)}}}function Ls(o){let e,n;return e=new Ae({props:{triggerOn:[ze.Hover],content:o[6]||o[4]?"Cannot revert to current version":"Revert to this version",$$slots:{default:[Rs]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment)},m(t,s){I(e,t,s),n=!0},p(t,s){const r={};80&s&&(r.content=t[6]||t[4]?"Cannot revert to current version":"Revert to this version"),1048576&s&&(r.$$scope={dirty:s,ctx:t}),e.$set(r)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){m(e.$$.fragment,t),n=!1},d(t){_(e,t)}}}function Ms(o){let e,n,t=(!o[4]||o[2])&&it(o);return{c(){t&&t.c(),e=Y()},m(s,r){t&&t.m(s,r),v(s,e,r),n=!0},p(s,[r]){!s[4]||s[2]?t?(t.p(s,r),20&r&&$(t,1)):(t=it(s),t.c(),$(t,1),t.m(e.parentNode,e)):t&&(Z(),m(t,1,1,()=>{t=null}),j())},i(s){n||($(t),n=!0)},o(s){m(t),n=!1},d(s){s&&h(e),t&&t.d(s)}}}function qs(o,e,n){let t,s,r,i,a,c,l,d,u,f,g,{turn:w}=e;const R=ae("checkpointStore"),{targetCheckpointIdx:p,totalCheckpointCount:y,uuidToIdx:S}=R;function M(C){qt(p,f=C,f)}return re(o,p,C=>n(15,f=C)),re(o,y,C=>n(14,u=C)),re(o,S,C=>n(16,g=C)),o.$$set=C=>{"turn"in C&&n(13,w=C.turn)},o.$$.update=()=>{var C,V,T;73728&o.$$.dirty&&n(0,t=g.get(w.uuid)??-1),8192&o.$$.dirty&&n(7,s=w.toTimestamp),49153&o.$$.dirty&&n(6,(V=u,r=(C=t)===(T=f)||T===void 0&&C===V-1)),49153&o.$$.dirty&&n(5,i=function(P,W,F){return P===F&&F!==void 0&&F<W-1}(t,u,f)),16385&o.$$.dirty&&n(4,a=t===u-1),1&o.$$.dirty&&n(3,c=t+1),8192&o.$$.dirty&&n(2,l=Ce(w)),8192&o.$$.dirty&&n(1,d=Ce(w)?function(P){var W,F;if((W=P.revertTarget)!=null&&W.uuid){const E=g.get(P.revertTarget.uuid);return E===void 0?void 0:`Reverted to Checkpoint ${E+1}`}return(F=P.revertTarget)!=null&&F.filePath?`Undid changes to ${P.revertTarget.filePath.relPath}`:void 0}(w):void 0)},[t,d,l,c,a,i,r,s,p,y,S,M,async function(){await R.revertToCheckpoint(w.uuid)},w,u,f,g,()=>M(t)]}class Ho extends H{constructor(e){super(),O(this,e,qs,Ms,D,{turn:13})}}function Fs(o){let e,n;return e=new _t({props:{slot:"leftIcon"}}),{c(){b(e.$$.fragment)},m(t,s){I(e,t,s),n=!0},p:A,i(t){n||($(e.$$.fragment,t),n=!0)},o(t){m(e.$$.fragment,t),n=!1},d(t){_(e,t)}}}function at(o){let e,n,t,s,r,i,a=o[1]===1?"":"s";return{c(){e=q("span"),n=L("("),t=L(o[1]),s=L(" file"),r=L(a),i=L(")"),x(e,"class","c-checkpoint-files-count")},m(c,l){v(c,e,l),z(e,n),z(e,t),z(e,s),z(e,r),z(e,i)},p(c,l){2&l&&G(t,c[1]),2&l&&a!==(a=c[1]===1?"":"s")&&G(r,a)},d(c){c&&h(e)}}}function zs(o){let e,n,t,s,r=o[1]>0&&at(o);return{c(){e=L("Checkpoint "),n=L(o[0]),t=J(),r&&r.c(),s=Y()},m(i,a){v(i,e,a),v(i,n,a),v(i,t,a),r&&r.m(i,a),v(i,s,a)},p(i,a){1&a&&G(n,i[0]),i[1]>0?r?r.p(i,a):(r=at(i),r.c(),r.m(s.parentNode,s)):r&&(r.d(1),r=null)},d(i){i&&(h(e),h(n),h(t),h(s)),r&&r.d(i)}}}function As(o){let e;return{c(){e=L(o[2])},m(n,t){v(n,e,t)},p(n,t){4&t&&G(e,n[2])},d(n){n&&h(e)}}}function Ps(o){let e;return{c(){e=L(o[3])},m(n,t){v(n,e,t)},p(n,t){8&t&&G(e,n[3])},d(n){n&&h(e)}}}function Ns(o){let e;function n(r,i){return r[3]?Ps:r[2]?As:void 0}let t=n(o),s=t&&t(o);return{c(){s&&s.c(),e=Y()},m(r,i){s&&s.m(r,i),v(r,e,i)},p(r,i){t===(t=n(r))&&s?s.p(r,i):(s&&s.d(1),s=t&&t(r),s&&(s.c(),s.m(e.parentNode,e)))},d(r){r&&h(e),s&&s.d(r)}}}function ct(o){let e,n,t;return n=new ln({props:{totalAddedLines:o[4].totalAddedLines,totalRemovedLines:o[4].totalRemovedLines}}),{c(){e=q("div"),b(n.$$.fragment),x(e,"class","c-checkpoint-summary")},m(s,r){v(s,e,r),I(n,e,null),t=!0},p(s,r){const i={};16&r&&(i.totalAddedLines=s[4].totalAddedLines),16&r&&(i.totalRemovedLines=s[4].totalRemovedLines),n.$set(i)},i(s){t||($(n.$$.fragment,s),t=!0)},o(s){m(n.$$.fragment,s),t=!1},d(s){s&&h(e),_(n)}}}function lt(o){let e,n;return e=new Se({props:{variant:"ghost-block",color:"neutral",size:1,class:"c-revert-button","data-testid":"revert-button",$$slots:{default:[Hs]},$$scope:{ctx:o}}}),e.$on("click",function(){xe(o[7])&&o[7].apply(this,arguments)}),{c(){b(e.$$.fragment)},m(t,s){I(e,t,s),n=!0},p(t,s){o=t;const r={};256&s&&(r.$$scope={dirty:s,ctx:o}),e.$set(r)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){m(e.$$.fragment,t),n=!1},d(t){_(e,t)}}}function Bs(o){let e,n;return e=new It({}),{c(){b(e.$$.fragment)},m(t,s){I(e,t,s),n=!0},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){m(e.$$.fragment,t),n=!1},d(t){_(e,t)}}}function Hs(o){let e,n;return e=new Ae({props:{triggerOn:[ze.Hover],content:"Revert to this Checkpoint",$$slots:{default:[Bs]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment)},m(t,s){I(e,t,s),n=!0},p(t,s){const r={};256&s&&(r.$$scope={dirty:s,ctx:t}),e.$set(r)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){m(e.$$.fragment,t),n=!1},d(t){_(e,t)}}}function Os(o){let e,n,t,s,r,i,a,c;t=new gn({}),r=new yt({props:{size:1,shrink:!0,align:"left",$$slots:{grayText:[Ns],text:[zs],leftIcon:[Fs]},$$scope:{ctx:o}}});let l=o[5]&&ct(o),d=!o[6]&&lt(o);return{c(){e=q("div"),n=q("div"),b(t.$$.fragment),s=J(),b(r.$$.fragment),i=J(),l&&l.c(),a=J(),d&&d.c(),x(n,"class","c-checkpoint-tag"),x(e,"class","c-checkpoint-header svelte-htx8xt")},m(u,f){v(u,e,f),z(e,n),I(t,n,null),z(n,s),I(r,n,null),z(e,i),l&&l.m(e,null),z(e,a),d&&d.m(e,null),c=!0},p(u,[f]){const g={};271&f&&(g.$$scope={dirty:f,ctx:u}),r.$set(g),u[5]?l?(l.p(u,f),32&f&&$(l,1)):(l=ct(u),l.c(),$(l,1),l.m(e,a)):l&&(Z(),m(l,1,1,()=>{l=null}),j()),u[6]?d&&(Z(),m(d,1,1,()=>{d=null}),j()):d?(d.p(u,f),64&f&&$(d,1)):(d=lt(u),d.c(),$(d,1),d.m(e,null))},i(u){c||($(t.$$.fragment,u),$(r.$$.fragment,u),$(l),$(d),c=!0)},o(u){m(t.$$.fragment,u),m(r.$$.fragment,u),m(l),m(d),c=!1},d(u){u&&h(e),_(t),_(r),l&&l.d(),d&&d.d()}}}function Ds(o,e,n){let{displayCheckpointIdx:t}=e,{filesCount:s=0}=e,{timestamp:r=""}=e,{revertMessage:i}=e,{diffSummary:a={totalAddedLines:0,totalRemovedLines:0}}=e,{hasChanges:c=!1}=e,{isTarget:l=!1}=e,{onRevertClick:d}=e;return o.$$set=u=>{"displayCheckpointIdx"in u&&n(0,t=u.displayCheckpointIdx),"filesCount"in u&&n(1,s=u.filesCount),"timestamp"in u&&n(2,r=u.timestamp),"revertMessage"in u&&n(3,i=u.revertMessage),"diffSummary"in u&&n(4,a=u.diffSummary),"hasChanges"in u&&n(5,c=u.hasChanges),"isTarget"in u&&n(6,l=u.isTarget),"onRevertClick"in u&&n(7,d=u.onRevertClick)},[t,s,r,i,a,c,l,d]}class Js extends H{constructor(e){super(),O(this,e,Ds,Os,D,{displayCheckpointIdx:0,filesCount:1,timestamp:2,revertMessage:3,diffSummary:4,hasChanges:5,isTarget:6,onRevertClick:7})}}function ut(o,e,n){const t=o.slice();return t[33]=e[n],t}function dt(o){let e,n,t,s,r,i,a;function c(d){o[27](d)}let l={class:"c-checkpoint-collapsible",stickyHeader:!0,$$slots:{header:[Ws],default:[js]},$$scope:{ctx:o}};return o[3]!==void 0&&(l.collapsed=o[3]),n=new hn({props:l}),ee.push(()=>be(n,"collapsed",c)),{c(){e=q("div"),b(n.$$.fragment),x(e,"class","c-checkpoint-container svelte-mxd32u"),x(e,"data-checkpoint-number",o[2]),U(e,"c-checkpoint-container--target-checkpoint",o[11]),U(e,"c-checkpoint-container--dimmed-marker",o[10])},m(d,u){v(d,e,u),I(n,e,null),r=!0,i||(a=ft(s=jt.call(null,e,{onVisible:o[28],scrollTarget:document.body})),i=!0)},p(d,u){const f={};6522&u[0]|32&u[1]&&(f.$$scope={dirty:u,ctx:d}),!t&&8&u[0]&&(t=!0,f.collapsed=d[3],Ie(()=>t=!1)),n.$set(f),(!r||4&u[0])&&x(e,"data-checkpoint-number",d[2]),s&&xe(s.update)&&1&u[0]&&s.update.call(null,{onVisible:d[28],scrollTarget:document.body}),(!r||2048&u[0])&&U(e,"c-checkpoint-container--target-checkpoint",d[11]),(!r||1024&u[0])&&U(e,"c-checkpoint-container--dimmed-marker",d[10])},i(d){r||($(n.$$.fragment,d),r=!0)},o(d){m(n.$$.fragment,d),r=!1},d(d){d&&h(e),_(n),i=!1,a()}}}function Vs(o){let e,n,t;return n=new ht({props:{size:1,color:"neutral",$$slots:{default:[Zs]},$$scope:{ctx:o}}}),{c(){e=q("div"),b(n.$$.fragment),x(e,"class","c-edits-list c-edits-list--empty svelte-mxd32u")},m(s,r){v(s,e,r),I(n,e,null),t=!0},p(s,r){const i={};32&r[1]&&(i.$$scope={dirty:r,ctx:s}),n.$set(i)},i(s){t||($(n.$$.fragment,s),t=!0)},o(s){m(n.$$.fragment,s),t=!1},d(s){s&&h(e),_(n)}}}function Us(o){let e,n,t=Ze(o[1]),s=[];for(let i=0;i<t.length;i+=1)s[i]=$t(ut(o,t,i));const r=i=>m(s[i],1,1,()=>{s[i]=null});return{c(){e=q("div");for(let i=0;i<s.length;i+=1)s[i].c();x(e,"class","c-edits-list svelte-mxd32u")},m(i,a){v(i,e,a);for(let c=0;c<s.length;c+=1)s[c]&&s[c].m(e,null);n=!0},p(i,a){if(196610&a[0]){let c;for(t=Ze(i[1]),c=0;c<t.length;c+=1){const l=ut(i,t,c);s[c]?(s[c].p(l,a),$(s[c],1)):(s[c]=$t(l),s[c].c(),$(s[c],1),s[c].m(e,null))}for(Z(),c=t.length;c<s.length;c+=1)r(c);j()}},i(i){if(!n){for(let a=0;a<t.length;a+=1)$(s[a]);n=!0}},o(i){s=s.filter(Boolean);for(let a=0;a<s.length;a+=1)m(s[a]);n=!1},d(i){i&&h(e),Ft(s,i)}}}function Zs(o){let e;return{c(){e=L("No changes to show")},m(n,t){v(n,e,t)},d(n){n&&h(e)}}}function $t(o){let e,n;function t(){return o[25](o[33])}function s(){return o[26](o[33])}return e=new un({props:{qualifiedPathName:o[33].qualifiedPathName,lineChanges:o[33].changesSummary,onClickFile:t,onClickReview:s}}),{c(){b(e.$$.fragment)},m(r,i){I(e,r,i),n=!0},p(r,i){o=r;const a={};2&i[0]&&(a.qualifiedPathName=o[33].qualifiedPathName),2&i[0]&&(a.lineChanges=o[33].changesSummary),2&i[0]&&(a.onClickFile=t),2&i[0]&&(a.onClickReview=s),e.$set(a)},i(r){n||($(e.$$.fragment,r),n=!0)},o(r){m(e.$$.fragment,r),n=!1},d(r){_(e,r)}}}function js(o){let e,n,t,s;const r=[Us,Vs],i=[];function a(c,l){return c[4]?0:c[3]?-1:1}return~(e=a(o))&&(n=i[e]=r[e](o)),{c(){n&&n.c(),t=Y()},m(c,l){~e&&i[e].m(c,l),v(c,t,l),s=!0},p(c,l){let d=e;e=a(c),e===d?~e&&i[e].p(c,l):(n&&(Z(),m(i[d],1,1,()=>{i[d]=null}),j()),~e?(n=i[e],n?n.p(c,l):(n=i[e]=r[e](c),n.c()),$(n,1),n.m(t.parentNode,t)):n=null)},i(c){s||($(n),s=!0)},o(c){m(n),s=!1},d(c){c&&h(t),~e&&i[e].d(c)}}}function Ws(o){let e,n;return e=new Js({props:{slot:"header",displayCheckpointIdx:o[8],filesCount:o[1].length,timestamp:ke(o[12]),revertMessage:o[6],diffSummary:o[5],hasChanges:o[4],isTarget:o[11],onRevertClick:o[18]}}),{c(){b(e.$$.fragment)},m(t,s){I(e,t,s),n=!0},p(t,s){const r={};256&s[0]&&(r.displayCheckpointIdx=t[8]),2&s[0]&&(r.filesCount=t[1].length),4096&s[0]&&(r.timestamp=ke(t[12])),64&s[0]&&(r.revertMessage=t[6]),32&s[0]&&(r.diffSummary=t[5]),16&s[0]&&(r.hasChanges=t[4]),2048&s[0]&&(r.isTarget=t[11]),e.$set(r)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){m(e.$$.fragment,t),n=!1},d(t){_(e,t)}}}function Gs(o){let e,n,t=(!o[9]||o[7])&&dt(o);return{c(){t&&t.c(),e=Y()},m(s,r){t&&t.m(s,r),v(s,e,r),n=!0},p(s,r){!s[9]||s[7]?t?(t.p(s,r),640&r[0]&&$(t,1)):(t=dt(s),t.c(),$(t,1),t.m(e.parentNode,e)):t&&(Z(),m(t,1,1,()=>{t=null}),j())},i(s){n||($(t),n=!0)},o(s){m(t),n=!1},d(s){s&&h(e),t&&t.d(s)}}}function Ks(o,e,n){let t,s,r,i,a,c,l,d,u,f,g,w,R,p,y,{turn:S}=e;const M=ae("checkpointStore"),C=ae("chatModel"),{targetCheckpointIdx:V,totalCheckpointCount:T,uuidToIdx:P}=M;re(o,V,N=>n(23,p=N)),re(o,T,N=>n(22,R=N)),re(o,P,N=>n(24,y=N));let W=!0;function F(N){C==null||C.extensionClient.openFile({repoRoot:N.rootPath,pathName:N.relPath,allowOutOfWorkspace:!0})}function E(N){C==null||C.extensionClient.showAgentReview(N,r,s,!1)}let X=[],oe=!1,de=!1;return o.$$set=N=>{"turn"in N&&n(19,S=N.turn)},o.$$.update=()=>{var N,we,le;17301504&o.$$.dirty[0]&&n(2,t=y.get(S.uuid)??-1),524288&o.$$.dirty[0]&&n(12,s=S.toTimestamp),524288&o.$$.dirty[0]&&(r=S.fromTimestamp),12582916&o.$$.dirty[0]&&n(11,(we=R,i=(N=t)===(le=p)||le===void 0&&N===we-1)),12582916&o.$$.dirty[0]&&n(10,a=function(k,ue,ne){return k===ne&&ne!==void 0&&ne<ue-1}(t,R,p)),4194308&o.$$.dirty[0]&&n(9,c=t===R-1),4&o.$$.dirty[0]&&n(8,l=t+1),524288&o.$$.dirty[0]&&n(7,d=Ce(S)),524288&o.$$.dirty[0]&&n(6,u=Ce(S)?function(k){var ue,ne;if((ue=k.revertTarget)!=null&&ue.uuid){const me=y.get(k.revertTarget.uuid);return me===void 0?void 0:`Reverted to Checkpoint ${me+1}`}return(ne=k.revertTarget)!=null&&ne.filePath?`Undid changes to ${k.revertTarget.filePath.relPath}`:void 0}(S):void 0),2621441&o.$$.dirty[0]&&oe&&S&&!de&&M.getCheckpointSummary(S).then(k=>{n(20,X=k),n(21,de=!0)}),1048576&o.$$.dirty[0]&&n(1,f=X.filter(k=>k.changesSummary&&(k.changesSummary.totalAddedLines>0||k.changesSummary.totalRemovedLines>0))),2&o.$$.dirty[0]&&n(5,g=f.reduce((k,ue)=>{var ne,me;return k.totalAddedLines+=((ne=ue.changesSummary)==null?void 0:ne.totalAddedLines)??0,k.totalRemovedLines+=((me=ue.changesSummary)==null?void 0:me.totalRemovedLines)??0,k},{totalAddedLines:0,totalRemovedLines:0})),2&o.$$.dirty[0]&&n(4,w=f.length>0)},[oe,f,t,W,w,g,u,d,l,c,a,i,s,V,T,P,F,E,function(){M.revertToCheckpoint(S.uuid)},S,X,de,R,p,y,N=>F(N.qualifiedPathName),N=>E(N.qualifiedPathName),function(N){W=N,n(3,W)},()=>n(0,oe=!0)]}class Oo extends H{constructor(e){super(),O(this,e,Ks,Gs,D,{turn:19},null,[-1,-1])}}function Ys(o){let e;const n=o[3].default,t=fe(n,o,o[4],null);return{c(){t&&t.c()},m(s,r){t&&t.m(s,r),e=!0},p(s,r){t&&t.p&&(!e||16&r)&&ge(t,n,s,s[4],e?ve(n,s[4],r,null):he(s[4]),null)},i(s){e||($(t,s),e=!0)},o(s){m(t,s),e=!1},d(s){t&&t.d(s)}}}function Xs(o){let e,n;return e=new Wt({props:{class:"c-chat-floating-container c-chat-floating-container--"+o[0],xPos:o[1],yPos:o[2],$$slots:{default:[Ys]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment)},m(t,s){I(e,t,s),n=!0},p(t,[s]){const r={};1&s&&(r.class="c-chat-floating-container c-chat-floating-container--"+t[0]),2&s&&(r.xPos=t[1]),4&s&&(r.yPos=t[2]),16&s&&(r.$$scope={dirty:s,ctx:t}),e.$set(r)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){m(e.$$.fragment,t),n=!1},d(t){_(e,t)}}}function Qs(o,e,n){let{$$slots:t={},$$scope:s}=e,{position:r="bottom"}=e,{xPos:i="middle"}=e,{yPos:a=r==="top"?"top":"bottom"}=e;return o.$$set=c=>{"position"in c&&n(0,r=c.position),"xPos"in c&&n(1,i=c.xPos),"yPos"in c&&n(2,a=c.yPos),"$$scope"in c&&n(4,s=c.$$scope)},[r,i,a,t,s]}class eo extends H{constructor(e){super(),O(this,e,Qs,Xs,D,{position:0,xPos:1,yPos:2})}}function to(o){let e,n,t=[{xmlns:"http://www.w3.org/2000/svg"},{"data-ds-icon":"fa"},{viewBox:"0 0 384 512"},o[0]],s={};for(let r=0;r<t.length;r+=1)s=pe(s,t[r]);return{c(){e=ie("svg"),n=new zt(!0),this.h()},l(r){e=At(r,"svg",{xmlns:!0,"data-ds-icon":!0,viewBox:!0});var i=Pt(e);n=Nt(i,!0),i.forEach(h),this.h()},h(){n.a=null,Oe(e,s)},m(r,i){Bt(r,e,i),n.m('<!--! Font Awesome Pro 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2024 Fonticons, Inc.--><path d="M174.6 472.6c4.5 4.7 10.8 7.4 17.4 7.4s12.8-2.7 17.4-7.4l168-176c9.2-9.6 8.8-24.8-.8-33.9s-24.8-8.8-33.9.8L216 396.1V56c0-13.3-10.7-24-24-24s-24 10.7-24 24v340.1L41.4 263.4c-9.2-9.6-24.3-9.9-33.9-.8s-9.9 24.3-.8 33.9l168 176z"/>',e)},p(r,[i]){Oe(e,s=Te(t,[{xmlns:"http://www.w3.org/2000/svg"},{"data-ds-icon":"fa"},{viewBox:"0 0 384 512"},1&i&&r[0]]))},i:A,o:A,d(r){r&&h(e)}}}function no(o,e,n){return o.$$set=t=>{n(0,e=pe(pe({},e),De(t)))},[e=De(e)]}class so extends H{constructor(e){super(),O(this,e,no,to,D,{})}}function mt(o){let e,n,t;return n=new Se({props:{class:"c-chat-floating-button",variant:"solid",color:"neutral",size:1,radius:"full",$$slots:{default:[oo]},$$scope:{ctx:o}}}),n.$on("click",o[1]),{c(){e=q("div"),b(n.$$.fragment),x(e,"class","c-msg-list-bottom-button svelte-rg7wt6")},m(s,r){v(s,e,r),I(n,e,null),t=!0},p(s,r){const i={};8&r&&(i.$$scope={dirty:r,ctx:s}),n.$set(i)},i(s){t||($(n.$$.fragment,s),t=!0)},o(s){m(n.$$.fragment,s),t=!1},d(s){s&&h(e),_(n)}}}function oo(o){let e,n;return e=new so({}),{c(){b(e.$$.fragment)},m(t,s){I(e,t,s),n=!0},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){m(e.$$.fragment,t),n=!1},d(t){_(e,t)}}}function ro(o){let e,n,t=o[0]&&mt(o);return{c(){t&&t.c(),e=Y()},m(s,r){t&&t.m(s,r),v(s,e,r),n=!0},p(s,r){s[0]?t?(t.p(s,r),1&r&&$(t,1)):(t=mt(s),t.c(),$(t,1),t.m(e.parentNode,e)):t&&(Z(),m(t,1,1,()=>{t=null}),j())},i(s){n||($(t),n=!0)},o(s){m(t),n=!1},d(s){s&&h(e),t&&t.d(s)}}}function io(o){let e,n;return e=new eo({props:{position:"bottom",$$slots:{default:[ro]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment)},m(t,s){I(e,t,s),n=!0},p(t,[s]){const r={};9&s&&(r.$$scope={dirty:s,ctx:t}),e.$set(r)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){m(e.$$.fragment,t),n=!1},d(t){_(e,t)}}}function ao(o,e,n){let{showScrollDown:t=!1}=e,{messageListElement:s=null}=e;return o.$$set=r=>{"showScrollDown"in r&&n(0,t=r.showScrollDown),"messageListElement"in r&&n(2,s=r.messageListElement)},[t,()=>{s&&xt(s,{smooth:!0})},s]}class Do extends H{constructor(e){super(),O(this,e,ao,io,D,{showScrollDown:0,messageListElement:2})}}export{Po as A,Fo as C,Ao as E,Lo as G,Do as M,No as R,Bo as S,Dn as U,Mo as a,So as b,To as c,We as d,zo as e,qo as f,Eo as g,ls as h,Qn as i,Ho as j,Oo as k,Ro as t};
