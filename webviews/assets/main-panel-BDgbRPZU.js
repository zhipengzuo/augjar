const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./index-p4Dt6o3z.js","./index-WUGq-ct8.css","./RemoteAgentSetup-DaE_fZ-V.js","./Keybindings-BPBUBuVi.js","./ButtonAugment-DueOA3_V.js","./ButtonAugment-D18gHYhX.css","./index-CkBhOCxh.js","./Content-7zb4jZEH.js","./globals-D0QH3NT1.js","./Content-b_LtFw1A.css","./index-CgJL-5Be.css","./TextTooltipAugment-C0ygVke5.js","./IconButtonAugment-B0XoCIXT.js","./IconButtonAugment-BTu-iglL.css","./TextTooltipAugment-DqxYn6Er.css","./chat-context-Dq8CyOam.js","./pen-to-square-DUXCbbi7.js","./file-paths-BEF4tZXQ.js","./chat-context-tclW2Ian.css","./MaterialIcon-9THX1buP.js","./MaterialIcon-BO_oU5T3.css","./exclamation-triangle-BQxrhBcR.js","./augment-logo-C66YBCMf.js","./Keybindings-Du4qMYSq.css","./VSCodeCodicon-CtqaAH8u.js","./VSCodeCodicon-DVaocTud.css","./github-hmyLGe0b.js","./github-C69UsBAv.css","./index-DwagmzSc.js","./circle-backslash-B3nG_JMr.js","./CollapseButtonAugment-C3mt1EeR.js","./toggleHighContrast-CKn954qg.js","./preload-helper-Dv6uf1Os.js","./toggleHighContrast-D4zjdeIP.css","./CollapseButtonAugment-hOZzE8JU.css","./design-system-init-Bqt81Pxb.js","./design-system-init-DLfYBEIT.css","./magnifying-glass-Dmz0PV9T.js","./magnifying-glass-D5JCKRwC.css","./ellipsis-Bz-dObmZ.js","./isObjectLike-Dcghr38G.js","./await_block-CgSfNRTu.js","./keypress-DD1aQVr0.js","./autofix-state-d-ymFdyn.js","./index-BOPL8f7w.js","./RemoteAgentSetup-DIxhKMjs.css","./MessageList-DKI8TvIX.js","./MessageListBottomButton-DmSVyLmH.js","./AugmentMessage-x438MRdb.js","./expand-Ccnb8uFO.js","./IconFilePath-DrTaSdRG.js","./LanguageIcon-e6aGriGL.js","./LanguageIcon-D78BqCXT.css","./next-edit-types-904A5ehg.js","./IconFilePath-CiKel2Kp.css","./mcp-logo-CiDifGtg.js","./play-DmB9WugJ.js","./AugmentMessage-CPr1APT6.css","./MessageListBottomButton-Sl4P9mkz.css","./MessageList-Bm8ly5ik.css","./VirtualizedMessageList-BAafiPKO.js","./VirtualizedMessageList-Dz2AHScg.css"])))=>i.map(i=>d[i]);
var yu=Object.defineProperty;var bu=(s,t,n)=>t in s?yu(s,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):s[t]=n;var st=(s,t,n)=>bu(s,typeof t!="symbol"?t+"":t,n);import{S as nt,d as ot,e as tt,P as Gt,y as F,j as E,a1 as dr,E as Pt,k as _,l as U,V as Yt,W as Xt,X as Kt,b as f,t as $,m as y,h as Nt,n as D,z as C,A as x,B as M,ad as Ht,a7 as Vt,a4 as ft,a as K,c as Z,K as ue,ap as Ye,aq as Ze,a9 as xe,Q as W,a0 as X,a2 as Lt,G as bt,I as Re,_ as Kn,$ as oo,o as Ct,H as Fe,u as Oe,v as Be,w as ze,p as ne,x as He,q as ge,r as Qt,a5 as Ot,ai as _u,R as Qe,aN as Cu,aO as xu,as as Ao,aj as fn,af as se,am as Mu,aa as un,ab as ce,Y as ve,ar as Eo,aF as ar,J as Rn,ag as Hn,aJ as ci,ae as Io,D as Au,ak as Eu,a6 as zn,aH as ro,Z as jn,N as ku,O as Tu,U as Lu,T as Iu,ac as xo,ay as Qr,F as li,a3 as al,ao as cl,C as ui,an as $n,ah as Su}from"./index-p4Dt6o3z.js";import"./design-system-init-Bqt81Pxb.js";import{W as fe,e as de,u as ss,o as ll,d as Ru,h as sn,a as pe,i as ul,O as Je,M as sr}from"./ButtonAugment-DueOA3_V.js";import{T as we,M as _r}from"./TextTooltipAugment-C0ygVke5.js";import{v as Mo,R as Cn,E as _e,d as Pu,o as Du,y as Nu,V as gn,z as Ie,W as Fu,X as di,A as cr,Y as dn,Z as fi,j as dl,_ as Ou,$ as Bu,a0 as Bn,a1 as zu,a2 as Hu,a3 as mi,a4 as fr,a5 as ts,a6 as ju,a7 as mr,i as Uu,N as Cr,a8 as Xr,a9 as ir,aa as pi,T as Ee,n as _o,ab as qu,ac as Wu,ad as Vu,B as Gu,J as Yu,D as Xu,G as Ku,H as fl,ae as ml,af as pl,I as Zu,M as Ju,ag as Qu,ah as td,m as ed,C as nd,s as od,ai as ko,aj as $l,ak as hl,O as rd}from"./chat-context-Dq8CyOam.js";import{I as Me}from"./IconButtonAugment-B0XoCIXT.js";import{P as gl,B as Jn,L as sd,M as id}from"./magnifying-glass-Dmz0PV9T.js";import{R as Ve,M as is,d as ad,c as cd,b as es}from"./CollapseButtonAugment-C3mt1EeR.js";import{s as $i,f as so}from"./index-DwagmzSc.js";import{D as _t,a as ld,C as ud,T as xr,S as dd,b as fd}from"./index-CkBhOCxh.js";import{E as lo}from"./ellipsis-Bz-dObmZ.js";import{T as md,g as pd,R as Zn,a as io,O as $d,b as hd,C as So,F as gd,M as pr,D as $r,c as vd,d as vl,S as wd,U as wl,e as yd,f as Kr,h as bd,i as _d}from"./circle-backslash-B3nG_JMr.js";import{C as Pn,c as Mr,e as To,T as hi,d as Ro,a as Cd,R as xd,G as yl}from"./github-hmyLGe0b.js";import{E as Dn}from"./exclamation-triangle-BQxrhBcR.js";import{a as Md,_ as Ad,c as Ed,i as as}from"./isObjectLike-Dcghr38G.js";import{a as Ne,H as kd,o as Td}from"./Content-7zb4jZEH.js";import{T as Ld,d as cs,e as Id,N as Sd,m as Rd,n as Pd,f as Dd,g as Nd,C as Fd,h as Ar,P as Od,i as Bd,j as zd,k as Hd,M as hr,R as bl,a as jd,c as Ud,b as qd,K as Wd,A as _l}from"./Keybindings-BPBUBuVi.js";import{g as Vd}from"./globals-D0QH3NT1.js";import{h as ao,u as Er}from"./await_block-CgSfNRTu.js";import{o as xn}from"./keypress-DD1aQVr0.js";import{a as ns}from"./file-paths-BEF4tZXQ.js";import{_ as kr}from"./preload-helper-Dv6uf1Os.js";import{M as Cl}from"./MaterialIcon-9THX1buP.js";import{P as xl,S as Sn}from"./pen-to-square-DUXCbbi7.js";import{A as no}from"./autofix-state-d-ymFdyn.js";import{a as Gd}from"./index-BOPL8f7w.js";import"./toggleHighContrast-CKn954qg.js";import"./augment-logo-C66YBCMf.js";var Ge=(s=>(s.disableCopilot="ShouldDisableCopilot",s.disableCodeium="ShouldDisableCodeium",s.workspacePopulated="WorkspacePopulated",s.workspaceNotPopulated="WorkspaceNotPopulated",s.workspaceNotSelected="WorkspaceNotSelected",s.signInRequired="UserShouldSignIn",s.allActionsComplete="AllActionsComplete",s.syncingPermissionNeeded="SyncingPermissionNeeded",s.workspaceTooLarge="workspaceTooLarge",s.uploadingHomeDir="uploadingHomeDir",s))(Ge||{}),Ml=(s=>(s.signInInProgress="SignInInProgress",s))(Ml||{});class Al{constructor(){st(this,"subscribers",new Set);st(this,"_actions",[]);st(this,"_currentIndex",0);st(this,"subscribe",t=>(this.subscribers.add(t),t(this),()=>{this.subscribers.delete(t)}))}get currentCard(){return this.actions[this._currentIndex]}notifySubscribers(){this.subscribers.forEach(t=>t(this))}get actions(){return this._actions}handleMessageFromExtension(t){const n=t.data;return n.type===fe.mainPanelActions&&(this.onActionsUpdates(n.data),!0)}onActionsUpdates(t){this._actions=t,this._currentIndex=0,this.notifySubscribers()}nextAction(){this._currentIndex=(this._currentIndex+1)%this._actions.length,this.notifySubscribers()}prevAction(){this._currentIndex=(this._currentIndex-1+this._actions.length)%this._actions.length,this.notifySubscribers()}isCollapsible(t){return t===Ge.allActionsComplete}}const S6=`Augment just finished syncing with your codebase! Here is a summary of what we saw:

`;class Yd{constructor(t,n){st(this,"handleMessageFromExtension",t=>(t.data.type===fe.shouldShowSummary&&this.showProjectSummary(),!0));this._chatModel=t,this._flagsModel=n}async retryProjectSummary(t){const[n]=await Promise.all([this.generateQuestions(),this._chatModel.currentConversationModel.resendTurn(t)]);await this.attachQuestions(n)}async showProjectSummary(){const t=this.generateQuestions();await this.generateSummary();const n=await t;this.attachQuestions(n)}async generateQuestions(){const{responseText:t}=await this._chatModel.currentConversationModel.sendSilentExchange({request_message:"Give me the five most important questions a developer would need answered about this codebase. These questions should be separated by a newline. I want you to say absolutely nothing else.",model_id:this._flagsModel.modelDisplayNameToId.Overview??void 0,disableSelectedCodeDetails:!0,disableHistory:!0});return t.split(`
`).filter(n=>n.trim()!=="")}async generateSummary(){this._chatModel.extensionClient.showAugmentPanel(),await this._chatModel.currentConversationModel.sendExchange({chatItemType:Cn.summaryResponse,request_message:"Provide a short summary of this project",model_id:this._flagsModel.modelDisplayNameToId.Overview??void 0,status:_e.draft,disableSelectedCodeDetails:!0,disableHistory:!0})}async attachQuestions(t){const n=this._chatModel.currentConversationModel.chatHistory.findLast(Pu);n&&n.request_id&&t&&this._chatModel.currentConversationModel.updateChatItem(n.request_id,{questionsLoaded:!0,questions:t})}}function Xd(s){let t,n,e,o;const r=s[12].default,i=Gt(r,s,s[11],null);return{c(){t=F("div"),n=F("div"),i&&i.c(),E(n,"class",e=dr(`c-card ${s[0]}`)+" svelte-1hp682e"),Pt(n,"highlighted",s[1]),Pt(n,"hasTop",s[8]),Pt(n,"hasBottom",s[7]),Pt(n,"hasLeft",s[6]),Pt(n,"hasRight",s[5]),Pt(n,"reserve-border-space",s[4]),E(t,"class","c-card-container svelte-1hp682e"),E(t,"style",s[2]),Pt(t,"overflow-visible",s[3])},m(c,a){_(c,t,a),U(t,n),i&&i.m(n,null),o=!0},p(c,[a]){i&&i.p&&(!o||2048&a)&&Yt(i,r,c,c[11],o?Kt(r,c[11],a,null):Xt(c[11]),null),(!o||1&a&&e!==(e=dr(`c-card ${c[0]}`)+" svelte-1hp682e"))&&E(n,"class",e),(!o||3&a)&&Pt(n,"highlighted",c[1]),(!o||257&a)&&Pt(n,"hasTop",c[8]),(!o||129&a)&&Pt(n,"hasBottom",c[7]),(!o||65&a)&&Pt(n,"hasLeft",c[6]),(!o||33&a)&&Pt(n,"hasRight",c[5]),(!o||17&a)&&Pt(n,"reserve-border-space",c[4]),(!o||4&a)&&E(t,"style",c[2]),(!o||8&a)&&Pt(t,"overflow-visible",c[3])},i(c){o||(f(i,c),o=!0)},o(c){$(i,c),o=!1},d(c){c&&y(t),i&&i.d(c)}}}function Kd(s,t,n){let e,o,r,i,c,{$$slots:a={},$$scope:l}=t,{class:u=""}=t,{highlighted:p=!1}=t,{style:g=""}=t,{overflowVisible:h=!1}=t,{borders:k=["top","bottom","left","right"]}=t,{reserveBorderSpace:T=!1}=t;return s.$$set=b=>{"class"in b&&n(0,u=b.class),"highlighted"in b&&n(1,p=b.highlighted),"style"in b&&n(2,g=b.style),"overflowVisible"in b&&n(3,h=b.overflowVisible),"borders"in b&&n(9,k=b.borders),"reserveBorderSpace"in b&&n(4,T=b.reserveBorderSpace),"$$scope"in b&&n(11,l=b.$$scope)},s.$$.update=()=>{512&s.$$.dirty&&n(10,e=k.map(b=>b.split("-")).flat()),1024&s.$$.dirty&&n(8,o=e.includes("top")),1024&s.$$.dirty&&n(7,r=e.includes("bottom")),1024&s.$$.dirty&&n(6,i=e.includes("left")),1024&s.$$.dirty&&n(5,c=e.includes("right"))},[u,p,g,h,T,c,i,r,o,k,e,l,a]}class El extends nt{constructor(t){super(),ot(this,t,Kd,Xd,tt,{class:0,highlighted:1,style:2,overflowVisible:3,borders:9,reserveBorderSpace:4})}}function Zd(s){let t,n;return{c(){t=Nt("svg"),n=Nt("path"),E(n,"d","M256 0c-17.7 0-32 14.3-32 32l0 19.2C151 66 96 130.6 96 208l0 25.4c0 45.4-15.5 89.5-43.8 124.9L37.3 377c-5.8 7.2-6.9 17.1-2.9 25.4s12.4 13.6 21.6 13.6l400 0c9.2 0 17.6-5.3 21.6-13.6s2.9-18.2-2.9-25.4l-14.9-18.6C431.5 322.9 416 278.8 416 233.4l0-25.4c0-77.4-55-142-128-156.8L288 32c0-17.7-14.3-32-32-32zm0 96c61.9 0 112 50.1 112 112l0 25.4c0 47.9 13.9 94.6 39.7 134.6l-303.4 0c25.8-40 39.7-86.7 39.7-134.6l0-25.4c0-61.9 50.1-112 112-112zm64 352l-64 0-64 0c0 17 6.7 33.3 18.7 45.3s28.3 18.7 45.3 18.7s33.3-6.7 45.3-18.7s18.7-28.3 18.7-45.3zM113.4 15.4c-9.1-9.6-24.3-10-33.9-.8C30.5 61.2 0 127.1 0 200c0 13.3 10.7 24 24 24s24-10.7 24-24c0-59.3 24.8-112.7 64.6-150.6c9.6-9.1 10-24.3 .8-33.9zM399.4 49.4C439.2 87.3 464 140.7 464 200c0 13.3 10.7 24 24 24s24-10.7 24-24c0-72.9-30.5-138.8-79.4-185.4c-9.6-9.1-24.8-8.8-33.9 .8s-8.8 24.8 .8 33.9z"),E(t,"xmlns","http://www.w3.org/2000/svg"),E(t,"viewBox","0 0 512 512")},m(e,o){_(e,t,o),U(t,n)},p:D,i:D,o:D,d(e){e&&y(t)}}}class Jd extends nt{constructor(t){super(),ot(this,t,null,Zd,tt,{})}}function Qd(s){let t,n;return{c(){t=Nt("svg"),n=Nt("path"),E(n,"d","M38.8 5.1C28.4-3.1 13.3-1.2 5.1 9.2S-1.2 34.7 9.2 42.9l592 464c10.4 8.2 25.5 6.3 33.7-4.1s6.3-25.5-4.1-33.7L542.6 400c2.7-7.8 1.3-16.5-3.9-23l-14.9-18.6C495.5 322.9 480 278.8 480 233.4l0-33.4c0-75.8-55.5-138.6-128-150.1L352 32c0-17.7-14.3-32-32-32s-32 14.3-32 32l0 17.9c-43.9 7-81.5 32.7-104.4 68.7L38.8 5.1zM221.7 148.4C239.6 117.1 273.3 96 312 96l8 0 8 0c57.4 0 104 46.6 104 104l0 33.4c0 32.7 6.4 64.8 18.7 94.5L221.7 148.4zM406.2 416l-60.9-48-176.9 0c21.2-32.8 34.4-70.3 38.4-109.1L160 222.1l0 11.4c0 45.4-15.5 89.5-43.8 124.9L101.3 377c-5.8 7.2-6.9 17.1-2.9 25.4s12.4 13.6 21.6 13.6l286.2 0zM384 448l-64 0-64 0c0 17 6.7 33.3 18.7 45.3s28.3 18.7 45.3 18.7s33.3-6.7 45.3-18.7s18.7-28.3 18.7-45.3z"),E(t,"xmlns","http://www.w3.org/2000/svg"),E(t,"viewBox","0 0 640 512")},m(e,o){_(e,t,o),U(t,n)},p:D,i:D,o:D,d(e){e&&y(t)}}}class t1 extends nt{constructor(t){super(),ot(this,t,null,Qd,tt,{})}}function e1(s){let t,n;return t=new t1({}),{c(){C(t.$$.fragment)},m(e,o){x(t,e,o),n=!0},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){M(t,e)}}}function n1(s){let t,n;return t=new Jd({}),{c(){C(t.$$.fragment)},m(e,o){x(t,e,o),n=!0},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){M(t,e)}}}function o1(s){let t,n,e,o;const r=[n1,e1],i=[];function c(a,l){return a[0]?0:1}return t=c(s),n=i[t]=r[t](s),{c(){n.c(),e=ft()},m(a,l){i[t].m(a,l),_(a,e,l),o=!0},p(a,l){let u=t;t=c(a),t!==u&&(K(),$(i[u],1,1,()=>{i[u]=null}),Z(),n=i[t],n||(n=i[t]=r[t](a),n.c()),f(n,1),n.m(e.parentNode,e))},i(a){o||(f(n),o=!0)},o(a){$(n),o=!1},d(a){a&&y(e),i[t].d(a)}}}function r1(s){let t,n;return t=new Me({props:{size:1,variant:"ghost-block",color:"neutral",$$slots:{default:[o1]},$$scope:{ctx:s}}}),t.$on("click",s[3]),{c(){C(t.$$.fragment)},m(e,o){x(t,e,o),n=!0},p(e,o){const r={};257&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){M(t,e)}}}function s1(s){let t,n,e;return n=new we({props:{content:s[1],$$slots:{default:[r1]},$$scope:{ctx:s}}}),{c(){t=F("div"),C(n.$$.fragment),E(t,"class","c-notify-button svelte-1nip792")},m(o,r){_(o,t,r),x(n,t,null),e=!0},p(o,[r]){const i={};2&r&&(i.content=o[1]),257&r&&(i.$$scope={dirty:r,ctx:o}),n.$set(i)},i(o){e||(f(n.$$.fragment,o),e=!0)},o(o){$(n.$$.fragment,o),e=!1},d(o){o&&y(t),M(n)}}}function i1(s,t,n){let e,o,r,i,{agentId:c}=t;const a=Ht("remoteAgentsModel");Vt(s,a,u=>n(7,i=u));let l=!1;return s.$$set=u=>{"agentId"in u&&n(4,c=u.agentId)},s.$$.update=()=>{144&s.$$.dirty&&n(5,e=c??i.currentAgentId),128&s.$$.dirty&&n(6,o=i.newAgentDraft),224&s.$$.dirty&&(e?n(0,l=i.notificationSettings[e]??!1):o&&n(0,l=o.enableNotification)),1&s.$$.dirty&&n(1,r=l?"You'll be notified when the agent is ready for review. Click to turn off.":"Click to turn on notifications when the agent is ready for review.")},[l,r,a,function(){if(e)a.setNotificationEnabled(e,!l);else{const u=a.newAgentDraft;u&&a.setNewAgentDraft({...u,enableNotification:!l})}},c,e,o,i]}class kl extends nt{constructor(t){super(),ot(this,t,i1,s1,tt,{agentId:4})}}function a1(s){let t,n;return{c(){t=Nt("svg"),n=Nt("path"),E(n,"fill-rule","evenodd"),E(n,"clip-rule","evenodd"),E(n,"d","M5.5 1C5.22386 1 5 1.22386 5 1.5C5 1.77614 5.22386 2 5.5 2H9.5C9.77614 2 10 1.77614 10 1.5C10 1.22386 9.77614 1 9.5 1H5.5ZM3 3.5C3 3.22386 3.22386 3 3.5 3H5H10H11.5C11.7761 3 12 3.22386 12 3.5C12 3.77614 11.7761 4 11.5 4H11V12C11 12.5523 10.5523 13 10 13H5C4.44772 13 4 12.5523 4 12V4L3.5 4C3.22386 4 3 3.77614 3 3.5ZM5 4H10V12H5V4Z"),E(n,"fill","currentColor"),E(t,"width","15"),E(t,"height","15"),E(t,"viewBox","0 0 15 15"),E(t,"fill","none"),E(t,"xmlns","http://www.w3.org/2000/svg")},m(e,o){_(e,t,o),U(t,n)},p:D,i:D,o:D,d(e){e&&y(t)}}}class Tr extends nt{constructor(t){super(),ot(this,t,null,a1,tt,{})}}function c1(s){let t,n;return t=new lo({}),{c(){C(t.$$.fragment)},m(e,o){x(t,e,o),n=!0},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){M(t,e)}}}function l1(s){let t,n;return t=new Me({props:{variant:"ghost-block",color:"neutral",size:1,title:"Agent options",$$slots:{default:[c1]},$$scope:{ctx:s}}}),{c(){C(t.$$.fragment)},m(e,o){x(t,e,o),n=!0},p(e,o){const r={};8192&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){M(t,e)}}}function u1(s){let t,n=s[3]?"Deleting...":"Delete";return{c(){t=X(n)},m(e,o){_(e,t,o)},p(e,o){8&o&&n!==(n=e[3]?"Deleting...":"Delete")&&Lt(t,n)},d(e){e&&y(t)}}}function d1(s){let t,n;return t=new Tr({props:{slot:"iconLeft"}}),{c(){C(t.$$.fragment)},m(e,o){x(t,e,o),n=!0},p:D,i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){M(t,e)}}}function f1(s){let t;return{c(){t=X("Copy ID")},m(n,e){_(n,t,e)},p:D,d(n){n&&y(t)}}}function m1(s){let t,n=s[6].get(s[0])+"";return{c(){t=X(n)},m(e,o){_(e,t,o)},p(e,o){65&o&&n!==(n=e[6].get(e[0])+"")&&Lt(t,n)},d(e){e&&y(t)}}}function p1(s){let t,n;function e(i,c){return 65&c&&(t=null),t==null&&(t=!!i[6].get(i[0])),t?m1:f1}let o=e(s,-1),r=o(s);return{c(){r.c(),n=ft()},m(i,c){r.m(i,c),_(i,n,c)},p(i,c){o===(o=e(i,c))&&r?r.p(i,c):(r.d(1),r=o(i),r&&(r.c(),r.m(n.parentNode,n)))},d(i){i&&y(n),r.d(i)}}}function $1(s){let t,n;return t=new Du({props:{slot:"iconLeft"}}),{c(){C(t.$$.fragment)},m(e,o){x(t,e,o),n=!0},p:D,i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){M(t,e)}}}function gi(s){let t,n;return t=new _t.Item({props:{onSelect:s[11],title:"SSH to remote agent's workspace",$$slots:{iconLeft:[g1],default:[h1]},$$scope:{ctx:s}}}),{c(){C(t.$$.fragment)},m(e,o){x(t,e,o),n=!0},p(e,o){const r={};49&o&&(r.onSelect=e[11]),8192&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){M(t,e)}}}function h1(s){let t;return{c(){t=X("SSH")},m(n,e){_(n,t,e)},d(n){n&&y(t)}}}function g1(s){let t,n;return t=new md({props:{slot:"iconLeft"}}),{c(){C(t.$$.fragment)},m(e,o){x(t,e,o),n=!0},p:D,i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){M(t,e)}}}function vi(s){let t,n,e,o,r,i;return t=new _t.Separator({}),e=new _t.Label({props:{$$slots:{default:[v1]},$$scope:{ctx:s}}}),r=new _t.Item({props:{disabled:!0,$$slots:{default:[w1]},$$scope:{ctx:s}}}),{c(){C(t.$$.fragment),n=W(),C(e.$$.fragment),o=W(),C(r.$$.fragment)},m(c,a){x(t,c,a),_(c,n,a),x(e,c,a),_(c,o,a),x(r,c,a),i=!0},p(c,a){const l={};8192&a&&(l.$$scope={dirty:a,ctx:c}),e.$set(l);const u={};8194&a&&(u.$$scope={dirty:a,ctx:c}),r.$set(u)},i(c){i||(f(t.$$.fragment,c),f(e.$$.fragment,c),f(r.$$.fragment,c),i=!0)},o(c){$(t.$$.fragment,c),$(e.$$.fragment,c),$(r.$$.fragment,c),i=!1},d(c){c&&(y(n),y(o)),M(t,c),M(e,c),M(r,c)}}}function v1(s){let t;return{c(){t=X("Branch")},m(n,e){_(n,t,e)},d(n){n&&y(t)}}}function w1(s){let t;return{c(){t=X(s[1])},m(n,e){_(n,t,e)},p(n,e){2&e&&Lt(t,n[1])},d(n){n&&y(t)}}}function y1(s){let t,n,e,o,r,i,c;t=new _t.Item({props:{color:"error",onSelect:s[9],disabled:s[3],$$slots:{iconLeft:[d1],default:[u1]},$$scope:{ctx:s}}}),e=new _t.Item({props:{onSelect:s[10],$$slots:{iconLeft:[$1],default:[p1]},$$scope:{ctx:s}}});let a=s[4]&&gi(s),l=s[1]&&vi(s);return{c(){C(t.$$.fragment),n=W(),C(e.$$.fragment),o=W(),a&&a.c(),r=W(),l&&l.c(),i=ft()},m(u,p){x(t,u,p),_(u,n,p),x(e,u,p),_(u,o,p),a&&a.m(u,p),_(u,r,p),l&&l.m(u,p),_(u,i,p),c=!0},p(u,p){const g={};37&p&&(g.onSelect=u[9]),8&p&&(g.disabled=u[3]),8200&p&&(g.$$scope={dirty:p,ctx:u}),t.$set(g);const h={};32&p&&(h.onSelect=u[10]),8257&p&&(h.$$scope={dirty:p,ctx:u}),e.$set(h),u[4]?a?(a.p(u,p),16&p&&f(a,1)):(a=gi(u),a.c(),f(a,1),a.m(r.parentNode,r)):a&&(K(),$(a,1,1,()=>{a=null}),Z()),u[1]?l?(l.p(u,p),2&p&&f(l,1)):(l=vi(u),l.c(),f(l,1),l.m(i.parentNode,i)):l&&(K(),$(l,1,1,()=>{l=null}),Z())},i(u){c||(f(t.$$.fragment,u),f(e.$$.fragment,u),f(a),f(l),c=!0)},o(u){$(t.$$.fragment,u),$(e.$$.fragment,u),$(a),$(l),c=!1},d(u){u&&(y(n),y(o),y(r),y(i)),M(t,u),M(e,u),a&&a.d(u),l&&l.d(u)}}}function b1(s){let t,n,e,o;return t=new _t.Trigger({props:{$$slots:{default:[l1]},$$scope:{ctx:s}}}),e=new _t.Content({props:{size:1,side:"bottom",align:"end",$$slots:{default:[y1]},$$scope:{ctx:s}}}),{c(){C(t.$$.fragment),n=W(),C(e.$$.fragment)},m(r,i){x(t,r,i),_(r,n,i),x(e,r,i),o=!0},p(r,i){const c={};8192&i&&(c.$$scope={dirty:i,ctx:r}),t.$set(c);const a={};8319&i&&(a.$$scope={dirty:i,ctx:r}),e.$set(a)},i(r){o||(f(t.$$.fragment,r),f(e.$$.fragment,r),o=!0)},o(r){$(t.$$.fragment,r),$(e.$$.fragment,r),o=!1},d(r){r&&y(n),M(t,r),M(e,r)}}}function _1(s){let t,n,e;function o(i){s[12](i)}let r={nested:!1,$$slots:{default:[b1]},$$scope:{ctx:s}};return s[5]!==void 0&&(r.requestClose=s[5]),t=new _t.Root({props:r}),ue.push(()=>Ye(t,"requestClose",o)),{c(){C(t.$$.fragment)},m(i,c){x(t,i,c),e=!0},p(i,[c]){const a={};8319&c&&(a.$$scope={dirty:c,ctx:i}),!n&&32&c&&(n=!0,a.requestClose=i[5],Ze(()=>n=!1)),t.$set(a)},i(i){e||(f(t.$$.fragment,i),e=!0)},o(i){$(t.$$.fragment,i),e=!1},d(i){M(t,i)}}}function C1(s,t,n){let e,{agentId:o}=t,{selectedBranch:r}=t,{onDelete:i}=t,{isDeleting:c=!1}=t,{onSsh:a}=t,l=()=>{};const u=xe(new Map);function p(){navigator.clipboard.writeText(o),u.update(g=>(g.set(o,"Copied!"),g)),setTimeout(()=>{u.update(g=>(g.delete(o),g))},1e3)}return Vt(s,u,g=>n(6,e=g)),s.$$set=g=>{"agentId"in g&&n(0,o=g.agentId),"selectedBranch"in g&&n(1,r=g.selectedBranch),"onDelete"in g&&n(2,i=g.onDelete),"isDeleting"in g&&n(3,c=g.isDeleting),"onSsh"in g&&n(4,a=g.onSsh)},[o,r,i,c,a,l,e,u,p,()=>{i(o),l()},()=>{p(),l()},()=>{a(o),l()},function(g){l=g,n(5,l)}]}class Tl extends nt{constructor(t){super(),ot(this,t,C1,_1,tt,{agentId:0,selectedBranch:1,onDelete:2,isDeleting:3,onSsh:4})}}function wi(s){let t,n,e,o,r;return{c(){t=F("div"),n=X(s[2]),E(t,"class",e="status-label status-label--"+s[0].toString()+" svelte-xrtdeo")},m(i,c){_(i,t,c),U(t,n),r=!0},p(i,c){(!r||4&c)&&Lt(n,i[2]),(!r||1&c&&e!==(e="status-label status-label--"+i[0].toString()+" svelte-xrtdeo"))&&E(t,"class",e)},i(i){r||(i&&Kn(()=>{r&&(o||(o=oo(t,$i,{duration:100,axis:"x"},!0)),o.run(1))}),r=!0)},o(i){i&&(o||(o=oo(t,$i,{duration:100,axis:"x"},!1)),o.run(0)),r=!1},d(i){i&&y(t),i&&o&&o.end()}}}function x1(s){let t,n,e,o,r,i,c,a,l=s[3]&&wi(s);return{c(){t=F("div"),n=F("div"),o=W(),l&&l.c(),E(n,"class",e="status-dot status-dot--"+s[0].toString()+" svelte-xrtdeo"),E(t,"class","status-indicator-container svelte-xrtdeo"),E(t,"role","status"),E(t,"aria-label",r="Agent status: "+s[2]),E(t,"title",i="Status: "+s[2])},m(u,p){_(u,t,p),U(t,n),U(t,o),l&&l.m(t,null),c||(a=[bt(t,"mouseenter",s[5]),bt(t,"mouseleave",s[6])],c=!0)},p(u,[p]){1&p&&e!==(e="status-dot status-dot--"+u[0].toString()+" svelte-xrtdeo")&&E(n,"class",e),u[3]?l?(l.p(u,p),8&p&&f(l,1)):(l=wi(u),l.c(),f(l,1),l.m(t,null)):l&&(K(),$(l,1,1,()=>{l=null}),Z()),4&p&&r!==(r="Agent status: "+u[2])&&E(t,"aria-label",r),4&p&&i!==(i="Status: "+u[2])&&E(t,"title",i)},i(u){f(l)},o(u){$(l)},d(u){u&&y(t),l&&l.d(),c=!1,Re(a)}}}function M1(s,t,n){let e,o,{status:r}=t,{isExpanded:i=!1}=t,c=!1;return s.$$set=a=>{"status"in a&&n(0,r=a.status),"isExpanded"in a&&n(4,i=a.isExpanded)},s.$$.update=()=>{18&s.$$.dirty&&n(3,e=i||c),1&s.$$.dirty&&n(2,o=pd(r))},[r,c,o,e,i,()=>n(1,c=!0),()=>n(1,c=!1)]}class A1 extends nt{constructor(t){super(),ot(this,t,M1,x1,tt,{status:0,isExpanded:4})}}function E1(s){let t,n,e=[{xmlns:"http://www.w3.org/2000/svg"},{"data-ds-icon":"fa"},{viewBox:"0 0 512 512"},s[0]],o={};for(let r=0;r<e.length;r+=1)o=Ct(o,e[r]);return{c(){t=Nt("svg"),n=new Fe(!0),this.h()},l(r){t=Oe(r,"svg",{xmlns:!0,"data-ds-icon":!0,viewBox:!0});var i=Be(t);n=ze(i,!0),i.forEach(y),this.h()},h(){n.a=null,ne(t,o)},m(r,i){He(r,t,i),n.m('<!--! Font Awesome Pro 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2024 Fonticons, Inc.--><path d="M248.4 84.3c1.6-2.7 4.5-4.3 7.6-4.3s6 1.6 7.6 4.3L461.9 410c1.4 2.3 2.1 4.9 2.1 7.5 0 8-6.5 14.5-14.5 14.5h-387c-8 0-14.5-6.5-14.5-14.5 0-2.7.7-5.3 2.1-7.5zm-41-25L9.1 385c-6 9.8-9.1 21-9.1 32.5C0 452 28 480 62.5 480h387c34.5 0 62.5-28 62.5-62.5 0-11.5-3.2-22.7-9.1-32.5L304.6 59.3C294.3 42.4 275.9 32 256 32s-38.3 10.4-48.6 27.3M288 368a32 32 0 1 0-64 0 32 32 0 1 0 64 0m-8-184c0-13.3-10.7-24-24-24s-24 10.7-24 24v96c0 13.3 10.7 24 24 24s24-10.7 24-24z"/>',t)},p(r,[i]){ne(t,o=ge(e,[{xmlns:"http://www.w3.org/2000/svg"},{"data-ds-icon":"fa"},{viewBox:"0 0 512 512"},1&i&&r[0]]))},i:D,o:D,d(r){r&&y(t)}}}function k1(s,t,n){return s.$$set=e=>{n(0,t=Ct(Ct({},t),Qt(e)))},[t=Qt(t)]}class ls extends nt{constructor(t){super(),ot(this,t,k1,E1,tt,{})}}function yi(s,t,n){const e=s.slice();return e[56]=t[n],e[58]=n,e}function bi(s,t,n){const e=s.slice();return e[59]=t[n],e}function T1(s){let t;return{c(){t=X("Remote agents")},m(n,e){_(n,t,e)},d(n){n&&y(t)}}}function _i(s){let t,n,e;return{c(){t=F("div"),n=F("div"),E(n,"class","stale-dot svelte-cadhvw"),E(t,"class","stale-indicator svelte-cadhvw"),E(t,"title",e="Data may be outdated. Last refreshed "+(s[3]>0?io(new Date(s[3]).toISOString()):"never"))},m(o,r){_(o,t,r),U(t,n)},p(o,r){8&r[0]&&e!==(e="Data may be outdated. Last refreshed "+(o[3]>0?io(new Date(o[3]).toISOString()):"never"))&&E(t,"title",e)},d(o){o&&y(t)}}}function Ci(s){let t,n,e,o=s[9].idleStatus!==void 0&&xi(s),r=s[9].runningStatus!==void 0&&Mi(s);return{c(){t=F("div"),o&&o.c(),n=W(),r&&r.c(),E(t,"class","status-summary svelte-cadhvw")},m(i,c){_(i,t,c),o&&o.m(t,null),U(t,n),r&&r.m(t,null),e=!0},p(i,c){i[9].idleStatus!==void 0?o?(o.p(i,c),512&c[0]&&f(o,1)):(o=xi(i),o.c(),f(o,1),o.m(t,n)):o&&(K(),$(o,1,1,()=>{o=null}),Z()),i[9].runningStatus!==void 0?r?(r.p(i,c),512&c[0]&&f(r,1)):(r=Mi(i),r.c(),f(r,1),r.m(t,null)):r&&(K(),$(r,1,1,()=>{r=null}),Z())},i(i){e||(f(o),f(r),e=!0)},o(i){$(o),$(r),e=!1},d(i){i&&y(t),o&&o.d(),r&&r.d()}}}function xi(s){let t,n,e,o,r,i,c;return r=new Ot({props:{size:1,color:"secondary",$$slots:{default:[L1]},$$scope:{ctx:s}}}),{c(){t=F("div"),n=F("div"),o=W(),C(r.$$.fragment),E(n,"class",e="status-dot status-dot--"+s[9].idleStatus.toString()+" svelte-cadhvw"),E(t,"class","status-summary-item svelte-cadhvw")},m(a,l){_(a,t,l),U(t,n),U(t,o),x(r,t,null),c=!0},p(a,l){(!c||512&l[0]&&e!==(e="status-dot status-dot--"+a[9].idleStatus.toString()+" svelte-cadhvw"))&&E(n,"class",e);const u={};512&l[0]|1&l[2]&&(u.$$scope={dirty:l,ctx:a}),r.$set(u)},i(a){c||(f(r.$$.fragment,a),a&&Kn(()=>{c&&(i||(i=oo(t,so,{y:3},!0)),i.run(1))}),c=!0)},o(a){$(r.$$.fragment,a),a&&(i||(i=oo(t,so,{y:3},!1)),i.run(0)),c=!1},d(a){a&&y(t),M(r),a&&i&&i.end()}}}function L1(s){let t,n,e=s[9].idle+"";return{c(){t=X(e),n=X(" more idle")},m(o,r){_(o,t,r),_(o,n,r)},p(o,r){512&r[0]&&e!==(e=o[9].idle+"")&&Lt(t,e)},d(o){o&&(y(t),y(n))}}}function Mi(s){let t,n,e,o,r,i,c;return r=new Ot({props:{size:1,color:"secondary",$$slots:{default:[I1]},$$scope:{ctx:s}}}),{c(){t=F("div"),n=F("div"),o=W(),C(r.$$.fragment),E(n,"class",e="status-dot status-dot--"+s[9].runningStatus.toString()+" svelte-cadhvw"),E(t,"class","status-summary-item svelte-cadhvw")},m(a,l){_(a,t,l),U(t,n),U(t,o),x(r,t,null),c=!0},p(a,l){(!c||512&l[0]&&e!==(e="status-dot status-dot--"+a[9].runningStatus.toString()+" svelte-cadhvw"))&&E(n,"class",e);const u={};512&l[0]|1&l[2]&&(u.$$scope={dirty:l,ctx:a}),r.$set(u)},i(a){c||(f(r.$$.fragment,a),a&&Kn(()=>{c&&(i||(i=oo(t,so,{y:3},!0)),i.run(1))}),c=!0)},o(a){$(r.$$.fragment,a),a&&(i||(i=oo(t,so,{y:3},!1)),i.run(0)),c=!1},d(a){a&&y(t),M(r),a&&i&&i.end()}}}function I1(s){let t,n,e=s[9].running+"";return{c(){t=X(e),n=X(" more running")},m(o,r){_(o,t,r),_(o,n,r)},p(o,r){512&r[0]&&e!==(e=o[9].running+"")&&Lt(t,e)},d(o){o&&(y(t),y(n))}}}function S1(s){let t,n;return t=new gl({}),{c(){C(t.$$.fragment)},m(e,o){x(t,e,o),n=!0},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){M(t,e)}}}function Ai(s){let t,n,e=[],o=new Map,r=de(s[10]);const i=c=>c[59].remote_agent_id;for(let c=0;c<r.length;c+=1){let a=bi(s,r,c),l=i(a);o.set(l,e[c]=Ti(l,a))}return{c(){t=F("div");for(let c=0;c<e.length;c+=1)e[c].c();E(t,"class","agents-list svelte-cadhvw"),Qe(t,"height",(s[5]?s[16]:s[6])+"px")},m(c,a){_(c,t,a);for(let l=0;l<e.length;l+=1)e[l]&&e[l].m(t,null);n=!0},p(c,a){1879180548&a[0]&&(r=de(c[10]),K(),e=ss(e,a,i,1,c,r,o,t,ll,Ti,null,bi),Z()),(!n||65632&a[0])&&Qe(t,"height",(c[5]?c[16]:c[6])+"px")},i(c){if(!n){for(let a=0;a<r.length;a+=1)f(e[a]);n=!0}},o(c){for(let a=0;a<e.length;a+=1)$(e[a]);n=!1},d(c){c&&y(t);for(let a=0;a<e.length;a+=1)e[a].d()}}}function R1(s){let t,n=s[59].session_summary+"";return{c(){t=X(n)},m(e,o){_(e,t,o)},p(e,o){1024&o[0]&&n!==(n=e[59].session_summary+"")&&Lt(t,n)},d(e){e&&y(t)}}}function P1(s){let t,n=io(s[59].updated_at||s[59].started_at)+"";return{c(){t=X(n)},m(e,o){_(e,t,o)},p(e,o){1024&o[0]&&n!==(n=io(e[59].updated_at||e[59].started_at)+"")&&Lt(t,n)},d(e){e&&y(t)}}}function Ei(s){let t,n;return t=new kl({props:{agentId:s[59].remote_agent_id}}),{c(){C(t.$$.fragment)},m(e,o){x(t,e,o),n=!0},p(e,o){const r={};1024&o[0]&&(r.agentId=e[59].remote_agent_id),t.$set(r)},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){M(t,e)}}}function ki(s){let t,n,e,o,r=(s[59].status===Ve.agentRunning||s[59].status===Ve.agentStarting)&&Ei(s);function i(){return s[47](s[59])}return e=new Tl({props:{agentId:s[59].remote_agent_id,onDelete:s[28],isDeleting:s[17].has(s[59].remote_agent_id),onSsh:s[59].status===Ve.agentRunning||s[59].status===Ve.agentIdle?i:void 0}}),{c(){t=F("div"),r&&r.c(),n=W(),C(e.$$.fragment),E(t,"class","agent-actions svelte-cadhvw")},m(c,a){_(c,t,a),r&&r.m(t,null),U(t,n),x(e,t,null),o=!0},p(c,a){(s=c)[59].status===Ve.agentRunning||s[59].status===Ve.agentStarting?r?(r.p(s,a),1024&a[0]&&f(r,1)):(r=Ei(s),r.c(),f(r,1),r.m(t,n)):r&&(K(),$(r,1,1,()=>{r=null}),Z());const l={};1024&a[0]&&(l.agentId=s[59].remote_agent_id),132096&a[0]&&(l.isDeleting=s[17].has(s[59].remote_agent_id)),1024&a[0]&&(l.onSsh=s[59].status===Ve.agentRunning||s[59].status===Ve.agentIdle?i:void 0),e.$set(l)},i(c){o||(f(r),f(e.$$.fragment,c),o=!0)},o(c){$(r),$(e.$$.fragment,c),o=!1},d(c){c&&y(t),r&&r.d(),M(e)}}}function Ti(s,t){let n,e,o,r,i,c,a,l,u,p,g,h,k,T,b,S,H,O,B,ut,kt,rt,vt=`${t[59].remote_agent_id}-${t[2]}-${t[10].length}`;c=new A1({props:{status:t[59].status,isExpanded:t[8]>300}}),u=new Ot({props:{size:1,truncate:!0,$$slots:{default:[R1]},$$scope:{ctx:t}}}),k=new Ot({props:{size:1,color:"secondary",$$slots:{default:[P1]},$$scope:{ctx:t}}});let et=ki(t);function At(){return t[48](t[59])}function St(...It){return t[49](t[59],...It)}return{key:s,first:null,c(){n=F("div"),e=F("div"),o=F("div"),r=F("div"),i=F("div"),C(c.$$.fragment),a=W(),l=F("div"),C(u.$$.fragment),g=W(),h=F("div"),C(k.$$.fragment),b=W(),et.c(),S=W(),E(i,"class","agent-status svelte-cadhvw"),E(l,"class","agent-title svelte-cadhvw"),E(l,"title",p=t[59].session_summary),E(r,"class","agent-details--left svelte-cadhvw"),E(h,"class","agent-time svelte-cadhvw"),E(h,"title",T=`${t[59].updated_at?"Updated":"Created"} ${io(t[59].updated_at||t[59].started_at)}`),E(o,"class","agent-details svelte-cadhvw"),E(e,"class","agent-content svelte-cadhvw"),E(n,"class",H="agent-row "+(t[2]===t[59].remote_agent_id?"agent-row--active":"")+" svelte-cadhvw"),E(n,"role","button"),E(n,"tabindex","0"),this.first=n},m(It,G){_(It,n,G),U(n,e),U(e,o),U(o,r),U(r,i),x(c,i,null),U(r,a),U(r,l),x(u,l,null),U(o,g),U(o,h),x(k,h,null),U(e,b),et.m(e,null),U(n,S),ut=!0,kt||(rt=[bt(n,"click",At),bt(n,"keydown",St)],kt=!0)},p(It,G){t=It;const Dt={};1024&G[0]&&(Dt.status=t[59].status),256&G[0]&&(Dt.isExpanded=t[8]>300),c.$set(Dt);const Rt={};1024&G[0]|1&G[2]&&(Rt.$$scope={dirty:G,ctx:t}),u.$set(Rt),(!ut||1024&G[0]&&p!==(p=t[59].session_summary))&&E(l,"title",p);const jt={};1024&G[0]|1&G[2]&&(jt.$$scope={dirty:G,ctx:t}),k.$set(jt),(!ut||1024&G[0]&&T!==(T=`${t[59].updated_at?"Updated":"Created"} ${io(t[59].updated_at||t[59].started_at)}`))&&E(h,"title",T),1028&G[0]&&tt(vt,vt=`${t[59].remote_agent_id}-${t[2]}-${t[10].length}`)?(K(),$(et,1,1,D),Z(),et=ki(t),et.c(),f(et,1),et.m(e,null)):et.p(t,G),(!ut||1028&G[0]&&H!==(H="agent-row "+(t[2]===t[59].remote_agent_id?"agent-row--active":"")+" svelte-cadhvw"))&&E(n,"class",H)},i(It){ut||(f(c.$$.fragment,It),f(u.$$.fragment,It),f(k.$$.fragment,It),f(et),It&&Kn(()=>{ut&&(B&&B.end(1),O=Cu(n,so,{x:-2,duration:100}),O.start())}),ut=!0)},o(It){$(c.$$.fragment,It),$(u.$$.fragment,It),$(k.$$.fragment,It),$(et),O&&O.invalidate(),It&&(B=xu(n,so,{x:-2,duration:100,delay:300})),ut=!1},d(It){It&&y(n),M(c),M(u),M(k),et.d(It),It&&B&&B.end(),kt=!1,Re(rt)}}}function D1(s){let t,n,e;return n=new Ot({props:{size:1,color:"secondary",$$slots:{default:[O1]},$$scope:{ctx:s}}}),{c(){t=F("div"),C(n.$$.fragment),E(t,"class","empty-message svelte-cadhvw")},m(o,r){_(o,t,r),x(n,t,null),e=!0},p(o,r){const i={};1&r[2]&&(i.$$scope={dirty:r,ctx:o}),n.$set(i)},i(o){e||(f(n.$$.fragment,o),e=!0)},o(o){$(n.$$.fragment,o),e=!1},d(o){o&&y(t),M(n)}}}function N1(s){let t,n,e,o;const r=[z1,B1],i=[];function c(a,l){return a[1].length===0?0:1}return t=c(s),n=i[t]=r[t](s),{c(){n.c(),e=ft()},m(a,l){i[t].m(a,l),_(a,e,l),o=!0},p(a,l){let u=t;t=c(a),t===u?i[t].p(a,l):(K(),$(i[u],1,1,()=>{i[u]=null}),Z(),n=i[t],n?n.p(a,l):(n=i[t]=r[t](a),n.c()),f(n,1),n.m(e.parentNode,e))},i(a){o||(f(n),o=!0)},o(a){$(n),o=!1},d(a){a&&y(e),i[t].d(a)}}}function F1(s){let t,n=[],e=new Map,o=de(s[15]);const r=i=>i[58];for(let i=0;i<o.length;i+=1){let c=yi(s,o,i),a=r(c);e.set(a,n[i]=Li(a))}return{c(){t=F("div");for(let i=0;i<n.length;i+=1)n[i].c();E(t,"class","loading-state svelte-cadhvw")},m(i,c){_(i,t,c);for(let a=0;a<n.length;a+=1)n[a]&&n[a].m(t,null)},p(i,c){32768&c[0]&&(o=de(i[15]),n=ss(n,c,r,1,i,o,e,t,Ru,Li,null,yi))},i:D,o:D,d(i){i&&y(t);for(let c=0;c<n.length;c+=1)n[c].d()}}}function O1(s){let t;return{c(){t=X("Create a new agent to get started.")},m(n,e){_(n,t,e)},d(n){n&&y(t)}}}function B1(s){let t,n,e,o,r;return n=new ls({}),o=new Ot({props:{size:1,color:"error",$$slots:{default:[H1]},$$scope:{ctx:s}}}),{c(){t=F("div"),C(n.$$.fragment),e=W(),C(o.$$.fragment),E(t,"class","error-banner svelte-cadhvw")},m(i,c){_(i,t,c),x(n,t,null),U(t,e),x(o,t,null),r=!0},p(i,c){const a={};16&c[0]|1&c[2]&&(a.$$scope={dirty:c,ctx:i}),o.$set(a)},i(i){r||(f(n.$$.fragment,i),f(o.$$.fragment,i),r=!0)},o(i){$(n.$$.fragment,i),$(o.$$.fragment,i),r=!1},d(i){i&&y(t),M(n),M(o)}}}function z1(s){let t,n,e,o,r;return n=new ls({}),{c(){t=F("div"),C(n.$$.fragment),e=X(`
          Failed to load threads. `),o=X(s[4]),E(t,"class","error-message svelte-cadhvw")},m(i,c){_(i,t,c),x(n,t,null),U(t,e),U(t,o),r=!0},p(i,c){(!r||16&c[0])&&Lt(o,i[4])},i(i){r||(f(n.$$.fragment,i),r=!0)},o(i){$(n.$$.fragment,i),r=!1},d(i){i&&y(t),M(n)}}}function H1(s){let t;return{c(){t=X(s[4])},m(n,e){_(n,t,e)},p(n,e){16&e[0]&&Lt(t,n[4])},d(n){n&&y(t)}}}function Li(s,t){let n;return{key:s,first:null,c(){n=F("div"),n.innerHTML='<div class="agent-content svelte-cadhvw"><div class="agent-details svelte-cadhvw"><div class="agent-details--left svelte-cadhvw"><div class="agent-status svelte-cadhvw"><div class="skeleton-dot svelte-cadhvw"></div></div> <div class="skeleton-text svelte-cadhvw"></div></div></div></div> ',E(n,"class","agent-row skeleton-row svelte-cadhvw"),this.first=n},m(e,o){_(e,n,o)},p(e,o){},d(e){e&&y(n)}}}function j1(s){let t,n,e,o,r,i,c,a,l,u,p,g,h,k,T,b,S,H,O,B,ut,kt;Kn(s[46]),c=new Ot({props:{size:1,color:"secondary",$$slots:{default:[T1]},$$scope:{ctx:s}}});let rt=s[11]&&!s[13]&&_i(s),vt=s[9]&&Ci(s);g=new Me({props:{variant:"ghost",color:"neutral",size:1,title:"New Agent",$$slots:{default:[S1]},$$scope:{ctx:s}}}),g.$on("click",s[31]);let et=!s[14]&&!s[12]&&Ai(s);const At=[F1,N1,D1],St=[];function It(G,Dt){return G[14]?0:G[13]?1:G[12]?2:-1}return~(T=It(s))&&(b=St[T]=At[T](s)),{c(){t=F("div"),n=F("div"),e=F("div"),o=F("div"),r=F("div"),i=F("div"),C(c.$$.fragment),a=W(),rt&&rt.c(),l=W(),u=F("div"),vt&&vt.c(),p=W(),C(g.$$.fragment),h=W(),et&&et.c(),k=W(),b&&b.c(),S=W(),H=F("div"),H.innerHTML='<div class="resize-handle-line svelte-cadhvw"></div>',E(i,"class","header-text svelte-cadhvw"),E(r,"class","header-left svelte-cadhvw"),E(u,"class","header-right svelte-cadhvw"),E(o,"class","header svelte-cadhvw"),E(e,"class","agents-list-container svelte-cadhvw"),E(e,"role","region"),E(e,"aria-label","Remote agents list"),Pt(e,"is-dragging",s[7]),Pt(e,"is-hovered",s[5]),E(H,"class","resize-handle svelte-cadhvw"),E(H,"role","separator"),E(H,"title","Drag to resize"),Pt(H,"resize-handle--dragging",s[7]),E(n,"class","remote-agent-threads svelte-cadhvw"),Kn(()=>s[50].call(n)),E(t,"class","remote-agent-threads-container svelte-cadhvw")},m(G,Dt){_(G,t,Dt),U(t,n),U(n,e),U(e,o),U(o,r),U(r,i),x(c,i,null),U(i,a),rt&&rt.m(i,null),U(o,l),U(o,u),vt&&vt.m(u,null),U(u,p),x(g,u,null),U(e,h),et&&et.m(e,null),U(n,k),~T&&St[T].m(n,null),U(n,S),U(n,H),O=_u(n,s[50].bind(n)),B=!0,ut||(kt=[bt(window,"mousemove",s[26]),bt(window,"mouseup",s[27]),bt(window,"resize",s[22]),bt(window,"focus",s[32]),bt(window,"blur",s[33]),bt(window,"resize",s[46]),bt(e,"mouseenter",s[23]),bt(e,"mouseleave",s[24]),bt(H,"mousedown",s[25])],ut=!0)},p(G,Dt){const Rt={};1&Dt[2]&&(Rt.$$scope={dirty:Dt,ctx:G}),c.$set(Rt),G[11]&&!G[13]?rt?rt.p(G,Dt):(rt=_i(G),rt.c(),rt.m(i,null)):rt&&(rt.d(1),rt=null),G[9]?vt?(vt.p(G,Dt),512&Dt[0]&&f(vt,1)):(vt=Ci(G),vt.c(),f(vt,1),vt.m(u,p)):vt&&(K(),$(vt,1,1,()=>{vt=null}),Z());const jt={};1&Dt[2]&&(jt.$$scope={dirty:Dt,ctx:G}),g.$set(jt),G[14]||G[12]?et&&(K(),$(et,1,1,()=>{et=null}),Z()):et?(et.p(G,Dt),20480&Dt[0]&&f(et,1)):(et=Ai(G),et.c(),f(et,1),et.m(e,null)),(!B||128&Dt[0])&&Pt(e,"is-dragging",G[7]),(!B||32&Dt[0])&&Pt(e,"is-hovered",G[5]);let Zt=T;T=It(G),T===Zt?~T&&St[T].p(G,Dt):(b&&(K(),$(St[Zt],1,1,()=>{St[Zt]=null}),Z()),~T?(b=St[T],b?b.p(G,Dt):(b=St[T]=At[T](G),b.c()),f(b,1),b.m(n,S)):b=null),(!B||128&Dt[0])&&Pt(H,"resize-handle--dragging",G[7])},i(G){B||(f(c.$$.fragment,G),f(vt),f(g.$$.fragment,G),f(et),f(b),B=!0)},o(G){$(c.$$.fragment,G),$(vt),$(g.$$.fragment,G),$(et),$(b),B=!1},d(G){G&&y(t),M(c),rt&&rt.d(),vt&&vt.d(),M(g),et&&et.d(),~T&&St[T].d(),O(),ut=!1,Re(kt)}}}const Co=25;function U1(s,t,n){let e,o,r,i,c,a,l,u,p,g,h,k,T,b,S,H,O,B,ut,kt,rt,vt,et,At,St,It;const G=Ht(Zn.key);Vt(s,G,I=>n(45,St=I));const Dt=xe(!1);Vt(s,Dt,I=>n(5,et=I));const Rt=xe(new Set);Vt(s,Rt,I=>n(17,It=I));let jt,Zt,Bt=!1,$e=xe(Co);Vt(s,$e,I=>n(6,At=I));let Mt=0,qt=0,me=!1;const ke=()=>{if(Mt>0&&!Bt&&!me){const I=Math.min(Mt>700?100:Mt>600?75:50,l,u);$e.set(I)}else Ao($e,At=Math.min(At,l,Math.floor(Mt-250)),At)},Xe=Nu.debounce(ke,100);async function P(I){await G.sshToRemoteAgent(I)}function w(I){G.setCurrentAgent(I)}return s.$$.update=()=>{16384&s.$$.dirty[1]&&n(2,e=St.currentAgentId),16384&s.$$.dirty[1]&&n(1,o=St.agentOverviews||[]),16384&s.$$.dirty[1]&&n(4,r=St.agentThreadsError),16384&s.$$.dirty[1]&&n(42,i=St.isLoading),16384&s.$$.dirty[1]&&n(41,c=St.hasFetchedOnce),16384&s.$$.dirty[1]&&n(3,a=St.lastSuccessfulOverviewFetch),2&s.$$.dirty[0]&&n(44,l=o.length*Co),65&s.$$.dirty[0]|8192&s.$$.dirty[1]&&n(16,u=Math.max(At,Math.min(l,Math.floor(Mt-250)))),1&s.$$.dirty[0]|8&s.$$.dirty[1]&&Mt>0&&!me&&ke(),2&s.$$.dirty[0]&&n(43,p=o.length),4096&s.$$.dirty[1]&&ke(),3072&s.$$.dirty[1]&&n(14,h=i&&!c),16&s.$$.dirty[0]|1024&s.$$.dirty[1]&&n(13,k=!!r&&c),2&s.$$.dirty[0]|1024&s.$$.dirty[1]&&n(12,T=o.length===0&&c),8&s.$$.dirty[0]&&n(40,b=a>0?Date.now()-a:0),512&s.$$.dirty[1]&&n(11,S=b>12e4),6&s.$$.dirty[0]&&n(37,H=(()=>{if(!e)return o;const I=o.find(V=>V.remote_agent_id===e),z=o.filter(V=>V.remote_agent_id!==e);return I?[I,...z]:o})()),64&s.$$.dirty[0]&&n(39,O=At>1?Math.round(Math.max(0,At)/Co):0),320&s.$$.dirty[1]&&n(38,B=Math.min(O,H.length)),32&s.$$.dirty[0]|192&s.$$.dirty[1]&&n(36,ut=et?H.length:B),96&s.$$.dirty[1]&&n(10,kt=H.slice(0,ut)),96&s.$$.dirty[1]&&n(35,rt=H.slice(ut)),16&s.$$.dirty[1]&&n(9,vt=(I=>{const z=I.filter(it=>it.status===Ve.agentIdle),V=I.filter(it=>it.status===Ve.agentRunning);return{idle:z.length,running:V.length,idleStatus:z.length>0?Ve.agentIdle:void 0,runningStatus:V.length>0?Ve.agentRunning:void 0}})(rt))},n(15,g=Array(3).fill(null)),[Mt,o,e,a,r,et,At,Bt,qt,vt,kt,S,T,k,h,g,u,It,G,Dt,Rt,$e,Xe,function(){Dt.set(!0)},function(I){const z=I.relatedTarget;z&&(z.closest(".l-dropdown-menu-augment__contents")||z.closest(".dropdown-container")||document.querySelector(".l-dropdown-menu-augment__contents.is-open"))||Dt.set(!1)},function(I){n(7,Bt=!0),jt=I.clientY,Zt=At,I.preventDefault()},function(I){if(!Bt)return;const z=I.clientY-jt,V=Zt+z,it=Math.round(V/Co)*Co;Ao($e,At=Math.max(25,Math.min(u,it)),At)},function(){Bt&&n(34,me=!0),n(7,Bt=!1)},async function(I){Rt.update(z=>{const V=new Set(z);return V.add(I),V});try{await G.deleteAgent(I)}finally{Rt.update(z=>{const V=new Set(z);return V.delete(I),V})}},P,w,function(){G.setCurrentAgent(void 0)},function(){G.setIsPanelFocused(!0)},function(){G.setIsPanelFocused(!1)},me,rt,ut,H,B,O,b,c,i,p,l,St,function(){n(0,Mt=window.innerHeight)},I=>P(I),I=>w(I.remote_agent_id),(I,z)=>z.key==="Enter"&&w(I.remote_agent_id),function(){qt=this.clientWidth,n(8,qt)}]}class q1 extends nt{constructor(t){super(),ot(this,t,U1,j1,tt,{},null,[-1,-1,-1])}}const W1=s=>({}),Ii=s=>({slot:"icon"}),V1=s=>({}),Si=s=>({slot:"icon"});function G1(s){let t,n;return t=new Pn({props:{variant:"soft",size:1,color:s[0],$$slots:{icon:[Z1],default:[K1]},$$scope:{ctx:s}}}),{c(){C(t.$$.fragment)},m(e,o){x(t,e,o),n=!0},p(e,o){const r={};1&o&&(r.color=e[0]),74&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){M(t,e)}}}function Y1(s){let t,n,e,o;return t=new Pn({props:{variant:"soft",size:1,color:s[0],$$slots:{default:[J1]},$$scope:{ctx:s}}}),e=new Pn({props:{variant:"soft",size:1,color:"info",$$slots:{icon:[tf],default:[Q1]},$$scope:{ctx:s}}}),{c(){C(t.$$.fragment),n=W(),C(e.$$.fragment)},m(r,i){x(t,r,i),_(r,n,i),x(e,r,i),o=!0},p(r,i){const c={};1&i&&(c.color=r[0]),66&i&&(c.$$scope={dirty:i,ctx:r}),t.$set(c);const a={};68&i&&(a.$$scope={dirty:i,ctx:r}),e.$set(a)},i(r){o||(f(t.$$.fragment,r),f(e.$$.fragment,r),o=!0)},o(r){$(t.$$.fragment,r),$(e.$$.fragment,r),o=!1},d(r){r&&y(n),M(t,r),M(e,r)}}}function Ri(s){let t,n;return t=new Me({props:{variant:"ghost",color:"neutral",size:1,$$slots:{default:[X1]},$$scope:{ctx:s}}}),t.$on("click",s[5]),{c(){C(t.$$.fragment)},m(e,o){x(t,e,o),n=!0},p(e,o){const r={};64&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){M(t,e)}}}function X1(s){let t,n;return t=new Mr({}),{c(){C(t.$$.fragment)},m(e,o){x(t,e,o),n=!0},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){M(t,e)}}}function K1(s){let t,n,e,o;n=new is({props:{markdown:s[1]}});let r=!!s[3]&&Ri(s);return{c(){t=F("div"),C(n.$$.fragment),e=W(),r&&r.c(),E(t,"class","c-callout-wrapper svelte-fh6sa8")},m(i,c){_(i,t,c),x(n,t,null),U(t,e),r&&r.m(t,null),o=!0},p(i,c){const a={};2&c&&(a.markdown=i[1]),n.$set(a),i[3]?r?(r.p(i,c),8&c&&f(r,1)):(r=Ri(i),r.c(),f(r,1),r.m(t,null)):r&&(K(),$(r,1,1,()=>{r=null}),Z())},i(i){o||(f(n.$$.fragment,i),f(r),o=!0)},o(i){$(n.$$.fragment,i),$(r),o=!1},d(i){i&&y(t),M(n),r&&r.d()}}}function Z1(s){let t;const n=s[4].icon,e=Gt(n,s,s[6],Ii);return{c(){e&&e.c()},m(o,r){e&&e.m(o,r),t=!0},p(o,r){e&&e.p&&(!t||64&r)&&Yt(e,n,o,o[6],t?Kt(n,o[6],r,W1):Xt(o[6]),Ii)},i(o){t||(f(e,o),t=!0)},o(o){$(e,o),t=!1},d(o){e&&e.d(o)}}}function J1(s){let t,n;return t=new is({props:{markdown:s[1]}}),{c(){C(t.$$.fragment)},m(e,o){x(t,e,o),n=!0},p(e,o){const r={};2&o&&(r.markdown=e[1]),t.$set(r)},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){M(t,e)}}}function Q1(s){let t,n;return t=new is({props:{markdown:s[2]}}),{c(){C(t.$$.fragment)},m(e,o){x(t,e,o),n=!0},p(e,o){const r={};4&o&&(r.markdown=e[2]),t.$set(r)},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){M(t,e)}}}function tf(s){let t;const n=s[4].icon,e=Gt(n,s,s[6],Si);return{c(){e&&e.c()},m(o,r){e&&e.m(o,r),t=!0},p(o,r){e&&e.p&&(!t||64&r)&&Yt(e,n,o,o[6],t?Kt(n,o[6],r,V1):Xt(o[6]),Si)},i(o){t||(f(e,o),t=!0)},o(o){$(e,o),t=!1},d(o){e&&e.d(o)}}}function ef(s){let t,n,e,o,r;const i=[Y1,G1],c=[];function a(p,g){return p[2]?0:1}n=a(s),e=c[n]=i[n](s);const l=s[4].default,u=Gt(l,s,s[6],null);return{c(){t=F("div"),e.c(),o=W(),u&&u.c(),E(t,"class","c-base-card svelte-fh6sa8")},m(p,g){_(p,t,g),c[n].m(t,null),U(t,o),u&&u.m(t,null),r=!0},p(p,[g]){let h=n;n=a(p),n===h?c[n].p(p,g):(K(),$(c[h],1,1,()=>{c[h]=null}),Z(),e=c[n],e?e.p(p,g):(e=c[n]=i[n](p),e.c()),f(e,1),e.m(t,o)),u&&u.p&&(!r||64&g)&&Yt(u,l,p,p[6],r?Kt(l,p[6],g,null):Xt(p[6]),null)},i(p){r||(f(e),f(u,p),r=!0)},o(p){$(e),$(u,p),r=!1},d(p){p&&y(t),c[n].d(),u&&u.d(p)}}}function nf(s,t,n){let{$$slots:e={},$$scope:o}=t,{color:r}=t,{description:i}=t,{callout:c}=t,{onClose:a}=t;return s.$$set=l=>{"color"in l&&n(0,r=l.color),"description"in l&&n(1,i=l.description),"callout"in l&&n(2,c=l.callout),"onClose"in l&&n(3,a=l.onClose),"$$scope"in l&&n(6,o=l.$$scope)},[r,i,c,a,e,()=>a(),o]}class Lr extends nt{constructor(t){super(),ot(this,t,nf,ef,tt,{color:0,description:1,callout:2,onClose:3})}}function of(s){let t;return{c(){t=F("div"),t.innerHTML='<div class="c-progress-bar__bar svelte-dg8hvh"></div>',E(t,"class","c-progress-bar svelte-dg8hvh")},m(n,e){_(n,t,e)},p:D,i:D,o:D,d(n){n&&y(t)}}}class rf extends nt{constructor(t){super(),ot(this,t,null,of,tt,{})}}function Pi(s,t,n){const e=s.slice();return e[9]=t[n].text,e[10]=t[n].action,e[11]=t[n].appearance,e}const sf=s=>({}),Di=s=>({slot:"icon"});function af(s){let t,n,e=s[9]+"";return{c(){t=X(e),n=W()},m(o,r){_(o,t,r),_(o,n,r)},p(o,r){4&r&&e!==(e=o[9]+"")&&Lt(t,e)},d(o){o&&(y(t),y(n))}}}function Ni(s){let t,n;return t=new pe({props:{size:2,variant:"solid",color:s[11]?s[11]:"accent",class:"c-btns-card__button",title:s[9],$$slots:{default:[af]},$$scope:{ctx:s}}}),t.$on("click",function(){return s[7](s[10])}),{c(){C(t.$$.fragment)},m(e,o){x(t,e,o),n=!0},p(e,o){s=e;const r={};4&o&&(r.color=s[11]?s[11]:"accent"),4&o&&(r.title=s[9]),260&o&&(r.$$scope={dirty:o,ctx:s}),t.$set(r)},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){M(t,e)}}}function Fi(s){let t,n;return t=new rf({}),{c(){C(t.$$.fragment)},m(e,o){x(t,e,o),n=!0},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){M(t,e)}}}function cf(s){let t,n,e,o,r=de(s[2]),i=[];for(let l=0;l<r.length;l+=1)i[l]=Ni(Pi(s,r,l));const c=l=>$(i[l],1,1,()=>{i[l]=null});let a=s[3]&&Fi();return{c(){t=F("div");for(let l=0;l<i.length;l+=1)i[l].c();n=W(),a&&a.c(),e=ft(),E(t,"class","c-btns-card__buttons svelte-1701q2d")},m(l,u){_(l,t,u);for(let p=0;p<i.length;p+=1)i[p]&&i[p].m(t,null);_(l,n,u),a&&a.m(l,u),_(l,e,u),o=!0},p(l,u){if(36&u){let p;for(r=de(l[2]),p=0;p<r.length;p+=1){const g=Pi(l,r,p);i[p]?(i[p].p(g,u),f(i[p],1)):(i[p]=Ni(g),i[p].c(),f(i[p],1),i[p].m(t,null))}for(K(),p=r.length;p<i.length;p+=1)c(p);Z()}l[3]?a?8&u&&f(a,1):(a=Fi(),a.c(),f(a,1),a.m(e.parentNode,e)):a&&(K(),$(a,1,1,()=>{a=null}),Z())},i(l){if(!o){for(let u=0;u<r.length;u+=1)f(i[u]);f(a),o=!0}},o(l){i=i.filter(Boolean);for(let u=0;u<i.length;u+=1)$(i[u]);$(a),o=!1},d(l){l&&(y(t),y(n),y(e)),fn(i,l),a&&a.d(l)}}}function lf(s){let t;const n=s[6].icon,e=Gt(n,s,s[8],Di);return{c(){e&&e.c()},m(o,r){e&&e.m(o,r),t=!0},p(o,r){e&&e.p&&(!t||256&r)&&Yt(e,n,o,o[8],t?Kt(n,o[8],r,sf):Xt(o[8]),Di)},i(o){t||(f(e,o),t=!0)},o(o){$(e,o),t=!1},d(o){e&&e.d(o)}}}function uf(s){let t,n;return t=new Lr({props:{color:s[1],description:s[0],callout:s[4],$$slots:{icon:[lf],default:[cf]},$$scope:{ctx:s}}}),{c(){C(t.$$.fragment)},m(e,o){x(t,e,o),n=!0},p(e,[o]){const r={};2&o&&(r.color=e[1]),1&o&&(r.description=e[0]),16&o&&(r.callout=e[4]),268&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){M(t,e)}}}function df(s,t,n){let{$$slots:e={},$$scope:o}=t,{description:r}=t,{color:i}=t,{buttons:c=[]}=t,{inProgress:a=!1}=t,{callout:l}=t;function u(p){sn.postMessage({type:fe.mainPanelPerformAction,data:p})}return s.$$set=p=>{"description"in p&&n(0,r=p.description),"color"in p&&n(1,i=p.color),"buttons"in p&&n(2,c=p.buttons),"inProgress"in p&&n(3,a=p.inProgress),"callout"in p&&n(4,l=p.callout),"$$scope"in p&&n(8,o=p.$$scope)},[r,i,c,a,l,u,e,p=>u(p),o]}class Po extends nt{constructor(t){super(),ot(this,t,df,uf,tt,{description:0,color:1,buttons:2,inProgress:3,callout:4})}}function ff(s){let t,n;return{c(){t=Nt("svg"),n=Nt("path"),E(n,"fill-rule","evenodd"),E(n,"clip-rule","evenodd"),E(n,"d","M7.49991 0.876892C3.84222 0.876892 0.877075 3.84204 0.877075 7.49972C0.877075 11.1574 3.84222 14.1226 7.49991 14.1226C11.1576 14.1226 14.1227 11.1574 14.1227 7.49972C14.1227 3.84204 11.1576 0.876892 7.49991 0.876892ZM1.82707 7.49972C1.82707 4.36671 4.36689 1.82689 7.49991 1.82689C10.6329 1.82689 13.1727 4.36671 13.1727 7.49972C13.1727 10.6327 10.6329 13.1726 7.49991 13.1726C4.36689 13.1726 1.82707 10.6327 1.82707 7.49972ZM8.24992 4.49999C8.24992 4.9142 7.91413 5.24999 7.49992 5.24999C7.08571 5.24999 6.74992 4.9142 6.74992 4.49999C6.74992 4.08577 7.08571 3.74999 7.49992 3.74999C7.91413 3.74999 8.24992 4.08577 8.24992 4.49999ZM6.00003 5.99999H6.50003H7.50003C7.77618 5.99999 8.00003 6.22384 8.00003 6.49999V9.99999H8.50003H9.00003V11H8.50003H7.50003H6.50003H6.00003V9.99999H6.50003H7.00003V6.99999H6.50003H6.00003V5.99999Z"),E(n,"fill","currentColor"),E(t,"width","15"),E(t,"height","15"),E(t,"viewBox","0 0 15 15"),E(t,"fill","none"),E(t,"xmlns","http://www.w3.org/2000/svg")},m(e,o){_(e,t,o),U(t,n)},p:D,i:D,o:D,d(e){e&&y(t)}}}class Ir extends nt{constructor(t){super(),ot(this,t,null,ff,tt,{})}}function mf(s){return{c:D,m:D,p:D,i:D,o:D,d:D}}function pf(s){let t,n;return t=new Lr({props:{color:"warning",description:"Current workspace contains your home directory. Augment cannot upload your home directory to the cloud. Please open a different workspace",$$slots:{icon:[bf]},$$scope:{ctx:s}}}),{c(){C(t.$$.fragment)},m(e,o){x(t,e,o),n=!0},p(e,o){const r={};8&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){M(t,e)}}}function $f(s){let t,n;return t=new Lr({props:{color:"warning",description:`The workspace you have opened exceeds Augment's ${s[1].maxTrackableFileCount} file upload limit. Please use a .augmentignore or .gitignore to exclude files from being uploaded, or open a smaller workspace.`,$$slots:{icon:[_f]},$$scope:{ctx:s}}}),{c(){C(t.$$.fragment)},m(e,o){x(t,e,o),n=!0},p(e,o){const r={};2&o&&(r.description=`The workspace you have opened exceeds Augment's ${e[1].maxTrackableFileCount} file upload limit. Please use a .augmentignore or .gitignore to exclude files from being uploaded, or open a smaller workspace.`),8&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){M(t,e)}}}function hf(s){let t,n;return t=new Po({props:{color:"neutral",description:"To provide the best quality responses, Augment will index your code in our secure cloud. Your data always stays secure and private. [Learn More](https://docs.augmentcode.com/setup-augment/workspace-indexing)",callout:s[2].userTier==="community"?"You are subscribed to the Community plan, we may use any code you share to train our AI models.":void 0,buttons:[{text:"Enable Indexing",action:"grant-sync-permission"}],$$slots:{icon:[Cf]},$$scope:{ctx:s}}}),{c(){C(t.$$.fragment)},m(e,o){x(t,e,o),n=!0},p(e,o){const r={};4&o&&(r.callout=e[2].userTier==="community"?"You are subscribed to the Community plan, we may use any code you share to train our AI models.":void 0),8&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){M(t,e)}}}function gf(s){let t,n;return t=new Po({props:{color:"warning",description:"Codeium suggestions will collide with Augment's suggestions. Turn off Codeium to fix this.",buttons:[{text:"Disable Codeium",action:"disable-codeium"}],$$slots:{icon:[xf]},$$scope:{ctx:s}}}),{c(){C(t.$$.fragment)},m(e,o){x(t,e,o),n=!0},p(e,o){const r={};8&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){M(t,e)}}}function vf(s){let t,n;return t=new Po({props:{color:"warning",description:"GitHub Copilot suggestions will collide with Augment's suggestions. Turn off Copilot to fix this.",buttons:[{text:"Disable Github Copilot",action:"disable-github-copilot"}],$$slots:{icon:[Mf]},$$scope:{ctx:s}}}),{c(){C(t.$$.fragment)},m(e,o){x(t,e,o),n=!0},p(e,o){const r={};8&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){M(t,e)}}}function wf(s){let t,n;return t=new Po({props:{color:"neutral",description:"Please complete the sign-in process in your browser.",buttons:[{text:"Cancel",action:"cancel-sign-in",appearance:"neutral"}],inProgress:!0,$$slots:{icon:[Af]},$$scope:{ctx:s}}}),{c(){C(t.$$.fragment)},m(e,o){x(t,e,o),n=!0},p(e,o){const r={};8&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){M(t,e)}}}function yf(s){let t,n;return t=new Po({props:{color:"neutral",description:"Welcome to Augment! Sign in to your existing account or create a new one to get started.",buttons:[{text:"Start using Augment",action:"sign-in"}],$$slots:{icon:[Ef]},$$scope:{ctx:s}}}),{c(){C(t.$$.fragment)},m(e,o){x(t,e,o),n=!0},p(e,o){const r={};8&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){M(t,e)}}}function bf(s){let t,n;return t=new Dn({props:{slot:"icon"}}),{c(){C(t.$$.fragment)},m(e,o){x(t,e,o),n=!0},p:D,i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){M(t,e)}}}function _f(s){let t,n;return t=new Dn({props:{slot:"icon"}}),{c(){C(t.$$.fragment)},m(e,o){x(t,e,o),n=!0},p:D,i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){M(t,e)}}}function Cf(s){let t,n;return t=new Ir({props:{slot:"icon"}}),{c(){C(t.$$.fragment)},m(e,o){x(t,e,o),n=!0},p:D,i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){M(t,e)}}}function xf(s){let t,n;return t=new Dn({props:{slot:"icon"}}),{c(){C(t.$$.fragment)},m(e,o){x(t,e,o),n=!0},p:D,i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){M(t,e)}}}function Mf(s){let t,n;return t=new Dn({props:{slot:"icon"}}),{c(){C(t.$$.fragment)},m(e,o){x(t,e,o),n=!0},p:D,i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){M(t,e)}}}function Af(s){let t,n;return t=new Ir({props:{slot:"icon"}}),{c(){C(t.$$.fragment)},m(e,o){x(t,e,o),n=!0},p:D,i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){M(t,e)}}}function Ef(s){let t,n;return t=new Ir({props:{slot:"icon"}}),{c(){C(t.$$.fragment)},m(e,o){x(t,e,o),n=!0},p:D,i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){M(t,e)}}}function kf(s){let t,n,e,o;const r=[yf,wf,vf,gf,hf,$f,pf,mf],i=[];function c(a,l){return a[0]===Ge.signInRequired?0:a[0]===Ml.signInInProgress?1:a[0]===Ge.disableCopilot?2:a[0]===Ge.disableCodeium?3:a[0]===Ge.syncingPermissionNeeded?4:a[0]===Ge.workspaceTooLarge?5:a[0]===Ge.uploadingHomeDir?6:a[0]===Ge.allActionsComplete?7:-1}return~(t=c(s))&&(n=i[t]=r[t](s)),{c(){n&&n.c(),e=ft()},m(a,l){~t&&i[t].m(a,l),_(a,e,l),o=!0},p(a,[l]){let u=t;t=c(a),t===u?~t&&i[t].p(a,l):(n&&(K(),$(i[u],1,1,()=>{i[u]=null}),Z()),~t?(n=i[t],n?n.p(a,l):(n=i[t]=r[t](a),n.c()),f(n,1),n.m(e.parentNode,e)):n=null)},i(a){o||(f(n),o=!0)},o(a){$(n),o=!1},d(a){a&&y(e),~t&&i[t].d(a)}}}function Tf(s,t,n){let e,o=D,r=()=>(o(),o=se(c,a=>n(2,e=a)),c);s.$$.on_destroy.push(()=>o());let{card:i}=t,{flagsModel:c}=t;return r(),s.$$set=a=>{"card"in a&&n(0,i=a.card),"flagsModel"in a&&r(n(1,c=a.flagsModel))},[i,c,e]}class Ll extends nt{constructor(t){super(),ot(this,t,Tf,kf,tt,{card:0,flagsModel:1})}}var Lf=Md,If=/\s/,Sf=function(s){for(var t=s.length;t--&&If.test(s.charAt(t)););return t},Rf=/^\s+/,Pf=Ad,Df=Ed,Nf=function(s){return s&&s.slice(0,Sf(s)+1).replace(Rf,"")},Oi=as,Ff=function(s){return typeof s=="symbol"||Df(s)&&Pf(s)=="[object Symbol]"},Of=/^[-+]0x[0-9a-f]+$/i,Bf=/^0b[01]+$/i,zf=/^0o[0-7]+$/i,Hf=parseInt,jf=as,Zr=function(){return Lf.Date.now()},Bi=function(s){if(typeof s=="number")return s;if(Ff(s))return NaN;if(Oi(s)){var t=typeof s.valueOf=="function"?s.valueOf():s;s=Oi(t)?t+"":t}if(typeof s!="string")return s===0?s:+s;s=Nf(s);var n=Bf.test(s);return n||zf.test(s)?Hf(s.slice(2),n?2:8):Of.test(s)?NaN:+s},Uf=Math.max,qf=Math.min,Wf=function(s,t,n){var e,o,r,i,c,a,l=0,u=!1,p=!1,g=!0;if(typeof s!="function")throw new TypeError("Expected a function");function h(H){var O=e,B=o;return e=o=void 0,l=H,i=s.apply(B,O)}function k(H){var O=H-a;return a===void 0||O>=t||O<0||p&&H-l>=r}function T(){var H=Zr();if(k(H))return b(H);c=setTimeout(T,function(O){var B=t-(O-a);return p?qf(B,r-(O-l)):B}(H))}function b(H){return c=void 0,g&&e?h(H):(e=o=void 0,i)}function S(){var H=Zr(),O=k(H);if(e=arguments,o=this,a=H,O){if(c===void 0)return function(B){return l=B,c=setTimeout(T,t),u?h(B):i}(a);if(p)return clearTimeout(c),c=setTimeout(T,t),h(a)}return c===void 0&&(c=setTimeout(T,t)),i}return t=Bi(t)||0,jf(n)&&(u=!!n.leading,r=(p="maxWait"in n)?Uf(Bi(n.maxWait)||0,t):r,g="trailing"in n?!!n.trailing:g),S.cancel=function(){c!==void 0&&clearTimeout(c),l=0,e=a=o=c=void 0},S.flush=function(){return c===void 0?i:b(Zr())},S},Vf=Wf,Gf=as,Yf=function(s,t,n){var e=!0,o=!0;if(typeof s!="function")throw new TypeError("Expected a function");return Gf(n)&&(e="leading"in n?!!n.leading:e,o="trailing"in n?!!n.trailing:o),Vf(s,t,{leading:e,maxWait:t,trailing:o})};const Il=Mu(Yf);class Xf{constructor(t,n,e){st(this,"_agenticExchangeStatus",xe(cr.notRunning));st(this,"_isCurrConversationAgentic",xe(!1));st(this,"_isAutoModeApproved",xe(!1));st(this,"_showAutoModeWarning");st(this,"_hasEverUsedAgent",xe(void 0));st(this,"_classifiedMemoriesMap",new Map);st(this,"_disposers",[]);st(this,"isAgenticTurnComplete",un(this._agenticExchangeStatus,t=>t===cr.notRunning));st(this,"_lastConversation",xe({chat:void 0,agent:void 0}));st(this,"_shouldCreateNewConversation",()=>{const t=this._chatModel.currentConversationModel;return!dn.isEmpty(t)});st(this,"setToAgentic",async()=>{if(Ie(this._chatModel.currentConversationModel))return;const t=this._shouldCreateNewConversation(),n=ce(this._lastConversation).agent;let e;if(this._lastConversation.update(()=>({chat:this._chatModel.currentConversationModel.id,agent:void 0})),t||!n){const r=await this._create();r.extraData={isAgentConversation:!0},this._chatModel.deleteInvalidConversations("agent"),this._chatModel.currentConversationModel.setConversation(r),e=r.id}else this._chatModel.setCurrentConversation(n),e=n;this._chatModel.extensionClient.reportAgentSessionEvent({eventName:mr.openedAgentConversation,conversationId:e});const o=this._chatModel.currentConversationModel.subscribe(async r=>{await this._maybeTriggerWelcomeMessage(r.id)&&o()})});st(this,"setToChat",()=>{if(!Ie(this._chatModel.currentConversationModel))return;const t=this._shouldCreateNewConversation(),n=ce(this._lastConversation).chat;if(this._lastConversation.update(()=>({chat:void 0,agent:this._chatModel.currentConversationModel.id})),t||!n){const e={...dn.create(),extraData:{isAgentConversation:!1}};this._chatModel.deleteInvalidConversations("chat"),this._chatModel.currentConversationModel.setConversation(e)}else this._chatModel.setCurrentConversation(n)});st(this,"_maybeTriggerWelcomeMessage",async t=>{var o;const n=this._chatModel.currentConversationModel;if(n.id!==t)return!1;if(await this.refreshHasEverUsedAgent(),!dn.isEmpty(n)||dn.isNamed(n)||((o=n.extraData)==null?void 0:o.hasAgentOnboarded)||ce(this._hasEverUsedAgent)||(this.setHasEverUsedAgent(!0),n.setName("Welcome to the Augment Agent"),n.extraData={isAgentConversation:!0,hasAgentOnboarded:!0},!ul()))return!0;const e=await this._chatModel.extensionClient.getAgentOnboardingPrompt();return await n.sendExchange({chatItemType:Cn.agentOnboarding,request_message:e,status:_e.draft}),!0});st(this,"markDirty",()=>{const t=this._chatModel.currentConversationModel;t.extraData={...t.extraData,hasDirtyEdits:!0}});st(this,"markClean",()=>{const t=this._chatModel.currentConversationModel;t.extraData={...t.extraData,hasDirtyEdits:!1}});st(this,"_findAgentic",()=>this._chatModel.orderedConversations().find(Ie));st(this,"_findChat",()=>this._chatModel.orderedConversations().find(t=>!Ie(t)));st(this,"_create",async()=>({...dn.create({personaType:await this._chatModel.currentConversationModel.decidePersonaType()}),extraData:{isAgentConversation:!0,baselineTimestamp:0}}));st(this,"updateBaselineTimestamp",t=>{const n=Math.min(t,Date.now()),e=this._chatModel.currentConversationModel;Ie(e)&&(e.extraData={...e.extraData,baselineTimestamp:n})});st(this,"getBaselineTimestamp",()=>{const t=this._chatModel.currentConversationModel;return Ie(t)?t.extraData.baselineTimestamp??0:0});st(this,"getConversationId",()=>this._chatModel.currentConversationModel.id);st(this,"interruptAgent",async()=>{await this._toolsModel.interruptAllTools(),await this._chatModel.currentConversationModel.cancelMessage();const t=this._chatModel.currentConversationModel.lastExchange;t!=null&&t.request_id&&this._classifiedMemoriesMap.delete(t.request_id)});st(this,"_resetStateToDefaultValues",()=>{this.setHasEverUsedAgent(!1),this._chatModel.extensionClient.setAgentAutoModeApproved(!1),this._isAutoModeApproved.set(!1),this._chatModel.agentExecutionMode.set(gn.manual)});st(this,"acceptAutoMode",()=>{this._chatModel.extensionClient.setAgentAutoModeApproved(!0),this._isAutoModeApproved.set(!0),this._chatModel.agentExecutionMode.set(gn.auto)});st(this,"refreshAutoModeAcceptance",async()=>{const t=await this._chatModel.extensionClient.checkAgentAutoModeApproval();this._isAutoModeApproved.set(t)});st(this,"rejectAutoMode",()=>{this._chatModel.extensionClient.setAgentAutoModeApproved(!1),this._isAutoModeApproved.set(!1),this._chatModel.agentExecutionMode.set(gn.manual)});st(this,"setHasEverUsedAgent",t=>{this._chatModel.extensionClient.setHasEverUsedAgent(t),this._hasEverUsedAgent.set(t)});st(this,"refreshHasEverUsedAgent",async()=>{if(ce(this.hasEverUsedAgent)!==void 0)return;const t=await this._chatModel.extensionClient.checkHasEverUsedAgent();ce(this.hasEverUsedAgent)===void 0&&this._hasEverUsedAgent.set(t)});var i;this._chatModel=t,this._toolsModel=n,this._checkpointStore=e,this._checkpointStore.registerAgentConversationModel(this);const o=Object.values(this._chatModel.conversations).some(c=>{var a;return(a=c.extraData)==null?void 0:a.isAgentConversation}),r=((i=this._chatModel.currentConversationModel.extraData)==null?void 0:i.isAgentConversation)===!0;(o||r)&&this.setHasEverUsedAgent(!0),this.refreshAutoModeAcceptance(),this.refreshHasEverUsedAgent(),this._showAutoModeWarning=un([this._isAutoModeApproved,this._chatModel.agentExecutionMode,this._isCurrConversationAgentic],([c,a,l])=>!c&&a===gn.auto&&l),this._disposers.push(this._chatModel.currentConversationModel.subscribe(()=>{const c=this._chatModel.currentConversationModel,a=Ie(c);this._isCurrConversationAgentic.set(a)})),this._disposers.push(this._chatModel.currentConversationModel.subscribe(Il(()=>{const c=Fu(this._chatModel.currentConversationModel);this._agenticExchangeStatus.set(c)},1e3,{leading:!0,trailing:!0}))),this._disposers.push(this._isCurrConversationAgentic.subscribe(c=>{c?(this._chatModel.extensionClient.setChatMode(di.agent),this._chatModel.specialContextInputModel.enableAgentMemories()):(this._chatModel.extensionClient.setChatMode(di.chat),this._chatModel.specialContextInputModel.disableAgentMemories()),this._agenticExchangeStatus.set(cr.notRunning)})),this._disposers.push(this._chatModel.currentConversationModel.onBeforeChangeConversation((c,a)=>{var l;if(Ie(c))return dn.isEmpty(a)&&((l=a.extraData)==null?void 0:l.isAgentConversation)!==!1&&this._chatModel.conversations[a.id]===void 0&&(a={...a,extraData:{...a.extraData,isAgentConversation:!0}}),a})),this._disposers.push(this._chatModel.currentConversationModel.subscribe(c=>{const a=c.lastExchange,l=this._chatModel.flags.memoryClassificationOnFirstToken;a&&a.request_id&&l&&(a.status===_e.sent&&a.response_text&&a.response_text.length>0&&!this._classifiedMemoriesMap.has(a.request_id)&&(this._classifiedMemoriesMap.set(a.request_id,!0),fi(c,a)),!a.request_id||a.status!==_e.success&&a.status!==_e.failed&&a.status!==_e.cancelled||this._classifiedMemoriesMap.delete(a.request_id))})),this._disposers.push(this._chatModel.currentConversationModel.onSendExchange(c=>{this._chatModel.flags.memoryClassificationOnFirstToken||fi(this._chatModel.currentConversationModel,c)})),this._disposers.push(this._chatModel.currentConversationModel.onNewConversation(()=>{const c=this._chatModel.currentConversationModel.id;this._chatModel.extensionClient.setCurrentConversation(c),Ie(this._chatModel.currentConversationModel)&&!this._chatModel.currentConversationModel.chatHistory.some(dl)&&this._checkpointStore.maybeCreateOriginalCheckpoint()})),this._chatModel.extensionClient.setCurrentConversation(this._chatModel.currentConversationModel.id),this._disposers.push(this.isAgenticTurnComplete.subscribe(c=>{var p,g;if(!c||!Ie(this._chatModel.currentConversationModel))return;const a=this._chatModel.currentConversationModel,l=Ou(a);if(!l)return;const u=Bu.create();u.setFlag(Bn.start);try{const h=(p=zu(a))==null?void 0:p.request_id;h&&u.setRequestId(Bn.lastUserExchangeRequestId,h);const{memoriesRequestId:k,memory:T}=l;if(u.setRequestId(Bn.memoriesRequestId,k),!T)return void u.setFlag(Bn.emptyMemory);if(Hu(a))return void u.setFlag(Bn.agenticTurnHasRememberToolCall);if(this._chatModel.extensionClient.callTool(((g=a.lastExchange)==null?void 0:g.request_id)??"","remember","remember",{memory:T,caller:mi.classify_and_distill,isComplexNewMemory:!1,memoriesRequestId:k},a.chatHistory.filter(b=>fr(b)).map(ts),a.id),h){const b=ju(a,h);u.setFlag(Bn.removeUserExchangeMemoryFailed,!b)}}catch{u.setFlag(Bn.exceptionThrown)}finally{u.setFlag(Bn.end),this._chatModel.extensionClient.reportAgentSessionEvent({eventName:mr.flushMemories,conversationId:this._chatModel.currentConversationModel.id,eventData:{flushMemoriesData:u}})}})),this._disposers.push(this.isAgenticTurnComplete.subscribe(async c=>{if(c){const a=ce(this._checkpointStore.currentCheckpoint),l=ce(this._chatModel.currentConversationModel).id;await this._chatModel.extensionClient.hasChangesSince((a==null?void 0:a.fromTimestamp)??this.getBaselineTimestamp())&&l===ce(this._chatModel.currentConversationModel).id&&this._checkpointStore.createNewCheckpoint()}})),this._disposers.push(this._checkpointStore.targetCheckpointSummary.subscribe(()=>{ce(this._checkpointStore.targetCheckpointHasChanges)?this.markDirty():this.markClean()}))}get isCurrConversationAgentic(){return this._isCurrConversationAgentic}get agentExchangeStatus(){return this._agenticExchangeStatus}async distillMemory(t){const n=this._chatModel.currentConversationModel.chatHistory.find(o=>Uu(o)&&o.request_id===t);if(!(n!=null&&n.request_message))return;const{responseText:e}=await this._chatModel.currentConversationModel.sendSilentExchange({request_message:n.request_message,disableRetrieval:!0,disableHistory:!1,disableSelectedCodeDetails:!0,memoriesInfo:{isDistill:!0}});try{const o=JSON.parse(e);o.content&&await this._chatModel.extensionClient.callTool(t,"remember","remember",{memory:o.content,caller:mi.classify_and_distill,isComplexNewMemory:!1},this._chatModel.currentConversationModel.chatHistory.filter(fr).map(ts),this._chatModel.currentConversationModel.id)}catch(o){console.warn("Failed to parse JSON from distill memory response",o)}}async resetOnboarding(){this._resetStateToDefaultValues();const t=this._chatModel.currentConversationModel;Ie(t)&&(t.extraData={...t.extraData,hasAgentOnboarded:!1},await this._maybeTriggerWelcomeMessage(t.id))}get showAutoModeWarning(){return this._showAutoModeWarning}get hasEverUsedAgent(){return this._hasEverUsedAgent}dispose(){this._disposers.forEach(t=>t()),this._disposers=[],this._classifiedMemoriesMap.clear()}}function zi(s){let t,n;return t=new Lr({props:{color:"accent",description:"Agent Mode is now available",onClose:s[5],$$slots:{icon:[Jf],default:[Zf]},$$scope:{ctx:s}}}),{c(){C(t.$$.fragment)},m(e,o){x(t,e,o),n=!0},p(e,o){const r={};1&o&&(r.onClose=e[5]),65&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){M(t,e)}}}function Kf(s){let t;return{c(){t=X("Try it out")},m(n,e){_(n,t,e)},d(n){n&&y(t)}}}function Zf(s){let t,n;return t=new pe({props:{size:2,variant:"solid",color:"accent",title:"Try it out",$$slots:{default:[Kf]},$$scope:{ctx:s}}}),t.$on("click",s[4]),{c(){C(t.$$.fragment)},m(e,o){x(t,e,o),n=!0},p(e,o){const r={};64&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){M(t,e)}}}function Jf(s){let t,n;return t=new Ir({props:{slot:"icon"}}),{c(){C(t.$$.fragment)},m(e,o){x(t,e,o),n=!0},p:D,i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){M(t,e)}}}function Qf(s){let t,n,e=s[0]&&zi(s);return{c(){e&&e.c(),t=ft()},m(o,r){e&&e.m(o,r),_(o,t,r),n=!0},p(o,[r]){o[0]?e?(e.p(o,r),1&r&&f(e,1)):(e=zi(o),e.c(),f(e,1),e.m(t.parentNode,t)):e&&(K(),$(e,1,1,()=>{e=null}),Z())},i(o){n||(f(e),n=!0)},o(o){$(e),n=!1},d(o){o&&y(t),e&&e.d(o)}}}function tm(s,t,n){let e,o,r,i=D;s.$$.on_destroy.push(()=>i());const c=Ht("agentConversationModel");return s.$$.update=()=>{8&s.$$.dirty&&n(0,o=r===!1)},n(1,e=c.hasEverUsedAgent),i(),i=se(e,a=>n(3,r=a)),[o,e,c,r,async()=>{n(0,o=!1),await c.setToAgentic()},async()=>{n(0,o=!1),c.setHasEverUsedAgent(!0)}]}class em extends nt{constructor(t){super(),ot(this,t,tm,Qf,tt,{})}}function nm(s){let t,n,e=[{xmlns:"http://www.w3.org/2000/svg"},{"data-ds-icon":"fa"},{viewBox:"0 0 448 512"},s[0]],o={};for(let r=0;r<e.length;r+=1)o=Ct(o,e[r]);return{c(){t=Nt("svg"),n=new Fe(!0),this.h()},l(r){t=Oe(r,"svg",{xmlns:!0,"data-ds-icon":!0,viewBox:!0});var i=Be(t);n=ze(i,!0),i.forEach(y),this.h()},h(){n.a=null,ne(t,o)},m(r,i){He(r,t,i),n.m('<!--! Font Awesome Pro 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2024 Fonticons, Inc.--><path d="M337 81c9.4-9.4 9.4-24.6 0-33.9s-24.6-9.4-33.9 0l-143 143L97 127c-9.4-9.4-24.6-9.4-33.9 0s-9.4 24.6 0 33.9l80 80c9.4 9.4 24.6 9.4 33.9 0zm104 120c9.4-9.4 9.4-24.6 0-33.9s-24.6-9.4-33.9 0l-247 247L41 295c-9.4-9.4-24.6-9.4-33.9 0s-9.4 24.6 0 33.9L143 465c9.4 9.4 24.6 9.4 33.9 0z"/>',t)},p(r,[i]){ne(t,o=ge(e,[{xmlns:"http://www.w3.org/2000/svg"},{"data-ds-icon":"fa"},{viewBox:"0 0 448 512"},1&i&&r[0]]))},i:D,o:D,d(r){r&&y(t)}}}function om(s,t,n){return s.$$set=e=>{n(0,t=Ct(Ct({},t),Qt(e)))},[t=Qt(t)]}class Sl extends nt{constructor(t){super(),ot(this,t,om,nm,tt,{})}}function rm(s){let t,n,e=[{xmlns:"http://www.w3.org/2000/svg"},{"data-ds-icon":"fa"},{viewBox:"0 0 512 512"},s[0]],o={};for(let r=0;r<e.length;r+=1)o=Ct(o,e[r]);return{c(){t=Nt("svg"),n=new Fe(!0),this.h()},l(r){t=Oe(r,"svg",{xmlns:!0,"data-ds-icon":!0,viewBox:!0});var i=Be(t);n=ze(i,!0),i.forEach(y),this.h()},h(){n.a=null,ne(t,o)},m(r,i){He(r,t,i),n.m('<!--! Font Awesome Pro 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2024 Fonticons, Inc.--><path d="M135 369c9.4 9.4 24.6 9.4 33.9 0s9.4-24.6 0-33.9l-87-87L424 248c22.1 0 40 17.9 40 40v168c0 13.3 10.7 24 24 24s24-10.7 24-24V288c0-48.6-39.4-88-88-88H81.9l87-87c9.4-9.4 9.4-24.6 0-33.9s-24.6-9.4-33.9 0L7 207c-9.4 9.4-9.4 24.6 0 33.9z"/>',t)},p(r,[i]){ne(t,o=ge(e,[{xmlns:"http://www.w3.org/2000/svg"},{"data-ds-icon":"fa"},{viewBox:"0 0 512 512"},1&i&&r[0]]))},i:D,o:D,d(r){r&&y(t)}}}function sm(s,t,n){return s.$$set=e=>{n(0,t=Ct(Ct({},t),Qt(e)))},[t=Qt(t)]}class Rl extends nt{constructor(t){super(),ot(this,t,sm,rm,tt,{})}}function im(s){let t,n,e;return t=new Rl({}),{c(){C(t.$$.fragment),n=X(`
      Discard All`)},m(o,r){x(t,o,r),_(o,n,r),e=!0},i(o){e||(f(t.$$.fragment,o),e=!0)},o(o){$(t.$$.fragment,o),e=!1},d(o){o&&y(n),M(t,o)}}}function am(s){let t,n;return t=new we({props:{triggerOn:[Ne.Hover],content:s[0]?"Discard all changes":"No changes to undo",$$slots:{default:[im]},$$scope:{ctx:s}}}),{c(){C(t.$$.fragment)},m(e,o){x(t,e,o),n=!0},p(e,o){const r={};1&o&&(r.content=e[0]?"Discard all changes":"No changes to undo"),32&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){M(t,e)}}}function cm(s){let t,n,e;return t=new Sl({}),{c(){C(t.$$.fragment),n=X(`
      Keep All`)},m(o,r){x(t,o,r),_(o,n,r),e=!0},i(o){e||(f(t.$$.fragment,o),e=!0)},o(o){$(t.$$.fragment,o),e=!1},d(o){o&&y(n),M(t,o)}}}function lm(s){let t,n;return t=new we({props:{triggerOn:[Ne.Hover],content:s[0]?"Keep all changes and clear checkpoints":"No changes to keep",$$slots:{default:[cm]},$$scope:{ctx:s}}}),{c(){C(t.$$.fragment)},m(e,o){x(t,e,o),n=!0},p(e,o){const r={};1&o&&(r.content=e[0]?"Keep all changes and clear checkpoints":"No changes to keep"),32&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){M(t,e)}}}function um(s){let t,n,e,o,r;return n=new pe({props:{class:"c-bottom-controls__revert-btn",variant:"soft",color:"neutral",size:1,disabled:!s[0],$$slots:{default:[am]},$$scope:{ctx:s}}}),n.$on("click",s[2]),o=new pe({props:{class:"c-bottom-controls__accept-btn",variant:"soft",color:"success",size:1,disabled:!s[0],$$slots:{default:[lm]},$$scope:{ctx:s}}}),o.$on("click",s[3]),{c(){t=F("div"),C(n.$$.fragment),e=W(),C(o.$$.fragment),E(t,"class","c-bottom-controls svelte-1pc5clx")},m(i,c){_(i,t,c),x(n,t,null),U(t,e),x(o,t,null),r=!0},p(i,[c]){const a={};1&c&&(a.disabled=!i[0]),33&c&&(a.$$scope={dirty:c,ctx:i}),n.$set(a);const l={};1&c&&(l.disabled=!i[0]),33&c&&(l.$$scope={dirty:c,ctx:i}),o.$set(l)},i(i){r||(f(n.$$.fragment,i),f(o.$$.fragment,i),r=!0)},o(i){$(n.$$.fragment,i),$(o.$$.fragment,i),r=!1},d(i){i&&y(t),M(n),M(o)}}}function dm(s,t,n){let e;const o=Ht("checkpointStore"),{targetCheckpointHasChanges:r}=o;return Vt(s,r,i=>n(0,e=i)),[e,r,async function(){await o.rejectAll()},async function(){await o.acceptAll()}]}class fm extends nt{constructor(t){super(),ot(this,t,dm,um,tt,{})}}function Hi(s){let t,n;return t=new Ot({props:{class:"edit-item__added-lines",size:1,$$slots:{default:[mm]},$$scope:{ctx:s}}}),{c(){C(t.$$.fragment)},m(e,o){x(t,e,o),n=!0},p(e,o){const r={};5&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){M(t,e)}}}function mm(s){let t,n;return{c(){t=X("+"),n=X(s[0])},m(e,o){_(e,t,o),_(e,n,o)},p(e,o){1&o&&Lt(n,e[0])},d(e){e&&(y(t),y(n))}}}function ji(s){let t,n;return t=new Ot({props:{class:"edit-item__removed-lines",size:1,$$slots:{default:[pm]},$$scope:{ctx:s}}}),{c(){C(t.$$.fragment)},m(e,o){x(t,e,o),n=!0},p(e,o){const r={};6&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){M(t,e)}}}function pm(s){let t,n;return{c(){t=X("-"),n=X(s[1])},m(e,o){_(e,t,o),_(e,n,o)},p(e,o){2&o&&Lt(n,e[1])},d(e){e&&(y(t),y(n))}}}function $m(s){let t,n,e,o=s[0]>0&&Hi(s),r=s[1]>0&&ji(s);return{c(){t=F("div"),o&&o.c(),n=W(),r&&r.c(),E(t,"class","edit-item__changes svelte-1k8sltp")},m(i,c){_(i,t,c),o&&o.m(t,null),U(t,n),r&&r.m(t,null),e=!0},p(i,[c]){i[0]>0?o?(o.p(i,c),1&c&&f(o,1)):(o=Hi(i),o.c(),f(o,1),o.m(t,n)):o&&(K(),$(o,1,1,()=>{o=null}),Z()),i[1]>0?r?(r.p(i,c),2&c&&f(r,1)):(r=ji(i),r.c(),f(r,1),r.m(t,null)):r&&(K(),$(r,1,1,()=>{r=null}),Z())},i(i){e||(f(o),f(r),e=!0)},o(i){$(o),$(r),e=!1},d(i){i&&y(t),o&&o.d(),r&&r.d()}}}function hm(s,t,n){let{totalAddedLines:e=0}=t,{totalRemovedLines:o=0}=t;return s.$$set=r=>{"totalAddedLines"in r&&n(0,e=r.totalAddedLines),"totalRemovedLines"in r&&n(1,o=r.totalRemovedLines)},[e,o]}class us extends nt{constructor(t){super(),ot(this,t,hm,$m,tt,{totalAddedLines:0,totalRemovedLines:1})}}function gm(s){let t,n;return{c(){t=Nt("svg"),n=Nt("path"),E(n,"d","M6.85357 3.85355L7.65355 3.05353C8.2981 2.40901 9.42858 1.96172 10.552 1.80125C11.1056 1.72217 11.6291 1.71725 12.0564 1.78124C12.4987 1.84748 12.7698 1.97696 12.8965 2.10357C13.0231 2.23018 13.1526 2.50125 13.2188 2.94357C13.2828 3.37086 13.2779 3.89439 13.1988 4.44801C13.0383 5.57139 12.591 6.70188 11.9464 7.34645L7.49999 11.7929L6.35354 10.6465C6.15827 10.4512 5.84169 10.4512 5.64643 10.6465C5.45117 10.8417 5.45117 11.1583 5.64643 11.3536L7.14644 12.8536C7.34171 13.0488 7.65829 13.0488 7.85355 12.8536L8.40073 12.3064L9.57124 14.2572C9.65046 14.3893 9.78608 14.4774 9.9389 14.4963C10.0917 14.5151 10.2447 14.4624 10.3535 14.3536L12.3535 12.3536C12.4648 12.2423 12.5172 12.0851 12.495 11.9293L12.0303 8.67679L12.6536 8.05355C13.509 7.19808 14.0117 5.82855 14.1887 4.58943C14.2784 3.9618 14.2891 3.33847 14.2078 2.79546C14.1287 2.26748 13.9519 1.74482 13.6035 1.39645C13.2552 1.04809 12.7325 0.871332 12.2045 0.792264C11.6615 0.710945 11.0382 0.721644 10.4105 0.8113C9.17143 0.988306 7.80189 1.491 6.94644 2.34642L6.32322 2.96968L3.07071 2.50504C2.91492 2.48278 2.75773 2.53517 2.64645 2.64646L0.646451 4.64645C0.537579 4.75533 0.484938 4.90829 0.50375 5.0611C0.522563 5.21391 0.61073 5.34954 0.742757 5.42876L2.69364 6.59928L2.14646 7.14645C2.0527 7.24022 2.00002 7.3674 2.00002 7.50001C2.00002 7.63261 2.0527 7.75979 2.14646 7.85356L3.64647 9.35356C3.84173 9.54883 4.15831 9.54883 4.35357 9.35356C4.54884 9.1583 4.54884 8.84172 4.35357 8.64646L3.20712 7.50001L3.85357 6.85356L6.85357 3.85355ZM10.0993 13.1936L9.12959 11.5775L11.1464 9.56067L11.4697 11.8232L10.0993 13.1936ZM3.42251 5.87041L5.43935 3.85356L3.17678 3.53034L1.80638 4.90074L3.42251 5.87041ZM2.35356 10.3535C2.54882 10.1583 2.54882 9.8417 2.35356 9.64644C2.1583 9.45118 1.84171 9.45118 1.64645 9.64644L0.646451 10.6464C0.451188 10.8417 0.451188 11.1583 0.646451 11.3535C0.841713 11.5488 1.1583 11.5488 1.35356 11.3535L2.35356 10.3535ZM3.85358 11.8536C4.04884 11.6583 4.04885 11.3417 3.85359 11.1465C3.65833 10.9512 3.34175 10.9512 3.14648 11.1465L1.14645 13.1464C0.95119 13.3417 0.951187 13.6583 1.14645 13.8535C1.34171 14.0488 1.65829 14.0488 1.85355 13.8536L3.85358 11.8536ZM5.35356 13.3535C5.54882 13.1583 5.54882 12.8417 5.35356 12.6464C5.1583 12.4512 4.84171 12.4512 4.64645 12.6464L3.64645 13.6464C3.45119 13.8417 3.45119 14.1583 3.64645 14.3535C3.84171 14.5488 4.1583 14.5488 4.35356 14.3535L5.35356 13.3535ZM9.49997 6.74881C10.1897 6.74881 10.7488 6.1897 10.7488 5.5C10.7488 4.8103 10.1897 4.25118 9.49997 4.25118C8.81026 4.25118 8.25115 4.8103 8.25115 5.5C8.25115 6.1897 8.81026 6.74881 9.49997 6.74881Z"),E(n,"fill","currentColor"),E(n,"fill-rule","evenodd"),E(n,"clip-rule","evenodd"),E(t,"width","15"),E(t,"height","15"),E(t,"viewBox","0 0 15 15"),E(t,"fill","none"),E(t,"xmlns","http://www.w3.org/2000/svg")},m(e,o){_(e,t,o),U(t,n)},p:D,i:D,o:D,d(e){e&&y(t)}}}class vm extends nt{constructor(t){super(),ot(this,t,null,gm,tt,{})}}function wm(s){let t,n;return t=new hd({props:{slot:"rightIcon"}}),{c(){C(t.$$.fragment)},m(e,o){x(t,e,o),n=!0},p:D,i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){M(t,e)}}}function ym(s){let t,n;return t=new Cr({props:{class:"edit-item__filespan",size:1,filepath:s[0].relPath,$$slots:{rightIcon:[wm]},$$scope:{ctx:s}}}),{c(){C(t.$$.fragment)},m(e,o){x(t,e,o),n=!0},p(e,o){const r={};1&o&&(r.filepath=e[0].relPath),256&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){M(t,e)}}}function bm(s){let t,n;return t=new we({props:{delayDurationMs:1500,triggerOn:[Ne.Hover],content:s[0].relPath,$$slots:{default:[ym]},$$scope:{ctx:s}}}),{c(){C(t.$$.fragment)},m(e,o){x(t,e,o),n=!0},p(e,o){const r={};1&o&&(r.content=e[0].relPath),257&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){M(t,e)}}}function Ui(s){let t,n;return t=new pe({props:{size:1,variant:"ghost",color:"neutral",$$slots:{default:[Cm]},$$scope:{ctx:s}}}),t.$on("click",function(){ve(s[4])&&s[4].apply(this,arguments)}),{c(){C(t.$$.fragment)},m(e,o){x(t,e,o),n=!0},p(e,o){s=e;const r={};258&o&&(r.$$scope={dirty:o,ctx:s}),t.$set(r)},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){M(t,e)}}}function _m(s){let t,n;return t=new us({props:{totalAddedLines:s[1].totalAddedLines,totalRemovedLines:s[1].totalRemovedLines}}),{c(){C(t.$$.fragment)},m(e,o){x(t,e,o),n=!0},p(e,o){const r={};2&o&&(r.totalAddedLines=e[1].totalAddedLines),2&o&&(r.totalRemovedLines=e[1].totalRemovedLines),t.$set(r)},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){M(t,e)}}}function Cm(s){let t,n;return t=new we({props:{triggerOn:[Ne.Hover],content:"View Diff",$$slots:{default:[_m]},$$scope:{ctx:s}}}),{c(){C(t.$$.fragment)},m(e,o){x(t,e,o),n=!0},p(e,o){const r={};258&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){M(t,e)}}}function qi(s){let t,n,e,o;const r=[Mm,xm],i=[];function c(a,l){return a[3]?0:1}return t=c(s),n=i[t]=r[t](s),{c(){n.c(),e=ft()},m(a,l){i[t].m(a,l),_(a,e,l),o=!0},p(a,l){let u=t;t=c(a),t===u?i[t].p(a,l):(K(),$(i[u],1,1,()=>{i[u]=null}),Z(),n=i[t],n?n.p(a,l):(n=i[t]=r[t](a),n.c()),f(n,1),n.m(e.parentNode,e))},i(a){o||(f(n),o=!0)},o(a){$(n),o=!1},d(a){a&&y(e),i[t].d(a)}}}function xm(s){let t,n;return t=new Me({props:{size:1,variant:"ghost",color:"neutral",$$slots:{default:[Tm]},$$scope:{ctx:s}}}),t.$on("click",function(){ve(s[7])&&s[7].apply(this,arguments)}),{c(){C(t.$$.fragment)},m(e,o){x(t,e,o),n=!0},p(e,o){s=e;const r={};260&o&&(r.$$scope={dirty:o,ctx:s}),t.$set(r)},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){M(t,e)}}}function Mm(s){let t,n;return t=new we({props:{triggerOn:[Ne.Hover],content:"Changes applied",class:"edit-item__controls-container__applied",$$slots:{default:[Im]},$$scope:{ctx:s}}}),{c(){C(t.$$.fragment)},m(e,o){x(t,e,o),n=!0},p(e,o){const r={};256&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){M(t,e)}}}function Am(s){let t,n;return t=new vm({}),{c(){C(t.$$.fragment)},m(e,o){x(t,e,o),n=!0},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){M(t,e)}}}function Em(s){let t,n;return t=new lo({}),{c(){C(t.$$.fragment)},m(e,o){x(t,e,o),n=!0},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){M(t,e)}}}function km(s){let t,n,e,o;const r=[Em,Am],i=[];function c(a,l){return a[2]?0:1}return t=c(s),n=i[t]=r[t](s),{c(){n.c(),e=ft()},m(a,l){i[t].m(a,l),_(a,e,l),o=!0},p(a,l){let u=t;t=c(a),t!==u&&(K(),$(i[u],1,1,()=>{i[u]=null}),Z(),n=i[t],n||(n=i[t]=r[t](a),n.c()),f(n,1),n.m(e.parentNode,e))},i(a){o||(f(n),o=!0)},o(a){$(n),o=!1},d(a){a&&y(e),i[t].d(a)}}}function Tm(s){let t,n;return t=new we({props:{triggerOn:[Ne.Hover],content:s[2]?"Applying changes...":"Apply changes",$$slots:{default:[km]},$$scope:{ctx:s}}}),{c(){C(t.$$.fragment)},m(e,o){x(t,e,o),n=!0},p(e,o){const r={};4&o&&(r.content=e[2]?"Applying changes...":"Apply changes"),260&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){M(t,e)}}}function Lm(s){let t,n,e;return n=new So({}),{c(){t=X(`Applied
            `),C(n.$$.fragment)},m(o,r){_(o,t,r),x(n,o,r),e=!0},i(o){e||(f(n.$$.fragment,o),e=!0)},o(o){$(n.$$.fragment,o),e=!1},d(o){o&&y(t),M(n,o)}}}function Im(s){let t,n;return t=new Ot({props:{size:1,$$slots:{default:[Lm]},$$scope:{ctx:s}}}),{c(){C(t.$$.fragment)},m(e,o){x(t,e,o),n=!0},p(e,o){const r={};256&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){M(t,e)}}}function Wi(s){let t,n;return t=new Me({props:{size:1,variant:"ghost",color:"neutral",$$slots:{default:[Rm]},$$scope:{ctx:s}}}),t.$on("click",function(){ve(s[5])&&s[5].apply(this,arguments)}),{c(){C(t.$$.fragment)},m(e,o){x(t,e,o),n=!0},p(e,o){s=e;const r={};256&o&&(r.$$scope={dirty:o,ctx:s}),t.$set(r)},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){M(t,e)}}}function Sm(s){let t,n;return t=new $d({}),{c(){C(t.$$.fragment)},m(e,o){x(t,e,o),n=!0},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){M(t,e)}}}function Rm(s){let t,n;return t=new we({props:{triggerOn:[Ne.Hover],content:"Open File",$$slots:{default:[Sm]},$$scope:{ctx:s}}}),{c(){C(t.$$.fragment)},m(e,o){x(t,e,o),n=!0},p(e,o){const r={};256&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){M(t,e)}}}function Vi(s){let t,n;return t=new Me({props:{size:1,variant:"ghost",color:"neutral",$$slots:{default:[Dm]},$$scope:{ctx:s}}}),t.$on("click",function(){ve(s[6])&&s[6].apply(this,arguments)}),{c(){C(t.$$.fragment)},m(e,o){x(t,e,o),n=!0},p(e,o){s=e;const r={};256&o&&(r.$$scope={dirty:o,ctx:s}),t.$set(r)},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){M(t,e)}}}function Pm(s){let t,n;return t=new Tr({}),{c(){C(t.$$.fragment)},m(e,o){x(t,e,o),n=!0},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){M(t,e)}}}function Dm(s){let t,n;return t=new we({props:{triggerOn:[Ne.Hover],content:"Undo Changes",$$slots:{default:[Pm]},$$scope:{ctx:s}}}),{c(){C(t.$$.fragment)},m(e,o){x(t,e,o),n=!0},p(e,o){const r={};256&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){M(t,e)}}}function Nm(s){let t,n,e,o,r,i,c,a,l;e=new pe({props:{class:"edit-item__file-button",size:1,variant:"ghost",color:"neutral",$$slots:{default:[bm]},$$scope:{ctx:s}}}),e.$on("click",function(){ve(s[4])&&s[4].apply(this,arguments)});let u=s[1]&&Ui(s),p=s[7]&&qi(s),g=s[5]&&Wi(s),h=s[6]&&Vi(s);return{c(){t=F("div"),n=F("div"),C(e.$$.fragment),o=W(),u&&u.c(),r=W(),i=F("div"),p&&p.c(),c=W(),g&&g.c(),a=W(),h&&h.c(),E(n,"class","edit-item__info-container"),E(i,"class","edit-item__controls-container"),E(t,"class","edit-item__container svelte-17yiovs")},m(k,T){_(k,t,T),U(t,n),x(e,n,null),U(t,o),u&&u.m(t,null),U(t,r),U(t,i),p&&p.m(i,null),U(i,c),g&&g.m(i,null),U(i,a),h&&h.m(i,null),l=!0},p(k,[T]){s=k;const b={};257&T&&(b.$$scope={dirty:T,ctx:s}),e.$set(b),s[1]?u?(u.p(s,T),2&T&&f(u,1)):(u=Ui(s),u.c(),f(u,1),u.m(t,r)):u&&(K(),$(u,1,1,()=>{u=null}),Z()),s[7]?p?(p.p(s,T),128&T&&f(p,1)):(p=qi(s),p.c(),f(p,1),p.m(i,c)):p&&(K(),$(p,1,1,()=>{p=null}),Z()),s[5]?g?(g.p(s,T),32&T&&f(g,1)):(g=Wi(s),g.c(),f(g,1),g.m(i,a)):g&&(K(),$(g,1,1,()=>{g=null}),Z()),s[6]?h?(h.p(s,T),64&T&&f(h,1)):(h=Vi(s),h.c(),f(h,1),h.m(i,null)):h&&(K(),$(h,1,1,()=>{h=null}),Z())},i(k){l||(f(e.$$.fragment,k),f(u),f(p),f(g),f(h),l=!0)},o(k){$(e.$$.fragment,k),$(u),$(p),$(g),$(h),l=!1},d(k){k&&y(t),M(e),u&&u.d(),p&&p.d(),g&&g.d(),h&&h.d()}}}function Fm(s,t,n){let{qualifiedPathName:e}=t,{lineChanges:o}=t,{isApplyPending:r=!1}=t,{hasApplied:i=!1}=t,{onClickReview:c}=t,{onClickFile:a}=t,{onClickRevert:l}=t,{onApplyChanges:u}=t;return s.$$set=p=>{"qualifiedPathName"in p&&n(0,e=p.qualifiedPathName),"lineChanges"in p&&n(1,o=p.lineChanges),"isApplyPending"in p&&n(2,r=p.isApplyPending),"hasApplied"in p&&n(3,i=p.hasApplied),"onClickReview"in p&&n(4,c=p.onClickReview),"onClickFile"in p&&n(5,a=p.onClickFile),"onClickRevert"in p&&n(6,l=p.onClickRevert),"onApplyChanges"in p&&n(7,u=p.onApplyChanges)},[e,o,r,i,c,a,l,u]}class Om extends nt{constructor(t){super(),ot(this,t,Fm,Nm,tt,{qualifiedPathName:0,lineChanges:1,isApplyPending:2,hasApplied:3,onClickReview:4,onClickFile:5,onClickRevert:6,onApplyChanges:7})}}function Bm(s){let t,n,e,o,r=s[0]===1?"":"s";return{c(){t=X(s[0]),n=X(" file"),e=X(r),o=X(" changed")},m(i,c){_(i,t,c),_(i,n,c),_(i,e,c),_(i,o,c)},p(i,c){1&c&&Lt(t,i[0]),1&c&&r!==(r=i[0]===1?"":"s")&&Lt(e,r)},d(i){i&&(y(t),y(n),y(e),y(o))}}}function Gi(s){let t,n,e;return n=new us({props:{totalAddedLines:s[1].totalAddedLines,totalRemovedLines:s[1].totalRemovedLines}}),{c(){t=F("div"),C(n.$$.fragment),E(t,"class","c-agent-edits-header__summary")},m(o,r){_(o,t,r),x(n,t,null),e=!0},p(o,r){const i={};2&r&&(i.totalAddedLines=o[1].totalAddedLines),2&r&&(i.totalRemovedLines=o[1].totalRemovedLines),n.$set(i)},i(o){e||(f(n.$$.fragment,o),e=!0)},o(o){$(n.$$.fragment,o),e=!1},d(o){o&&y(t),M(n)}}}function Yi(s){let t,n,e,o,r;return n=new pe({props:{class:"c-agent-edits-header__revert-btn",variant:"soft",color:"neutral",size:1,$$slots:{default:[Hm]},$$scope:{ctx:s}}}),n.$on("click",function(){ve(s[4])&&s[4].apply(this,arguments)}),o=new pe({props:{class:"c-agent-edits-header__accept-btn",variant:"soft",color:"success",size:1,$$slots:{default:[Um]},$$scope:{ctx:s}}}),o.$on("click",function(){ve(s[5])&&s[5].apply(this,arguments)}),{c(){t=F("div"),C(n.$$.fragment),e=W(),C(o.$$.fragment),E(t,"class","c-agent-edits-header__actions")},m(i,c){_(i,t,c),x(n,t,null),U(t,e),x(o,t,null),r=!0},p(i,c){s=i;const a={};64&c&&(a.$$scope={dirty:c,ctx:s}),n.$set(a);const l={};64&c&&(l.$$scope={dirty:c,ctx:s}),o.$set(l)},i(i){r||(f(n.$$.fragment,i),f(o.$$.fragment,i),r=!0)},o(i){$(n.$$.fragment,i),$(o.$$.fragment,i),r=!1},d(i){i&&y(t),M(n),M(o)}}}function zm(s){let t,n,e,o;return t=new Rl({}),{c(){C(t.$$.fragment),n=W(),e=F("span"),e.textContent="Discard All",E(e,"class","c-agent-edits-header__revert-btn__text")},m(r,i){x(t,r,i),_(r,n,i),_(r,e,i),o=!0},p:D,i(r){o||(f(t.$$.fragment,r),o=!0)},o(r){$(t.$$.fragment,r),o=!1},d(r){r&&(y(n),y(e)),M(t,r)}}}function Hm(s){let t,n;return t=new we({props:{triggerOn:[Ne.Hover],content:"Discard all changes",$$slots:{default:[zm]},$$scope:{ctx:s}}}),{c(){C(t.$$.fragment)},m(e,o){x(t,e,o),n=!0},p(e,o){const r={};64&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){M(t,e)}}}function jm(s){let t,n,e,o;return t=new Sl({}),{c(){C(t.$$.fragment),n=W(),e=F("span"),e.textContent="Keep All",E(e,"class","c-agent-edits-header__accept-btn__text")},m(r,i){x(t,r,i),_(r,n,i),_(r,e,i),o=!0},p:D,i(r){o||(f(t.$$.fragment,r),o=!0)},o(r){$(t.$$.fragment,r),o=!1},d(r){r&&(y(n),y(e)),M(t,r)}}}function Um(s){let t,n;return t=new we({props:{triggerOn:[Ne.Hover],content:"Keep all changes and clear checkpoints",$$slots:{default:[jm]},$$scope:{ctx:s}}}),{c(){C(t.$$.fragment)},m(e,o){x(t,e,o),n=!0},p(e,o){const r={};64&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){M(t,e)}}}function qm(s){let t,n,e,o,r,i,c,a;e=new ad({props:{class:"c-agent-edits-header__collapse-btn"}}),r=new Ld({props:{class:"c-agent-edits-header__info-container",size:1,$$slots:{text:[Bm]},$$scope:{ctx:s}}});let l=s[3]&&Gi(s),u=s[2]&&s[3]&&Yi(s);return{c(){t=F("div"),n=F("div"),C(e.$$.fragment),o=W(),C(r.$$.fragment),i=W(),l&&l.c(),c=W(),u&&u.c(),E(n,"class","c-agent-edits-header__content"),E(t,"class","c-agent-edits-header svelte-r2jrog")},m(p,g){_(p,t,g),U(t,n),x(e,n,null),U(n,o),x(r,n,null),U(n,i),l&&l.m(n,null),U(t,c),u&&u.m(t,null),a=!0},p(p,[g]){const h={};65&g&&(h.$$scope={dirty:g,ctx:p}),r.$set(h),p[3]?l?(l.p(p,g),8&g&&f(l,1)):(l=Gi(p),l.c(),f(l,1),l.m(n,null)):l&&(K(),$(l,1,1,()=>{l=null}),Z()),p[2]&&p[3]?u?(u.p(p,g),12&g&&f(u,1)):(u=Yi(p),u.c(),f(u,1),u.m(t,null)):u&&(K(),$(u,1,1,()=>{u=null}),Z())},i(p){a||(f(e.$$.fragment,p),f(r.$$.fragment,p),f(l),f(u),a=!0)},o(p){$(e.$$.fragment,p),$(r.$$.fragment,p),$(l),$(u),a=!1},d(p){p&&y(t),M(e),M(r),l&&l.d(),u&&u.d()}}}function Wm(s,t,n){let{filesCount:e}=t,{diffSummary:o}=t,{collapsed:r}=t,{hasChanges:i}=t,{onRevert:c}=t,{onKeep:a}=t;return s.$$set=l=>{"filesCount"in l&&n(0,e=l.filesCount),"diffSummary"in l&&n(1,o=l.diffSummary),"collapsed"in l&&n(2,r=l.collapsed),"hasChanges"in l&&n(3,i=l.hasChanges),"onRevert"in l&&n(4,c=l.onRevert),"onKeep"in l&&n(5,a=l.onKeep)},[e,o,r,i,c,a]}class Vm extends nt{constructor(t){super(),ot(this,t,Wm,qm,tt,{filesCount:0,diffSummary:1,collapsed:2,hasChanges:3,onRevert:4,onKeep:5})}}function Xi(s,t,n){const e=s.slice();return e[27]=t[n],e}function Ki(s){let t,n,e,o;function r(c){s[23](c)}let i={class:"c-agent-edits-container__block-container",$$slots:{footer:[Jm],header:[Zm],default:[Km]},$$scope:{ctx:s}};return s[5]!==void 0&&(i.collapsed=s[5]),n=new cd({props:i}),ue.push(()=>Ye(n,"collapsed",r)),{c(){t=F("div"),C(n.$$.fragment),E(t,"class","c-agent-edits-container svelte-19r1sqe")},m(c,a){_(c,t,a),x(n,t,null),o=!0},p(c,a){const l={};1073741925&a&&(l.$$scope={dirty:a,ctx:c}),!e&&32&a&&(e=!0,l.collapsed=c[5],Ze(()=>e=!1)),n.$set(l)},i(c){o||(f(n.$$.fragment,c),o=!0)},o(c){$(n.$$.fragment,c),o=!1},d(c){c&&y(t),M(n)}}}function Gm(s){let t,n,e;return n=new Ot({props:{size:1,color:"neutral",$$slots:{default:[Xm]},$$scope:{ctx:s}}}),{c(){t=F("div"),C(n.$$.fragment),E(t,"class","c-edits-list c-edits-list--empty svelte-19r1sqe")},m(o,r){_(o,t,r),x(n,t,null),e=!0},p(o,r){const i={};1073741824&r&&(i.$$scope={dirty:r,ctx:o}),n.$set(i)},i(o){e||(f(n.$$.fragment,o),e=!0)},o(o){$(n.$$.fragment,o),e=!1},d(o){o&&y(t),M(n)}}}function Ym(s){let t,n,e,o=de(s[0]),r=[];for(let c=0;c<o.length;c+=1)r[c]=Zi(Xi(s,o,c));const i=c=>$(r[c],1,1,()=>{r[c]=null});return{c(){t=F("div"),n=F("div");for(let c=0;c<r.length;c+=1)r[c].c();E(n,"class","c-edits-section svelte-19r1sqe"),E(t,"class","c-edits-list svelte-19r1sqe")},m(c,a){_(c,t,a),U(t,n);for(let l=0;l<r.length;l+=1)r[l]&&r[l].m(n,null);e=!0},p(c,a){if(57345&a){let l;for(o=de(c[0]),l=0;l<o.length;l+=1){const u=Xi(c,o,l);r[l]?(r[l].p(u,a),f(r[l],1)):(r[l]=Zi(u),r[l].c(),f(r[l],1),r[l].m(n,null))}for(K(),l=o.length;l<r.length;l+=1)i(l);Z()}},i(c){if(!e){for(let a=0;a<o.length;a+=1)f(r[a]);e=!0}},o(c){r=r.filter(Boolean);for(let a=0;a<r.length;a+=1)$(r[a]);e=!1},d(c){c&&y(t),fn(r,c)}}}function Xm(s){let t;return{c(){t=X("No changes to show")},m(n,e){_(n,t,e)},d(n){n&&y(t)}}}function Zi(s){let t,n;function e(){return s[20](s[27])}function o(){return s[21](s[27])}function r(){return s[22](s[27])}return t=new Om({props:{qualifiedPathName:s[27].qualifiedPathName,lineChanges:s[27].changesSummary,onClickFile:e,onClickReview:o,onClickRevert:r}}),{c(){C(t.$$.fragment)},m(i,c){x(t,i,c),n=!0},p(i,c){s=i;const a={};1&c&&(a.qualifiedPathName=s[27].qualifiedPathName),1&c&&(a.lineChanges=s[27].changesSummary),1&c&&(a.onClickFile=e),1&c&&(a.onClickReview=o),1&c&&(a.onClickRevert=r),t.$set(a)},i(i){n||(f(t.$$.fragment,i),n=!0)},o(i){$(t.$$.fragment,i),n=!1},d(i){M(t,i)}}}function Km(s){let t,n,e,o;const r=[Ym,Gm],i=[];function c(a,l){return a[0].length>0?0:1}return t=c(s),n=i[t]=r[t](s),{c(){n.c(),e=ft()},m(a,l){i[t].m(a,l),_(a,e,l),o=!0},p(a,l){let u=t;t=c(a),t===u?i[t].p(a,l):(K(),$(i[u],1,1,()=>{i[u]=null}),Z(),n=i[t],n?n.p(a,l):(n=i[t]=r[t](a),n.c()),f(n,1),n.m(e.parentNode,e))},i(a){o||(f(n),o=!0)},o(a){$(n),o=!1},d(a){a&&y(e),i[t].d(a)}}}function Zm(s){let t,n;return t=new Vm({props:{filesCount:s[0].length,diffSummary:s[2],collapsed:s[5],hasChanges:s[6],onRevert:s[16],onKeep:s[17],slot:"header"}}),{c(){C(t.$$.fragment)},m(e,o){x(t,e,o),n=!0},p(e,o){const r={};1&o&&(r.filesCount=e[0].length),4&o&&(r.diffSummary=e[2]),32&o&&(r.collapsed=e[5]),64&o&&(r.hasChanges=e[6]),t.$set(r)},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){M(t,e)}}}function Jm(s){let t,n;return t=new fm({props:{slot:"footer"}}),{c(){C(t.$$.fragment)},m(e,o){x(t,e,o),n=!0},p:D,i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){M(t,e)}}}function Qm(s){let t,n,e=s[3]&&s[4]>0&&s[0].length>0&&Ki(s);return{c(){e&&e.c(),t=ft()},m(o,r){e&&e.m(o,r),_(o,t,r),n=!0},p(o,[r]){o[3]&&o[4]>0&&o[0].length>0?e?(e.p(o,r),25&r&&f(e,1)):(e=Ki(o),e.c(),f(e,1),e.m(t.parentNode,t)):e&&(K(),$(e,1,1,()=>{e=null}),Z())},i(o){n||(f(e),n=!0)},o(o){$(e),n=!1},d(o){o&&y(t),e&&e.d(o)}}}function R6(s){if(!s)return"";if(s===Number.MAX_SAFE_INTEGER)return"Now";const t=new Date(s),n=new Date,e=t.getHours(),o=`${e%12||12}:${t.getMinutes().toString().padStart(2,"0")}${e>=12?"PM":"AM"}`,r=Math.floor((n.getTime()-t.getTime())/864e5);return r===0?o:r===1?`Yesterday at ${o}`:`${r} days ago at ${o}`}function tp(s,t,n){let e,o,r,i,c,a,l,u,p,g,h=D;s.$$.on_destroy.push(()=>h());const k=Ht("chatModel");Vt(s,k,et=>n(18,c=et));const T=Ht("agentConversationModel"),b=Ht("checkpointStore"),{targetCheckpointSummary:S,totalCheckpointCount:H,targetCheckpoint:O,targetCheckpointHasChanges:B}=b;Vt(s,S,et=>n(19,a=et)),Vt(s,H,et=>n(4,u=et)),Vt(s,O,et=>n(24,i=et)),Vt(s,B,et=>n(6,g=et));const{isCurrConversationAgentic:ut}=T;function kt(et){k.extensionClient.openFile({repoRoot:et.rootPath,pathName:et.relPath,allowOutOfWorkspace:!0})}function rt(et){const At=T.getBaselineTimestamp();k.extensionClient.showAgentReview(et,At,i==null?void 0:i.toTimestamp,!1)}function vt(et){const At=T.getBaselineTimestamp();b.revertDocumentToTimestamp(et,At)}return Vt(s,ut,et=>n(3,l=et)),s.$$.update=()=>{524288&s.$$.dirty&&n(0,e=a.filter(et=>et.changesSummary&&(et.changesSummary.totalAddedLines>0||et.changesSummary.totalRemovedLines>0))),1&s.$$.dirty&&n(2,o=e.reduce((et,At)=>{var St,It;return et.totalAddedLines+=((St=At.changesSummary)==null?void 0:St.totalAddedLines)??0,et.totalRemovedLines+=((It=At.changesSummary)==null?void 0:It.totalRemovedLines)??0,et},{totalAddedLines:0,totalRemovedLines:0})),262144&s.$$.dirty&&(n(1,r=c.isAgentEditsCollapsed),h(),h=se(r,et=>n(5,p=et)))},[e,r,o,l,u,p,g,k,S,H,O,B,ut,kt,rt,vt,async function(){await b.rejectAll()},async function(){await b.acceptAll()},c,a,et=>kt(et.qualifiedPathName),et=>rt(et.qualifiedPathName),et=>vt(et.qualifiedPathName),function(et){p=et,r.set(p)}]}class ep extends nt{constructor(t){super(),ot(this,t,tp,Qm,tt,{})}}const np=xe(!1);function op(s){let t;return{c(){t=X("Drop images to attach as context")},m(n,e){_(n,t,e)},d(n){n&&y(t)}}}function rp(s){let t;return{c(){t=X("(png, jpg, jpeg)")},m(n,e){_(n,t,e)},d(n){n&&y(t)}}}function sp(s){let t,n,e,o,r;const i=s[7].default,c=Gt(i,s,s[11],null),a=c||function(l){let u,p,g,h,k,T;return u=new gd({}),g=new Ot({props:{class:"c-rich-text-editor-dropzone__text",size:2,$$slots:{default:[op]},$$scope:{ctx:l}}}),k=new Ot({props:{class:"c-rich-text-editor-dropzone__text",size:1,$$slots:{default:[rp]},$$scope:{ctx:l}}}),{c(){C(u.$$.fragment),p=W(),C(g.$$.fragment),h=W(),C(k.$$.fragment)},m(b,S){x(u,b,S),_(b,p,S),x(g,b,S),_(b,h,S),x(k,b,S),T=!0},p(b,S){const H={};2048&S&&(H.$$scope={dirty:S,ctx:b}),g.$set(H);const O={};2048&S&&(O.$$scope={dirty:S,ctx:b}),k.$set(O)},i(b){T||(f(u.$$.fragment,b),f(g.$$.fragment,b),f(k.$$.fragment,b),T=!0)},o(b){$(u.$$.fragment,b),$(g.$$.fragment,b),$(k.$$.fragment,b),T=!1},d(b){b&&(y(p),y(h)),M(u,b),M(g,b),M(k,b)}}}(s);return{c(){t=F("div"),n=F("div"),a&&a.c(),E(n,"class","c-rich-text-editor-dropzone__content svelte-1f75lrb"),E(t,"class","c-rich-text-editor-dropzone svelte-1f75lrb"),E(t,"role","button"),E(t,"tabindex","-1"),Pt(t,"is-active",s[0])},m(l,u){_(l,t,u),U(t,n),a&&a.m(n,null),e=!0,o||(r=[bt(window,"dragstart",s[10]),bt(window,"dragenter",s[5]),bt(window,"dragleave",s[3]),bt(window,"drop",s[4]),bt(window,"blur",s[4]),bt(t,"dragover",Eo(ar(s[8]))),bt(t,"dragenter",Eo(ar(s[9]))),bt(t,"drop",Eo(ar(s[2])))],o=!0)},p(l,[u]){c&&c.p&&(!e||2048&u)&&Yt(c,i,l,l[11],e?Kt(i,l[11],u,null):Xt(l[11]),null),(!e||1&u)&&Pt(t,"is-active",l[0])},i(l){e||(f(a,l),e=!0)},o(l){$(a,l),e=!1},d(l){l&&y(t),a&&a.d(l),o=!1,Re(r)}}}const ip="application/x-augment/drag-origin/{}";function Ji(s){return ip.replace("{}",s.instanceId)}function ap(s,t,n){let{$$slots:e={},$$scope:o}=t,{draggingStore:r=np}=t;const i=Ht(cs.CONTEXT_KEY);let c;return r.subscribe(a=>n(0,c=a)),s.$$set=a=>{"draggingStore"in a&&n(6,r=a.draggingStore),"$$scope"in a&&n(11,o=a.$$scope)},[c,i,function(a){var l,u,p,g,h;r.set(!1),(l=a.dataTransfer)!=null&&l.files&&((h=(u=i==null?void 0:i.commandManager.chain())==null?void 0:(p=u.command(({view:k,tr:T})=>{if(!k)return!0;const b=k.posAtCoords({left:a.clientX,top:a.clientY});if(b){const S=T.doc.resolve(b.pos);T.setSelection(Id.create(T.doc,S.pos))}return!0})).insertImagesIntoEditor)==null||h.call(p,[...((g=a.dataTransfer)==null?void 0:g.files)??[]]))},function(a){a.relatedTarget&&a.relatedTarget!==document.body||r.set(!1)},()=>r.set(!1),a=>{var p;var l,u;l=a,u=i,(p=l.dataTransfer)!=null&&p.types.includes(Ji(u))||r.set(!0)},r,e,function(a){Rn.call(this,s,a)},function(a){Rn.call(this,s,a)},a=>function(l,u){var p;u.rootNode&&l.composedPath().includes(u.rootNode)&&((p=l.dataTransfer)==null||p.setData(Ji(u),u.instanceId))}(a,i),o]}class cp extends nt{constructor(t){super(),ot(this,t,ap,sp,tt,{draggingStore:6})}}const lp=/(?:^|\s)(!\[(.+|:?)]\((\S+)(?:(?:\s+)["'](\S+)["'])?\))$/,up=Sd.create({name:"image",addOptions:()=>({inline:!1,allowBase64:!1,HTMLAttributes:{}}),inline(){return this.options.inline},group(){return this.options.inline?"inline":"block"},draggable:!0,addAttributes:()=>({src:{default:null},alt:{default:null},title:{default:null}}),parseHTML(){return[{tag:this.options.allowBase64?"img[src]":'img[src]:not([src^="data:"])'}]},renderHTML({HTMLAttributes:s}){return["img",Rd(this.options.HTMLAttributes,s)]},addCommands(){return{setImage:s=>({commands:t})=>t.insertContent({type:this.name,attrs:s})}},addInputRules(){return[Pd({find:lp,type:this.type,getAttributes:s=>{const[,,t,n,e]=s;return{src:n,alt:t,title:e}}})]}});class Lo extends Error{constructor(n,e){super(e);st(this,"files");this.files=n,this.name="ImageError"}}class dp extends Lo{constructor(t,n){const e=Math.round(t.size/1024);super([t],`Image "${t.name}" exceeds size limit of ${n}KB. Size: ${e}KB `)}}class fp extends Lo{constructor(t){super([t],`File "${t.name}" is not an image`)}}class mp extends Lo{constructor(t,n,e){const o=[`Up to ${t} images are supported.`,"- Existing count: "+(t-n.length),`- Accepted count: ${n.length}`,`- Rejected count: ${e.length}`,"Did not insert images:",...e.map(r=>`- ${r.name}`)].join(`
`);super(e,o)}}function pp(s,t){if(!function(n){return n.type.startsWith("image/")}(s))return new fp(s);if((t==null?void 0:t.maxImageSizeKb)!==void 0){const n=1024*t.maxImageSizeKb;if(s.size>n)return new dp(s,t.maxImageSizeKb)}return s}var tn=(s=>(s.collapsed="collapsed",s.preview="preview",s.full="full",s))(tn||{});function $p(s){let t,n,e,o={ctx:s,current:null,token:null,hasCatch:!1,pending:wp,then:vp,catch:gp,value:21,blocks:[,,,]};return ao(n=s[2](s[1]),o),{c(){t=ft(),o.block.c()},m(r,i){_(r,t,i),o.block.m(r,o.anchor=i),o.mount=()=>t.parentNode,o.anchor=t,e=!0},p(r,i){s=r,o.ctx=s,6&i&&n!==(n=s[2](s[1]))&&ao(n,o)||Er(o,s,i)},i(r){e||(f(o.block),e=!0)},o(r){for(let i=0;i<3;i+=1){const c=o.blocks[i];$(c)}e=!1},d(r){r&&y(t),o.block.d(r),o.token=null,o=null}}}function hp(s){let t,n,e;return n=new Hn({props:{size:2}}),{c(){t=F("div"),C(n.$$.fragment),E(t,"class","c-image__loading-spinner svelte-1k5ybyc")},m(o,r){_(o,t,r),x(n,t,null),e=!0},p:D,i(o){e||(f(n.$$.fragment,o),e=!0)},o(o){$(n.$$.fragment,o),e=!1},d(o){o&&y(t),M(n)}}}function gp(s){return{c:D,m:D,p:D,i:D,o:D,d:D}}function vp(s){let t,n;return{c(){t=F("img"),ci(t.src,n=s[21])||E(t,"src",n),E(t,"alt",""),E(t,"class","c-rich-text-editor-image")},m(e,o){_(e,t,o),s[14](t)},p(e,o){6&o&&!ci(t.src,n=e[21])&&E(t,"src",n)},i:D,o:D,d(e){e&&y(t),s[14](null)}}}function wp(s){let t,n,e;return n=new Hn({props:{size:2}}),{c(){t=F("div"),C(n.$$.fragment),E(t,"class","c-image__loading-spinner svelte-1k5ybyc")},m(o,r){_(o,t,r),x(n,t,null),e=!0},p:D,i(o){e||(f(n.$$.fragment,o),e=!0)},o(o){$(n.$$.fragment,o),e=!1},d(o){o&&y(t),M(n)}}}function yp(s){let t;return{c(){t=X(s[0])},m(n,e){_(n,t,e)},p(n,e){1&e&&Lt(t,n[0])},d(n){n&&y(t)}}}function Qi(s){let t,n,e={nested:!1,$$slots:{default:[Tp]},$$scope:{ctx:s}};return t=new _t.Root({props:e}),s[18](t),{c(){C(t.$$.fragment)},m(o,r){x(t,o,r),n=!0},p(o,r){const i={};4194392&r&&(i.$$scope={dirty:r,ctx:o}),t.$set(i)},i(o){n||(f(t.$$.fragment,o),n=!0)},o(o){$(t.$$.fragment,o),n=!1},d(o){s[18](null),M(t,o)}}}function bp(s){let t,n;return t=new lo({}),{c(){C(t.$$.fragment)},m(e,o){x(t,e,o),n=!0},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){M(t,e)}}}function _p(s){let t,n;return t=new Me({props:{size:1,color:"neutral",variant:s[3]==="collapsed"?"ghost-block":"solid",$$slots:{default:[bp]},$$scope:{ctx:s}}}),{c(){C(t.$$.fragment)},m(e,o){x(t,e,o),n=!0},p(e,o){const r={};8&o&&(r.variant=e[3]==="collapsed"?"ghost-block":"solid"),4194304&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){M(t,e)}}}function Cp(s){let t;return{c(){t=X("Image options")},m(n,e){_(n,t,e)},d(n){n&&y(t)}}}function xp(s){let t;return{c(){t=X("Collapsed view")},m(n,e){_(n,t,e)},d(n){n&&y(t)}}}function Mp(s){let t;return{c(){t=X("Preview")},m(n,e){_(n,t,e)},d(n){n&&y(t)}}}function Ap(s){let t;return{c(){t=X("Full size")},m(n,e){_(n,t,e)},d(n){n&&y(t)}}}function ta(s){let t,n,e,o;return t=new _t.Separator({}),e=new _t.Item({props:{onSelect:s[4],color:"error",$$slots:{default:[Ep]},$$scope:{ctx:s}}}),{c(){C(t.$$.fragment),n=W(),C(e.$$.fragment)},m(r,i){x(t,r,i),_(r,n,i),x(e,r,i),o=!0},p(r,i){const c={};16&i&&(c.onSelect=r[4]),4194304&i&&(c.$$scope={dirty:i,ctx:r}),e.$set(c)},i(r){o||(f(t.$$.fragment,r),f(e.$$.fragment,r),o=!0)},o(r){$(t.$$.fragment,r),$(e.$$.fragment,r),o=!1},d(r){r&&y(n),M(t,r),M(e,r)}}}function Ep(s){let t;return{c(){t=X("Remove image")},m(n,e){_(n,t,e)},d(n){n&&y(t)}}}function kp(s){let t,n,e,o,r,i,c,a,l,u,p=s[6]();t=new _t.Label({props:{$$slots:{default:[Cp]},$$scope:{ctx:s}}}),e=new _t.Item({props:{onSelect:s[15],highlight:s[3]===tn.collapsed,$$slots:{default:[xp]},$$scope:{ctx:s}}}),r=new _t.Item({props:{onSelect:s[16],highlight:s[3]===tn.preview,$$slots:{default:[Mp]},$$scope:{ctx:s}}}),c=new _t.Item({props:{onSelect:s[17],highlight:s[3]===tn.full,$$slots:{default:[Ap]},$$scope:{ctx:s}}});let g=p&&ta(s);return{c(){C(t.$$.fragment),n=W(),C(e.$$.fragment),o=W(),C(r.$$.fragment),i=W(),C(c.$$.fragment),a=W(),g&&g.c(),l=ft()},m(h,k){x(t,h,k),_(h,n,k),x(e,h,k),_(h,o,k),x(r,h,k),_(h,i,k),x(c,h,k),_(h,a,k),g&&g.m(h,k),_(h,l,k),u=!0},p(h,k){const T={};4194304&k&&(T.$$scope={dirty:k,ctx:h}),t.$set(T);const b={};8&k&&(b.highlight=h[3]===tn.collapsed),4194304&k&&(b.$$scope={dirty:k,ctx:h}),e.$set(b);const S={};8&k&&(S.highlight=h[3]===tn.preview),4194304&k&&(S.$$scope={dirty:k,ctx:h}),r.$set(S);const H={};8&k&&(H.highlight=h[3]===tn.full),4194304&k&&(H.$$scope={dirty:k,ctx:h}),c.$set(H),64&k&&(p=h[6]()),p?g?(g.p(h,k),64&k&&f(g,1)):(g=ta(h),g.c(),f(g,1),g.m(l.parentNode,l)):g&&(K(),$(g,1,1,()=>{g=null}),Z())},i(h){u||(f(t.$$.fragment,h),f(e.$$.fragment,h),f(r.$$.fragment,h),f(c.$$.fragment,h),f(g),u=!0)},o(h){$(t.$$.fragment,h),$(e.$$.fragment,h),$(r.$$.fragment,h),$(c.$$.fragment,h),$(g),u=!1},d(h){h&&(y(n),y(o),y(i),y(a),y(l)),M(t,h),M(e,h),M(r,h),M(c,h),g&&g.d(h)}}}function Tp(s){let t,n,e,o;return t=new _t.Trigger({props:{$$slots:{default:[_p]},$$scope:{ctx:s}}}),e=new _t.Content({props:{size:1,side:"bottom",align:"end",$$slots:{default:[kp]},$$scope:{ctx:s}}}),{c(){C(t.$$.fragment),n=W(),C(e.$$.fragment)},m(r,i){x(t,r,i),_(r,n,i),x(e,r,i),o=!0},p(r,i){const c={};4194312&i&&(c.$$scope={dirty:i,ctx:r}),t.$set(c);const a={};4194392&i&&(a.$$scope={dirty:i,ctx:r}),e.$set(a)},i(r){o||(f(t.$$.fragment,r),f(e.$$.fragment,r),o=!0)},o(r){$(t.$$.fragment,r),$(e.$$.fragment,r),o=!1},d(r){r&&y(n),M(t,r),M(e,r)}}}function Lp(s){let t,n,e,o,r,i,c,a;const l=[hp,$p],u=[];function p(h,k){return h[5]?0:1}n=p(s),e=u[n]=l[n](s),i=new Ot({props:{size:s[3]==="collapsed"?2:1,class:"c-image__title",$$slots:{default:[yp]},$$scope:{ctx:s}}});let g=!s[5]&&Qi(s);return{c(){t=F("div"),e.c(),o=W(),r=F("div"),C(i.$$.fragment),c=W(),g&&g.c(),E(r,"class","c-image__action-header svelte-1k5ybyc"),Pt(r,"is-active",s[7]),E(t,"class","c-image-container svelte-1k5ybyc"),Pt(t,"is-collapsed",s[3]==="collapsed"),Pt(t,"is-preview",s[3]==="preview"),Pt(t,"is-full",s[3]==="full")},m(h,k){_(h,t,k),u[n].m(t,null),U(t,o),U(t,r),x(i,r,null),U(r,c),g&&g.m(r,null),a=!0},p(h,k){let T=n;n=p(h),n===T?u[n].p(h,k):(K(),$(u[T],1,1,()=>{u[T]=null}),Z(),e=u[n],e?e.p(h,k):(e=u[n]=l[n](h),e.c()),f(e,1),e.m(t,o));const b={};8&k&&(b.size=h[3]==="collapsed"?2:1),4194305&k&&(b.$$scope={dirty:k,ctx:h}),i.$set(b),h[5]?g&&(K(),$(g,1,1,()=>{g=null}),Z()):g?(g.p(h,k),32&k&&f(g,1)):(g=Qi(h),g.c(),f(g,1),g.m(r,null)),(!a||128&k)&&Pt(r,"is-active",h[7]),(!a||8&k)&&Pt(t,"is-collapsed",h[3]==="collapsed"),(!a||8&k)&&Pt(t,"is-preview",h[3]==="preview"),(!a||8&k)&&Pt(t,"is-full",h[3]==="full")},i(h){a||(f(e),f(i.$$.fragment,h),f(g),a=!0)},o(h){$(e),$(i.$$.fragment,h),$(g),a=!1},d(h){h&&y(t),u[n].d(),M(i),g&&g.d()}}}function Ip(s){let t,n,e,o;return t=new ld({props:{insetContent:!0,interactive:!0,size:1,class:"c-image-renderer",$$slots:{default:[Lp]},$$scope:{ctx:s}}}),t.$on("click",s[19]),t.$on("keydown",s[20]),{c(){C(t.$$.fragment)},m(r,i){x(t,r,i),n=!0,e||(o=bt(window,"click",s[13],!0),e=!0)},p(r,[i]){const c={};4195327&i&&(c.$$scope={dirty:i,ctx:r}),t.$set(c)},i(r){n||(f(t.$$.fragment,r),n=!0)},o(r){$(t.$$.fragment,r),n=!1},d(r){M(t,r),e=!1,o()}}}function Sp(s,t,n){let{title:e}=t,{src:o}=t,{loadImage:r}=t,{renderMode:i=tn.collapsed}=t,{removeImage:c}=t,{setImageMode:a}=t,{isLoading:l=!1}=t,{isEditable:u}=t;function p(b){a(b),k==null||k.requestClose()}function g(b){b.key!=="ArrowUp"&&b.key!=="ArrowDown"&&b.key!=="ArrowLeft"&&b.key!=="ArrowRight"||(n(7,T=!0),b.preventDefault(),b.stopPropagation())}let h,k,T=!1;return s.$$set=b=>{"title"in b&&n(0,e=b.title),"src"in b&&n(1,o=b.src),"loadImage"in b&&n(2,r=b.loadImage),"renderMode"in b&&n(3,i=b.renderMode),"removeImage"in b&&n(4,c=b.removeImage),"setImageMode"in b&&n(12,a=b.setImageMode),"isLoading"in b&&n(5,l=b.isLoading),"isEditable"in b&&n(6,u=b.isEditable)},[e,o,r,i,c,l,u,T,h,k,p,g,a,b=>{b.composedPath().some(S=>S===h)||n(7,T=!1)},function(b){ue[b?"unshift":"push"](()=>{h=b,n(8,h)})},()=>p(tn.collapsed),()=>p(tn.preview),()=>p(tn.full),function(b){ue[b?"unshift":"push"](()=>{k=b,n(9,k)})},b=>{n(7,T=!0),b.preventDefault()},b=>{g(b),xn("Escape",()=>n(7,T=!1))(b)}]}class Rp extends nt{constructor(t){super(),ot(this,t,Sp,Ip,tt,{title:0,src:1,loadImage:2,renderMode:3,removeImage:4,setImageMode:12,isLoading:5,isEditable:6})}}async function Pl(s,t=1024){return new Promise((n,e)=>{const o=document.createElement("canvas"),r=o.getContext("2d"),i=new Image;i.onload=()=>{let c=i.width,a=i.height;c>a?c>t&&(a=Math.round(a*(t/c)),c=t):a>t&&(c=Math.round(c*(t/a)),a=t),o.width=c,o.height=a,r?(r.drawImage(i,0,0,c,a),o.toBlob(l=>{l!=null?n(l):e(new Error("Failed to create blob"))})):e(new Error("Could not get canvas context"))},i.onerror=()=>e(new Error("Failed to load image")),i.src=URL.createObjectURL(s)})}const wr=class wr{constructor(t){st(this,"_tipTapExtension");st(this,"_editor");st(this,"_createTipTapExtension",()=>{const t=this.registerEditor,n=this.unregisterEditor,e=this.insertImagesIntoEditor;return up.extend({addOptions(){var o;return{...(o=this.parent)==null?void 0:o.call(this),allowBase64:!0,preserveOnSplit:!1,defaultRenderMode:tn.collapsed}},addAttributes(){var o;return{...(o=this.parent)==null?void 0:o.call(this),renderMode:{default:tn.collapsed},title:{default:""},isLoading:{default:!1}}},onCreate(){var o;(o=this.parent)==null||o.call(this),t(this.editor)},onDestroy(){var o;(o=this.parent)==null||o.call(this),n()},addCommands(){var o;return{...(o=this.parent)==null?void 0:o.call(this),insertImagesIntoEditor:r=>({chain:i})=>i().command(()=>!!e(r)).focus("end").run()}},addNodeView:()=>this._createNodeView(),addProseMirrorPlugins(){var o;return[...((o=this.parent)==null?void 0:o.call(this))??[],new Nd({key:wr.IMAGE_PASTE_HANDLER_PLUGIN_KEY,props:{handlePaste:(r,i)=>{var c,a;return(a=(c=i.clipboardData)==null?void 0:c.files)!=null&&a.length?e([...i.clipboardData.files]).okFiles.length>0&&(i.preventDefault(),!0):!1}}})]}})});st(this,"_createNodeView",()=>({node:t})=>{var o,r;const n=document.createElement("div"),e=new Rp({target:n,props:{title:String(t.attrs.title),src:String(t.attrs.src),loadImage:((o=this._options)==null?void 0:o.renderImage)??(()=>Promise.resolve(void 0)),renderMode:t.attrs.renderMode,isLoading:!!t.attrs.isLoading,removeImage:async()=>{var i;if(this._editor){try{(i=this._options)!=null&&i.deleteImage&&await this._options.deleteImage(String(t.attrs.src))}catch(c){console.error("Failed to delete image:",c)}this._editor.chain().command(({tr:c,state:a})=>(a.doc.descendants((l,u)=>{if(t===l)return c.delete(u,u+l.nodeSize),!1}),!0)).focus("end").run()}},setImageMode:i=>{var a,l;if(!this._editor||t.attrs.renderMode===i)return;(function(u,p,g){u.chain().command(({tr:h,state:k})=>(k.doc.descendants((T,b)=>{if(p.type===T.type&&p.attrs.src===T.attrs.src)return h.setNodeMarkup(b,void 0,{...T.attrs,...g}),!1}),!0)).run()})(this._editor,t,{renderMode:i});const c=this._editor.getJSON();(l=(a=this._options)==null?void 0:a.changeImageMode)==null||l.call(a,c)},isEditable:((r=this._options)==null?void 0:r.isEditable)??(()=>!0)}});return{dom:n,destroy:()=>{e.$destroy()},update:i=>i.type.name==="image"&&(t=i,e.$set({src:String(i.attrs.src),renderMode:i.attrs.renderMode,isLoading:!!i.attrs.isLoading}),!0)}});st(this,"registerEditor",t=>{this._editor=t});st(this,"unregisterEditor",()=>{this._editor=void 0});st(this,"_getImageNodeCount",()=>{if(!this._editor)return;let t=0;return this._editor.state.doc.descendants(n=>{n.type.name==="image"&&t++}),t});st(this,"updateOptions",t=>{this._options={...t}});st(this,"insertImagesIntoEditor",t=>{const{validImages:n,errors:e}=this.validateImages(t),{imagesToInsert:o,errors:r}=this.checkImageCountLimit(n),i=[];for(const c of o){if(!this._editor)continue;const a=this._insertLoadingImage(this._editor,c.name);this._processImage(c,a).catch(l=>{i.push(new Lo([c],String(l)))})}return{errors:[...e,...r,...i],okFiles:o}});this._options=t,this._tipTapExtension=this._createTipTapExtension()}validateImages(t){const n=[],e=[];for(const o of t){const r=pp(o,this._options);r instanceof Lo?n.push(r):e.push(r)}return{validImages:e,errors:n}}checkImageCountLimit(t){var i;const n=this._getImageNodeCount()??0,e=(i=this._options)==null?void 0:i.maxImages;if(e===void 0||n+t.length<=e)return{imagesToInsert:t,errors:[]};const o=t.slice(0,e-n),r=t.slice(e-n);return{imagesToInsert:o,errors:[new mp(e,o,r)]}}async _processImage(t,n){var e,o;try{const r=await Pl(t);if(!r||!this._editor)return;const i=new File([r],t.name,{type:t.type}),c=await((o=(e=this._options)==null?void 0:e.saveImage)==null?void 0:o.call(e,i))??i.name;this._updateImageNode(n,{src:c,title:i.name,isLoading:!1})}catch(r){throw console.error("Could not process image: ",r),this._editor&&this._removeImageNode(n),r}}get tipTapExtension(){return this._tipTapExtension}_findImageNodeBySrc(t){if(!this._editor||!t)return null;let n=null;return this._editor.state.doc.descendants((e,o)=>e.type.name!=="image"||e.attrs.src!==t||(n={node:e,pos:o},!1)),n}_insertLoadingImage(t,n){const{from:e}=t.state.selection,o=`${n}-${Date.now()}-${Math.random().toString(36).substring(2)}`;return t.chain().command(({tr:r})=>{const i=e||r.doc.content.size;return r.insert(i,[t.schema.nodes.image.create({src:o,originalName:n,title:n,renderMode:tn.collapsed,isLoading:!0}),t.schema.nodes.paragraph.create({text:""})]),!0}).focus("end").run(),o}_updateImageNode(t,n){if(!this._editor)return;const e=this._findImageNodeBySrc(t);e&&this._editor.chain().command(({tr:o})=>(o.setNodeMarkup(e.pos,void 0,{...e.node.attrs,...n}),!0)).run()}_removeImageNode(t){if(!this._editor)return;const n=this._findImageNodeBySrc(t);n&&this._editor.chain().command(({tr:e})=>(e.delete(n.pos,n.pos+n.node.nodeSize),!0)).run()}static hasLoadingImages(t){if(!t)return!1;const n=e=>{var o;if(!e)return!1;if(e.type==="image"&&((o=e.attrs)!=null&&o.isLoading))return!0;if(e.content){if(!Array.isArray(e.content))return!1;for(const r of e.content)if(n(r))return!0}return!1};return n(t)}};st(wr,"IMAGE_PASTE_HANDLER_PLUGIN_KEY",new Dd("augment-prosemirror-image-paste-handler"));let gr=wr;function Pp(s,t,n){let{maxImages:e}=t,{saveImage:o}=t,{deleteImage:r}=t,{renderImage:i}=t,{isEditable:c=()=>!0}=t,{changeImageMode:a}=t;const l=new gr({changeImageMode:a,maxImages:e,saveImage:o,deleteImage:r,renderImage:i,isEditable:c}),u=Ht(cs.CONTEXT_KEY).pluginManager.registerPlugin(l);return Io(u),s.$$set=p=>{"maxImages"in p&&n(0,e=p.maxImages),"saveImage"in p&&n(1,o=p.saveImage),"deleteImage"in p&&n(2,r=p.deleteImage),"renderImage"in p&&n(3,i=p.renderImage),"isEditable"in p&&n(4,c=p.isEditable),"changeImageMode"in p&&n(5,a=p.changeImageMode)},[e,o,r,i,c,a]}let Dp=class extends nt{constructor(s){super(),ot(this,s,Pp,null,tt,{maxImages:0,saveImage:1,deleteImage:2,renderImage:3,isEditable:4,changeImageMode:5})}};function ea(s,t){if(s.length<=t||s.length===0)return s;const n=s.split(`
`),e="... additional lines truncated ..."+(n[0].endsWith("\r")?"\r":"");let o="";if(n.length<2||n[0].length+n[n.length-1].length+e.length>t){const r=Math.floor(t/2);o=[s.slice(0,r),"<...>",s.slice(-r)].join("")}else{const r=[],i=[];let c=e.length+1;for(let a=0;a<Math.floor(n.length/2);a++){const l=n[a],u=n[n.length-1-a],p=l.length+u.length+2;if(c+p>t)break;c+=p,r.push(l),i.push(u)}r.push(e),r.push(...i.reverse()),o=r.join(`
`)}return o}function Np(s){var n;if(!s)return ir.IMAGE_FORMAT_UNSPECIFIED;switch((n=s.split("/")[1])==null?void 0:n.toLowerCase()){case"jpeg":case"jpg":return ir.JPEG;case"png":return ir.PNG;default:return ir.IMAGE_FORMAT_UNSPECIFIED}}async function Fp(s,t,n,e=1024){try{const o=function(i,c,a){const l=atob(i);let u=l.length;const p=new Uint8Array(u);for(;u--;)p[u]=l.charCodeAt(u);return new File([p],c,{type:a})}(s,t,n),r=await Pl(o,e);return new Promise((i,c)=>{const a=new FileReader;a.onloadend=()=>{if(typeof a.result=="string"){const l=a.result.split(","),u=l.length>1?l[1]:a.result;i({dataUrl:u,mimeType:"image/png"})}else c(new Error("Failed to convert blob to data URL"))},a.onerror=l=>{c(new Error("FileReader error"))},a.readAsDataURL(r)})}catch(o){return console.error("Error scaling image:",o),{dataUrl:s,mimeType:n}}}async function Op(s,t=!0){if(!s.contentNodes||s.contentNodes.length===0)return s;const n=await async function(e,o=!0){const r=[];for(const i of e)if(i.type===To.ContentImage&&i.image_content&&i.image_content.image_data){if(!o)continue;const c=i.image_content.image_data,a=i.image_content.media_type||"image/png",l=`image.${a.split("/")[1]||"png"}`,u=await Fp(c,l,a);r.push({type:To.ContentImage,image_content:{image_data:u.dataUrl,media_type:u.mimeType}})}else r.push(i);return r}(s.contentNodes,t);return{...s,contentNodes:n}}const yr=class yr{constructor(t,n,e){st(this,"_disposables",[]);st(this,"_activeTool");st(this,"_activeToolCancelled",!1);st(this,"_processLastExchange",(t,n)=>{var o;const e=(o=n.structured_output_nodes)==null?void 0:o.filter(r=>r.type===pi.TOOL_USE);for(const r of e??[]){const i=r.tool_use;if(i===void 0)continue;const c=this._conversationModel.getToolUseState(t,i.tool_use_id);c.phase===Ee.new&&this._validateAndCheckTool(t,i.tool_use_id,i.tool_name,JSON.parse(i.input_json),this._conversationModel.chatHistory.filter(a=>fr(a)).map(ts)),this._markCancelledIfStale(t,i.tool_use_id,c.phase)}});st(this,"_validateAndCheckTool",async(t,n,e,o,r)=>{var l;const i=this._conversationModel.id;if(this._activeTool!==void 0)return void console.error("_validateAndCheckTool called while another tool is active",this._activeTool);this._activeTool={id:n,requestId:t,phase:Ee.checkingSafety},this._conversationModel.updateToolUseState({requestId:t,toolUseId:n,phase:Ee.checkingSafety});const c=await this._extensionClient.getToolIdentifier(e);if(!c.found)return this._activeTool=void 0,void this._reportToolError(t,n,`Tool "${e}" does not exist`);if(c.toolIdentifier.hostName===hi.mcpHost){const u=this._conversationModel.lastExchange;if(u!=null&&u.structured_output_nodes){const p=u.structured_output_nodes.find(g=>{var h;return g.type===pi.TOOL_USE&&((h=g.tool_use)==null?void 0:h.tool_use_id)===n});p!=null&&p.tool_use&&c.mcpToolName&&c.mcpServerName&&(p.tool_use.mcp_server_name=c.mcpServerName,p.tool_use.mcp_tool_name=c.mcpToolName)}}if(ce(this._chatModel.agentExecutionMode)===gn.auto&&((l=this._conversationModel.extraData)!=null&&l.isAgentConversation)&&c.toolIdentifier.hostName!==hi.remoteToolHost)return this._activeTool=void 0,void await this.callTool(t,n,e,o,r,i);const a=await this._extensionClient.checkSafe(e,o);this._activeTool=void 0,a?await this.callTool(t,n,e,o,r,this._conversationModel.id):this._conversationModel.updateToolUseState({requestId:t,toolUseId:n,phase:Ee.runnable})});st(this,"_reportToolError",(t,n,e)=>{this._conversationModel.updateToolUseState({requestId:t,toolUseId:n,phase:Ee.error,result:{isError:!0,text:e}}),this._conversationModel.sendExchange({request_message:"",status:_e.draft,structured_request_nodes:[{id:1,type:_o.TOOL_RESULT,tool_result_node:{content:e,is_error:!0,tool_use_id:n}}]})});st(this,"callTool",async(t,n,e,o,r,i)=>{if(this._activeTool!==void 0)return void console.error("callTool called while another tool is active","tried to run:",n,"active tool:",this._activeTool);this._conversationModel.updateToolUseState({requestId:t,toolUseId:n,phase:Ee.running}),this._activeTool={id:n,requestId:t,phase:Ee.running};let c=[];try{const u=function(k,T){if(k.contentNodes&&k.contentNodes.length>0){const b=k.contentNodes.map(S=>{if(S.type===To.ContentText){let H="";return S.text_content&&(H=ea(S.text_content,T/k.contentNodes.length)),{...S,text_content:H}}return S});return{...k,contentNodes:b}}return{...k,text:ea(k.text,T)}}(await this._extensionClient.callTool(t,n,e,o,r,i),yr.maxResultBytes),p=await Op(u,this._chatModel.flags.enableDebugFeatures);if(this._activeToolCancelled)return this._activeToolCancelled=!1,this._activeTool=void 0,void this._conversationModel.updateToolUseState({requestId:t,toolUseId:n,phase:Ee.cancelled,result:p});let g,h=p.isError?Ee.error:Ee.completed;this._conversationModel.updateToolUseState({requestId:t,toolUseId:n,phase:h,result:p}),p.contentNodes?(a=p.contentNodes,l=this._chatModel.flags.enableDebugFeatures,g=a.map(k=>k.type===To.ContentText?{type:Xr.CONTENT_TEXT,text_content:k.text_content}:k.type===To.ContentImage&&k.image_content&&l?{type:Xr.CONTENT_IMAGE,image_content:{image_data:k.image_content.image_data,format:Np(k.image_content.media_type)}}:{type:Xr.CONTENT_TEXT,text_content:"[Error: Invalid content node]"}),c=[{id:1,type:_o.TOOL_RESULT,tool_result_node:{content:"",is_error:p.isError,request_id:p.requestId,tool_use_id:n,content_nodes:g}}]):c=[{id:1,type:_o.TOOL_RESULT,tool_result_node:{content:p.text,is_error:p.isError,request_id:p.requestId,tool_use_id:n}}]}catch(u){if(this._activeToolCancelled)return this._activeToolCancelled=!1,this._activeTool=void 0,void this._conversationModel.updateToolUseState({requestId:t,toolUseId:n,phase:Ee.cancelled});const p=u instanceof Error?u.message:String(u);this._conversationModel.updateToolUseState({requestId:t,toolUseId:n,phase:Ee.error,result:{isError:!0,text:p}}),c=[{id:1,type:_o.TOOL_RESULT,tool_result_node:{content:p,is_error:!0,tool_use_id:n}}]}var a,l;this._activeTool=void 0,i===this._conversationModel.id&&this._conversationModel.sendExchange({request_message:"",status:_e.draft,structured_request_nodes:c})});st(this,"cancelToolRun",async(t,n)=>{this._activeTool!==void 0&&this._activeTool.requestId===t&&this._activeTool.id===n?(this._activeTool={id:n,requestId:t,phase:Ee.cancelling},this._conversationModel.updateToolUseState({requestId:t,toolUseId:n,phase:Ee.cancelling}),this._activeToolCancelled=!0,await this._extensionClient.cancelToolRun(t,n),this._activeTool=void 0):console.error("cancelToolRun called while another tool is active","tried to cancel:",n,"active tool:",this._activeTool)});st(this,"skipToolRun",async(t,n)=>{this._activeTool===void 0?(this._conversationModel.updateToolUseState({requestId:t,toolUseId:n,phase:Ee.cancelled}),this._conversationModel.sendExchange({request_message:"",status:_e.draft,structured_request_nodes:[{id:1,type:_o.TOOL_RESULT,tool_result_node:{content:"Tool did not run. User clicked `Skip` to cancel.",is_error:!0,tool_use_id:n}}]})):console.error("skipToolRun called while another tool is active","tried to cancel:",n,"active tool:",this._activeTool)});st(this,"_markCancelledIfStale",(t,n,e)=>{this._activeTool!==void 0&&this._activeTool.id===n&&this._activeTool.requestId===t||e!==Ee.new&&e!==Ee.checkingSafety&&e!==Ee.cancelling&&e!==Ee.running||this._conversationModel.updateToolUseState({requestId:t,toolUseId:n,phase:Ee.cancelled})});st(this,"cancelActiveToolRun",async()=>{this._activeTool!==void 0&&await this.cancelToolRun(this._activeTool.requestId,this._activeTool.id)});st(this,"interruptAllTools",async()=>{qu(this._conversationModel),await this.cancelActiveToolRun();const t=this._conversationModel.lastExchange;t&&!Wu(t)&&this._conversationModel.addChatItem({request_id:crypto.randomUUID(),status:_e.cancelled,chatItemType:Cn.agenticTurnDelimiter})});st(this,"interruptToolsConversation",async()=>{await this._conversationModel.cancelMessage(),await this.interruptAllTools()});st(this,"dispose",()=>{this._disposables.forEach(t=>t.dispose())});let o;this._conversationModel=t,this._extensionClient=n,this._chatModel=e;const r=this._conversationModel.subscribe(a=>{const l=a.lastExchange;if(fr(l)&&l.request_id!==void 0){const u=l.request_id;o!==u&&(this._processLastExchange(u,l),o=u)}}),i=this._conversationModel.onNewConversation(()=>{this._extensionClient.closeAllToolProcesses()}),c=this._conversationModel.onHistoryDelete(()=>{this.cancelActiveToolRun()});this._disposables.push({dispose:r},{dispose:i},{dispose:c})}async getToolCallCheckpoint(t){try{return await this._extensionClient.getToolCallCheckpoint(t)}catch(n){return void console.error("Failed to get tool call checkpoint:",n)}}};st(yr,"maxResultBytes",65536);let os=yr;function Bp(s){let t;return{c(){t=F("i"),t.innerHTML='<span class="c-chaser__gradient svelte-1mwwr16"></span>',E(t,"class","c-chaser svelte-1mwwr16"),Pt(t,"c-chaser--active",s[4]),Qe(t,"--chaser-color",s[0]),Qe(t,"--chaser-speed",s[1]+"s"),Qe(t,"--chaser-fade-speed",s[2]+"s"),Qe(t,"--chaser-tail-length",s[3]+"%")},m(n,e){_(n,t,e)},p(n,[e]){16&e&&Pt(t,"c-chaser--active",n[4]),1&e&&Qe(t,"--chaser-color",n[0]),2&e&&Qe(t,"--chaser-speed",n[1]+"s"),4&e&&Qe(t,"--chaser-fade-speed",n[2]+"s"),8&e&&Qe(t,"--chaser-tail-length",n[3]+"%")},i:D,o:D,d(n){n&&y(t)}}}function zp(s,t,n){let e,{color:o="rgba(255, 255, 255, 0.5)"}=t,{speed:r=4}=t,{repeat:i=1}=t,{startOnMount:c=!1}=t,{fadeSpeed:a=.3}=t,{tailLength:l=5}=t,{onStopChaser:u=()=>{}}=t,p=!1,g=i==="infinite"?1/0:i;function h(){n(4,p=!0),clearTimeout(e),e=setTimeout(()=>{k()},1e3*r*g)}function k(){p&&(n(4,p=!1),clearTimeout(e),u())}return c&&h(),s.$$set=T=>{"color"in T&&n(0,o=T.color),"speed"in T&&n(1,r=T.speed),"repeat"in T&&n(5,i=T.repeat),"startOnMount"in T&&n(6,c=T.startOnMount),"fadeSpeed"in T&&n(2,a=T.fadeSpeed),"tailLength"in T&&n(3,l=T.tailLength),"onStopChaser"in T&&n(7,u=T.onStopChaser)},[o,r,a,l,p,i,c,u,h,k]}class Dl extends nt{constructor(t){super(),ot(this,t,zp,Bp,tt,{color:0,speed:1,repeat:5,startOnMount:6,fadeSpeed:2,tailLength:3,onStopChaser:7,startChaser:8,stopChaser:9})}get startChaser(){return this.$$.ctx[8]}get stopChaser(){return this.$$.ctx[9]}}function Hp(s){let t,n;return{c(){t=Nt("svg"),n=Nt("path"),E(n,"d","M12.5 3L2.5 3.00002C1.67157 3.00002 1 3.6716 1 4.50002V9.50003C1 10.3285 1.67157 11 2.5 11H7.50003C7.63264 11 7.75982 11.0527 7.85358 11.1465L10 13.2929V11.5C10 11.2239 10.2239 11 10.5 11H12.5C13.3284 11 14 10.3285 14 9.50003V4.5C14 3.67157 13.3284 3 12.5 3ZM2.49999 2.00002L12.5 2C13.8807 2 15 3.11929 15 4.5V9.50003C15 10.8807 13.8807 12 12.5 12H11V14.5C11 14.7022 10.8782 14.8845 10.6913 14.9619C10.5045 15.0393 10.2894 14.9965 10.1464 14.8536L7.29292 12H2.5C1.11929 12 0 10.8807 0 9.50003V4.50002C0 3.11931 1.11928 2.00003 2.49999 2.00002Z"),E(n,"fill","currentColor"),E(n,"fill-rule","evenodd"),E(n,"clip-rule","evenodd"),E(t,"width","15"),E(t,"height","15"),E(t,"viewBox","0 0 15 15"),E(t,"fill","none"),E(t,"xmlns","http://www.w3.org/2000/svg")},m(e,o){_(e,t,o),U(t,n)},p:D,i:D,o:D,d(e){e&&y(t)}}}class jp extends nt{constructor(t){super(),ot(this,t,null,Hp,tt,{})}}function Up(s){let t,n,e=[{xmlns:"http://www.w3.org/2000/svg"},{"data-ds-icon":"fa"},{viewBox:"0 0 640 512"},s[0]],o={};for(let r=0;r<e.length;r+=1)o=Ct(o,e[r]);return{c(){t=Nt("svg"),n=new Fe(!0),this.h()},l(r){t=Oe(r,"svg",{xmlns:!0,"data-ds-icon":!0,viewBox:!0});var i=Be(t);n=ze(i,!0),i.forEach(y),this.h()},h(){n.a=null,ne(t,o)},m(r,i){He(r,t,i),n.m('<!--! Font Awesome Pro 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2024 Fonticons, Inc.--><path d="M410.8 134.2c-19.3 8.6-42 3.5-55.9-12.5C332.8 96.1 300.3 80 264 80c-66.3 0-120 53.7-120 120v.2c0 20.4-12.8 38.5-32 45.3-37.4 13.2-64 48.8-64 90.5 0 53 43 96 96 96h363.3c.6-.1 1.3-.1 1.9-.2 46.2-2.7 82.8-41 82.8-87.8 0-36-21.6-67.1-52.8-80.7-20.1-8.8-31.6-30-28.1-51.7.6-3.8.9-7.7.9-11.7 0-39.8-32.2-72-72-72-10.5 0-20.4 2.2-29.2 6.2zM512 479.8v.2H144C64.5 480 0 415.5 0 336c0-62.7 40.1-116 96-135.8v-.2c0-92.8 75.2-168 168-168 50.9 0 96.4 22.6 127.3 58.3C406.2 83.7 422.6 80 440 80c66.3 0 120 53.7 120 120 0 6.6-.5 13-1.5 19.3 48 21 81.5 68.9 81.5 124.7 0 72.4-56.6 131.6-128 135.8"/>',t)},p(r,[i]){ne(t,o=ge(e,[{xmlns:"http://www.w3.org/2000/svg"},{"data-ds-icon":"fa"},{viewBox:"0 0 640 512"},1&i&&r[0]]))},i:D,o:D,d(r){r&&y(t)}}}function qp(s,t,n){return s.$$set=e=>{n(0,t=Ct(Ct({},t),Qt(e)))},[t=Qt(t)]}class Wp extends nt{constructor(t){super(),ot(this,t,qp,Up,tt,{})}}function Vp(s){let t,n,e=[{xmlns:"http://www.w3.org/2000/svg"},{"data-ds-icon":"fa"},{viewBox:"0 0 512 512"},s[0]],o={};for(let r=0;r<e.length;r+=1)o=Ct(o,e[r]);return{c(){t=Nt("svg"),n=new Fe(!0),this.h()},l(r){t=Oe(r,"svg",{xmlns:!0,"data-ds-icon":!0,viewBox:!0});var i=Be(t);n=ze(i,!0),i.forEach(y),this.h()},h(){n.a=null,ne(t,o)},m(r,i){He(r,t,i),n.m('<!--! Font Awesome Pro 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2024 Fonticons, Inc.--><path d="M322.3 268c9.4 2.6 19.3 4 29.7 4 60.5 0 109.8-48 111.9-108l-25.3 25.3c-12 12-28.3 18.7-45.3 18.7H368c-35.3 0-64-28.7-64-64v-25.4c0-17 6.7-33.3 18.7-45.3L348 48.1c-60 2-108 51.4-108 111.9 0 10.3 1.4 20.3 4 29.7 4.6 16.6-.2 34.4-12.4 46.6L57.1 410.7c-5.9 5.8-9.1 13.8-9.1 22.1C48 450 62 464 79.2 464c8.3 0 16.2-3.3 22.1-9.1l174.4-174.5c12.2-12.2 30-16.9 46.6-12.4M424.6 39.4l-67.9 67.9c-3 3-4.7 7.1-4.7 11.3V144c0 8.8 7.2 16 16 16h25.4c4.2 0 8.3-1.7 11.3-4.7l67.9-67.9c7.2-7.2 19.3-5.9 23.7 3.3 10.1 21 15.7 44.5 15.7 69.3 0 88.4-71.6 160-160 160-14.7 0-28.9-2-42.3-5.7L135.2 488.8a79.09 79.09 0 0 1-56 23.2C35.5 512 0 476.5 0 432.8c0-21 8.3-41.1 23.2-56l174.5-174.5c-3.7-13.4-5.7-27.6-5.7-42.3C192 71.6 263.6 0 352 0c24.8 0 48.3 5.7 69.3 15.7 9.2 4.4 10.5 16.5 3.3 23.7M88 408a16 16 0 1 1 0 32 16 16 0 1 1 0-32"/>',t)},p(r,[i]){ne(t,o=ge(e,[{xmlns:"http://www.w3.org/2000/svg"},{"data-ds-icon":"fa"},{viewBox:"0 0 512 512"},1&i&&r[0]]))},i:D,o:D,d(r){r&&y(t)}}}function Gp(s,t,n){return s.$$set=e=>{n(0,t=Ct(Ct({},t),Qt(e)))},[t=Qt(t)]}class Yp extends nt{constructor(t){super(),ot(this,t,Gp,Vp,tt,{})}}function Xp(s){let t,n,e=[{xmlns:"http://www.w3.org/2000/svg"},{"data-ds-icon":"fa"},{viewBox:"0 0 576 512"},s[0]],o={};for(let r=0;r<e.length;r+=1)o=Ct(o,e[r]);return{c(){t=Nt("svg"),n=new Fe(!0),this.h()},l(r){t=Oe(r,"svg",{xmlns:!0,"data-ds-icon":!0,viewBox:!0});var i=Be(t);n=ze(i,!0),i.forEach(y),this.h()},h(){n.a=null,ne(t,o)},m(r,i){He(r,t,i),n.m('<!--! Font Awesome Pro 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2024 Fonticons, Inc.--><path d="M234.7 42.7 197 56.8c-3 1.1-5 4-5 7.2s2 6.1 5 7.2l37.7 14.1 14.1 37.7c1.1 3 4 5 7.2 5s6.1-2 7.2-5l14.1-37.7L315 71.2c3-1.1 5-4 5-7.2s-2-6.1-5-7.2l-37.7-14.1L263.2 5c-1.1-3-4-5-7.2-5s-6.1 2-7.2 5zM461.4 48 496 82.6 386.2 192.3l-34.6-34.6zM80 429.4l237.7-237.7 34.6 34.6L114.6 464zM427.4 14.1 46.1 395.4c-18.7 18.7-18.7 49.1 0 67.9l34.6 34.6c18.7 18.7 49.1 18.7 67.9 0l381.3-381.4c18.7-18.7 18.7-49.1 0-67.9l-34.6-34.5c-18.7-18.7-49.1-18.7-67.9 0M7.5 117.2C3 118.9 0 123.2 0 128s3 9.1 7.5 10.8L64 160l21.2 56.5c1.7 4.5 6 7.5 10.8 7.5s9.1-3 10.8-7.5L128 160l56.5-21.2c4.5-1.7 7.5-6 7.5-10.8s-3-9.1-7.5-10.8L128 96l-21.2-56.5c-1.7-4.5-6-7.5-10.8-7.5s-9.1 3-10.8 7.5L64 96zm352 256c-4.5 1.7-7.5 6-7.5 10.8s3 9.1 7.5 10.8L416 416l21.2 56.5c1.7 4.5 6 7.5 10.8 7.5s9.1-3 10.8-7.5L480 416l56.5-21.2c4.5-1.7 7.5-6 7.5-10.8s-3-9.1-7.5-10.8L480 352l-21.2-56.5c-1.7-4.5-6-7.5-10.8-7.5s-9.1 3-10.8 7.5L416 352z"/>',t)},p(r,[i]){ne(t,o=ge(e,[{xmlns:"http://www.w3.org/2000/svg"},{"data-ds-icon":"fa"},{viewBox:"0 0 576 512"},1&i&&r[0]]))},i:D,o:D,d(r){r&&y(t)}}}function Kp(s,t,n){return s.$$set=e=>{n(0,t=Ct(Ct({},t),Qt(e)))},[t=Qt(t)]}class Zp extends nt{constructor(t){super(),ot(this,t,Kp,Xp,tt,{})}}function Jp(s){let t,n,e,o,r,i;return t=new Zp({}),e=new Ot({props:{size:2,$$slots:{default:[n$]},$$scope:{ctx:s}}}),r=new Ot({props:{size:1,class:"c-mode-secondary-label",$$slots:{default:[o$]},$$scope:{ctx:s}}}),{c(){C(t.$$.fragment),n=W(),C(e.$$.fragment),o=W(),C(r.$$.fragment)},m(c,a){x(t,c,a),_(c,n,a),x(e,c,a),_(c,o,a),x(r,c,a),i=!0},i(c){i||(f(t.$$.fragment,c),f(e.$$.fragment,c),f(r.$$.fragment,c),i=!0)},o(c){$(t.$$.fragment,c),$(e.$$.fragment,c),$(r.$$.fragment,c),i=!1},d(c){c&&(y(n),y(o)),M(t,c),M(e,c),M(r,c)}}}function Qp(s){let t,n,e,o;return t=new Yp({}),e=new Ot({props:{size:2,$$slots:{default:[r$]},$$scope:{ctx:s}}}),{c(){C(t.$$.fragment),n=W(),C(e.$$.fragment)},m(r,i){x(t,r,i),_(r,n,i),x(e,r,i),o=!0},i(r){o||(f(t.$$.fragment,r),f(e.$$.fragment,r),o=!0)},o(r){$(t.$$.fragment,r),$(e.$$.fragment,r),o=!1},d(r){r&&y(n),M(t,r),M(e,r)}}}function t$(s){let t,n,e,o;return t=new jp({}),e=new Ot({props:{size:2,$$slots:{default:[s$]},$$scope:{ctx:s}}}),{c(){C(t.$$.fragment),n=W(),C(e.$$.fragment)},m(r,i){x(t,r,i),_(r,n,i),x(e,r,i),o=!0},i(r){o||(f(t.$$.fragment,r),f(e.$$.fragment,r),o=!0)},o(r){$(t.$$.fragment,r),$(e.$$.fragment,r),o=!1},d(r){r&&y(n),M(t,r),M(e,r)}}}function e$(s){let t,n,e,o;return t=new Wp({}),e=new Ot({props:{size:2,$$slots:{default:[i$]},$$scope:{ctx:s}}}),{c(){C(t.$$.fragment),n=W(),C(e.$$.fragment)},m(r,i){x(t,r,i),_(r,n,i),x(e,r,i),o=!0},i(r){o||(f(t.$$.fragment,r),f(e.$$.fragment,r),o=!0)},o(r){$(t.$$.fragment,r),$(e.$$.fragment,r),o=!1},d(r){r&&y(n),M(t,r),M(e,r)}}}function n$(s){let t;return{c(){t=X("Agent")},m(n,e){_(n,t,e)},d(n){n&&y(t)}}}function o$(s){let t;return{c(){t=X("Auto")},m(n,e){_(n,t,e)},d(n){n&&y(t)}}}function r$(s){let t;return{c(){t=X("Agent")},m(n,e){_(n,t,e)},d(n){n&&y(t)}}}function s$(s){let t;return{c(){t=X("Chat")},m(n,e){_(n,t,e)},d(n){n&&y(t)}}}function i$(s){let t;return{c(){t=X("Remote Agent")},m(n,e){_(n,t,e)},d(n){n&&y(t)}}}function a$(s){let t,n,e,o;const r=[e$,t$,Qp,Jp],i=[];function c(a,l){return a[2]?0:a[0]?a[1]===gn.manual?2:a[1]===gn.auto?3:-1:1}return~(n=c(s))&&(e=i[n]=r[n](s)),{c(){t=F("div"),e&&e.c(),E(t,"class","c-mode-display svelte-1yh54t0")},m(a,l){_(a,t,l),~n&&i[n].m(t,null),o=!0},p(a,[l]){let u=n;n=c(a),n!==u&&(e&&(K(),$(i[u],1,1,()=>{i[u]=null}),Z()),~n?(e=i[n],e||(e=i[n]=r[n](a),e.c()),f(e,1),e.m(t,null)):e=null)},i(a){o||(f(e),o=!0)},o(a){$(e),o=!1},d(a){a&&y(t),~n&&i[n].d()}}}function c$(s,t,n){let{isAgentEnabled:e=!1}=t,{agentExecutionMode:o}=t,{isBackgroundAgent:r=!1}=t;return s.$$set=i=>{"isAgentEnabled"in i&&n(0,e=i.isAgentEnabled),"agentExecutionMode"in i&&n(1,o=i.agentExecutionMode),"isBackgroundAgent"in i&&n(2,r=i.isBackgroundAgent)},[e,o,r]}class Nl extends nt{constructor(t){super(),ot(this,t,c$,a$,tt,{isAgentEnabled:0,agentExecutionMode:1,isBackgroundAgent:2})}}function l$(s){let t,n,e;return n=new Nl({props:{isAgentEnabled:s[2],agentExecutionMode:s[3],isBackgroundAgent:s[6]}}),{c(){t=F("div"),C(n.$$.fragment),E(t,"class","c-mode-display-item svelte-e7nc78"),Pt(t,"c-mode-display-item--selected",s[5])},m(o,r){_(o,t,r),x(n,t,null),e=!0},p(o,r){const i={};4&r&&(i.isAgentEnabled=o[2]),8&r&&(i.agentExecutionMode=o[3]),64&r&&(i.isBackgroundAgent=o[6]),n.$set(i),(!e||32&r)&&Pt(t,"c-mode-display-item--selected",o[5])},i(o){e||(f(n.$$.fragment,o),e=!0)},o(o){$(n.$$.fragment,o),e=!1},d(o){o&&y(t),M(n)}}}function u$(s){let t,n;return t=new _t.Item({props:{onSelect:s[0],$$slots:{default:[l$]},$$scope:{ctx:s}}}),{c(){C(t.$$.fragment)},m(e,o){x(t,e,o),n=!0},p(e,o){const r={};1&o&&(r.onSelect=e[0]),236&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){M(t,e)}}}function d$(s){let t,n,e;return n=new we({props:{triggerOn:[Ne.Hover],content:s[1],side:s[4],$$slots:{default:[u$]},$$scope:{ctx:s}}}),{c(){t=F("div"),C(n.$$.fragment),E(t,"class","c-mode-display-item-container svelte-e7nc78")},m(o,r){_(o,t,r),x(n,t,null),e=!0},p(o,[r]){const i={};2&r&&(i.content=o[1]),16&r&&(i.side=o[4]),237&r&&(i.$$scope={dirty:r,ctx:o}),n.$set(i)},i(o){e||(f(n.$$.fragment,o),e=!0)},o(o){$(n.$$.fragment,o),e=!1},d(o){o&&y(t),M(n)}}}function f$(s,t,n){let{onSelect:e}=t,{tooltipContent:o=""}=t,{isAgentEnabled:r=!1}=t,{agentExecutionMode:i}=t,{tooltipSide:c="top"}=t,{selected:a=!1}=t,{isBackgroundAgent:l=!1}=t;return s.$$set=u=>{"onSelect"in u&&n(0,e=u.onSelect),"tooltipContent"in u&&n(1,o=u.tooltipContent),"isAgentEnabled"in u&&n(2,r=u.isAgentEnabled),"agentExecutionMode"in u&&n(3,i=u.agentExecutionMode),"tooltipSide"in u&&n(4,c=u.tooltipSide),"selected"in u&&n(5,a=u.selected),"isBackgroundAgent"in u&&n(6,l=u.isBackgroundAgent)},[e,o,r,i,c,a,l]}class lr extends nt{constructor(t){super(),ot(this,t,f$,d$,tt,{onSelect:0,tooltipContent:1,isAgentEnabled:2,agentExecutionMode:3,tooltipSide:4,selected:5,isBackgroundAgent:6})}}class vr{constructor(t,n,e){this._chatModel=t,this._agentConversationModel=n,this._remoteAgentsModel=e}setToChat(){this._remoteAgentsModel.setIsActive(!1),this._agentConversationModel.setToChat(),this._agentConversationModel.refreshAutoModeAcceptance()}async setToAgent(t){this._remoteAgentsModel.setIsActive(!1),await this._agentConversationModel.setToAgentic(),this._chatModel.agentExecutionMode.set(t),await this._agentConversationModel.refreshAutoModeAcceptance()}setToRemoteAgent(t){var n;if(this._remoteAgentsModel.setIsActive(!0),this._agentConversationModel.setToAgentic(),t)this._remoteAgentsModel.setCurrentAgent(t);else if(!((n=this._remoteAgentsModel)!=null&&n.currentAgent)){const e=this._remoteAgentsModel.agentOverviews.length>0?this._remoteAgentsModel.agentOverviews[0]:void 0;e&&this._remoteAgentsModel.setCurrentAgent(e.remote_agent_id)}}handleMessageFromExtension(t){const n=t.data;return n.type===fe.remoteAgentSelectAgentId&&(this.setToRemoteAgent(n.data.agentId),!0)}}st(vr,"key","chatModeModel");function na(s){let t,n;return t=new Dl({props:{startOnMount:!0,repeat:"infinite"}}),{c(){C(t.$$.fragment)},m(e,o){x(t,e,o),n=!0},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){M(t,e)}}}function m$(s){let t,n;return t=new Ro({}),{c(){C(t.$$.fragment)},m(e,o){x(t,e,o),n=!0},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){M(t,e)}}}function p$(s){let t,n;return t=new vl({}),{c(){C(t.$$.fragment)},m(e,o){x(t,e,o),n=!0},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){M(t,e)}}}function $$(s){var g;let t,n,e,o,r,i,c,a=s[3]&&na();e=new Nl({props:{isAgentEnabled:s[8],agentExecutionMode:s[9],isBackgroundAgent:(g=s[10])==null?void 0:g.isActive}});const l=[p$,m$],u=[];function p(h,k){return h[1]?0:1}return r=p(s),i=u[r]=l[r](s),{c(){a&&a.c(),t=W(),n=F("div"),C(e.$$.fragment),o=W(),i.c(),E(n,"class","c-toggle-mode-button__trigger-text")},m(h,k){a&&a.m(h,k),_(h,t,k),_(h,n,k),x(e,n,null),U(n,o),u[r].m(n,null),c=!0},p(h,k){var S;h[3]?a?8&k&&f(a,1):(a=na(),a.c(),f(a,1),a.m(t.parentNode,t)):a&&(K(),$(a,1,1,()=>{a=null}),Z());const T={};256&k&&(T.isAgentEnabled=h[8]),512&k&&(T.agentExecutionMode=h[9]),1024&k&&(T.isBackgroundAgent=(S=h[10])==null?void 0:S.isActive),e.$set(T);let b=r;r=p(h),r!==b&&(K(),$(u[b],1,1,()=>{u[b]=null}),Z(),i=u[r],i||(i=u[r]=l[r](h),i.c()),f(i,1),i.m(n,null))},i(h){c||(f(a),f(e.$$.fragment,h),f(i),c=!0)},o(h){$(a),$(e.$$.fragment,h),$(i),c=!1},d(h){h&&(y(t),y(n)),a&&a.d(h),M(e),u[r].d()}}}function h$(s){let t,n;return t=new pe({props:{size:1,variant:s[3]?"soft":"ghost",color:"accent",$$slots:{default:[$$]},$$scope:{ctx:s}}}),{c(){C(t.$$.fragment)},m(e,o){x(t,e,o),n=!0},p(e,o){const r={};8&o&&(r.variant=e[3]?"soft":"ghost"),134219530&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){M(t,e)}}}function oa(s){let t,n;return t=new lr({props:{onSelect:s[22],isBackgroundAgent:!0,tooltipSide:"right",tooltipContent:"Run background agents in the cloud"}}),{c(){C(t.$$.fragment)},m(e,o){x(t,e,o),n=!0},p:D,i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){M(t,e)}}}function g$(s){let t,n,e,o,r,i,c,a;t=new lr({props:{onSelect:s[19],isAgentEnabled:!1,tooltipSide:"right",tooltipContent:"Ask Augment"}}),e=new lr({props:{onSelect:s[20],isAgentEnabled:!0,agentExecutionMode:gn.manual,tooltipSide:"right",tooltipContent:"Require approval for some tools"}}),r=new lr({props:{onSelect:s[21],isAgentEnabled:!0,agentExecutionMode:gn.auto,tooltipSide:"right",tooltipContent:"Autorun all tools"}});let l=s[7]&&oa(s);return{c(){C(t.$$.fragment),n=W(),C(e.$$.fragment),o=W(),C(r.$$.fragment),i=W(),l&&l.c(),c=ft()},m(u,p){x(t,u,p),_(u,n,p),x(e,u,p),_(u,o,p),x(r,u,p),_(u,i,p),l&&l.m(u,p),_(u,c,p),a=!0},p(u,p){u[7]?l?(l.p(u,p),128&p&&f(l,1)):(l=oa(u),l.c(),f(l,1),l.m(c.parentNode,c)):l&&(K(),$(l,1,1,()=>{l=null}),Z())},i(u){a||(f(t.$$.fragment,u),f(e.$$.fragment,u),f(r.$$.fragment,u),f(l),a=!0)},o(u){$(t.$$.fragment,u),$(e.$$.fragment,u),$(r.$$.fragment,u),$(l),a=!1},d(u){u&&(y(n),y(o),y(i),y(c)),M(t,u),M(e,u),M(r,u),l&&l.d(u)}}}function v$(s){let t,n,e,o;return t=new _t.Trigger({props:{$$slots:{default:[h$]},$$scope:{ctx:s}}}),e=new _t.Content({props:{size:1,side:"top",align:"start",$$slots:{default:[g$]},$$scope:{ctx:s}}}),{c(){C(t.$$.fragment),n=W(),C(e.$$.fragment)},m(r,i){x(t,r,i),_(r,n,i),x(e,r,i),o=!0},p(r,i){const c={};134219530&i&&(c.$$scope={dirty:i,ctx:r}),t.$set(c);const a={};134217856&i&&(a.$$scope={dirty:i,ctx:r}),e.$set(a)},i(r){o||(f(t.$$.fragment,r),f(e.$$.fragment,r),o=!0)},o(r){$(t.$$.fragment,r),$(e.$$.fragment,r),o=!1},d(r){r&&y(n),M(t,r),M(e,r)}}}function w$(s){let t,n,e,o={onOpenChange:s[12],nested:!1,$$slots:{default:[v$]},$$scope:{ctx:s}};return n=new _t.Root({props:o}),s[23](n),{c(){t=F("div"),C(n.$$.fragment),E(t,"class","c-toggle-mode-button svelte-1hoi5c5")},m(r,i){_(r,t,i),x(n,t,null),e=!0},p(r,[i]){const c={};134219658&i&&(c.$$scope={dirty:i,ctx:r}),n.$set(c)},i(r){e||(f(n.$$.fragment,r),e=!0)},o(r){$(n.$$.fragment,r),e=!1},d(r){r&&y(t),s[23](null),M(n)}}}function y$(s,t,n){let e,o,r,i,c,a,l,u,p,g,h=D,k=D,T=()=>(k(),k=se(H,G=>n(18,l=G)),H),b=D,S=D;s.$$.on_destroy.push(()=>h()),s.$$.on_destroy.push(()=>k()),s.$$.on_destroy.push(()=>b()),s.$$.on_destroy.push(()=>S());let{chatModel:H=Ht("chatModel")}=t;T();let{agentConversationModel:O=Ht("agentConversationModel")}=t;const B=Ht(Zn.key);Vt(s,B,G=>n(10,g=G));const ut=Ht(vr.key),kt=Ht(pr)??xe($r);let rt,vt=!1;function et(){ut.setToChat(),rt==null||rt.requestClose(),It()}async function At(G){await ut.setToAgent(G),n(3,c=!1),It(),rt==null||rt.requestClose()}function St(){B?(ut.setToRemoteAgent(),It(),rt==null||rt.requestClose()):console.error("No remote agents model found")}function It(){kt.update(()=>B!=null&&B.isActive?vd:$r)}return s.$$set=G=>{"chatModel"in G&&T(n(0,H=G.chatModel)),"agentConversationModel"in G&&n(16,O=G.agentConversationModel)},s.$$.update=()=>{262144&s.$$.dirty&&n(7,e=l.flags.enableBackgroundAgents),65536&s.$$.dirty&&(n(6,o=O.isCurrConversationAgentic),b(),b=se(o,G=>n(8,u=G))),262144&s.$$.dirty&&(n(5,r=l.agentExecutionMode),S(),S=se(r,G=>n(9,p=G))),65536&s.$$.dirty&&(n(4,i=O.hasEverUsedAgent),h(),h=se(i,G=>n(17,a=G))),131072&s.$$.dirty&&n(3,c=a===!1)},[H,vt,rt,c,i,r,o,e,u,p,g,B,function(G){n(1,vt=G)},et,At,St,O,a,l,()=>et(),()=>At(gn.manual),()=>At(gn.auto),()=>St(),function(G){ue[G?"unshift":"push"](()=>{rt=G,n(2,rt)})}]}class b$ extends nt{constructor(t){super(),ot(this,t,y$,w$,tt,{chatModel:0,agentConversationModel:16})}}function _$(s){let t,n,e=[{xmlns:"http://www.w3.org/2000/svg"},{"data-ds-icon":"fa"},{viewBox:"0 0 384 512"},s[0]],o={};for(let r=0;r<e.length;r+=1)o=Ct(o,e[r]);return{c(){t=Nt("svg"),n=new Fe(!0),this.h()},l(r){t=Oe(r,"svg",{xmlns:!0,"data-ds-icon":!0,viewBox:!0});var i=Be(t);n=ze(i,!0),i.forEach(y),this.h()},h(){n.a=null,ne(t,o)},m(r,i){He(r,t,i),n.m('<!--! Font Awesome Pro 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2024 Fonticons, Inc.--><path d="m134.6 51.7-10.8 140.9c-1.1 14.6-8.8 27.8-20.9 36-23.9 16.2-41.8 40.8-49.1 70.3l-1.3 5.1H168v-88c0-13.3 10.7-24 24-24s24 10.7 24 24v88h115.5l-1.3-5.1c-7.4-29.5-25.2-54.1-49.1-70.2-12.1-8.2-19.8-21.5-20.9-36l-10.8-141c-.1-1.2-.1-2.5-.1-3.7H134.8c0 1.2 0 2.5-.1 3.7zM168 352H32c-9.9 0-19.2-4.5-25.2-12.3s-8.2-17.9-5.8-27.5l6.2-25c10.3-41.3 35.4-75.7 68.7-98.3L83.1 96l3.7-48H56c-4.4 0-8.6-1.2-12.2-3.3C36.8 40.5 32 32.8 32 24 32 10.7 42.7 0 56 0h272c13.3 0 24 10.7 24 24 0 8.8-4.8 16.5-11.8 20.7-3.6 2.1-7.7 3.3-12.2 3.3h-30.8l3.7 48 7.1 92.9c33.3 22.6 58.4 57.1 68.7 98.3l6.2 25c2.4 9.6.2 19.7-5.8 27.5S361.7 352 351.9 352h-136v136c0 13.3-10.7 24-24 24s-24-10.7-24-24V352z"/>',t)},p(r,[i]){ne(t,o=ge(e,[{xmlns:"http://www.w3.org/2000/svg"},{"data-ds-icon":"fa"},{viewBox:"0 0 384 512"},1&i&&r[0]]))},i:D,o:D,d(r){r&&y(t)}}}function C$(s,t,n){return s.$$set=e=>{n(0,t=Ct(Ct({},t),Qt(e)))},[t=Qt(t)]}let x$=class extends nt{constructor(s){super(),ot(this,s,C$,_$,tt,{})}};function M$(s){let t,n,e=[{xmlns:"http://www.w3.org/2000/svg"},{"data-ds-icon":"fa"},{viewBox:"0 0 384 512"},s[0]],o={};for(let r=0;r<e.length;r+=1)o=Ct(o,e[r]);return{c(){t=Nt("svg"),n=new Fe(!0),this.h()},l(r){t=Oe(r,"svg",{xmlns:!0,"data-ds-icon":!0,viewBox:!0});var i=Be(t);n=ze(i,!0),i.forEach(y),this.h()},h(){n.a=null,ne(t,o)},m(r,i){He(r,t,i),n.m('<!--! Font Awesome Pro 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2024 Fonticons, Inc.--><path d="M32 32C32 14.3 46.3 0 64 0h256c17.7 0 32 14.3 32 32s-14.3 32-32 32h-29.5l11.4 148.2c36.7 19.9 65.7 53.2 79.5 94.7l1 3c3.3 9.8 1.6 20.5-4.4 28.8S362.3 352 352 352H32c-10.3 0-19.9-4.9-26-13.3s-7.7-19.1-4.4-28.8l1-3c13.8-41.5 42.8-74.8 79.5-94.7L93.5 64H64c-17.7 0-32-14.3-32-32m128 352h64v96c0 17.7-14.3 32-32 32s-32-14.3-32-32z"/>',t)},p(r,[i]){ne(t,o=ge(e,[{xmlns:"http://www.w3.org/2000/svg"},{"data-ds-icon":"fa"},{viewBox:"0 0 384 512"},1&i&&r[0]]))},i:D,o:D,d(r){r&&y(t)}}}function A$(s,t,n){return s.$$set=e=>{n(0,t=Ct(Ct({},t),Qt(e)))},[t=Qt(t)]}class E$ extends nt{constructor(t){super(),ot(this,t,A$,M$,tt,{})}}function k$(s){let t,n;return t=new x$({}),{c(){C(t.$$.fragment)},m(e,o){x(t,e,o),n=!0},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){M(t,e)}}}function T$(s){let t,n;return t=new E$({}),{c(){C(t.$$.fragment)},m(e,o){x(t,e,o),n=!0},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){M(t,e)}}}function L$(s){let t,n,e,o;const r=[T$,k$],i=[];function c(a,l){return a[0]?0:1}return n=c(s),e=i[n]=r[n](s),{c(){t=F("span"),e.c(),E(t,"class","c-pin-button svelte-16rnrv4")},m(a,l){_(a,t,l),i[n].m(t,null),o=!0},p(a,l){let u=n;n=c(a),n!==u&&(K(),$(i[u],1,1,()=>{i[u]=null}),Z(),e=i[n],e||(e=i[n]=r[n](a),e.c()),f(e,1),e.m(t,null))},i(a){o||(f(e),o=!0)},o(a){$(e),o=!1},d(a){a&&y(t),i[n].d()}}}function I$(s){let t,n;return t=new Jn.IconButton({props:{color:"neutral",$$slots:{default:[L$]},$$scope:{ctx:s}}}),t.$on("click",s[3]),{c(){C(t.$$.fragment)},m(e,o){x(t,e,o),n=!0},p(e,o){const r={};17&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){M(t,e)}}}function S$(s){let t,n;return t=new we({props:{content:s[2],$$slots:{default:[I$]},$$scope:{ctx:s}}}),{c(){C(t.$$.fragment)},m(e,o){x(t,e,o),n=!0},p(e,[o]){const r={};4&o&&(r.content=e[2]),19&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){M(t,e)}}}function R$(s,t,n){let{isPinned:e=!1}=t,{onPin:o}=t,{title:r=e?"Unpin":"Pin to context"}=t;return s.$$set=i=>{"isPinned"in i&&n(0,e=i.isPinned),"onPin"in i&&n(1,o=i.onPin),"title"in i&&n(2,r=i.title)},[e,o,r,i=>{i.stopPropagation(),o()}]}class P$ extends nt{constructor(t){super(),ot(this,t,R$,S$,tt,{isPinned:0,onPin:1,title:2})}}function D$(s){let t,n,e=[{xmlns:"http://www.w3.org/2000/svg"},{"data-ds-icon":"fa"},{viewBox:"0 0 576 512"},s[0]],o={};for(let r=0;r<e.length;r+=1)o=Ct(o,e[r]);return{c(){t=Nt("svg"),n=new Fe(!0),this.h()},l(r){t=Oe(r,"svg",{xmlns:!0,"data-ds-icon":!0,viewBox:!0});var i=Be(t);n=ze(i,!0),i.forEach(y),this.h()},h(){n.a=null,ne(t,o)},m(r,i){He(r,t,i),n.m('<!--! Font Awesome Pro 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2024 Fonticons, Inc.--><path d="M156 32C100.6 32 48.8 46.6 27.1 53.6 10.3 59 0 74.5 0 91.1v312.4c0 26.1 24 44.2 48 40.2 19.8-3.3 54.8-7.7 100-7.7 54 0 97.5 25.5 112.5 35.6 7.5 5 16.8 8.4 27 8.4 11.5 0 21.6-4.2 29.3-9.9 13.4-9.8 52.3-34.1 111.2-34.1 47.7 0 80.5 4 99 7.2 23.9 4.1 49-13.8 49-40.6V91.1c0-16.5-10.3-32.1-27.1-37.5C527.2 46.6 475.4 32 420 32c-36.8 0-71.8 6.4-97.4 12.7-12.8 3.2-23.5 6.3-30.9 8.7-1.3.4-2.6.8-3.7 1.2-1.1-.4-2.4-.8-3.7-1.2-7.5-2.4-18.1-5.5-30.9-8.7C227.8 38.4 192.8 32 156 32m108 65.3v320.6c-26-13.7-67.2-29.9-116-29.9-42.9 0-77.4 3.7-100 7.1V97.3C70.3 90.6 112.4 80 156 80c31.6 0 62.6 5.6 85.9 11.3 8.6 2.1 16.1 4.2 22.1 6m48 319.2V97.3c6-1.8 13.5-3.9 22.1-6C357.4 85.6 388.4 80 420 80c43.6 0 85.7 10.6 108 17.3v297.4c-21.7-3.3-54.9-6.7-100-6.7-51.4 0-90.8 15-116 28.6z"/>',t)},p(r,[i]){ne(t,o=ge(e,[{xmlns:"http://www.w3.org/2000/svg"},{"data-ds-icon":"fa"},{viewBox:"0 0 576 512"},1&i&&r[0]]))},i:D,o:D,d(r){r&&y(t)}}}function N$(s,t,n){return s.$$set=e=>{n(0,t=Ct(Ct({},t),Qt(e)))},[t=Qt(t)]}class F$ extends nt{constructor(t){super(),ot(this,t,N$,D$,tt,{})}}function O$(s){let t,n,e=[{xmlns:"http://www.w3.org/2000/svg"},{"data-ds-icon":"fa"},{viewBox:"0 0 384 512"},s[0]],o={};for(let r=0;r<e.length;r+=1)o=Ct(o,e[r]);return{c(){t=Nt("svg"),n=new Fe(!0),this.h()},l(r){t=Oe(r,"svg",{xmlns:!0,"data-ds-icon":!0,viewBox:!0});var i=Be(t);n=ze(i,!0),i.forEach(y),this.h()},h(){n.a=null,ne(t,o)},m(r,i){He(r,t,i),n.m('<!--! Font Awesome Pro 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2024 Fonticons, Inc.--><path d="M320 464c8.8 0 16-7.2 16-16V160h-80c-17.7 0-32-14.3-32-32V48H64c-8.8 0-16 7.2-16 16v384c0 8.8 7.2 16 16 16zM0 64C0 28.7 28.7 0 64 0h165.5c17 0 33.3 6.7 45.3 18.7l90.5 90.5c12 12 18.7 28.3 18.7 45.3V448c0 35.3-28.7 64-64 64H64c-35.3 0-64-28.7-64-64z"/>',t)},p(r,[i]){ne(t,o=ge(e,[{xmlns:"http://www.w3.org/2000/svg"},{"data-ds-icon":"fa"},{viewBox:"0 0 384 512"},1&i&&r[0]]))},i:D,o:D,d(r){r&&y(t)}}}function B$(s,t,n){return s.$$set=e=>{n(0,t=Ct(Ct({},t),Qt(e)))},[t=Qt(t)]}let Fl=class extends nt{constructor(s){super(),ot(this,s,B$,O$,tt,{})}};function z$(s){let t,n,e=[{xmlns:"http://www.w3.org/2000/svg"},{"data-ds-icon":"fa"},{viewBox:"0 0 576 512"},s[0]],o={};for(let r=0;r<e.length;r+=1)o=Ct(o,e[r]);return{c(){t=Nt("svg"),n=new Fe(!0),this.h()},l(r){t=Oe(r,"svg",{xmlns:!0,"data-ds-icon":!0,viewBox:!0});var i=Be(t);n=ze(i,!0),i.forEach(y),this.h()},h(){n.a=null,ne(t,o)},m(r,i){He(r,t,i),n.m('<!--! Font Awesome Pro 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2024 Fonticons, Inc.--><path d="M384 480h48c11.4 0 21.9-6 27.6-15.9l112-192c5.8-9.9 5.8-22.1.1-32.1s-16.2-16-27.7-16H144c-11.4 0-21.9 6-27.6 15.9L48 357.1V96c0-8.8 7.2-16 16-16h117.5c4.2 0 8.3 1.7 11.3 4.7l26.5 26.5c21 21 49.5 32.8 79.2 32.8H416c8.8 0 16 7.2 16 16v32h48v-32c0-35.3-28.7-64-64-64H298.5c-17 0-33.3-6.7-45.3-18.7l-26.5-26.6c-12-12-28.3-18.7-45.3-18.7H64C28.7 32 0 60.7 0 96v320c0 35.3 28.7 64 64 64h23.7z"/>',t)},p(r,[i]){ne(t,o=ge(e,[{xmlns:"http://www.w3.org/2000/svg"},{"data-ds-icon":"fa"},{viewBox:"0 0 576 512"},1&i&&r[0]]))},i:D,o:D,d(r){r&&y(t)}}}function H$(s,t,n){return s.$$set=e=>{n(0,t=Ct(Ct({},t),Qt(e)))},[t=Qt(t)]}class j$ extends nt{constructor(t){super(),ot(this,t,H$,z$,tt,{})}}function U$(s){let t,n,e=[{xmlns:"http://www.w3.org/2000/svg"},{"data-ds-icon":"fa"},{viewBox:"0 0 512 512"},s[0]],o={};for(let r=0;r<e.length;r+=1)o=Ct(o,e[r]);return{c(){t=Nt("svg"),n=new Fe(!0),this.h()},l(r){t=Oe(r,"svg",{xmlns:!0,"data-ds-icon":!0,viewBox:!0});var i=Be(t);n=ze(i,!0),i.forEach(y),this.h()},h(){n.a=null,ne(t,o)},m(r,i){He(r,t,i),n.m('<!--! Font Awesome Pro 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2024 Fonticons, Inc.--><path d="M64 32C28.7 32 0 60.7 0 96v320c0 35.3 28.7 64 64 64h384c35.3 0 64-28.7 64-64V160c0-35.3-28.7-64-64-64H289.9L247 53.1A71.983 71.983 0 0 0 196.1 32zM48 96c0-8.8 7.2-16 16-16h132.1c6.4 0 12.5 2.5 17 7l45.3 45.3c7.5 7.5 17.7 11.7 28.3 11.7H448c8.8 0 16 7.2 16 16v256c0 8.8-7.2 16-16 16H64c-8.8 0-16-7.2-16-16zm305.2 168.2c6.3-3.6 9.5-11.2 6.8-17.9-1.7-4.3-3.7-8.4-5.9-12.4l-2-3.5c-2.4-4-5.1-7.9-7.9-11.5-4.5-5.7-12.6-6.8-18.9-3.1l-1.2.7c-8 4.6-17.9 3.5-25.9-1.2s-14.1-12.7-14.1-21.9V192c0-7.3-4.9-13.8-12.2-14.8-5.2-.7-10.5-1.1-15.8-1.1s-10.7.4-15.8 1.1c-7.2 1-12.2 7.5-12.2 14.8v1.4c0 9.3-6.1 17.3-14.1 21.9s-17.9 5.8-25.9 1.2l-1.2-.7c-6.3-3.6-14.4-2.6-18.9 3.1-2.9 3.7-5.5 7.5-8 11.5l-2 3.4c-2.2 4-4.2 8.2-5.9 12.5-2.7 6.8.4 14.3 6.8 17.9l1.2.7c8 4.6 12 13.8 12 23.1s-4 18.4-12 23.1l-1.2.7c-6.3 3.6-9.5 11.2-6.8 17.9 1.7 4.3 3.7 8.4 5.9 12.4l2.1 3.6c2.4 4 5 7.8 7.9 11.5 4.5 5.7 12.6 6.8 18.9 3.1l1.2-.7c8-4.6 17.9-3.5 25.9 1.2s14.1 12.7 14.1 21.9v1.4c0 7.3 4.9 13.8 12.2 14.8 5.2.7 10.5 1.1 15.8 1.1s10.7-.4 15.8-1.1c7.2-1 12.2-7.5 12.2-14.8v-1.4c0-9.3 6.1-17.3 14.1-21.9s17.9-5.8 25.9-1.2l1.2.7c6.3 3.6 14.4 2.6 18.9-3.1 2.9-3.6 5.5-7.5 7.9-11.4l2.1-3.6c2.2-4 4.2-8.1 5.9-12.4 2.7-6.8-.4-14.3-6.8-17.9l-1.2-.7c-8-4.6-12-13.8-12-23.1s4-18.5 12-23.1l1.2-.7zM221 288a35 35 0 1 1 70 0 35 35 0 1 1-70 0"/>',t)},p(r,[i]){ne(t,o=ge(e,[{xmlns:"http://www.w3.org/2000/svg"},{"data-ds-icon":"fa"},{viewBox:"0 0 512 512"},1&i&&r[0]]))},i:D,o:D,d(r){r&&y(t)}}}function q$(s,t,n){return s.$$set=e=>{n(0,t=Ct(Ct({},t),Qt(e)))},[t=Qt(t)]}class W$ extends nt{constructor(t){super(),ot(this,t,q$,U$,tt,{})}}function V$(s){let t,n;return t=new F$({}),{c(){C(t.$$.fragment)},m(e,o){x(t,e,o),n=!0},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){M(t,e)}}}function G$(s){let t,n;return t=new W$({}),{c(){C(t.$$.fragment)},m(e,o){x(t,e,o),n=!0},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){M(t,e)}}}function Y$(s){let t,n;return t=new j$({}),{c(){C(t.$$.fragment)},m(e,o){x(t,e,o),n=!0},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){M(t,e)}}}function X$(s){let t,n;return t=new Fl({}),{c(){C(t.$$.fragment)},m(e,o){x(t,e,o),n=!0},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){M(t,e)}}}function K$(s){let t,n,e,o;const r=[X$,Y$,G$,V$],i=[];function c(a,l){return a[0]==="file"?0:a[0]==="folder-opened"?1:a[0]==="root-folder"?2:a[0]==="book"?3:-1}return~(t=c(s))&&(n=i[t]=r[t](s)),{c(){n&&n.c(),e=ft()},m(a,l){~t&&i[t].m(a,l),_(a,e,l),o=!0},p(a,[l]){let u=t;t=c(a),t!==u&&(n&&(K(),$(i[u],1,1,()=>{i[u]=null}),Z()),~t?(n=i[t],n||(n=i[t]=r[t](a),n.c()),f(n,1),n.m(e.parentNode,e)):n=null)},i(a){o||(f(n),o=!0)},o(a){$(n),o=!1},d(a){a&&y(e),~t&&i[t].d(a)}}}function Z$(s,t,n){let{icon:e}=t;return s.$$set=o=>{"icon"in o&&n(0,e=o.icon)},[e]}class J$ extends nt{constructor(t){super(),ot(this,t,Z$,K$,tt,{icon:0})}}function Q$(s){let t,n,e=[{xmlns:"http://www.w3.org/2000/svg"},{"data-ds-icon":"fa"},{viewBox:"0 0 384 512"},s[0]],o={};for(let r=0;r<e.length;r+=1)o=Ct(o,e[r]);return{c(){t=Nt("svg"),n=new Fe(!0),this.h()},l(r){t=Oe(r,"svg",{xmlns:!0,"data-ds-icon":!0,viewBox:!0});var i=Be(t);n=ze(i,!0),i.forEach(y),this.h()},h(){n.a=null,ne(t,o)},m(r,i){He(r,t,i),n.m('<!--! Font Awesome Pro 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2024 Fonticons, Inc.--><path d="M345 137c9.4-9.4 9.4-24.6 0-33.9s-24.6-9.4-33.9 0l-119 119L73 103c-9.4-9.4-24.6-9.4-33.9 0s-9.4 24.6 0 33.9l119 119L39 375c-9.4 9.4-9.4 24.6 0 33.9s24.6 9.4 33.9 0l119-119L311 409c9.4 9.4 24.6 9.4 33.9 0s9.4-24.6 0-33.9l-119-119z"/>',t)},p(r,[i]){ne(t,o=ge(e,[{xmlns:"http://www.w3.org/2000/svg"},{"data-ds-icon":"fa"},{viewBox:"0 0 384 512"},1&i&&r[0]]))},i:D,o:D,d(r){r&&y(t)}}}function t0(s,t,n){return s.$$set=e=>{n(0,t=Ct(Ct({},t),Qt(e)))},[t=Qt(t)]}class Ol extends nt{constructor(t){super(),ot(this,t,t0,Q$,tt,{})}}const e0=s=>({}),ra=s=>({slot:"chaser"}),n0=s=>({}),sa=s=>({}),o0=s=>({}),ia=s=>({slot:"leftButtons"}),r0=s=>({}),aa=s=>({});function ca(s){let t,n;return t=new ls({props:{class:"c-pulse-chip-warning-icon"}}),{c(){C(t.$$.fragment)},m(e,o){x(t,e,o),n=!0},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){M(t,e)}}}function s0(s){let t,n,e;const o=s[4].default,r=Gt(o,s,s[5],null);let i=s[3]&&ca();return{c(){t=F("div"),r&&r.c(),n=W(),i&&i.c(),E(t,"class","c-context-badge__content svelte-gkpz0s")},m(c,a){_(c,t,a),r&&r.m(t,null),U(t,n),i&&i.m(t,null),e=!0},p(c,a){r&&r.p&&(!e||32&a)&&Yt(r,o,c,c[5],e?Kt(o,c[5],a,null):Xt(c[5]),null),c[3]?i?8&a&&f(i,1):(i=ca(),i.c(),f(i,1),i.m(t,null)):i&&(K(),$(i,1,1,()=>{i=null}),Z())},i(c){e||(f(r,c),f(i),e=!0)},o(c){$(r,c),$(i),e=!1},d(c){c&&y(t),r&&r.d(c),i&&i.d()}}}function i0(s){let t;const n=s[4].chaser,e=Gt(n,s,s[5],ra);return{c(){e&&e.c()},m(o,r){e&&e.m(o,r),t=!0},p(o,r){e&&e.p&&(!t||32&r)&&Yt(e,n,o,o[5],t?Kt(n,o[5],r,e0):Xt(o[5]),ra)},i(o){t||(f(e,o),t=!0)},o(o){$(e,o),t=!1},d(o){e&&e.d(o)}}}function a0(s){let t;const n=s[4].leftIcon,e=Gt(n,s,s[5],sa),o=e||function(r){let i,c;return i=new Fl({}),{c(){C(i.$$.fragment)},m(a,l){x(i,a,l),c=!0},i(a){c||(f(i.$$.fragment,a),c=!0)},o(a){$(i.$$.fragment,a),c=!1},d(a){M(i,a)}}}();return{c(){o&&o.c()},m(r,i){o&&o.m(r,i),t=!0},p(r,i){e&&e.p&&(!t||32&i)&&Yt(e,n,r,r[5],t?Kt(n,r[5],i,n0):Xt(r[5]),sa)},i(r){t||(f(o,r),t=!0)},o(r){$(o,r),t=!1},d(r){o&&o.d(r)}}}function c0(s){let t;const n=s[4].leftButtons,e=Gt(n,s,s[5],ia),o=e||function(r){let i,c,a;return c=new Jn.IconButton({props:{disabled:!0,$$slots:{default:[a0]},$$scope:{ctx:r}}}),{c(){i=F("div"),C(c.$$.fragment),E(i,"class","c-context-badge__left-icon svelte-gkpz0s")},m(l,u){_(l,i,u),x(c,i,null),a=!0},p(l,u){const p={};32&u&&(p.$$scope={dirty:u,ctx:l}),c.$set(p)},i(l){a||(f(c.$$.fragment,l),a=!0)},o(l){$(c.$$.fragment,l),a=!1},d(l){l&&y(i),M(c)}}}(s);return{c(){o&&o.c()},m(r,i){o&&o.m(r,i),t=!0},p(r,i){e?e.p&&(!t||32&i)&&Yt(e,n,r,r[5],t?Kt(n,r[5],i,o0):Xt(r[5]),ia):o&&o.p&&(!t||32&i)&&o.p(r,t?i:-1)},i(r){t||(f(o,r),t=!0)},o(r){$(o,r),t=!1},d(r){o&&o.d(r)}}}function la(s){let t,n;return t=new Jn.IconButton({props:{class:"c-context-badge__remove-btn",title:s[2].title,size:s[1],variant:"ghost",color:"neutral",$$slots:{default:[l0]},$$scope:{ctx:s}}}),t.$on("click",function(){ve(s[2].onRemove)&&s[2].onRemove.apply(this,arguments)}),{c(){C(t.$$.fragment)},m(e,o){x(t,e,o),n=!0},p(e,o){s=e;const r={};4&o&&(r.title=s[2].title),2&o&&(r.size=s[1]),32&o&&(r.$$scope={dirty:o,ctx:s}),t.$set(r)},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){M(t,e)}}}function l0(s){let t,n;return t=new Ol({}),{c(){C(t.$$.fragment)},m(e,o){x(t,e,o),n=!0},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){M(t,e)}}}function u0(s){let t,n,e;const o=s[4].rightButtons,r=Gt(o,s,s[5],aa);let i=s[2]&&la(s);return{c(){r&&r.c(),t=W(),i&&i.c(),n=ft()},m(c,a){r&&r.m(c,a),_(c,t,a),i&&i.m(c,a),_(c,n,a),e=!0},p(c,a){r&&r.p&&(!e||32&a)&&Yt(r,o,c,c[5],e?Kt(o,c[5],a,r0):Xt(c[5]),aa),c[2]?i?(i.p(c,a),4&a&&f(i,1)):(i=la(c),i.c(),f(i,1),i.m(n.parentNode,n)):i&&(K(),$(i,1,1,()=>{i=null}),Z())},i(c){e||(f(r,c),f(i),e=!0)},o(c){$(r,c),$(i),e=!1},d(c){c&&(y(t),y(n)),r&&r.d(c),i&&i.d(c)}}}function d0(s){let t,n,e;return n=new Jn.Root({props:{color:s[0],size:s[1],$$slots:{rightButtons:[u0],leftButtons:[c0],chaser:[i0],default:[s0]},$$scope:{ctx:s}}}),{c(){t=F("div"),C(n.$$.fragment),E(t,"class","c-context-badge svelte-gkpz0s")},m(o,r){_(o,t,r),x(n,t,null),e=!0},p(o,[r]){const i={};1&r&&(i.color=o[0]),2&r&&(i.size=o[1]),46&r&&(i.$$scope={dirty:r,ctx:o}),n.$set(i)},i(o){e||(f(n.$$.fragment,o),e=!0)},o(o){$(n.$$.fragment,o),e=!1},d(o){o&&y(t),M(n)}}}function f0(s,t,n){let{$$slots:e={},$$scope:o}=t,{color:r="neutral"}=t,{size:i=1}=t,{removeBtn:c}=t,{showWarning:a}=t;return s.$$set=l=>{"color"in l&&n(0,r=l.color),"size"in l&&n(1,i=l.size),"removeBtn"in l&&n(2,c=l.removeBtn),"showWarning"in l&&n(3,a=l.showWarning),"$$scope"in l&&n(5,o=l.$$scope)},[r,i,c,a,e,o]}class Un extends nt{constructor(t){super(),ot(this,t,f0,d0,tt,{color:0,size:1,removeBtn:2,showWarning:3})}}function m0(s){let t,n;return{c(){t=Nt("svg"),n=Nt("path"),E(n,"fill-rule","evenodd"),E(n,"clip-rule","evenodd"),E(n,"d","M7.07095 0.650238C6.67391 0.650238 6.32977 0.925096 6.24198 1.31231L6.0039 2.36247C5.6249 2.47269 5.26335 2.62363 4.92436 2.81013L4.01335 2.23585C3.67748 2.02413 3.23978 2.07312 2.95903 2.35386L2.35294 2.95996C2.0722 3.2407 2.0232 3.6784 2.23493 4.01427L2.80942 4.92561C2.62307 5.2645 2.47227 5.62594 2.36216 6.00481L1.31209 6.24287C0.924883 6.33065 0.650024 6.6748 0.650024 7.07183V7.92897C0.650024 8.32601 0.924883 8.67015 1.31209 8.75794L2.36228 8.99603C2.47246 9.375 2.62335 9.73652 2.80979 10.0755L2.2354 10.9867C2.02367 11.3225 2.07267 11.7602 2.35341 12.041L2.95951 12.6471C3.24025 12.9278 3.67795 12.9768 4.01382 12.7651L4.92506 12.1907C5.26384 12.377 5.62516 12.5278 6.0039 12.6379L6.24198 13.6881C6.32977 14.0753 6.67391 14.3502 7.07095 14.3502H7.92809C8.32512 14.3502 8.66927 14.0753 8.75705 13.6881L8.99505 12.6383C9.37411 12.5282 9.73573 12.3773 10.0748 12.1909L10.986 12.7653C11.3218 12.977 11.7595 12.928 12.0403 12.6473L12.6464 12.0412C12.9271 11.7604 12.9761 11.3227 12.7644 10.9869L12.1902 10.076C12.3768 9.73688 12.5278 9.37515 12.638 8.99596L13.6879 8.75794C14.0751 8.67015 14.35 8.32601 14.35 7.92897V7.07183C14.35 6.6748 14.0751 6.33065 13.6879 6.24287L12.6381 6.00488C12.528 5.62578 12.3771 5.26414 12.1906 4.92507L12.7648 4.01407C12.9766 3.6782 12.9276 3.2405 12.6468 2.95975L12.0407 2.35366C11.76 2.07292 11.3223 2.02392 10.9864 2.23565L10.0755 2.80989C9.73622 2.62328 9.37437 2.47229 8.99505 2.36209L8.75705 1.31231C8.66927 0.925096 8.32512 0.650238 7.92809 0.650238H7.07095ZM4.92053 3.81251C5.44724 3.44339 6.05665 3.18424 6.71543 3.06839L7.07095 1.50024H7.92809L8.28355 3.06816C8.94267 3.18387 9.5524 3.44302 10.0794 3.81224L11.4397 2.9547L12.0458 3.56079L11.1882 4.92117C11.5573 5.44798 11.8164 6.0575 11.9321 6.71638L13.5 7.07183V7.92897L11.932 8.28444C11.8162 8.94342 11.557 9.55301 11.1878 10.0798L12.0453 11.4402L11.4392 12.0462L10.0787 11.1886C9.55192 11.5576 8.94241 11.8166 8.28355 11.9323L7.92809 13.5002H7.07095L6.71543 11.932C6.0569 11.8162 5.44772 11.5572 4.92116 11.1883L3.56055 12.046L2.95445 11.4399L3.81213 10.0794C3.4431 9.55266 3.18403 8.94326 3.06825 8.2845L1.50002 7.92897V7.07183L3.06818 6.71632C3.18388 6.05765 3.44283 5.44833 3.81171 4.92165L2.95398 3.561L3.56008 2.95491L4.92053 3.81251ZM9.02496 7.50008C9.02496 8.34226 8.34223 9.02499 7.50005 9.02499C6.65786 9.02499 5.97513 8.34226 5.97513 7.50008C5.97513 6.65789 6.65786 5.97516 7.50005 5.97516C8.34223 5.97516 9.02496 6.65789 9.02496 7.50008ZM9.92496 7.50008C9.92496 8.83932 8.83929 9.92499 7.50005 9.92499C6.1608 9.92499 5.07513 8.83932 5.07513 7.50008C5.07513 6.16084 6.1608 5.07516 7.50005 5.07516C8.83929 5.07516 9.92496 6.16084 9.92496 7.50008Z"),E(n,"fill","currentColor"),E(t,"width","15"),E(t,"height","15"),E(t,"viewBox","0 0 15 15"),E(t,"fill","none"),E(t,"xmlns","http://www.w3.org/2000/svg")},m(e,o){_(e,t,o),U(t,n)},p:D,i:D,o:D,d(e){e&&y(t)}}}class p0 extends nt{constructor(t){super(),ot(this,t,null,m0,tt,{})}}function ua(s,t,n){const e=s.slice();return e[1]=t[n],e}function $0(s){let t;return{c(){t=X("Repos")},m(n,e){_(n,t,e)},d(n){n&&y(t)}}}function h0(s){let t,n=s[1].sourceFolderGroup.length+"";return{c(){t=X(n)},m(e,o){_(e,t,o)},p(e,o){2&o&&n!==(n=e[1].sourceFolderGroup.length+"")&&Lt(t,n)},d(e){e&&y(t)}}}function g0(s){let t,n,e;n=new Ot({props:{size:1,$$slots:{default:[h0]},$$scope:{ctx:s}}});let o=[Eu("accent"),{slot:"leftIcon"},{class:"c-multi-repo-chip__count"}],r={};for(let i=0;i<o.length;i+=1)r=Ct(r,o[i]);return{c(){t=F("div"),C(n.$$.fragment),Au(t,r),Pt(t,"svelte-sqp0vc",!0)},m(i,c){_(i,t,c),x(n,t,null),e=!0},p(i,c){const a={};4098&c&&(a.$$scope={dirty:c,ctx:i}),n.$set(a),Pt(t,"svelte-sqp0vc",!0)},i(i){e||(f(n.$$.fragment,i),e=!0)},o(i){$(n.$$.fragment,i),e=!1},d(i){i&&y(t),M(n)}}}function v0(s){let t,n;return t=new lo({}),{c(){C(t.$$.fragment)},m(e,o){x(t,e,o),n=!0},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){M(t,e)}}}function w0(s){let t,n;return t=new Jn.IconButton({props:{title:"Open menu",variant:"ghost",color:"neutral",size:1,$$slots:{default:[v0]},$$scope:{ctx:s}}}),{c(){C(t.$$.fragment)},m(e,o){x(t,e,o),n=!0},p(e,o){const r={};4096&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){M(t,e)}}}function y0(s){let t;return{c(){t=X("Repos")},m(n,e){_(n,t,e)},d(n){n&&y(t)}}}function b0(s){let t,n,e=s[1].name+"";return{c(){t=X(e),n=W()},m(o,r){_(o,t,r),_(o,n,r)},p(o,r){4&r&&e!==(e=o[1].name+"")&&Lt(t,e)},d(o){o&&(y(t),y(n))}}}function da(s){let t,n;return t=new we({props:{content:"Edit repo instructions",$$slots:{default:[C0]},$$scope:{ctx:s}}}),{c(){C(t.$$.fragment)},m(e,o){x(t,e,o),n=!0},p(e,o){const r={};4100&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){M(t,e)}}}function _0(s){let t,n;return t=new p0({}),{c(){C(t.$$.fragment)},m(e,o){x(t,e,o),n=!0},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){M(t,e)}}}function C0(s){let t,n;const e=[s[5]];let o={$$slots:{default:[_0]},$$scope:{ctx:s}};for(let r=0;r<e.length;r+=1)o=Ct(o,e[r]);return t=new Me({props:o}),t.$on("click",function(){ve(s[1].onEditGuideline)&&s[1].onEditGuideline.apply(this,arguments)}),{c(){C(t.$$.fragment)},m(r,i){x(t,r,i),n=!0},p(r,i){s=r;const c=32&i?ge(e,[zn(s[5])]):{};4096&i&&(c.$$scope={dirty:i,ctx:s}),t.$set(c)},i(r){n||(f(t.$$.fragment,r),n=!0)},o(r){$(t.$$.fragment,r),n=!1},d(r){M(t,r)}}}function x0(s){let t,n;return t=new Mr({}),{c(){C(t.$$.fragment)},m(e,o){x(t,e,o),n=!0},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){M(t,e)}}}function M0(s){let t,n;const e=[s[5]];let o={$$slots:{default:[x0]},$$scope:{ctx:s}};for(let r=0;r<e.length;r+=1)o=Ct(o,e[r]);return t=new Me({props:o}),t.$on("click",function(){ve(s[1].onRemove)&&s[1].onRemove.apply(this,arguments)}),{c(){C(t.$$.fragment)},m(r,i){x(t,r,i),n=!0},p(r,i){s=r;const c=32&i?ge(e,[zn(s[5])]):{};4096&i&&(c.$$scope={dirty:i,ctx:s}),t.$set(c)},i(r){n||(f(t.$$.fragment,r),n=!0)},o(r){$(t.$$.fragment,r),n=!1},d(r){M(t,r)}}}function A0(s){let t,n,e,o,r,i=s[1].onEditGuideline&&da(s);return e=new we({props:{content:"Remove repo from context",$$slots:{default:[M0]},$$scope:{ctx:s}}}),{c(){t=F("div"),i&&i.c(),n=W(),C(e.$$.fragment),o=W(),E(t,"class","c-multi-repo-chip__dropdown-item__actions svelte-sqp0vc"),E(t,"slot","iconRight"),Pt(t,"c-multi-repo-chip__dropdown-item__guideline-space",s[3]&&!s[1].onEditGuideline)},m(c,a){_(c,t,a),i&&i.m(t,null),U(t,n),x(e,t,null),U(t,o),r=!0},p(c,a){c[1].onEditGuideline?i?(i.p(c,a),4&a&&f(i,1)):(i=da(c),i.c(),f(i,1),i.m(t,n)):i&&(K(),$(i,1,1,()=>{i=null}),Z());const l={};4100&a&&(l.$$scope={dirty:a,ctx:c}),e.$set(l),(!r||12&a)&&Pt(t,"c-multi-repo-chip__dropdown-item__guideline-space",c[3]&&!c[1].onEditGuideline)},i(c){r||(f(i),f(e.$$.fragment,c),r=!0)},o(c){$(i),$(e.$$.fragment,c),r=!1},d(c){c&&y(t),i&&i.d(),M(e)}}}function fa(s){let t,n;const e=[s[1],{class:"c-multi-repo-chip__dropdown-item"},{highlight:!1},{disabled:!0}];let o={$$slots:{iconRight:[A0],default:[b0]},$$scope:{ctx:s}};for(let r=0;r<e.length;r+=1)o=Ct(o,e[r]);return t=new _t.Item({props:o}),{c(){C(t.$$.fragment)},m(r,i){x(t,r,i),n=!0},p(r,i){const c=4&i?ge(e,[zn(r[1]),e[1],e[2],e[3]]):{};4108&i&&(c.$$scope={dirty:i,ctx:r}),t.$set(c)},i(r){n||(f(t.$$.fragment,r),n=!0)},o(r){$(t.$$.fragment,r),n=!1},d(r){M(t,r)}}}function E0(s){let t,n,e,o;t=new _t.Label({props:{$$slots:{default:[y0]},$$scope:{ctx:s}}});let r=de(s[2]),i=[];for(let a=0;a<r.length;a+=1)i[a]=fa(ua(s,r,a));const c=a=>$(i[a],1,1,()=>{i[a]=null});return{c(){C(t.$$.fragment),n=W();for(let a=0;a<i.length;a+=1)i[a].c();e=ft()},m(a,l){x(t,a,l),_(a,n,l);for(let u=0;u<i.length;u+=1)i[u]&&i[u].m(a,l);_(a,e,l),o=!0},p(a,l){const u={};if(4096&l&&(u.$$scope={dirty:l,ctx:a}),t.$set(u),44&l){let p;for(r=de(a[2]),p=0;p<r.length;p+=1){const g=ua(a,r,p);i[p]?(i[p].p(g,l),f(i[p],1)):(i[p]=fa(g),i[p].c(),f(i[p],1),i[p].m(e.parentNode,e))}for(K(),p=r.length;p<i.length;p+=1)c(p);Z()}},i(a){if(!o){f(t.$$.fragment,a);for(let l=0;l<r.length;l+=1)f(i[l]);o=!0}},o(a){$(t.$$.fragment,a),i=i.filter(Boolean);for(let l=0;l<i.length;l+=1)$(i[l]);o=!1},d(a){a&&(y(n),y(e)),M(t,a),fn(i,a)}}}function k0(s){let t,n,e,o;return t=new _t.Trigger({props:{$$slots:{default:[w0]},$$scope:{ctx:s}}}),e=new _t.Content({props:{$$slots:{default:[E0]},$$scope:{ctx:s}}}),{c(){C(t.$$.fragment),n=W(),C(e.$$.fragment)},m(r,i){x(t,r,i),_(r,n,i),x(e,r,i),o=!0},p(r,i){const c={};4096&i&&(c.$$scope={dirty:i,ctx:r}),t.$set(c);const a={};4108&i&&(a.$$scope={dirty:i,ctx:r}),e.$set(a)},i(r){o||(f(t.$$.fragment,r),f(e.$$.fragment,r),o=!0)},o(r){$(t.$$.fragment,r),$(e.$$.fragment,r),o=!1},d(r){r&&y(n),M(t,r),M(e,r)}}}function T0(s){let t,n;return t=new _t.Root({props:{slot:"rightButtons",$$slots:{default:[k0]},$$scope:{ctx:s}}}),{c(){C(t.$$.fragment)},m(e,o){x(t,e,o),n=!0},p(e,o){const r={};4108&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){M(t,e)}}}function L0(s){let t,n;return t=new Un({props:{$$slots:{rightButtons:[T0],leftIcon:[g0],default:[$0]},$$scope:{ctx:s}}}),{c(){C(t.$$.fragment)},m(e,o){x(t,e,o),n=!0},p(e,[o]){const r={};4110&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){M(t,e)}}}function I0(s,t,n){let e,o,r,i,c,a=D,l=D,u=()=>(l(),l=se(g,h=>n(6,c=h)),g);s.$$.on_destroy.push(()=>a()),s.$$.on_destroy.push(()=>l());let{item:p}=t,{chatModel:g}=t;return u(),s.$$set=h=>{"item"in h&&n(1,p=h.item),"chatModel"in h&&u(n(0,g=h.chatModel))},s.$$.update=()=>{64&s.$$.dirty&&(n(4,e=c==null?void 0:c.specialContextInputModel),a(),a=se(e,h=>n(7,i=h))),2&s.$$.dirty&&n(2,o=p.sourceFolderGroup.map(h=>({filePath:h.sourceFolder.folderRoot,name:ns(h.sourceFolder.folderRoot),onRemove:()=>{return k=h,i==null||i.markInactive(k),void(i==null?void 0:i.unpin(k));var k},onEditGuideline:!!h.sourceFolder.guidelinesEnabled&&(()=>{return k=h.sourceFolder.folderRoot,void(g==null?void 0:g.extensionClient.openGuidelines(k));var k})}))),4&s.$$.dirty&&n(3,r=o.some(h=>h.onEditGuideline))},[g,p,o,r,e,{size:1,variant:"ghost-block",color:"neutral"},c]}class S0 extends nt{constructor(t){super(),ot(this,t,I0,L0,tt,{item:1,chatModel:0})}}function R0(s){let t,n,e,o=(s[0]??"")+"";return{c(){t=F("pre"),n=F("code"),e=X(o),E(t,"class","c-selection-preview__code svelte-mrw7pf")},m(r,i){_(r,t,i),U(t,n),U(n,e)},p(r,i){1&i&&o!==(o=(r[0]??"")+"")&&Lt(e,o)},i:D,o:D,d(r){r&&y(t)}}}function P0(s){let t,n,e,o;function r(a){s[5](a)}var i=s[8].default;function c(a,l){let u={text:a[0]??"",options:{automaticLayout:!0,lineNumbers:"off",wrappingIndent:"same",padding:{top:0,bottom:0},wordWrap:"off",contextmenu:!1,wordBasedSuggestions:"off",renderLineHighlight:"none",occurrencesHighlight:"off",selectionHighlight:!1,codeLens:!1,links:!1,hover:{enabled:!1},hideCursorInOverviewRuler:!0,renderWhitespace:"none",renderFinalNewline:"on"}};return a[1]!==void 0&&(u.editorInstance=a[1]),{props:u}}return i&&(t=ro(i,c(s)),ue.push(()=>Ye(t,"editorInstance",r))),{c(){t&&C(t.$$.fragment),e=ft()},m(a,l){t&&x(t,a,l),_(a,e,l),o=!0},p(a,l){if(i!==(i=a[8].default)){if(t){K();const u=t;$(u.$$.fragment,1,0,()=>{M(u,1)}),Z()}i?(t=ro(i,c(a)),ue.push(()=>Ye(t,"editorInstance",r)),C(t.$$.fragment),f(t.$$.fragment,1),x(t,e.parentNode,e)):t=null}else if(i){const u={};1&l&&(u.text=a[0]??""),!n&&2&l&&(n=!0,u.editorInstance=a[1],Ze(()=>n=!1)),t.$set(u)}},i(a){o||(t&&f(t.$$.fragment,a),o=!0)},o(a){t&&$(t.$$.fragment,a),o=!1},d(a){a&&y(e),t&&M(t,a)}}}function D0(s){let t,n,e,o=(s[0]??"")+"";return{c(){t=F("pre"),n=F("code"),e=X(o),E(t,"class","c-selection-preview__code svelte-mrw7pf")},m(r,i){_(r,t,i),U(t,n),U(n,e)},p(r,i){1&i&&o!==(o=(r[0]??"")+"")&&Lt(e,o)},i:D,o:D,d(r){r&&y(t)}}}function N0(s){let t,n,e=s[3]&&function(o){let r,i,c={ctx:o,current:null,token:null,hasCatch:!0,pending:D0,then:P0,catch:R0,value:8,blocks:[,,,]};return ao(o[3],c),{c(){r=ft(),c.block.c()},m(a,l){_(a,r,l),c.block.m(a,c.anchor=l),c.mount=()=>r.parentNode,c.anchor=r,i=!0},p(a,l){Er(c,o=a,l)},i(a){i||(f(c.block),i=!0)},o(a){for(let l=0;l<3;l+=1){const u=c.blocks[l];$(u)}i=!1},d(a){a&&y(r),c.block.d(a),c.token=null,c=null}}}(s);return{c(){t=F("div"),e&&e.c(),E(t,"class","c-selection-hover-contents svelte-mrw7pf"),E(t,"style",s[2])},m(o,r){_(o,t,r),e&&e.m(t,null),n=!0},p(o,[r]){o[3]&&e.p(o,r),(!n||4&r)&&E(t,"style",o[2])},i(o){n||(f(e),n=!0)},o(o){$(e),n=!1},d(o){o&&y(t),e&&e.d()}}}function F0(s,t,n){let{originalCode:e}=t;const o=kr(()=>import("./index-p4Dt6o3z.js").then(l=>l.aP),__vite__mapDeps([0,1]),import.meta.url);let r,i="",c=!1;const a=async(l,u)=>{n(4,c=!0),n(2,i=`
         width: ${l}px;
         height: min(${u}px, 40vh);
    `)};return s.$$set=l=>{"originalCode"in l&&n(0,e=l.originalCode)},s.$$.update=()=>{2&s.$$.dirty&&(r==null||r.onDidContentSizeChange(l=>a(l.contentWidth,l.contentHeight))),18&s.$$.dirty&&r&&!c&&a(r==null?void 0:r.getContentWidth(),r==null?void 0:r.getContentHeight())},[e,r,i,o,c,function(l){r=l,n(1,r)}]}class O0 extends nt{constructor(t){super(),ot(this,t,F0,N0,tt,{originalCode:0})}}function B0(s){let t,n;const e=s[2].default,o=Gt(e,s,s[3],null);return{c(){t=X(`Selection
    `),o&&o.c()},m(r,i){_(r,t,i),o&&o.m(r,i),n=!0},p(r,i){o&&o.p&&(!n||8&i)&&Yt(o,e,r,r[3],n?Kt(e,r[3],i,null):Xt(r[3]),null)},i(r){n||(f(o,r),n=!0)},o(r){$(o,r),n=!1},d(r){r&&y(t),o&&o.d(r)}}}function z0(s){let t,n;return t=new Fd({props:{slot:"leftIcon"}}),{c(){C(t.$$.fragment)},m(e,o){x(t,e,o),n=!0},p:D,i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){M(t,e)}}}function H0(s){let t,n;return t=new Un({props:{color:"info",removeBtn:{title:"Remove selection from context",onRemove:s[1]},$$slots:{leftIcon:[z0],default:[B0]},$$scope:{ctx:s}}}),{c(){C(t.$$.fragment)},m(e,o){x(t,e,o),n=!0},p(e,o){const r={};2&o&&(r.removeBtn={title:"Remove selection from context",onRemove:e[1]}),8&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){M(t,e)}}}function j0(s){let t,n;return t=new O0({props:{slot:"content",originalCode:s[0]}}),{c(){C(t.$$.fragment)},m(e,o){x(t,e,o),n=!0},p(e,o){const r={};1&o&&(r.originalCode=e[0]),t.$set(r)},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){M(t,e)}}}function U0(s){let t,n;return t=new we({props:{maxWidth:"",$$slots:{content:[j0],default:[H0]},$$scope:{ctx:s}}}),{c(){C(t.$$.fragment)},m(e,o){x(t,e,o),n=!0},p(e,[o]){const r={};11&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){M(t,e)}}}function q0(s,t,n){let{$$slots:e={},$$scope:o}=t,{originalCode:r}=t,{onRemove:i}=t;return s.$$set=c=>{"originalCode"in c&&n(0,r=c.originalCode),"onRemove"in c&&n(1,i=c.onRemove),"$$scope"in c&&n(3,o=c.$$scope)},[r,i,e,o]}class W0 extends nt{constructor(t){super(),ot(this,t,q0,U0,tt,{originalCode:0,onRemove:1})}}function ma(s){let t,n,e,o;const r=[G0,V0],i=[];function c(a,l){return a[2]?0:1}return t=c(s),n=i[t]=r[t](s),{c(){n.c(),e=ft()},m(a,l){i[t].m(a,l),_(a,e,l),o=!0},p(a,l){let u=t;t=c(a),t===u?i[t].p(a,l):(K(),$(i[u],1,1,()=>{i[u]=null}),Z(),n=i[t],n?n.p(a,l):(n=i[t]=r[t](a),n.c()),f(n,1),n.m(e.parentNode,e))},i(a){o||(f(n),o=!0)},o(a){$(n),o=!1},d(a){a&&y(e),i[t].d(a)}}}function V0(s){let t,n,e,o,r;return n=new Un({props:{$$slots:{leftIcon:[X0],default:[Y0]},$$scope:{ctx:s}}}),{c(){t=F("div"),C(n.$$.fragment),E(t,"role","button"),E(t,"tabindex","0"),Qe(t,"cursor","pointer")},m(i,c){_(i,t,c),x(n,t,null),e=!0,o||(r=[bt(t,"click",s[3]),bt(t,"keyup",xn("Enter",s[3]))],o=!0)},p(i,c){const a={};32&c&&(a.$$scope={dirty:c,ctx:i}),n.$set(a)},i(i){e||(f(n.$$.fragment,i),e=!0)},o(i){$(n.$$.fragment,i),e=!1},d(i){i&&y(t),M(n),o=!1,Re(r)}}}function G0(s){let t,n;return t=new we({props:{$$slots:{content:[Q0],default:[J0]},$$scope:{ctx:s}}}),{c(){C(t.$$.fragment)},m(e,o){x(t,e,o),n=!0},p(e,o){const r={};33&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){M(t,e)}}}function Y0(s){let t;return{c(){t=X("User Guidelines")},m(n,e){_(n,t,e)},d(n){n&&y(t)}}}function X0(s){let t,n;return t=new sd({props:{slot:"leftIcon"}}),{c(){C(t.$$.fragment)},m(e,o){x(t,e,o),n=!0},p:D,i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){M(t,e)}}}function K0(s){let t,n,e;return{c(){t=F("div"),t.textContent="User Guidelines",E(t,"role","button"),E(t,"tabindex","0"),Qe(t,"cursor","pointer")},m(o,r){_(o,t,r),n||(e=[bt(t,"click",Eo(s[3])),bt(t,"keyup",xn("Enter",s[3]))],n=!0)},p:D,d(o){o&&y(t),n=!1,Re(e)}}}function Z0(s){let t,n;return t=new Dn({props:{class:"c-user-guidelines-warning-icon",slot:"leftIcon"}}),{c(){C(t.$$.fragment)},m(e,o){x(t,e,o),n=!0},p:D,i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){M(t,e)}}}function J0(s){let t,n;return t=new Un({props:{$$slots:{leftIcon:[Z0],default:[K0]},$$scope:{ctx:s}}}),{c(){C(t.$$.fragment)},m(e,o){x(t,e,o),n=!0},p(e,o){const r={};32&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){M(t,e)}}}function Q0(s){let t,n;return t=new Ar({props:{option:s[0],slot:"content"}}),{c(){C(t.$$.fragment)},m(e,o){x(t,e,o),n=!0},p(e,o){const r={};1&o&&(r.option=e[0]),t.$set(r)},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){M(t,e)}}}function th(s){let t,n,e=s[1]&&ma(s);return{c(){e&&e.c(),t=ft()},m(o,r){e&&e.m(o,r),_(o,t,r),n=!0},p(o,[r]){o[1]?e?(e.p(o,r),2&r&&f(e,1)):(e=ma(o),e.c(),f(e,1),e.m(t.parentNode,t)):e&&(K(),$(e,1,1,()=>{e=null}),Z())},i(o){n||(f(e),n=!0)},o(o){$(e),n=!1},d(o){o&&y(t),e&&e.d(o)}}}function eh(s,t,n){let e,o,{item:r}=t;const i=Vu();return s.$$set=c=>{"item"in c&&n(0,r=c.item)},s.$$.update=()=>{var c;1&s.$$.dirty&&n(2,e=r.showWarning),1&s.$$.dirty&&n(1,o=((c=r.userGuidelines)==null?void 0:c.enabled)??!1)},[r,o,e,function(){i&&i.extensionClient.openSettingsPage("userGuidelines")}]}class nh extends nt{constructor(t){super(),ot(this,t,eh,th,tt,{item:0})}}var Bl,oh={exports:{}};Bl=()=>(()=>{var s=[,(o,r,i)=>{i.r(r),i.d(r,{default:()=>l});var c,a=(c=typeof document<"u"&&document.currentScript?document.currentScript.src:void 0,function(u={}){var p,g,h=u;function k(){function d(N){const j=A;v=m=0,A=new Map,j.forEach(J=>{try{J(N)}catch(q){console.error(q)}}),this.ob(),L&&L.Tb()}let m=0,v=0,A=new Map,L=null,R=null;this.requestAnimationFrame=function(N){m||(m=requestAnimationFrame(d.bind(this)));const j=++v;return A.set(j,N),j},this.cancelAnimationFrame=function(N){A.delete(N),m&&A.size==0&&(cancelAnimationFrame(m),m=0)},this.Rb=function(N){R&&(document.body.remove(R),R=null),N||(R=document.createElement("div"),R.style.backgroundColor="black",R.style.position="fixed",R.style.right=0,R.style.top=0,R.style.color="white",R.style.padding="4px",R.innerHTML="RIVE FPS",N=function(j){R.innerHTML="RIVE FPS "+j.toFixed(1)},document.body.appendChild(R)),L=new function(){let j=0,J=0;this.Tb=function(){var q=performance.now();J?(++j,1e3<(q-=J)&&(N(1e3*j/q),j=J=0)):(J=q,j=0)}}},this.Ob=function(){R&&(document.body.remove(R),R=null),L=null},this.ob=function(){}}function T(d){console.assert(!0);const m=new Map;let v=-1/0;this.push=function(A){return A=A+((1<<d)-1)>>d,m.has(A)&&clearTimeout(m.get(A)),m.set(A,setTimeout(function(){m.delete(A),m.length==0?v=-1/0:A==v&&(v=Math.max(...m.keys()),console.assert(v<A))},1e3)),v=Math.max(A,v),v<<d}}h.ready=new Promise((d,m)=>{p=d,g=m});const b=h.onRuntimeInitialized;h.onRuntimeInitialized=function(){b&&b();let d=h.decodeAudio;h.decodeAudio=function(L,R){R(L=d(L))};let m=h.decodeFont;h.decodeFont=function(L,R){R(L=m(L))};const v=h.FileAssetLoader;h.ptrToAsset=L=>{let R=h.ptrToFileAsset(L);return R.isImage?h.ptrToImageAsset(L):R.isFont?h.ptrToFontAsset(L):R.isAudio?h.ptrToAudioAsset(L):R},h.CustomFileAssetLoader=v.extend("CustomFileAssetLoader",{__construct:function({loadContents:L}){this.__parent.__construct.call(this),this.Gb=L},loadContents:function(L,R){return L=h.ptrToAsset(L),this.Gb(L,R)}}),h.CDNFileAssetLoader=v.extend("CDNFileAssetLoader",{__construct:function(){this.__parent.__construct.call(this)},loadContents:function(L){let R=h.ptrToAsset(L);return(L=R.cdnUuid)!==""&&(N=R.cdnBaseUrl+"/"+L,(j=new XMLHttpRequest).responseType="arraybuffer",j.onreadystatechange=function(){j.readyState==4&&j.status==200&&(J=>{R.decode(new Uint8Array(J.response))})(j)},j.open("GET",N,!0),j.send(null),!0);var N,j}}),h.FallbackFileAssetLoader=v.extend("FallbackFileAssetLoader",{__construct:function(){this.__parent.__construct.call(this),this.kb=[]},addLoader:function(L){this.kb.push(L)},loadContents:function(L,R){for(let N of this.kb)if(N.loadContents(L,R))return!0;return!1}});let A=h.computeAlignment;h.computeAlignment=function(L,R,N,j,J=1){return A.call(this,L,R,N,j,J)}};const S="createConicGradient createImageData createLinearGradient createPattern createRadialGradient getContextAttributes getImageData getLineDash getTransform isContextLost isPointInPath isPointInStroke measureText".split(" "),H=new function(){function d(){if(!m){let oe=function(Y,ct,Ft){if(ct=dt.createShader(ct),dt.shaderSource(ct,Ft),dt.compileShader(ct),0<((Ft=dt.getShaderInfoLog(ct))||"").length)throw Ft;dt.attachShader(Y,ct)};var wt=document.createElement("canvas"),$t={alpha:1,depth:0,stencil:0,antialias:0,premultipliedAlpha:1,preserveDrawingBuffer:0,powerPreference:"high-performance",failIfMajorPerformanceCaveat:0,enableExtensionsByDefault:1,explicitSwapControl:1,renderViaOffscreenBackBuffer:1};let dt;if(/iPhone|iPad|iPod/i.test(navigator.userAgent)){if(dt=wt.getContext("webgl",$t),v=1,!dt)return console.log("No WebGL support. Image mesh will not be drawn."),!1}else if(dt=wt.getContext("webgl2",$t))v=2;else{if(!(dt=wt.getContext("webgl",$t)))return console.log("No WebGL support. Image mesh will not be drawn."),!1;v=1}if(dt=new Proxy(dt,{get:(Y,ct)=>Y.isContextLost()?(J||(console.error("Cannot render the mesh because the GL Context was lost. Tried to invoke ",ct),J=!0),typeof Y[ct]=="function"?function(){}:void 0):typeof Y[ct]=="function"?function(...Ft){return Y[ct].apply(Y,Ft)}:Y[ct],set(Y,ct,Ft){if(!Y.isContextLost())return Y[ct]=Ft,!0;J||(console.error("Cannot render the mesh because the GL Context was lost. Tried to set property "+ct),J=!0)}}),A=Math.min(dt.getParameter(dt.MAX_RENDERBUFFER_SIZE),dt.getParameter(dt.MAX_TEXTURE_SIZE)),oe(wt=dt.createProgram(),dt.VERTEX_SHADER,`attribute vec2 vertex;
                attribute vec2 uv;
                uniform vec4 mat;
                uniform vec2 translate;
                varying vec2 st;
                void main() {
                    st = uv;
                    gl_Position = vec4(mat2(mat) * vertex + translate, 0, 1);
                }`),oe(wt,dt.FRAGMENT_SHADER,`precision highp float;
                uniform sampler2D image;
                varying vec2 st;
                void main() {
                    gl_FragColor = texture2D(image, st);
                }`),dt.bindAttribLocation(wt,0,"vertex"),dt.bindAttribLocation(wt,1,"uv"),dt.linkProgram(wt),0<(($t=dt.getProgramInfoLog(wt))||"").trim().length)throw $t;L=dt.getUniformLocation(wt,"mat"),R=dt.getUniformLocation(wt,"translate"),dt.useProgram(wt),dt.bindBuffer(dt.ARRAY_BUFFER,dt.createBuffer()),dt.enableVertexAttribArray(0),dt.enableVertexAttribArray(1),dt.bindBuffer(dt.ELEMENT_ARRAY_BUFFER,dt.createBuffer()),dt.uniform1i(dt.getUniformLocation(wt,"image"),0),dt.pixelStorei(dt.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!0),m=dt}return!0}let m=null,v=0,A=0,L=null,R=null,N=0,j=0,J=!1;d(),this.hc=function(){return d(),A},this.Mb=function(wt){m.deleteTexture&&m.deleteTexture(wt)},this.Lb=function(wt){if(!d())return null;const $t=m.createTexture();return $t?(m.bindTexture(m.TEXTURE_2D,$t),m.texImage2D(m.TEXTURE_2D,0,m.RGBA,m.RGBA,m.UNSIGNED_BYTE,wt),m.texParameteri(m.TEXTURE_2D,m.TEXTURE_WRAP_S,m.CLAMP_TO_EDGE),m.texParameteri(m.TEXTURE_2D,m.TEXTURE_WRAP_T,m.CLAMP_TO_EDGE),m.texParameteri(m.TEXTURE_2D,m.TEXTURE_MAG_FILTER,m.LINEAR),v==2?(m.texParameteri(m.TEXTURE_2D,m.TEXTURE_MIN_FILTER,m.LINEAR_MIPMAP_LINEAR),m.generateMipmap(m.TEXTURE_2D)):m.texParameteri(m.TEXTURE_2D,m.TEXTURE_MIN_FILTER,m.LINEAR),$t):null};const q=new T(8),mt=new T(8),pt=new T(10),ht=new T(10);this.Qb=function(wt,$t,dt,oe,Y){if(d()){var ct=q.push(wt),Ft=mt.push($t);if(m.canvas){for(var be of(m.canvas.width==ct&&m.canvas.height==Ft||(m.canvas.width=ct,m.canvas.height=Ft),m.viewport(0,Ft-$t,wt,$t),m.disable(m.SCISSOR_TEST),m.clearColor(0,0,0,0),m.clear(m.COLOR_BUFFER_BIT),m.enable(m.SCISSOR_TEST),dt.sort((re,bn)=>bn.wb-re.wb),ct=pt.push(oe),N!=ct&&(m.bufferData(m.ARRAY_BUFFER,8*ct,m.DYNAMIC_DRAW),N=ct),ct=0,dt))m.bufferSubData(m.ARRAY_BUFFER,ct,be.Ta),ct+=4*be.Ta.length;for(var rn of(console.assert(ct==4*oe),dt))m.bufferSubData(m.ARRAY_BUFFER,ct,rn.Db),ct+=4*rn.Db.length;for(var Gn of(console.assert(ct==8*oe),ct=ht.push(Y),j!=ct&&(m.bufferData(m.ELEMENT_ARRAY_BUFFER,2*ct,m.DYNAMIC_DRAW),j=ct),be=0,dt))m.bufferSubData(m.ELEMENT_ARRAY_BUFFER,be,Gn.indices),be+=2*Gn.indices.length;console.assert(be==2*Y),Gn=0,rn=!0,ct=be=0;for(const re of dt){re.image.Ka!=Gn&&(m.bindTexture(m.TEXTURE_2D,re.image.Ja||null),Gn=re.image.Ka),re.mc?(m.scissor(re.Ya,Ft-re.Za-re.jb,re.Ac,re.jb),rn=!0):rn&&(m.scissor(0,Ft-$t,wt,$t),rn=!1),dt=2/wt;const bn=-2/$t;m.uniform4f(L,re.ha[0]*dt*re.Ba,re.ha[1]*bn*re.Ca,re.ha[2]*dt*re.Ba,re.ha[3]*bn*re.Ca),m.uniform2f(R,re.ha[4]*dt*re.Ba+dt*(re.Ya-re.ic*re.Ba)-1,re.ha[5]*bn*re.Ca+bn*(re.Za-re.jc*re.Ca)+1),m.vertexAttribPointer(0,2,m.FLOAT,!1,0,ct),m.vertexAttribPointer(1,2,m.FLOAT,!1,0,ct+4*oe),m.drawElements(m.TRIANGLES,re.indices.length,m.UNSIGNED_SHORT,be),ct+=4*re.Ta.length,be+=2*re.indices.length}console.assert(ct==4*oe),console.assert(be==2*Y)}}},this.canvas=function(){return d()&&m.canvas}},O=h.onRuntimeInitialized;h.onRuntimeInitialized=function(){function d(at){switch(at){case q.srcOver:return"source-over";case q.screen:return"screen";case q.overlay:return"overlay";case q.darken:return"darken";case q.lighten:return"lighten";case q.colorDodge:return"color-dodge";case q.colorBurn:return"color-burn";case q.hardLight:return"hard-light";case q.softLight:return"soft-light";case q.difference:return"difference";case q.exclusion:return"exclusion";case q.multiply:return"multiply";case q.hue:return"hue";case q.saturation:return"saturation";case q.color:return"color";case q.luminosity:return"luminosity"}}function m(at){return"rgba("+((16711680&at)>>>16)+","+((65280&at)>>>8)+","+((255&at)>>>0)+","+((4278190080&at)>>>24)/255+")"}function v(){0<Ft.length&&(H.Qb(ct.drawWidth(),ct.drawHeight(),Ft,be,rn),Ft=[],rn=be=0,ct.reset(512,512));for(const at of Y){for(const gt of at.H)gt();at.H=[]}Y.clear()}O&&O();var A=h.RenderPaintStyle;const L=h.RenderPath,R=h.RenderPaint,N=h.Renderer,j=h.StrokeCap,J=h.StrokeJoin,q=h.BlendMode,mt=A.fill,pt=A.stroke,ht=h.FillRule.evenOdd;let wt=1;var $t=h.RenderImage.extend("CanvasRenderImage",{__construct:function({la:at,xa:gt}={}){this.__parent.__construct.call(this),this.Ka=wt,wt=wt+1&2147483647||1,this.la=at,this.xa=gt},__destruct:function(){this.Ja&&(H.Mb(this.Ja),URL.revokeObjectURL(this.Wa)),this.__parent.__destruct.call(this)},decode:function(at){var gt=this;gt.xa&&gt.xa(gt);var te=new Image;gt.Wa=URL.createObjectURL(new Blob([at],{type:"image/png"})),te.onload=function(){gt.Fb=te,gt.Ja=H.Lb(te),gt.size(te.width,te.height),gt.la&&gt.la(gt)},te.src=gt.Wa}}),dt=L.extend("CanvasRenderPath",{__construct:function(){this.__parent.__construct.call(this),this.T=new Path2D},rewind:function(){this.T=new Path2D},addPath:function(at,gt,te,ee,zt,ie,ae){var le=this.T,ln=le.addPath;at=at.T;const Se=new DOMMatrix;Se.a=gt,Se.b=te,Se.c=ee,Se.d=zt,Se.e=ie,Se.f=ae,ln.call(le,at,Se)},fillRule:function(at){this.Va=at},moveTo:function(at,gt){this.T.moveTo(at,gt)},lineTo:function(at,gt){this.T.lineTo(at,gt)},cubicTo:function(at,gt,te,ee,zt,ie){this.T.bezierCurveTo(at,gt,te,ee,zt,ie)},close:function(){this.T.closePath()}}),oe=R.extend("CanvasRenderPaint",{color:function(at){this.Xa=m(at)},thickness:function(at){this.Ib=at},join:function(at){switch(at){case J.miter:this.Ia="miter";break;case J.round:this.Ia="round";break;case J.bevel:this.Ia="bevel"}},cap:function(at){switch(at){case j.butt:this.Ha="butt";break;case j.round:this.Ha="round";break;case j.square:this.Ha="square"}},style:function(at){this.Hb=at},blendMode:function(at){this.Eb=d(at)},clearGradient:function(){this.ja=null},linearGradient:function(at,gt,te,ee){this.ja={yb:at,zb:gt,bb:te,cb:ee,Ra:[]}},radialGradient:function(at,gt,te,ee){this.ja={yb:at,zb:gt,bb:te,cb:ee,Ra:[],ec:!0}},addStop:function(at,gt){this.ja.Ra.push({color:at,stop:gt})},completeGradient:function(){},draw:function(at,gt,te){let ee=this.Hb;var zt=this.Xa,ie=this.ja;if(at.globalCompositeOperation=this.Eb,ie!=null){zt=ie.yb;var ae=ie.zb;const ln=ie.bb;var le=ie.cb;const Se=ie.Ra;ie.ec?(ie=ln-zt,le-=ae,zt=at.createRadialGradient(zt,ae,0,zt,ae,Math.sqrt(ie*ie+le*le))):zt=at.createLinearGradient(zt,ae,ln,le);for(let _n=0,De=Se.length;_n<De;_n++)ae=Se[_n],zt.addColorStop(ae.stop,m(ae.color));this.Xa=zt,this.ja=null}switch(ee){case pt:at.strokeStyle=zt,at.lineWidth=this.Ib,at.lineCap=this.Ha,at.lineJoin=this.Ia,at.stroke(gt);break;case mt:at.fillStyle=zt,at.fill(gt,te)}}});const Y=new Set;let ct=null,Ft=[],be=0,rn=0;var Gn=h.CanvasRenderer=N.extend("Renderer",{__construct:function(at){this.__parent.__construct.call(this),this.S=[1,0,0,1,0,0],this.C=at.getContext("2d"),this.Ua=at,this.H=[]},save:function(){this.S.push(...this.S.slice(this.S.length-6)),this.H.push(this.C.save.bind(this.C))},restore:function(){const at=this.S.length-6;if(6>at)throw"restore() called without matching save().";this.S.splice(at),this.H.push(this.C.restore.bind(this.C))},transform:function(at,gt,te,ee,zt,ie){const ae=this.S,le=ae.length-6;ae.splice(le,6,ae[le]*at+ae[le+2]*gt,ae[le+1]*at+ae[le+3]*gt,ae[le]*te+ae[le+2]*ee,ae[le+1]*te+ae[le+3]*ee,ae[le]*zt+ae[le+2]*ie+ae[le+4],ae[le+1]*zt+ae[le+3]*ie+ae[le+5]),this.H.push(this.C.transform.bind(this.C,at,gt,te,ee,zt,ie))},rotate:function(at){const gt=Math.sin(at);at=Math.cos(at),this.transform(at,gt,-gt,at,0,0)},_drawPath:function(at,gt){this.H.push(gt.draw.bind(gt,this.C,at.T,at.Va===ht?"evenodd":"nonzero"))},_drawRiveImage:function(at,gt,te){var ee=at.Fb;if(ee){var zt=this.C,ie=d(gt);this.H.push(function(){zt.globalCompositeOperation=ie,zt.globalAlpha=te,zt.drawImage(ee,0,0),zt.globalAlpha=1})}},_getMatrix:function(at){const gt=this.S,te=gt.length-6;for(let ee=0;6>ee;++ee)at[ee]=gt[te+ee]},_drawImageMesh:function(at,gt,te,ee,zt,ie,ae,le,ln,Se){var _n=this.C.canvas.width,De=this.C.canvas.height;const oi=ln-ae,ri=Se-le;ae=Math.max(ae,0),le=Math.max(le,0),ln=Math.min(ln,_n),Se=Math.min(Se,De);const yo=ln-ae,bo=Se-le;if(console.assert(yo<=Math.min(oi,_n)),console.assert(bo<=Math.min(ri,De)),!(0>=yo||0>=bo)){ln=yo<oi||bo<ri,_n=Se=1;var Yn=Math.ceil(yo*Se),Xn=Math.ceil(bo*_n);De=H.hc(),Yn>De&&(Se*=De/Yn,Yn=De),Xn>De&&(_n*=De/Xn,Xn=De),ct||(ct=new h.DynamicRectanizer(De),ct.reset(512,512)),0>(De=ct.addRect(Yn,Xn))&&(v(),Y.add(this),De=ct.addRect(Yn,Xn),console.assert(0<=De));var si=65535&De,ii=De>>16;Ft.push({ha:this.S.slice(this.S.length-6),image:at,Ya:si,Za:ii,ic:ae,jc:le,Ac:Yn,jb:Xn,Ba:Se,Ca:_n,Ta:new Float32Array(ee),Db:new Float32Array(zt),indices:new Uint16Array(ie),mc:ln,wb:at.Ka<<1|(ln?1:0)}),be+=ee.length,rn+=ie.length;var eo=this.C,wu=d(gt);this.H.push(function(){eo.save(),eo.resetTransform(),eo.globalCompositeOperation=wu,eo.globalAlpha=te;const ai=H.canvas();ai&&eo.drawImage(ai,si,ii,Yn,Xn,ae,le,yo,bo),eo.restore()})}},_clipPath:function(at){this.H.push(this.C.clip.bind(this.C,at.T,at.Va===ht?"evenodd":"nonzero"))},clear:function(){Y.add(this),this.H.push(this.C.clearRect.bind(this.C,0,0,this.Ua.width,this.Ua.height))},flush:function(){},translate:function(at,gt){this.transform(1,0,0,1,at,gt)}});h.makeRenderer=function(at){const gt=new Gn(at),te=gt.C;return new Proxy(gt,{get(ee,zt){if(typeof ee[zt]=="function")return function(...ie){return ee[zt].apply(ee,ie)};if(typeof te[zt]=="function"){if(-1<S.indexOf(zt))throw Error("RiveException: Method call to '"+zt+"()' is not allowed, as the renderer cannot immediately pass through the return                 values of any canvas 2d context methods.");return function(...ie){gt.H.push(te[zt].bind(te,...ie))}}return ee[zt]},set(ee,zt,ie){if(zt in te)return gt.H.push(()=>{te[zt]=ie}),!0}})},h.decodeImage=function(at,gt){new $t({la:gt}).decode(at)},h.renderFactory={makeRenderPaint:function(){return new oe},makeRenderPath:function(){return new dt},makeRenderImage:function(){let at=bn;return new $t({xa:()=>{at.total++},la:()=>{if(at.loaded++,at.loaded===at.total){const gt=at.ready;gt&&(gt(),at.ready=null)}}})}};let re=h.load,bn=null;h.load=function(at,gt,te=!0){const ee=new h.FallbackFileAssetLoader;return gt!==void 0&&ee.addLoader(gt),te&&(gt=new h.CDNFileAssetLoader,ee.addLoader(gt)),new Promise(function(zt){let ie=null;bn={total:0,loaded:0,ready:function(){zt(ie)}},ie=re(at,ee),bn.total==0&&zt(ie)})};let vu=h.RendererWrapper.prototype.align;h.RendererWrapper.prototype.align=function(at,gt,te,ee,zt=1){vu.call(this,at,gt,te,ee,zt)},A=new k,h.requestAnimationFrame=A.requestAnimationFrame.bind(A),h.cancelAnimationFrame=A.cancelAnimationFrame.bind(A),h.enableFPSCounter=A.Rb.bind(A),h.disableFPSCounter=A.Ob,A.ob=v,h.resolveAnimationFrame=v,h.cleanup=function(){ct&&ct.delete()}};var B,ut,kt=Object.assign({},h),rt="./this.program",vt=typeof window=="object",et=typeof importScripts=="function",At="";(vt||et)&&(et?At=self.location.href:typeof document<"u"&&document.currentScript&&(At=document.currentScript.src),c&&(At=c),At=At.indexOf("blob:")!==0?At.substr(0,At.replace(/[?#].*/,"").lastIndexOf("/")+1):"",et&&(ut=d=>{var m=new XMLHttpRequest;return m.open("GET",d,!1),m.responseType="arraybuffer",m.send(null),new Uint8Array(m.response)}),B=(d,m,v)=>{var A=new XMLHttpRequest;A.open("GET",d,!0),A.responseType="arraybuffer",A.onload=()=>{A.status==200||A.status==0&&A.response?m(A.response):v()},A.onerror=v,A.send(null)});var St,It=h.print||console.log.bind(console),G=h.printErr||console.error.bind(console);Object.assign(h,kt),kt=null,h.thisProgram&&(rt=h.thisProgram),h.wasmBinary&&(St=h.wasmBinary),h.noExitRuntime,typeof WebAssembly!="object"&&Wt("no native wasm support detected");var Dt,Rt,jt,Zt,Bt,$e,Mt,qt,me,ke,Xe=!1;function P(){var d=Dt.buffer;h.HEAP8=jt=new Int8Array(d),h.HEAP16=Bt=new Int16Array(d),h.HEAP32=Mt=new Int32Array(d),h.HEAPU8=Zt=new Uint8Array(d),h.HEAPU16=$e=new Uint16Array(d),h.HEAPU32=qt=new Uint32Array(d),h.HEAPF32=me=new Float32Array(d),h.HEAPF64=ke=new Float64Array(d)}var w,I=[],z=[],V=[];function it(){var d=h.preRun.shift();I.unshift(d)}var Q,lt=0,xt=null;function Wt(d){throw h.onAbort&&h.onAbort(d),G(d="Aborted("+d+")"),Xe=!0,d=new WebAssembly.RuntimeError(d+". Build with -sASSERTIONS for more info."),g(d),d}function Et(d){return d.startsWith("data:application/octet-stream;base64,")}if(!Et(Q="canvas_advanced.wasm")){var ye=Q;Q=h.locateFile?h.locateFile(ye,At):At+ye}function Tt(d){if(d==Q&&St)return new Uint8Array(St);if(ut)return ut(d);throw"both async and sync fetching of the wasm failed"}function he(d,m,v){return function(A){if(!St&&(vt||et)){if(typeof fetch=="function"&&!A.startsWith("file://"))return fetch(A,{credentials:"same-origin"}).then(L=>{if(!L.ok)throw"failed to load wasm binary file at '"+A+"'";return L.arrayBuffer()}).catch(()=>Tt(A));if(B)return new Promise((L,R)=>{B(A,N=>L(new Uint8Array(N)),R)})}return Promise.resolve().then(()=>Tt(A))}(d).then(A=>WebAssembly.instantiate(A,m)).then(A=>A).then(v,A=>{G("failed to asynchronously prepare wasm: "+A),Wt(A)})}var Pe,je,Te={448252:(d,m,v,A,L)=>{if(typeof window>"u"||(window.AudioContext||window.webkitAudioContext)===void 0)return 0;if(window.h===void 0){window.h={Aa:0},window.h.I={},window.h.I.ya=d,window.h.I.capture=m,window.h.I.La=v,window.h.ga={},window.h.ga.stopped=A,window.h.ga.xb=L;let R=window.h;R.D=[],R.yc=function(N){for(var j=0;j<R.D.length;++j)if(R.D[j]==null)return R.D[j]=N,j;return R.D.push(N),R.D.length-1},R.Cb=function(N){for(R.D[N]=null;0<R.D.length&&R.D[R.D.length-1]==null;)R.D.pop()},R.Sc=function(N){for(var j=0;j<R.D.length;++j)if(R.D[j]==N)return R.Cb(j)},R.ra=function(N){return R.D[N]},R.Bb=["touchend","click"],R.unlock=function(){for(var N=0;N<R.D.length;++N){var j=R.D[N];j!=null&&j.J!=null&&j.state===R.ga.xb&&j.J.resume().then(()=>{Zs(j.pb)},J=>{console.error("Failed to resume audiocontext",J)})}R.Bb.map(function(J){document.removeEventListener(J,R.unlock,!0)})},R.Bb.map(function(N){document.addEventListener(N,R.unlock,!0)})}return window.h.Aa+=1,1},450430:()=>{window.h!==void 0&&(--window.h.Aa,window.h.Aa===0&&delete window.h)},450594:()=>navigator.mediaDevices!==void 0&&navigator.mediaDevices.getUserMedia!==void 0,450698:()=>{try{var d=new(window.AudioContext||window.webkitAudioContext),m=d.sampleRate;return d.close(),m}catch{return 0}},450869:(d,m,v,A,L,R)=>{if(window.h===void 0)return-1;var N={},j={};return d==window.h.I.ya&&v!=0&&(j.sampleRate=v),N.J=new(window.AudioContext||window.webkitAudioContext)(j),N.J.suspend(),N.state=window.h.ga.stopped,v=0,d!=window.h.I.ya&&(v=m),N.Z=N.J.createScriptProcessor(A,v,m),N.Z.onaudioprocess=function(J){if(N.sa!=null&&N.sa.length!=0||(N.sa=new Float32Array(me.buffer,L,A*m)),d==window.h.I.capture||d==window.h.I.La){for(var q=0;q<m;q+=1)for(var mt=J.inputBuffer.getChannelData(q),pt=N.sa,ht=0;ht<A;ht+=1)pt[ht*m+q]=mt[ht];Js(R,A,L)}if(d==window.h.I.ya||d==window.h.I.La)for(Qs(R,A,L),q=0;q<J.outputBuffer.numberOfChannels;++q)for(mt=J.outputBuffer.getChannelData(q),pt=N.sa,ht=0;ht<A;ht+=1)mt[ht]=pt[ht*m+q];else for(q=0;q<J.outputBuffer.numberOfChannels;++q)J.outputBuffer.getChannelData(q).fill(0)},d!=window.h.I.capture&&d!=window.h.I.La||navigator.mediaDevices.getUserMedia({audio:!0,video:!1}).then(function(J){N.Da=N.J.createMediaStreamSource(J),N.Da.connect(N.Z),N.Z.connect(N.J.destination)}).catch(function(J){console.log("Failed to get user media: "+J)}),d==window.h.I.ya&&N.Z.connect(N.J.destination),N.pb=R,window.h.yc(N)},453746:d=>window.h.ra(d).J.sampleRate,453819:d=>{(d=window.h.ra(d)).Z!==void 0&&(d.Z.onaudioprocess=function(){},d.Z.disconnect(),d.Z=void 0),d.Da!==void 0&&(d.Da.disconnect(),d.Da=void 0),d.J.close(),d.J=void 0,d.pb=void 0},454219:d=>{window.h.Cb(d)},454269:d=>{(d=window.h.ra(d)).J.resume(),d.state=window.h.ga.xb},454408:d=>{(d=window.h.ra(d)).J.suspend(),d.state=window.h.ga.stopped}},Ke=d=>{for(;0<d.length;)d.shift()(h)},Ue=(d,m)=>{for(var v=0,A=d.length-1;0<=A;A--){var L=d[A];L==="."?d.splice(A,1):L===".."?(d.splice(A,1),v++):v&&(d.splice(A,1),v--)}if(m)for(;v;v--)d.unshift("..");return d},Le=d=>{var m=d.charAt(0)==="/",v=d.substr(-1)==="/";return(d=Ue(d.split("/").filter(A=>!!A),!m).join("/"))||m||(d="."),d&&v&&(d+="/"),(m?"/":"")+d},Ae=d=>{var m=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/.exec(d).slice(1);return d=m[0],m=m[1],d||m?(m&&(m=m.substr(0,m.length-1)),d+m):"."},en=d=>{if(d==="/")return"/";var m=(d=(d=Le(d)).replace(/\/$/,"")).lastIndexOf("/");return m===-1?d:d.substr(m+1)},qe=d=>(qe=(()=>{if(typeof crypto=="object"&&typeof crypto.getRandomValues=="function")return m=>crypto.getRandomValues(m);Wt("initRandomDevice")})())(d);function Nn(){for(var d="",m=!1,v=arguments.length-1;-1<=v&&!m;v--){if(typeof(m=0<=v?arguments[v]:"/")!="string")throw new TypeError("Arguments to path.resolve must be strings");if(!m)return"";d=m+"/"+d,m=m.charAt(0)==="/"}return(m?"/":"")+(d=Ue(d.split("/").filter(A=>!!A),!m).join("/"))||"."}var An=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0,nn=(d,m,v)=>{var A=m+v;for(v=m;d[v]&&!(v>=A);)++v;if(16<v-m&&d.buffer&&An)return An.decode(d.subarray(m,v));for(A="";m<v;){var L=d[m++];if(128&L){var R=63&d[m++];if((224&L)==192)A+=String.fromCharCode((31&L)<<6|R);else{var N=63&d[m++];65536>(L=(240&L)==224?(15&L)<<12|R<<6|N:(7&L)<<18|R<<12|N<<6|63&d[m++])?A+=String.fromCharCode(L):(L-=65536,A+=String.fromCharCode(55296|L>>10,56320|1023&L))}}else A+=String.fromCharCode(L)}return A},vn=[],an=d=>{for(var m=0,v=0;v<d.length;++v){var A=d.charCodeAt(v);127>=A?m++:2047>=A?m+=2:55296<=A&&57343>=A?(m+=4,++v):m+=3}return m},uo=(d,m,v,A)=>{if(!(0<A))return 0;var L=v;A=v+A-1;for(var R=0;R<d.length;++R){var N=d.charCodeAt(R);if(55296<=N&&57343>=N&&(N=65536+((1023&N)<<10)|1023&d.charCodeAt(++R)),127>=N){if(v>=A)break;m[v++]=N}else{if(2047>=N){if(v+1>=A)break;m[v++]=192|N>>6}else{if(65535>=N){if(v+2>=A)break;m[v++]=224|N>>12}else{if(v+3>=A)break;m[v++]=240|N>>18,m[v++]=128|N>>12&63}m[v++]=128|N>>6&63}m[v++]=128|63&N}}return m[v]=0,v-L};function ms(d,m){var v=Array(an(d)+1);return d=uo(d,v,0,v.length),m&&(v.length=d),v}var ps=[];function $s(d,m){ps[d]={input:[],F:[],V:m},Dr(d,Jl)}var Jl={open:function(d){var m=ps[d.node.za];if(!m)throw new yt(43);d.s=m,d.seekable=!1},close:function(d){d.s.V.qa(d.s)},qa:function(d){d.s.V.qa(d.s)},read:function(d,m,v,A){if(!d.s||!d.s.V.ib)throw new yt(60);for(var L=0,R=0;R<A;R++){try{var N=d.s.V.ib(d.s)}catch{throw new yt(29)}if(N===void 0&&L===0)throw new yt(6);if(N==null)break;L++,m[v+R]=N}return L&&(d.node.timestamp=Date.now()),L},write:function(d,m,v,A){if(!d.s||!d.s.V.Oa)throw new yt(60);try{for(var L=0;L<A;L++)d.s.V.Oa(d.s,m[v+L])}catch{throw new yt(29)}return A&&(d.node.timestamp=Date.now()),L}},Ql={ib:function(){t:{if(!vn.length){var d=null;if(typeof window<"u"&&typeof window.prompt=="function"?(d=window.prompt("Input: "))!==null&&(d+=`
`):typeof readline=="function"&&(d=readline())!==null&&(d+=`
`),!d){d=null;break t}vn=ms(d,!0)}d=vn.shift()}return d},Oa:function(d,m){m===null||m===10?(It(nn(d.F,0)),d.F=[]):m!=0&&d.F.push(m)},qa:function(d){d.F&&0<d.F.length&&(It(nn(d.F,0)),d.F=[])},bc:function(){return{Fc:25856,Hc:5,Ec:191,Gc:35387,Dc:[3,28,127,21,4,0,1,0,17,19,26,0,18,15,23,22,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]}},cc:function(){return 0},dc:function(){return[24,80]}},tu={Oa:function(d,m){m===null||m===10?(G(nn(d.F,0)),d.F=[]):m!=0&&d.F.push(m)},qa:function(d){d.F&&0<d.F.length&&(G(nn(d.F,0)),d.F=[])}};function hs(d,m){var v=d.j?d.j.length:0;v>=m||(m=Math.max(m,v*(1048576>v?2:1.125)>>>0),v!=0&&(m=Math.max(m,256)),v=d.j,d.j=new Uint8Array(m),0<d.v&&d.j.set(v.subarray(0,d.v),0))}var gs,Sr,Do,No,Jt={O:null,U:()=>Jt.createNode(null,"/",16895,0),createNode(d,m,v,A){if((61440&v)==24576||(61440&v)==4096)throw new yt(63);return Jt.O||(Jt.O={dir:{node:{Y:Jt.l.Y,P:Jt.l.P,ka:Jt.l.ka,va:Jt.l.va,ub:Jt.l.ub,Ab:Jt.l.Ab,vb:Jt.l.vb,sb:Jt.l.sb,Ea:Jt.l.Ea},stream:{ba:Jt.m.ba}},file:{node:{Y:Jt.l.Y,P:Jt.l.P},stream:{ba:Jt.m.ba,read:Jt.m.read,write:Jt.m.write,pa:Jt.m.pa,lb:Jt.m.lb,nb:Jt.m.nb}},link:{node:{Y:Jt.l.Y,P:Jt.l.P,ma:Jt.l.ma},stream:{}},$a:{node:{Y:Jt.l.Y,P:Jt.l.P},stream:nu}}),(61440&(v=_s(d,m,v,A)).mode)==16384?(v.l=Jt.O.dir.node,v.m=Jt.O.dir.stream,v.j={}):(61440&v.mode)==32768?(v.l=Jt.O.file.node,v.m=Jt.O.file.stream,v.v=0,v.j=null):(61440&v.mode)==40960?(v.l=Jt.O.link.node,v.m=Jt.O.link.stream):(61440&v.mode)==8192&&(v.l=Jt.O.$a.node,v.m=Jt.O.$a.stream),v.timestamp=Date.now(),d&&(d.j[m]=v,d.timestamp=v.timestamp),v},Kc:d=>d.j?d.j.subarray?d.j.subarray(0,d.v):new Uint8Array(d.j):new Uint8Array(0),l:{Y(d){var m={};return m.Jc=(61440&d.mode)==8192?d.id:1,m.Mc=d.id,m.mode=d.mode,m.Oc=1,m.uid=0,m.Lc=0,m.za=d.za,(61440&d.mode)==16384?m.size=4096:(61440&d.mode)==32768?m.size=d.v:(61440&d.mode)==40960?m.size=d.link.length:m.size=0,m.Bc=new Date(d.timestamp),m.Nc=new Date(d.timestamp),m.Ic=new Date(d.timestamp),m.Jb=4096,m.Cc=Math.ceil(m.size/m.Jb),m},P(d,m){if(m.mode!==void 0&&(d.mode=m.mode),m.timestamp!==void 0&&(d.timestamp=m.timestamp),m.size!==void 0&&(m=m.size,d.v!=m))if(m==0)d.j=null,d.v=0;else{var v=d.j;d.j=new Uint8Array(m),v&&d.j.set(v.subarray(0,Math.min(m,d.v))),d.v=m}},ka(){throw Pr[44]},va:(d,m,v,A)=>Jt.createNode(d,m,v,A),ub(d,m,v){if((61440&d.mode)==16384){try{var A=Oo(m,v)}catch{}if(A)for(var L in A.j)throw new yt(55)}delete d.parent.j[d.name],d.parent.timestamp=Date.now(),d.name=v,m.j[v]=d,m.timestamp=d.parent.timestamp,d.parent=m},Ab(d,m){delete d.j[m],d.timestamp=Date.now()},vb(d,m){var v,A=Oo(d,m);for(v in A.j)throw new yt(55);delete d.j[m],d.timestamp=Date.now()},sb(d){var m,v=[".",".."];for(m in d.j)d.j.hasOwnProperty(m)&&v.push(m);return v},Ea:(d,m,v)=>((d=Jt.createNode(d,m,41471,0)).link=v,d),ma(d){if((61440&d.mode)!=40960)throw new yt(28);return d.link}},m:{read(d,m,v,A,L){var R=d.node.j;if(L>=d.node.v)return 0;if(8<(d=Math.min(d.node.v-L,A))&&R.subarray)m.set(R.subarray(L,L+d),v);else for(A=0;A<d;A++)m[v+A]=R[L+A];return d},write(d,m,v,A,L,R){if(m.buffer===jt.buffer&&(R=!1),!A)return 0;if((d=d.node).timestamp=Date.now(),m.subarray&&(!d.j||d.j.subarray)){if(R)return d.j=m.subarray(v,v+A),d.v=A;if(d.v===0&&L===0)return d.j=m.slice(v,v+A),d.v=A;if(L+A<=d.v)return d.j.set(m.subarray(v,v+A),L),A}if(hs(d,L+A),d.j.subarray&&m.subarray)d.j.set(m.subarray(v,v+A),L);else for(R=0;R<A;R++)d.j[L+R]=m[v+R];return d.v=Math.max(d.v,L+A),A},ba(d,m,v){if(v===1?m+=d.position:v===2&&(61440&d.node.mode)==32768&&(m+=d.node.v),0>m)throw new yt(28);return m},pa(d,m,v){hs(d.node,m+v),d.node.v=Math.max(d.node.v,m+v)},lb(d,m,v,A,L){if((61440&d.node.mode)!=32768)throw new yt(43);if(d=d.node.j,2&L||d.buffer!==jt.buffer){if((0<v||v+m<d.length)&&(d=d.subarray?d.subarray(v,v+m):Array.prototype.slice.call(d,v,v+m)),v=!0,Wt(),!(m=void 0))throw new yt(48);jt.set(d,m)}else v=!1,m=d.byteOffset;return{o:m,M:v}},nb:(d,m,v,A)=>(Jt.m.write(d,m,0,A,v,!1),0)}},Rr=null,vs={},Fo=[],eu=1,fo=null,ws=!0,yt=null,Pr={},qn=(d,m={})=>{if(!(d=Nn(d)))return{path:"",node:null};if(8<(m=Object.assign({gb:!0,Qa:0},m)).Qa)throw new yt(32);d=d.split("/").filter(N=>!!N);for(var v=Rr,A="/",L=0;L<d.length;L++){var R=L===d.length-1;if(R&&m.parent)break;if(v=Oo(v,d[L]),A=Le(A+"/"+d[L]),v.wa&&(!R||R&&m.gb)&&(v=v.wa.root),!R||m.fb){for(R=0;(61440&v.mode)==40960;)if(v=ou(A),A=Nn(Ae(A),v),v=qn(A,{Qa:m.Qa+1}).node,40<R++)throw new yt(32)}}return{path:A,node:v}},ys=d=>{for(var m;;){if(d===d.parent)return d=d.U.mb,m?d[d.length-1]!=="/"?`${d}/${m}`:d+m:d;m=m?`${d.name}/${m}`:d.name,d=d.parent}},bs=(d,m)=>{for(var v=0,A=0;A<m.length;A++)v=(v<<5)-v+m.charCodeAt(A)|0;return(d+v>>>0)%fo.length},Oo=(d,m)=>{var v;if(v=(v=Bo(d,"x"))?v:d.l.ka?0:2)throw new yt(v,d);for(v=fo[bs(d.id,m)];v;v=v.lc){var A=v.name;if(v.parent.id===d.id&&A===m)return v}return d.l.ka(d,m)},_s=(d,m,v,A)=>(d=new Ys(d,m,v,A),m=bs(d.parent.id,d.name),d.lc=fo[m],fo[m]=d),Cs=d=>{var m=["r","w","rw"][3&d];return 512&d&&(m+="w"),m},Bo=(d,m)=>ws?0:!m.includes("r")||292&d.mode?m.includes("w")&&!(146&d.mode)||m.includes("x")&&!(73&d.mode)?2:0:2,xs=(d,m)=>{try{return Oo(d,m),20}catch{}return Bo(d,"wx")},Fn=d=>{if(!(d=Fo[d]))throw new yt(8);return d},Ms=(d,m=-1)=>(Do||((Do=function(){this.h={}}).prototype={},Object.defineProperties(Do.prototype,{object:{get(){return this.node},set(v){this.node=v}},flags:{get(){return this.h.flags},set(v){this.h.flags=v}},position:{get(){return this.h.position},set(v){this.h.position=v}}})),d=Object.assign(new Do,d),m==-1&&(m=(()=>{for(var v=0;4096>=v;v++)if(!Fo[v])return v;throw new yt(33)})()),d.X=m,Fo[m]=d),nu={open:d=>{d.m=vs[d.node.za].m,d.m.open&&d.m.open(d)},ba:()=>{throw new yt(70)}},Dr=(d,m)=>{vs[d]={m}},As=(d,m)=>{var v=m==="/",A=!m;if(v&&Rr)throw new yt(10);if(!v&&!A){var L=qn(m,{gb:!1});if(m=L.path,(L=L.node).wa)throw new yt(10);if((61440&L.mode)!=16384)throw new yt(54)}m={type:d,Qc:{},mb:m,kc:[]},(d=d.U(m)).U=m,m.root=d,v?Rr=d:L&&(L.wa=m,L.U&&L.U.kc.push(m))},mn=(d,m,v)=>{var A=qn(d,{parent:!0}).node;if(!(d=en(d))||d==="."||d==="..")throw new yt(28);var L=xs(A,d);if(L)throw new yt(L);if(!A.l.va)throw new yt(63);return A.l.va(A,d,m,v)},zo=(d,m,v)=>{v===void 0&&(v=m,m=438),mn(d,8192|m,v)},Nr=(d,m)=>{if(!Nn(d))throw new yt(44);var v=qn(m,{parent:!0}).node;if(!v)throw new yt(44);m=en(m);var A=xs(v,m);if(A)throw new yt(A);if(!v.l.Ea)throw new yt(63);v.l.Ea(v,m,d)},ou=d=>{if(!(d=qn(d).node))throw new yt(44);if(!d.l.ma)throw new yt(28);return Nn(ys(d.parent),d.l.ma(d))},Ho=(d,m,v)=>{if(d==="")throw new yt(44);if(typeof m=="string"){var A={r:0,"r+":2,w:577,"w+":578,a:1089,"a+":1090}[m];if(A===void 0)throw Error(`Unknown file open mode: ${m}`);m=A}if(v=64&m?4095&(v===void 0?438:v)|32768:0,typeof d=="object")var L=d;else{d=Le(d);try{L=qn(d,{fb:!(131072&m)}).node}catch{}}if(A=!1,64&m)if(L){if(128&m)throw new yt(20)}else L=mn(d,v,0),A=!0;if(!L)throw new yt(44);if((61440&L.mode)==8192&&(m&=-513),65536&m&&(61440&L.mode)!=16384)throw new yt(54);if(!A&&(v=L?(61440&L.mode)==40960?32:(61440&L.mode)==16384&&(Cs(m)!=="r"||512&m)?31:Bo(L,Cs(m)):44))throw new yt(v);if(512&m&&!A){if(!(v=typeof(v=L)=="string"?qn(v,{fb:!0}).node:v).l.P)throw new yt(63);if((61440&v.mode)==16384)throw new yt(31);if((61440&v.mode)!=32768)throw new yt(28);if(A=Bo(v,"w"))throw new yt(A);v.l.P(v,{size:0,timestamp:Date.now()})}return m&=-131713,(L=Ms({node:L,path:ys(L),flags:m,seekable:!0,position:0,m:L.m,zc:[],error:!1})).m.open&&L.m.open(L),!h.logReadFiles||1&m||(No||(No={}),d in No||(No[d]=1)),L},Es=(d,m,v)=>{if(d.X===null)throw new yt(8);if(!d.seekable||!d.m.ba)throw new yt(70);if(v!=0&&v!=1&&v!=2)throw new yt(28);d.position=d.m.ba(d,m,v),d.zc=[]},ks=()=>{yt||((yt=function(d,m){this.name="ErrnoError",this.node=m,this.pc=function(v){this.aa=v},this.pc(d),this.message="FS error"}).prototype=Error(),yt.prototype.constructor=yt,[44].forEach(d=>{Pr[d]=new yt(d),Pr[d].stack="<generic error, no stack>"}))},mo=(d,m,v)=>{d=Le("/dev/"+d);var A=function(R,N){var j=0;return R&&(j|=365),N&&(j|=146),j}(!!m,!!v);Sr||(Sr=64);var L=Sr++<<8;Dr(L,{open:R=>{R.seekable=!1},close:()=>{v&&v.buffer&&v.buffer.length&&v(10)},read:(R,N,j,J)=>{for(var q=0,mt=0;mt<J;mt++){try{var pt=m()}catch{throw new yt(29)}if(pt===void 0&&q===0)throw new yt(6);if(pt==null)break;q++,N[j+mt]=pt}return q&&(R.node.timestamp=Date.now()),q},write:(R,N,j,J)=>{for(var q=0;q<J;q++)try{v(N[j+q])}catch{throw new yt(29)}return J&&(R.node.timestamp=Date.now()),q}}),zo(d,A,L)},Wn={},jo=void 0;function En(){return Mt[(jo+=4)-4>>2]}function Ts(d){if(d===void 0)return"_unknown";var m=(d=d.replace(/[^a-zA-Z0-9_]/g,"$")).charCodeAt(0);return 48<=m&&57>=m?`_${d}`:d}function Uo(d,m){return d=Ts(d),{[d]:function(){return m.apply(this,arguments)}}[d]}function Ls(){this.M=[void 0],this.hb=[]}var cn=new Ls,Qn=void 0;function Ut(d){throw new Qn(d)}var pn=d=>(d||Ut("Cannot use deleted val. handle = "+d),cn.get(d).value),wn=d=>{switch(d){case void 0:return 1;case null:return 2;case!0:return 3;case!1:return 4;default:return cn.pa({tb:1,value:d})}};function Is(d){var m=Error,v=Uo(d,function(A){this.name=d,this.message=A,(A=Error(A).stack)!==void 0&&(this.stack=this.toString()+`
`+A.replace(/^Error(:[^\n]*)?\n/,""))});return v.prototype=Object.create(m.prototype),v.prototype.constructor=v,v.prototype.toString=function(){return this.message===void 0?this.name:`${this.name}: ${this.message}`},v}var Ss=void 0,Rs=void 0;function Ce(d){for(var m="";Zt[d];)m+=Rs[Zt[d++]];return m}var po=[];function Fr(){for(;po.length;){var d=po.pop();d.g.fa=!1,d.delete()}}var $o=void 0,kn={};function Or(d,m){for(m===void 0&&Ut("ptr should not be undefined");d.A;)m=d.na(m),d=d.A;return m}var Vn={};function Ps(d){var m=Ce(d=ei(d));return In(d),m}function ho(d,m){var v=Vn[d];return v===void 0&&Ut(m+" has unknown type "+Ps(d)),v}function qo(){}var Br=!1;function Ds(d){--d.count.value,d.count.value===0&&(d.G?d.L.W(d.G):d.u.i.W(d.o))}function Ns(d,m,v){return m===v?d:v.A===void 0||(d=Ns(d,m,v.A))===null?null:v.Pb(d)}var Fs={},Os=void 0;function Wo(d){throw new Os(d)}function Vo(d,m){return m.u&&m.o||Wo("makeClassHandle requires ptr and ptrType"),!!m.L!=!!m.G&&Wo("Both smartPtrType and smartPtr must be specified"),m.count={value:1},go(Object.create(d,{g:{value:m}}))}function go(d){return typeof FinalizationRegistry>"u"?(go=m=>m,d):(Br=new FinalizationRegistry(m=>{Ds(m.g)}),qo=m=>{Br.unregister(m)},(go=m=>{var v=m.g;return v.G&&Br.register(m,{g:v},m),m})(d))}var Go={};function vo(d){for(;d.length;){var m=d.pop();d.pop()(m)}}function wo(d){return this.fromWireType(Mt[d>>2])}var to={},Yo={};function on(d,m,v){function A(j){(j=v(j)).length!==d.length&&Wo("Mismatched type converter count");for(var J=0;J<d.length;++J)yn(d[J],j[J])}d.forEach(function(j){Yo[j]=m});var L=Array(m.length),R=[],N=0;m.forEach((j,J)=>{Vn.hasOwnProperty(j)?L[J]=Vn[j]:(R.push(j),to.hasOwnProperty(j)||(to[j]=[]),to[j].push(()=>{L[J]=Vn[j],++N===R.length&&A(L)}))}),R.length===0&&A(L)}function Xo(d){switch(d){case 1:return 0;case 2:return 1;case 4:return 2;case 8:return 3;default:throw new TypeError(`Unknown type size: ${d}`)}}function yn(d,m,v={}){if(!("argPackAdvance"in m))throw new TypeError("registerType registeredInstance requires argPackAdvance");(function(A,L,R={}){var N=L.name;if(A||Ut(`type "${N}" must have a positive integer typeid pointer`),Vn.hasOwnProperty(A)){if(R.$b)return;Ut(`Cannot register type '${N}' twice`)}Vn[A]=L,delete Yo[A],to.hasOwnProperty(A)&&(L=to[A],delete to[A],L.forEach(j=>j()))})(d,m,v)}function zr(d){Ut(d.g.u.i.name+" instance already deleted")}function On(){}function Hr(d,m,v){if(d[m].B===void 0){var A=d[m];d[m]=function(){return d[m].B.hasOwnProperty(arguments.length)||Ut(`Function '${v}' called with an invalid number of arguments (${arguments.length}) - expects one of (${d[m].B})!`),d[m].B[arguments.length].apply(this,arguments)},d[m].B=[],d[m].B[A.ea]=A}}function jr(d,m,v){h.hasOwnProperty(d)?((v===void 0||h[d].B!==void 0&&h[d].B[v]!==void 0)&&Ut(`Cannot register public name '${d}' twice`),Hr(h,d,d),h.hasOwnProperty(v)&&Ut(`Cannot register multiple overloads of a function with the same number of arguments (${v})!`),h[d].B[v]=m):(h[d]=m,v!==void 0&&(h[d].Pc=v))}function ru(d,m,v,A,L,R,N,j){this.name=d,this.constructor=m,this.N=v,this.W=A,this.A=L,this.Ub=R,this.na=N,this.Pb=j,this.qb=[]}function Ko(d,m,v){for(;m!==v;)m.na||Ut(`Expected null or instance of ${v.name}, got an instance of ${m.name}`),d=m.na(d),m=m.A;return d}function su(d,m){return m===null?(this.Na&&Ut(`null is not a valid ${this.name}`),0):(m.g||Ut(`Cannot pass "${qr(m)}" as a ${this.name}`),m.g.o||Ut(`Cannot pass deleted object as a pointer of type ${this.name}`),Ko(m.g.o,m.g.u.i,this.i))}function iu(d,m){if(m===null){if(this.Na&&Ut(`null is not a valid ${this.name}`),this.ua){var v=this.Pa();return d!==null&&d.push(this.W,v),v}return 0}if(m.g||Ut(`Cannot pass "${qr(m)}" as a ${this.name}`),m.g.o||Ut(`Cannot pass deleted object as a pointer of type ${this.name}`),!this.ta&&m.g.u.ta&&Ut(`Cannot convert argument of type ${m.g.L?m.g.L.name:m.g.u.name} to parameter type ${this.name}`),v=Ko(m.g.o,m.g.u.i,this.i),this.ua)switch(m.g.G===void 0&&Ut("Passing raw pointer to smart pointer is illegal"),this.tc){case 0:m.g.L===this?v=m.g.G:Ut(`Cannot convert argument of type ${m.g.L?m.g.L.name:m.g.u.name} to parameter type ${this.name}`);break;case 1:v=m.g.G;break;case 2:if(m.g.L===this)v=m.g.G;else{var A=m.clone();v=this.oc(v,wn(function(){A.delete()})),d!==null&&d.push(this.W,v)}break;default:Ut("Unsupporting sharing policy")}return v}function au(d,m){return m===null?(this.Na&&Ut(`null is not a valid ${this.name}`),0):(m.g||Ut(`Cannot pass "${qr(m)}" as a ${this.name}`),m.g.o||Ut(`Cannot pass deleted object as a pointer of type ${this.name}`),m.g.u.ta&&Ut(`Cannot convert argument of type ${m.g.u.name} to parameter type ${this.name}`),Ko(m.g.o,m.g.u.i,this.i))}function Tn(d,m,v,A){this.name=d,this.i=m,this.Na=v,this.ta=A,this.ua=!1,this.W=this.oc=this.Pa=this.rb=this.tc=this.nc=void 0,m.A!==void 0?this.toWireType=iu:(this.toWireType=A?su:au,this.K=null)}function Bs(d,m,v){h.hasOwnProperty(d)||Wo("Replacing nonexistant public symbol"),h[d].B!==void 0&&v!==void 0?h[d].B[v]=m:(h[d]=m,h[d].ea=v)}var Zo=[],zs=d=>{var m=Zo[d];return m||(d>=Zo.length&&(Zo.length=d+1),Zo[d]=m=w.get(d)),m};function We(d,m){var v=(d=Ce(d)).includes("j")?((A,L)=>{var R=[];return function(){if(R.length=0,Object.assign(R,arguments),A.includes("j")){var N=h["dynCall_"+A];N=R&&R.length?N.apply(null,[L].concat(R)):N.call(null,L)}else N=zs(L).apply(null,R);return N}})(d,m):zs(m);return typeof v!="function"&&Ut(`unknown function pointer with signature ${d}: ${m}`),v}var Hs=void 0;function Ln(d,m){var v=[],A={};throw m.forEach(function L(R){A[R]||Vn[R]||(Yo[R]?Yo[R].forEach(L):(v.push(R),A[R]=!0))}),new Hs(`${d}: `+v.map(Ps).join([", "]))}function Jo(d,m,v,A,L){var R=m.length;2>R&&Ut("argTypes array size mismatch! Must at least get return value and 'this' types!");var N=m[1]!==null&&v!==null,j=!1;for(v=1;v<m.length;++v)if(m[v]!==null&&m[v].K===void 0){j=!0;break}var J=m[0].name!=="void",q=R-2,mt=Array(q),pt=[],ht=[];return function(){if(arguments.length!==q&&Ut(`function ${d} called with ${arguments.length} arguments, expected ${q} args!`),ht.length=0,pt.length=N?2:1,pt[0]=L,N){var wt=m[1].toWireType(ht,this);pt[1]=wt}for(var $t=0;$t<q;++$t)mt[$t]=m[$t+2].toWireType(ht,arguments[$t]),pt.push(mt[$t]);if($t=A.apply(null,pt),j)vo(ht);else for(var dt=N?1:2;dt<m.length;dt++){var oe=dt===1?wt:mt[dt-2];m[dt].K!==null&&m[dt].K(oe)}return wt=J?m[0].fromWireType($t):void 0}}function Qo(d,m){for(var v=[],A=0;A<d;A++)v.push(qt[m+4*A>>2]);return v}function js(d,m,v){return d instanceof Object||Ut(`${v} with invalid "this": ${d}`),d instanceof m.i.constructor||Ut(`${v} incompatible with "this" of type ${d.constructor.name}`),d.g.o||Ut(`cannot call emscripten binding method ${v} on deleted object`),Ko(d.g.o,d.g.u.i,m.i)}function Ur(d){d>=cn.h&&--cn.get(d).tb==0&&cn.Zb(d)}function cu(d,m,v){switch(m){case 0:return function(A){return this.fromWireType((v?jt:Zt)[A])};case 1:return function(A){return this.fromWireType((v?Bt:$e)[A>>1])};case 2:return function(A){return this.fromWireType((v?Mt:qt)[A>>2])};default:throw new TypeError("Unknown integer type: "+d)}}function qr(d){if(d===null)return"null";var m=typeof d;return m==="object"||m==="array"||m==="function"?d.toString():""+d}function lu(d,m){switch(m){case 2:return function(v){return this.fromWireType(me[v>>2])};case 3:return function(v){return this.fromWireType(ke[v>>3])};default:throw new TypeError("Unknown float type: "+d)}}function uu(d,m,v){switch(m){case 0:return v?function(A){return jt[A]}:function(A){return Zt[A]};case 1:return v?function(A){return Bt[A>>1]}:function(A){return $e[A>>1]};case 2:return v?function(A){return Mt[A>>2]}:function(A){return qt[A>>2]};default:throw new TypeError("Unknown integer type: "+d)}}var Us=typeof TextDecoder<"u"?new TextDecoder("utf-16le"):void 0,du=(d,m)=>{for(var v=d>>1,A=v+m/2;!(v>=A)&&$e[v];)++v;if(32<(v<<=1)-d&&Us)return Us.decode(Zt.subarray(d,v));for(v="",A=0;!(A>=m/2);++A){var L=Bt[d+2*A>>1];if(L==0)break;v+=String.fromCharCode(L)}return v},fu=(d,m,v)=>{if(v===void 0&&(v=2147483647),2>v)return 0;var A=m;v=(v-=2)<2*d.length?v/2:d.length;for(var L=0;L<v;++L)Bt[m>>1]=d.charCodeAt(L),m+=2;return Bt[m>>1]=0,m-A},mu=d=>2*d.length,pu=(d,m)=>{for(var v=0,A="";!(v>=m/4);){var L=Mt[d+4*v>>2];if(L==0)break;++v,65536<=L?(L-=65536,A+=String.fromCharCode(55296|L>>10,56320|1023&L)):A+=String.fromCharCode(L)}return A},$u=(d,m,v)=>{if(v===void 0&&(v=2147483647),4>v)return 0;var A=m;v=A+v-4;for(var L=0;L<d.length;++L){var R=d.charCodeAt(L);if(55296<=R&&57343>=R&&(R=65536+((1023&R)<<10)|1023&d.charCodeAt(++L)),Mt[m>>2]=R,(m+=4)+4>v)break}return Mt[m>>2]=0,m-A},hu=d=>{for(var m=0,v=0;v<d.length;++v){var A=d.charCodeAt(v);55296<=A&&57343>=A&&++v,m+=4}return m},gu={};function tr(d){var m=gu[d];return m===void 0?Ce(d):m}var Wr,er=[],qs=[],Vr=[],Gr={},Ws=()=>{if(!Wr){var d,m={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:rt||"./this.program"};for(d in Gr)Gr[d]===void 0?delete m[d]:m[d]=Gr[d];var v=[];for(d in m)v.push(`${d}=${m[d]}`);Wr=v}return Wr},nr=d=>d%4==0&&(d%100!=0||d%400==0),Vs=[31,29,31,30,31,30,31,31,30,31,30,31],Gs=[31,28,31,30,31,30,31,31,30,31,30,31];function Ys(d,m,v,A){d||(d=this),this.parent=d,this.U=d.U,this.wa=null,this.id=eu++,this.name=m,this.mode=v,this.l={},this.m={},this.za=A}Object.defineProperties(Ys.prototype,{read:{get:function(){return!(365&~this.mode)},set:function(d){d?this.mode|=365:this.mode&=-366}},write:{get:function(){return!(146&~this.mode)},set:function(d){d?this.mode|=146:this.mode&=-147}}}),ks(),fo=Array(4096),As(Jt,"/"),mn("/tmp",16895,0),mn("/home",16895,0),mn("/home/web_user",16895,0),(()=>{mn("/dev",16895,0),Dr(259,{read:()=>0,write:(A,L,R,N)=>N}),zo("/dev/null",259),$s(1280,Ql),$s(1536,tu),zo("/dev/tty",1280),zo("/dev/tty1",1536);var d=new Uint8Array(1024),m=0,v=()=>(m===0&&(m=qe(d).byteLength),d[--m]);mo("random",v),mo("urandom",v),mn("/dev/shm",16895,0),mn("/dev/shm/tmp",16895,0)})(),(()=>{mn("/proc",16895,0);var d=mn("/proc/self",16895,0);mn("/proc/self/fd",16895,0),As({U:()=>{var m=_s(d,"fd",16895,73);return m.l={ka:(v,A)=>{var L=Fn(+A);return(v={parent:null,U:{mb:"fake"},l:{ma:()=>L.path}}).parent=v}},m}},"/proc/self/fd")})(),Object.assign(Ls.prototype,{get(d){return this.M[d]},has(d){return this.M[d]!==void 0},pa(d){var m=this.hb.pop()||this.M.length;return this.M[m]=d,m},Zb(d){this.M[d]=void 0,this.hb.push(d)}}),Qn=h.BindingError=class extends Error{constructor(d){super(d),this.name="BindingError"}},cn.M.push({value:void 0},{value:null},{value:!0},{value:!1}),cn.h=cn.M.length,h.count_emval_handles=function(){for(var d=0,m=cn.h;m<cn.M.length;++m)cn.M[m]!==void 0&&++d;return d},Ss=h.PureVirtualError=Is("PureVirtualError");for(var Xs=Array(256),or=0;256>or;++or)Xs[or]=String.fromCharCode(or);Rs=Xs,h.getInheritedInstanceCount=function(){return Object.keys(kn).length},h.getLiveInheritedInstances=function(){var d,m=[];for(d in kn)kn.hasOwnProperty(d)&&m.push(kn[d]);return m},h.flushPendingDeletes=Fr,h.setDelayFunction=function(d){$o=d,po.length&&$o&&$o(Fr)},Os=h.InternalError=class extends Error{constructor(d){super(d),this.name="InternalError"}},On.prototype.isAliasOf=function(d){if(!(this instanceof On&&d instanceof On))return!1;var m=this.g.u.i,v=this.g.o,A=d.g.u.i;for(d=d.g.o;m.A;)v=m.na(v),m=m.A;for(;A.A;)d=A.na(d),A=A.A;return m===A&&v===d},On.prototype.clone=function(){if(this.g.o||zr(this),this.g.ia)return this.g.count.value+=1,this;var d=go,m=Object,v=m.create,A=Object.getPrototypeOf(this),L=this.g;return(d=d(v.call(m,A,{g:{value:{count:L.count,fa:L.fa,ia:L.ia,o:L.o,u:L.u,G:L.G,L:L.L}}}))).g.count.value+=1,d.g.fa=!1,d},On.prototype.delete=function(){this.g.o||zr(this),this.g.fa&&!this.g.ia&&Ut("Object already scheduled for deletion"),qo(this),Ds(this.g),this.g.ia||(this.g.G=void 0,this.g.o=void 0)},On.prototype.isDeleted=function(){return!this.g.o},On.prototype.deleteLater=function(){return this.g.o||zr(this),this.g.fa&&!this.g.ia&&Ut("Object already scheduled for deletion"),po.push(this),po.length===1&&$o&&$o(Fr),this.g.fa=!0,this},Tn.prototype.Vb=function(d){return this.rb&&(d=this.rb(d)),d},Tn.prototype.ab=function(d){this.W&&this.W(d)},Tn.prototype.argPackAdvance=8,Tn.prototype.readValueFromPointer=wo,Tn.prototype.deleteObject=function(d){d!==null&&d.delete()},Tn.prototype.fromWireType=function(d){function m(){return this.ua?Vo(this.i.N,{u:this.nc,o:v,L:this,G:d}):Vo(this.i.N,{u:this,o:d})}var v=this.Vb(d);if(!v)return this.ab(d),null;var A=function(R,N){return N=Or(R,N),kn[N]}(this.i,v);if(A!==void 0)return A.g.count.value===0?(A.g.o=v,A.g.G=d,A.clone()):(A=A.clone(),this.ab(d),A);if(A=this.i.Ub(v),!(A=Fs[A]))return m.call(this);A=this.ta?A.Kb:A.pointerType;var L=Ns(v,this.i,A.i);return L===null?m.call(this):this.ua?Vo(A.i.N,{u:A,o:L,L:this,G:d}):Vo(A.i.N,{u:A,o:L})},Hs=h.UnboundTypeError=Is("UnboundTypeError");var Ks={__syscall_fcntl64:function(d,m,v){jo=v;try{var A=Fn(d);switch(m){case 0:var L=En();return 0>L?-28:Ms(A,L).X;case 1:case 2:case 6:case 7:return 0;case 3:return A.flags;case 4:return L=En(),A.flags|=L,0;case 5:return L=En(),Bt[L+0>>1]=2,0;case 16:case 8:default:return-28;case 9:return Mt[ti()>>2]=28,-1}}catch(R){if(Wn===void 0||R.name!=="ErrnoError")throw R;return-R.aa}},__syscall_ioctl:function(d,m,v){jo=v;try{var A=Fn(d);switch(m){case 21509:case 21510:case 21511:case 21512:case 21524:case 21515:return A.s?0:-59;case 21505:if(!A.s)return-59;if(A.s.V.bc){m=[3,28,127,21,4,0,1,0,17,19,26,0,18,15,23,22,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];var L=En();Mt[L>>2]=25856,Mt[L+4>>2]=5,Mt[L+8>>2]=191,Mt[L+12>>2]=35387;for(var R=0;32>R;R++)jt[L+R+17|0]=m[R]||0}return 0;case 21506:case 21507:case 21508:if(!A.s)return-59;if(A.s.V.cc)for(L=En(),m=[],R=0;32>R;R++)m.push(jt[L+R+17|0]);return 0;case 21519:return A.s?(L=En(),Mt[L>>2]=0):-59;case 21520:return A.s?-28:-59;case 21531:if(L=En(),!A.m.ac)throw new yt(59);return A.m.ac(A,m,L);case 21523:return A.s?(A.s.V.dc&&(R=[24,80],L=En(),Bt[L>>1]=R[0],Bt[L+2>>1]=R[1]),0):-59;default:return-28}}catch(N){if(Wn===void 0||N.name!=="ErrnoError")throw N;return-N.aa}},__syscall_openat:function(d,m,v,A){jo=A;try{var L=m=m?nn(Zt,m):"";if(L.charAt(0)==="/")m=L;else{var R=d===-100?"/":Fn(d).path;if(L.length==0)throw new yt(44);m=Le(R+"/"+L)}var N=A?En():0;return Ho(m,v,N).X}catch(j){if(Wn===void 0||j.name!=="ErrnoError")throw j;return-j.aa}},_embind_create_inheriting_constructor:function(d,m,v){d=Ce(d),m=ho(m,"wrapper"),v=pn(v);var A=[].slice,L=m.i,R=L.N,N=L.A.N,j=L.A.constructor;for(var J in d=Uo(d,function(){L.A.qb.forEach((function(q){if(this[q]===N[q])throw new Ss(`Pure virtual function ${q} must be implemented in JavaScript`)}).bind(this)),Object.defineProperty(this,"__parent",{value:R}),this.__construct.apply(this,A.call(arguments))}),R.__construct=function(){this===R&&Ut("Pass correct 'this' to __construct");var q=j.implement.apply(void 0,[this].concat(A.call(arguments)));qo(q);var mt=q.g;q.notifyOnDestruction(),mt.ia=!0,Object.defineProperties(this,{g:{value:mt}}),go(this),q=mt.o,q=Or(L,q),kn.hasOwnProperty(q)?Ut(`Tried to register registered instance: ${q}`):kn[q]=this},R.__destruct=function(){this===R&&Ut("Pass correct 'this' to __destruct"),qo(this);var q=this.g.o;q=Or(L,q),kn.hasOwnProperty(q)?delete kn[q]:Ut(`Tried to unregister unregistered instance: ${q}`)},d.prototype=Object.create(R),v)d.prototype[J]=v[J];return wn(d)},_embind_finalize_value_object:function(d){var m=Go[d];delete Go[d];var v=m.Pa,A=m.W,L=m.eb;on([d],L.map(R=>R.Yb).concat(L.map(R=>R.rc)),R=>{var N={};return L.forEach((j,J)=>{var q=R[J],mt=j.Wb,pt=j.Xb,ht=R[J+L.length],wt=j.qc,$t=j.sc;N[j.Sb]={read:dt=>q.fromWireType(mt(pt,dt)),write:(dt,oe)=>{var Y=[];wt($t,dt,ht.toWireType(Y,oe)),vo(Y)}}}),[{name:m.name,fromWireType:function(j){var J,q={};for(J in N)q[J]=N[J].read(j);return A(j),q},toWireType:function(j,J){for(var q in N)if(!(q in J))throw new TypeError(`Missing field: "${q}"`);var mt=v();for(q in N)N[q].write(mt,J[q]);return j!==null&&j.push(A,mt),mt},argPackAdvance:8,readValueFromPointer:wo,K:A}]})},_embind_register_bigint:function(){},_embind_register_bool:function(d,m,v,A,L){var R=Xo(v);yn(d,{name:m=Ce(m),fromWireType:function(N){return!!N},toWireType:function(N,j){return j?A:L},argPackAdvance:8,readValueFromPointer:function(N){if(v===1)var j=jt;else if(v===2)j=Bt;else{if(v!==4)throw new TypeError("Unknown boolean type size: "+m);j=Mt}return this.fromWireType(j[N>>R])},K:null})},_embind_register_class:function(d,m,v,A,L,R,N,j,J,q,mt,pt,ht){mt=Ce(mt),R=We(L,R),j&&(j=We(N,j)),q&&(q=We(J,q)),ht=We(pt,ht);var wt=Ts(mt);jr(wt,function(){Ln(`Cannot construct ${mt} due to unbound types`,[A])}),on([d,m,v],A?[A]:[],function($t){if($t=$t[0],A)var dt=$t.i,oe=dt.N;else oe=On.prototype;$t=Uo(wt,function(){if(Object.getPrototypeOf(this)!==Y)throw new Qn("Use 'new' to construct "+mt);if(ct.$===void 0)throw new Qn(mt+" has no accessible constructor");var be=ct.$[arguments.length];if(be===void 0)throw new Qn(`Tried to invoke ctor of ${mt} with invalid number of parameters (${arguments.length}) - expected (${Object.keys(ct.$).toString()}) parameters instead!`);return be.apply(this,arguments)});var Y=Object.create(oe,{constructor:{value:$t}});$t.prototype=Y;var ct=new ru(mt,$t,Y,ht,dt,R,j,q);ct.A&&(ct.A.oa===void 0&&(ct.A.oa=[]),ct.A.oa.push(ct)),dt=new Tn(mt,ct,!0,!1),oe=new Tn(mt+"*",ct,!1,!1);var Ft=new Tn(mt+" const*",ct,!1,!0);return Fs[d]={pointerType:oe,Kb:Ft},Bs(wt,$t),[dt,oe,Ft]})},_embind_register_class_class_function:function(d,m,v,A,L,R,N){var j=Qo(v,A);m=Ce(m),R=We(L,R),on([],[d],function(J){function q(){Ln(`Cannot call ${mt} due to unbound types`,j)}var mt=`${(J=J[0]).name}.${m}`;m.startsWith("@@")&&(m=Symbol[m.substring(2)]);var pt=J.i.constructor;return pt[m]===void 0?(q.ea=v-1,pt[m]=q):(Hr(pt,m,mt),pt[m].B[v-1]=q),on([],j,function(ht){if(ht=Jo(mt,[ht[0],null].concat(ht.slice(1)),null,R,N),pt[m].B===void 0?(ht.ea=v-1,pt[m]=ht):pt[m].B[v-1]=ht,J.i.oa)for(const wt of J.i.oa)wt.constructor.hasOwnProperty(m)||(wt.constructor[m]=ht);return[]}),[]})},_embind_register_class_class_property:function(d,m,v,A,L,R,N,j){m=Ce(m),R=We(L,R),on([],[d],function(J){var q=`${(J=J[0]).name}.${m}`,mt={get(){Ln(`Cannot access ${q} due to unbound types`,[v])},enumerable:!0,configurable:!0};return mt.set=j?()=>{Ln(`Cannot access ${q} due to unbound types`,[v])}:()=>{Ut(`${q} is a read-only property`)},Object.defineProperty(J.i.constructor,m,mt),on([],[v],function(pt){pt=pt[0];var ht={get:()=>pt.fromWireType(R(A)),enumerable:!0};return j&&(j=We(N,j),ht.set=wt=>{var $t=[];j(A,pt.toWireType($t,wt)),vo($t)}),Object.defineProperty(J.i.constructor,m,ht),[]}),[]})},_embind_register_class_constructor:function(d,m,v,A,L,R){var N=Qo(m,v);L=We(A,L),on([],[d],function(j){var J=`constructor ${(j=j[0]).name}`;if(j.i.$===void 0&&(j.i.$=[]),j.i.$[m-1]!==void 0)throw new Qn(`Cannot register multiple constructors with identical number of parameters (${m-1}) for class '${j.name}'! Overload resolution is currently only performed using the parameter count, not actual type info!`);return j.i.$[m-1]=()=>{Ln(`Cannot construct ${j.name} due to unbound types`,N)},on([],N,function(q){return q.splice(1,0,null),j.i.$[m-1]=Jo(J,q,null,L,R),[]}),[]})},_embind_register_class_function:function(d,m,v,A,L,R,N,j){var J=Qo(v,A);m=Ce(m),R=We(L,R),on([],[d],function(q){function mt(){Ln(`Cannot call ${pt} due to unbound types`,J)}var pt=`${(q=q[0]).name}.${m}`;m.startsWith("@@")&&(m=Symbol[m.substring(2)]),j&&q.i.qb.push(m);var ht=q.i.N,wt=ht[m];return wt===void 0||wt.B===void 0&&wt.className!==q.name&&wt.ea===v-2?(mt.ea=v-2,mt.className=q.name,ht[m]=mt):(Hr(ht,m,pt),ht[m].B[v-2]=mt),on([],J,function($t){return $t=Jo(pt,$t,q,R,N),ht[m].B===void 0?($t.ea=v-2,ht[m]=$t):ht[m].B[v-2]=$t,[]}),[]})},_embind_register_class_property:function(d,m,v,A,L,R,N,j,J,q){m=Ce(m),L=We(A,L),on([],[d],function(mt){var pt=`${(mt=mt[0]).name}.${m}`,ht={get(){Ln(`Cannot access ${pt} due to unbound types`,[v,N])},enumerable:!0,configurable:!0};return ht.set=J?()=>{Ln(`Cannot access ${pt} due to unbound types`,[v,N])}:()=>{Ut(pt+" is a read-only property")},Object.defineProperty(mt.i.N,m,ht),on([],J?[v,N]:[v],function(wt){var $t=wt[0],dt={get(){var Y=js(this,mt,pt+" getter");return $t.fromWireType(L(R,Y))},enumerable:!0};if(J){J=We(j,J);var oe=wt[1];dt.set=function(Y){var ct=js(this,mt,pt+" setter"),Ft=[];J(q,ct,oe.toWireType(Ft,Y)),vo(Ft)}}return Object.defineProperty(mt.i.N,m,dt),[]}),[]})},_embind_register_emval:function(d,m){yn(d,{name:m=Ce(m),fromWireType:function(v){var A=pn(v);return Ur(v),A},toWireType:function(v,A){return wn(A)},argPackAdvance:8,readValueFromPointer:wo,K:null})},_embind_register_enum:function(d,m,v,A){function L(){}v=Xo(v),m=Ce(m),L.values={},yn(d,{name:m,constructor:L,fromWireType:function(R){return this.constructor.values[R]},toWireType:function(R,N){return N.value},argPackAdvance:8,readValueFromPointer:cu(m,v,A),K:null}),jr(m,L)},_embind_register_enum_value:function(d,m,v){var A=ho(d,"enum");m=Ce(m),d=A.constructor,A=Object.create(A.constructor.prototype,{value:{value:v},constructor:{value:Uo(`${A.name}_${m}`,function(){})}}),d.values[v]=A,d[m]=A},_embind_register_float:function(d,m,v){v=Xo(v),yn(d,{name:m=Ce(m),fromWireType:function(A){return A},toWireType:function(A,L){return L},argPackAdvance:8,readValueFromPointer:lu(m,v),K:null})},_embind_register_function:function(d,m,v,A,L,R){var N=Qo(m,v);d=Ce(d),L=We(A,L),jr(d,function(){Ln(`Cannot call ${d} due to unbound types`,N)},m-1),on([],N,function(j){return Bs(d,Jo(d,[j[0],null].concat(j.slice(1)),null,L,R),m-1),[]})},_embind_register_integer:function(d,m,v,A,L){m=Ce(m),L===-1&&(L=4294967295),L=Xo(v);var R=j=>j;if(A===0){var N=32-8*v;R=j=>j<<N>>>N}v=m.includes("unsigned")?function(j,J){return J>>>0}:function(j,J){return J},yn(d,{name:m,fromWireType:R,toWireType:v,argPackAdvance:8,readValueFromPointer:uu(m,L,A!==0),K:null})},_embind_register_memory_view:function(d,m,v){function A(R){R>>=2;var N=qt;return new L(N.buffer,N[R+1],N[R])}var L=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array][m];yn(d,{name:v=Ce(v),fromWireType:A,argPackAdvance:8,readValueFromPointer:A},{$b:!0})},_embind_register_std_string:function(d,m){var v=(m=Ce(m))==="std::string";yn(d,{name:m,fromWireType:function(A){var L=qt[A>>2],R=A+4;if(v)for(var N=R,j=0;j<=L;++j){var J=R+j;if(j==L||Zt[J]==0){if(N=N?nn(Zt,N,J-N):"",q===void 0)var q=N;else q+="\0",q+=N;N=J+1}}else{for(q=Array(L),j=0;j<L;++j)q[j]=String.fromCharCode(Zt[R+j]);q=q.join("")}return In(A),q},toWireType:function(A,L){L instanceof ArrayBuffer&&(L=new Uint8Array(L));var R=typeof L=="string";R||L instanceof Uint8Array||L instanceof Uint8ClampedArray||L instanceof Int8Array||Ut("Cannot pass non-string to std::string");var N=v&&R?an(L):L.length,j=Yr(4+N+1),J=j+4;if(qt[j>>2]=N,v&&R)uo(L,Zt,J,N+1);else if(R)for(R=0;R<N;++R){var q=L.charCodeAt(R);255<q&&(In(J),Ut("String has UTF-16 code units that do not fit in 8 bits")),Zt[J+R]=q}else for(R=0;R<N;++R)Zt[J+R]=L[R];return A!==null&&A.push(In,j),j},argPackAdvance:8,readValueFromPointer:wo,K:function(A){In(A)}})},_embind_register_std_wstring:function(d,m,v){if(v=Ce(v),m===2)var A=du,L=fu,R=mu,N=()=>$e,j=1;else m===4&&(A=pu,L=$u,R=hu,N=()=>qt,j=2);yn(d,{name:v,fromWireType:function(J){for(var q,mt=qt[J>>2],pt=N(),ht=J+4,wt=0;wt<=mt;++wt){var $t=J+4+wt*m;wt!=mt&&pt[$t>>j]!=0||(ht=A(ht,$t-ht),q===void 0?q=ht:(q+="\0",q+=ht),ht=$t+m)}return In(J),q},toWireType:function(J,q){typeof q!="string"&&Ut(`Cannot pass non-string to C++ string type ${v}`);var mt=R(q),pt=Yr(4+mt+m);return qt[pt>>2]=mt>>j,L(q,pt+4,mt+m),J!==null&&J.push(In,pt),pt},argPackAdvance:8,readValueFromPointer:wo,K:function(J){In(J)}})},_embind_register_value_object:function(d,m,v,A,L,R){Go[d]={name:Ce(m),Pa:We(v,A),W:We(L,R),eb:[]}},_embind_register_value_object_field:function(d,m,v,A,L,R,N,j,J,q){Go[d].eb.push({Sb:Ce(m),Yb:v,Wb:We(A,L),Xb:R,rc:N,qc:We(j,J),sc:q})},_embind_register_void:function(d,m){yn(d,{fc:!0,name:m=Ce(m),argPackAdvance:0,fromWireType:function(){},toWireType:function(){}})},_emscripten_get_now_is_monotonic:()=>!0,_emval_as:function(d,m,v){d=pn(d),m=ho(m,"emval::as");var A=[],L=wn(A);return qt[v>>2]=L,m.toWireType(A,d)},_emval_call_method:function(d,m,v,A,L){d=er[d],m=pn(m),v=tr(v);var R=[];return qt[A>>2]=wn(R),d(m,v,R,L)},_emval_call_void_method:function(d,m,v,A){(d=er[d])(m=pn(m),v=tr(v),null,A)},_emval_decref:Ur,_emval_get_method_caller:function(d,m){var v=function(N,j){for(var J=Array(N),q=0;q<N;++q)J[q]=ho(qt[j+4*q>>2],"parameter "+q);return J}(d,m),A=v[0];m=A.name+"_$"+v.slice(1).map(function(N){return N.name}).join("_")+"$";var L=qs[m];if(L!==void 0)return L;var R=Array(d-1);return L=function(N){var j=er.length;return er.push(N),j}((N,j,J,q)=>{for(var mt=0,pt=0;pt<d-1;++pt)R[pt]=v[pt+1].readValueFromPointer(q+mt),mt+=v[pt+1].argPackAdvance;for(N=N[j].apply(N,R),pt=0;pt<d-1;++pt)v[pt+1].Nb&&v[pt+1].Nb(R[pt]);if(!A.fc)return A.toWireType(J,N)}),qs[m]=L},_emval_get_module_property:function(d){return d=tr(d),wn(h[d])},_emval_get_property:function(d,m){return d=pn(d),m=pn(m),wn(d[m])},_emval_incref:function(d){4<d&&(cn.get(d).tb+=1)},_emval_new_cstring:function(d){return wn(tr(d))},_emval_new_object:function(){return wn({})},_emval_run_destructors:function(d){vo(pn(d)),Ur(d)},_emval_set_property:function(d,m,v){d=pn(d),m=pn(m),v=pn(v),d[m]=v},_emval_take_value:function(d,m){return d=(d=ho(d,"_emval_take_value")).readValueFromPointer(m),wn(d)},abort:()=>{Wt("")},emscripten_asm_const_int:(d,m,v)=>{var A;for(Vr.length=0,v>>=2;A=Zt[m++];)v+=A!=105&v,Vr.push(A==105?Mt[v]:ke[v++>>1]),++v;return Te[d].apply(null,Vr)},emscripten_date_now:function(){return Date.now()},emscripten_get_now:()=>performance.now(),emscripten_memcpy_big:(d,m,v)=>Zt.copyWithin(d,m,m+v),emscripten_resize_heap:d=>{var m=Zt.length;if(2147483648<(d>>>=0))return!1;for(var v=1;4>=v;v*=2){var A=m*(1+.2/v);A=Math.min(A,d+100663296);var L=Math;A=Math.max(d,A);t:{L=L.min.call(L,2147483648,A+(65536-A%65536)%65536)-Dt.buffer.byteLength+65535>>>16;try{Dt.grow(L),P();var R=1;break t}catch{}R=void 0}if(R)return!0}return!1},environ_get:(d,m)=>{var v=0;return Ws().forEach(function(A,L){var R=m+v;for(L=qt[d+4*L>>2]=R,R=0;R<A.length;++R)jt[0|L++]=A.charCodeAt(R);jt[0|L]=0,v+=A.length+1}),0},environ_sizes_get:(d,m)=>{var v=Ws();qt[d>>2]=v.length;var A=0;return v.forEach(function(L){A+=L.length+1}),qt[m>>2]=A,0},fd_close:function(d){try{var m=Fn(d);if(m.X===null)throw new yt(8);m.Ma&&(m.Ma=null);try{m.m.close&&m.m.close(m)}catch(v){throw v}finally{Fo[m.X]=null}return m.X=null,0}catch(v){if(Wn===void 0||v.name!=="ErrnoError")throw v;return v.aa}},fd_read:function(d,m,v,A){try{t:{var L=Fn(d);d=m;for(var R,N=m=0;N<v;N++){var j=qt[d>>2],J=qt[d+4>>2];d+=8;var q=L,mt=j,pt=J,ht=R,wt=jt;if(0>pt||0>ht)throw new yt(28);if(q.X===null)throw new yt(8);if((2097155&q.flags)==1)throw new yt(8);if((61440&q.node.mode)==16384)throw new yt(31);if(!q.m.read)throw new yt(28);var $t=ht!==void 0;if($t){if(!q.seekable)throw new yt(70)}else ht=q.position;var dt=q.m.read(q,wt,mt,pt,ht);$t||(q.position+=dt);var oe=dt;if(0>oe){var Y=-1;break t}if(m+=oe,oe<J)break;R!==void 0&&(R+=oe)}Y=m}return qt[A>>2]=Y,0}catch(ct){if(Wn===void 0||ct.name!=="ErrnoError")throw ct;return ct.aa}},fd_seek:function(d,m,v,A,L){m=v+2097152>>>0<4194305-!!m?(m>>>0)+4294967296*v:NaN;try{if(isNaN(m))return 61;var R=Fn(d);return Es(R,m,A),je=[R.position>>>0,(Pe=R.position,1<=+Math.abs(Pe)?0<Pe?+Math.floor(Pe/4294967296)>>>0:~~+Math.ceil((Pe-+(~~Pe>>>0))/4294967296)>>>0:0)],Mt[L>>2]=je[0],Mt[L+4>>2]=je[1],R.Ma&&m===0&&A===0&&(R.Ma=null),0}catch(N){if(Wn===void 0||N.name!=="ErrnoError")throw N;return N.aa}},fd_write:function(d,m,v,A){try{t:{var L=Fn(d);d=m;for(var R,N=m=0;N<v;N++){var j=qt[d>>2],J=qt[d+4>>2];d+=8;var q=L,mt=j,pt=J,ht=R,wt=jt;if(0>pt||0>ht)throw new yt(28);if(q.X===null)throw new yt(8);if(!(2097155&q.flags))throw new yt(8);if((61440&q.node.mode)==16384)throw new yt(31);if(!q.m.write)throw new yt(28);q.seekable&&1024&q.flags&&Es(q,0,2);var $t=ht!==void 0;if($t){if(!q.seekable)throw new yt(70)}else ht=q.position;var dt=q.m.write(q,wt,mt,pt,ht,void 0);$t||(q.position+=dt);var oe=dt;if(0>oe){var Y=-1;break t}m+=oe,R!==void 0&&(R+=oe)}Y=m}return qt[A>>2]=Y,0}catch(ct){if(Wn===void 0||ct.name!=="ErrnoError")throw ct;return ct.aa}},strftime_l:(d,m,v,A)=>((L,R,N,j)=>{function J(Y,ct,Ft){for(Y=typeof Y=="number"?Y.toString():Y||"";Y.length<ct;)Y=Ft[0]+Y;return Y}function q(Y,ct){return J(Y,ct,"0")}function mt(Y,ct){function Ft(rn){return 0>rn?-1:0<rn?1:0}var be;return(be=Ft(Y.getFullYear()-ct.getFullYear()))===0&&(be=Ft(Y.getMonth()-ct.getMonth()))===0&&(be=Ft(Y.getDate()-ct.getDate())),be}function pt(Y){switch(Y.getDay()){case 0:return new Date(Y.getFullYear()-1,11,29);case 1:return Y;case 2:return new Date(Y.getFullYear(),0,3);case 3:return new Date(Y.getFullYear(),0,2);case 4:return new Date(Y.getFullYear(),0,1);case 5:return new Date(Y.getFullYear()-1,11,31);case 6:return new Date(Y.getFullYear()-1,11,30)}}function ht(Y){var ct=Y.ca;for(Y=new Date(new Date(Y.da+1900,0,1).getTime());0<ct;){var Ft=Y.getMonth(),be=(nr(Y.getFullYear())?Vs:Gs)[Ft];if(!(ct>be-Y.getDate())){Y.setDate(Y.getDate()+ct);break}ct-=be-Y.getDate()+1,Y.setDate(1),11>Ft?Y.setMonth(Ft+1):(Y.setMonth(0),Y.setFullYear(Y.getFullYear()+1))}return Ft=new Date(Y.getFullYear()+1,0,4),ct=pt(new Date(Y.getFullYear(),0,4)),Ft=pt(Ft),0>=mt(ct,Y)?0>=mt(Ft,Y)?Y.getFullYear()+1:Y.getFullYear():Y.getFullYear()-1}var wt=Mt[j+40>>2];for(var $t in j={wc:Mt[j>>2],vc:Mt[j+4>>2],Fa:Mt[j+8>>2],Sa:Mt[j+12>>2],Ga:Mt[j+16>>2],da:Mt[j+20>>2],R:Mt[j+24>>2],ca:Mt[j+28>>2],Rc:Mt[j+32>>2],uc:Mt[j+36>>2],xc:wt&&wt?nn(Zt,wt):""},N=N?nn(Zt,N):"",wt={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"})N=N.replace(new RegExp($t,"g"),wt[$t]);var dt="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),oe="January February March April May June July August September October November December".split(" ");for($t in wt={"%a":Y=>dt[Y.R].substring(0,3),"%A":Y=>dt[Y.R],"%b":Y=>oe[Y.Ga].substring(0,3),"%B":Y=>oe[Y.Ga],"%C":Y=>q((Y.da+1900)/100|0,2),"%d":Y=>q(Y.Sa,2),"%e":Y=>J(Y.Sa,2," "),"%g":Y=>ht(Y).toString().substring(2),"%G":Y=>ht(Y),"%H":Y=>q(Y.Fa,2),"%I":Y=>((Y=Y.Fa)==0?Y=12:12<Y&&(Y-=12),q(Y,2)),"%j":Y=>{for(var ct=0,Ft=0;Ft<=Y.Ga-1;ct+=(nr(Y.da+1900)?Vs:Gs)[Ft++]);return q(Y.Sa+ct,3)},"%m":Y=>q(Y.Ga+1,2),"%M":Y=>q(Y.vc,2),"%n":()=>`
`,"%p":Y=>0<=Y.Fa&&12>Y.Fa?"AM":"PM","%S":Y=>q(Y.wc,2),"%t":()=>"	","%u":Y=>Y.R||7,"%U":Y=>q(Math.floor((Y.ca+7-Y.R)/7),2),"%V":Y=>{var ct=Math.floor((Y.ca+7-(Y.R+6)%7)/7);if(2>=(Y.R+371-Y.ca-2)%7&&ct++,ct)ct==53&&((Ft=(Y.R+371-Y.ca)%7)==4||Ft==3&&nr(Y.da)||(ct=1));else{ct=52;var Ft=(Y.R+7-Y.ca-1)%7;(Ft==4||Ft==5&&nr(Y.da%400-1))&&ct++}return q(ct,2)},"%w":Y=>Y.R,"%W":Y=>q(Math.floor((Y.ca+7-(Y.R+6)%7)/7),2),"%y":Y=>(Y.da+1900).toString().substring(2),"%Y":Y=>Y.da+1900,"%z":Y=>{var ct=0<=(Y=Y.uc);return Y=Math.abs(Y)/60,(ct?"+":"-")+("0000"+(Y/60*100+Y%60)).slice(-4)},"%Z":Y=>Y.xc,"%%":()=>"%"},N=N.replace(/%%/g,"\0\0"),wt)N.includes($t)&&(N=N.replace(new RegExp($t,"g"),wt[$t](j)));return($t=ms(N=N.replace(/\0\0/g,"%"),!1)).length>R?0:(jt.set($t,L),$t.length-1)})(d,m,v,A)};(function(){function d(v){if(Rt=v=v.exports,Dt=Rt.memory,P(),w=Rt.__indirect_function_table,z.unshift(Rt.__wasm_call_ctors),lt--,h.monitorRunDependencies&&h.monitorRunDependencies(lt),lt==0&&xt){var A=xt;xt=null,A()}return v}var m={env:Ks,wasi_snapshot_preview1:Ks};if(lt++,h.monitorRunDependencies&&h.monitorRunDependencies(lt),h.instantiateWasm)try{return h.instantiateWasm(m,d)}catch(v){G("Module.instantiateWasm callback failed with error: "+v),g(v)}(function(v,A){var L=Q;return St||typeof WebAssembly.instantiateStreaming!="function"||Et(L)||L.startsWith("file://")||typeof fetch!="function"?he(L,v,A):fetch(L,{credentials:"same-origin"}).then(R=>WebAssembly.instantiateStreaming(R,v).then(A,function(N){return G("wasm streaming compile failed: "+N),G("falling back to ArrayBuffer instantiation"),he(L,v,A)}))})(m,function(v){d(v.instance)}).catch(g)})();var In=d=>(In=Rt.free)(d),Yr=d=>(Yr=Rt.malloc)(d),Zs=h._ma_device__on_notification_unlocked=d=>(Zs=h._ma_device__on_notification_unlocked=Rt.ma_device__on_notification_unlocked)(d);h._ma_malloc_emscripten=(d,m)=>(h._ma_malloc_emscripten=Rt.ma_malloc_emscripten)(d,m),h._ma_free_emscripten=(d,m)=>(h._ma_free_emscripten=Rt.ma_free_emscripten)(d,m);var rr,Js=h._ma_device_process_pcm_frames_capture__webaudio=(d,m,v)=>(Js=h._ma_device_process_pcm_frames_capture__webaudio=Rt.ma_device_process_pcm_frames_capture__webaudio)(d,m,v),Qs=h._ma_device_process_pcm_frames_playback__webaudio=(d,m,v)=>(Qs=h._ma_device_process_pcm_frames_playback__webaudio=Rt.ma_device_process_pcm_frames_playback__webaudio)(d,m,v),ti=()=>(ti=Rt.__errno_location)(),ei=d=>(ei=Rt.__getTypeName)(d);function ni(){function d(){if(!rr&&(rr=!0,h.calledRun=!0,!Xe)){if(h.noFSInit||gs||(gs=!0,ks(),h.stdin=h.stdin,h.stdout=h.stdout,h.stderr=h.stderr,h.stdin?mo("stdin",h.stdin):Nr("/dev/tty","/dev/stdin"),h.stdout?mo("stdout",null,h.stdout):Nr("/dev/tty","/dev/stdout"),h.stderr?mo("stderr",null,h.stderr):Nr("/dev/tty1","/dev/stderr"),Ho("/dev/stdin",0),Ho("/dev/stdout",1),Ho("/dev/stderr",1)),ws=!1,Ke(z),p(h),h.onRuntimeInitialized&&h.onRuntimeInitialized(),h.postRun)for(typeof h.postRun=="function"&&(h.postRun=[h.postRun]);h.postRun.length;){var m=h.postRun.shift();V.unshift(m)}Ke(V)}}if(!(0<lt)){if(h.preRun)for(typeof h.preRun=="function"&&(h.preRun=[h.preRun]);h.preRun.length;)it();Ke(I),0<lt||(h.setStatus?(h.setStatus("Running..."),setTimeout(function(){setTimeout(function(){h.setStatus("")},1),d()},1)):d())}}if(h.__embind_initialize_bindings=()=>(h.__embind_initialize_bindings=Rt._embind_initialize_bindings)(),h.dynCall_iiji=(d,m,v,A,L)=>(h.dynCall_iiji=Rt.dynCall_iiji)(d,m,v,A,L),h.dynCall_jiji=(d,m,v,A,L)=>(h.dynCall_jiji=Rt.dynCall_jiji)(d,m,v,A,L),h.dynCall_iiiji=(d,m,v,A,L,R)=>(h.dynCall_iiiji=Rt.dynCall_iiiji)(d,m,v,A,L,R),h.dynCall_iij=(d,m,v,A)=>(h.dynCall_iij=Rt.dynCall_iij)(d,m,v,A),h.dynCall_jii=(d,m,v)=>(h.dynCall_jii=Rt.dynCall_jii)(d,m,v),h.dynCall_viijii=(d,m,v,A,L,R,N)=>(h.dynCall_viijii=Rt.dynCall_viijii)(d,m,v,A,L,R,N),h.dynCall_iiiiij=(d,m,v,A,L,R,N)=>(h.dynCall_iiiiij=Rt.dynCall_iiiiij)(d,m,v,A,L,R,N),h.dynCall_iiiiijj=(d,m,v,A,L,R,N,j,J)=>(h.dynCall_iiiiijj=Rt.dynCall_iiiiijj)(d,m,v,A,L,R,N,j,J),h.dynCall_iiiiiijj=(d,m,v,A,L,R,N,j,J,q)=>(h.dynCall_iiiiiijj=Rt.dynCall_iiiiiijj)(d,m,v,A,L,R,N,j,J,q),xt=function d(){rr||ni(),rr||(xt=d)},h.preInit)for(typeof h.preInit=="function"&&(h.preInit=[h.preInit]);0<h.preInit.length;)h.preInit.pop()();return ni(),u.ready});const l=a},o=>{o.exports=JSON.parse(`{"name":"@rive-app/canvas","version":"2.26.4","description":"Rive's canvas based web api.","main":"rive.js","homepage":"https://rive.app","repository":{"type":"git","url":"https://github.com/rive-app/rive-wasm/tree/master/js"},"keywords":["rive","animation"],"author":"Rive","contributors":["Luigi Rosso <luigi@rive.app> (https://rive.app)","Maxwell Talbot <max@rive.app> (https://rive.app)","Arthur Vivian <arthur@rive.app> (https://rive.app)","Umberto Sonnino <umberto@rive.app> (https://rive.app)","Matthew Sullivan <matt.j.sullivan@gmail.com> (mailto:matt.j.sullivan@gmail.com)"],"license":"MIT","files":["rive.js","rive.js.map","rive.wasm","rive_fallback.wasm","rive.d.ts","rive_advanced.mjs.d.ts"],"typings":"rive.d.ts","dependencies":{},"browser":{"fs":false,"path":false}}`)},(o,r,i)=>{i.r(r),i.d(r,{Animation:()=>c.Animation});var c=i(4)},(o,r,i)=>{i.r(r),i.d(r,{Animation:()=>c});var c=function(){function a(l,u,p,g){this.animation=l,this.artboard=u,this.playing=g,this.loopCount=0,this.scrubTo=null,this.instance=new p.LinearAnimationInstance(l,u)}return Object.defineProperty(a.prototype,"name",{get:function(){return this.animation.name},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"time",{get:function(){return this.instance.time},set:function(l){this.instance.time=l},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"loopValue",{get:function(){return this.animation.loopValue},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"needsScrub",{get:function(){return this.scrubTo!==null},enumerable:!1,configurable:!0}),a.prototype.advance=function(l){this.scrubTo===null?this.instance.advance(l):(this.instance.time=0,this.instance.advance(this.scrubTo),this.scrubTo=null)},a.prototype.apply=function(l){this.instance.apply(l)},a.prototype.cleanup=function(){this.instance.delete()},a}()},(o,r,i)=>{i.r(r),i.d(r,{BLANK_URL:()=>a.BLANK_URL,registerTouchInteractions:()=>c.registerTouchInteractions,sanitizeUrl:()=>a.sanitizeUrl});var c=i(6),a=i(7)},(o,r,i)=>{i.r(r),i.d(r,{registerTouchInteractions:()=>c});var c=function(a){var l=a.canvas,u=a.artboard,p=a.stateMachines,g=p===void 0?[]:p,h=a.renderer,k=a.rive,T=a.fit,b=a.alignment,S=a.isTouchScrollEnabled,H=S!==void 0&&S,O=a.layoutScaleFactor,B=O===void 0?1:O;if(!(l&&g.length&&h&&k&&u&&typeof window<"u"))return null;var ut=null,kt=!1,rt=(function(vt){if(kt&&vt instanceof MouseEvent)vt.type=="mouseup"&&(kt=!1);else{kt=H&&vt.type==="touchend"&&ut==="touchstart",ut=vt.type;var et=vt.currentTarget.getBoundingClientRect(),At=function(V,it){var Q,lt;return["touchstart","touchmove"].indexOf(V.type)>-1&&(!((Q=V.touches)===null||Q===void 0)&&Q.length)?(it||V.preventDefault(),{clientX:V.touches[0].clientX,clientY:V.touches[0].clientY}):V.type==="touchend"&&(!((lt=V.changedTouches)===null||lt===void 0)&&lt.length)?{clientX:V.changedTouches[0].clientX,clientY:V.changedTouches[0].clientY}:{clientX:V.clientX,clientY:V.clientY}}(vt,H),St=At.clientX,It=At.clientY;if(St||It){var G=St-et.left,Dt=It-et.top,Rt=k.computeAlignment(T,b,{minX:0,minY:0,maxX:et.width,maxY:et.height},u.bounds,B),jt=new k.Mat2D;Rt.invert(jt);var Zt=new k.Vec2D(G,Dt),Bt=k.mapXY(jt,Zt),$e=Bt.x(),Mt=Bt.y();switch(Bt.delete(),jt.delete(),Zt.delete(),Rt.delete(),vt.type){case"mouseout":for(var qt=0,me=g;qt<me.length;qt++)me[qt].pointerMove($e,Mt);break;case"touchmove":case"mouseover":case"mousemove":for(var ke=0,Xe=g;ke<Xe.length;ke++)Xe[ke].pointerMove($e,Mt);break;case"touchstart":case"mousedown":for(var P=0,w=g;P<w.length;P++)w[P].pointerDown($e,Mt);break;case"touchend":case"mouseup":for(var I=0,z=g;I<z.length;I++)z[I].pointerUp($e,Mt)}}}}).bind(void 0);return l.addEventListener("mouseover",rt),l.addEventListener("mouseout",rt),l.addEventListener("mousemove",rt),l.addEventListener("mousedown",rt),l.addEventListener("mouseup",rt),l.addEventListener("touchmove",rt,{passive:H}),l.addEventListener("touchstart",rt,{passive:H}),l.addEventListener("touchend",rt),function(){l.removeEventListener("mouseover",rt),l.removeEventListener("mouseout",rt),l.removeEventListener("mousemove",rt),l.removeEventListener("mousedown",rt),l.removeEventListener("mouseup",rt),l.removeEventListener("touchmove",rt),l.removeEventListener("touchstart",rt),l.removeEventListener("touchend",rt)}}},(o,r,i)=>{i.r(r),i.d(r,{BLANK_URL:()=>h,sanitizeUrl:()=>k});var c=/^([^\w]*)(javascript|data|vbscript)/im,a=/&#(\w+)(^\w|;)?/g,l=/&(newline|tab);/gi,u=/[\u0000-\u001F\u007F-\u009F\u2000-\u200D\uFEFF]/gim,p=/^.+(:|&colon;)/gim,g=[".","/"],h="about:blank";function k(T){if(!T)return h;var b,S=(b=T,b.replace(u,"").replace(a,function(B,ut){return String.fromCharCode(ut)})).replace(l,"").replace(u,"").trim();if(!S)return h;if(function(B){return g.indexOf(B[0])>-1}(S))return S;var H=S.match(p);if(!H)return S;var O=H[0];return c.test(O)?h:S}}],t={};function n(o){var r=t[o];if(r!==void 0)return r.exports;var i=t[o]={exports:{}};return s[o](i,i.exports,n),i.exports}n.d=(o,r)=>{for(var i in r)n.o(r,i)&&!n.o(o,i)&&Object.defineProperty(o,i,{enumerable:!0,get:r[i]})},n.o=(o,r)=>Object.prototype.hasOwnProperty.call(o,r),n.r=o=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(o,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(o,"__esModule",{value:!0})};var e={};return(()=>{n.r(e),n.d(e,{Alignment:()=>i,EventType:()=>B,Fit:()=>r,Layout:()=>b,LoopType:()=>ut,Rive:()=>Bt,RiveEventType:()=>H,RiveFile:()=>Zt,RuntimeLoader:()=>S,StateMachineInput:()=>O,StateMachineInputType:()=>T,Testing:()=>qt,decodeAudio:()=>me,decodeFont:()=>Xe,decodeImage:()=>ke});var o,r,i,c=n(1),a=n(2),l=n(3),u=n(5),p=(o=function(P,w){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(I,z){I.__proto__=z}||function(I,z){for(var V in z)Object.prototype.hasOwnProperty.call(z,V)&&(I[V]=z[V])},o(P,w)},function(P,w){if(typeof w!="function"&&w!==null)throw new TypeError("Class extends value "+String(w)+" is not a constructor or null");function I(){this.constructor=P}o(P,w),P.prototype=w===null?Object.create(w):(I.prototype=w.prototype,new I)}),g=function(P,w,I,z){return new(I||(I=Promise))(function(V,it){function Q(Wt){try{xt(z.next(Wt))}catch(Et){it(Et)}}function lt(Wt){try{xt(z.throw(Wt))}catch(Et){it(Et)}}function xt(Wt){var Et;Wt.done?V(Wt.value):(Et=Wt.value,Et instanceof I?Et:new I(function(ye){ye(Et)})).then(Q,lt)}xt((z=z.apply(P,w||[])).next())})},h=function(P,w){var I,z,V,it={label:0,sent:function(){if(1&V[0])throw V[1];return V[1]},trys:[],ops:[]},Q=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return Q.next=lt(0),Q.throw=lt(1),Q.return=lt(2),typeof Symbol=="function"&&(Q[Symbol.iterator]=function(){return this}),Q;function lt(xt){return function(Wt){return function(Et){if(I)throw new TypeError("Generator is already executing.");for(;Q&&(Q=0,Et[0]&&(it=0)),it;)try{if(I=1,z&&(V=2&Et[0]?z.return:Et[0]?z.throw||((V=z.return)&&V.call(z),0):z.next)&&!(V=V.call(z,Et[1])).done)return V;switch(z=0,V&&(Et=[2&Et[0],V.value]),Et[0]){case 0:case 1:V=Et;break;case 4:return it.label++,{value:Et[1],done:!1};case 5:it.label++,z=Et[1],Et=[0];continue;case 7:Et=it.ops.pop(),it.trys.pop();continue;default:if(!((V=(V=it.trys).length>0&&V[V.length-1])||Et[0]!==6&&Et[0]!==2)){it=0;continue}if(Et[0]===3&&(!V||Et[1]>V[0]&&Et[1]<V[3])){it.label=Et[1];break}if(Et[0]===6&&it.label<V[1]){it.label=V[1],V=Et;break}if(V&&it.label<V[2]){it.label=V[2],it.ops.push(Et);break}V[2]&&it.ops.pop(),it.trys.pop();continue}Et=w.call(P,it)}catch(ye){Et=[6,ye],z=0}finally{I=V=0}if(5&Et[0])throw Et[1];return{value:Et[0]?Et[1]:void 0,done:!0}}([xt,Wt])}}},k=function(P){function w(){var I=P!==null&&P.apply(this,arguments)||this;return I.isHandledError=!0,I}return p(w,P),w}(Error);(function(P){P.Cover="cover",P.Contain="contain",P.Fill="fill",P.FitWidth="fitWidth",P.FitHeight="fitHeight",P.None="none",P.ScaleDown="scaleDown",P.Layout="layout"})(r||(r={})),function(P){P.Center="center",P.TopLeft="topLeft",P.TopCenter="topCenter",P.TopRight="topRight",P.CenterLeft="centerLeft",P.CenterRight="centerRight",P.BottomLeft="bottomLeft",P.BottomCenter="bottomCenter",P.BottomRight="bottomRight"}(i||(i={}));var T,b=function(){function P(w){var I,z,V,it,Q,lt,xt;this.fit=(I=w==null?void 0:w.fit)!==null&&I!==void 0?I:r.Contain,this.alignment=(z=w==null?void 0:w.alignment)!==null&&z!==void 0?z:i.Center,this.layoutScaleFactor=(V=w==null?void 0:w.layoutScaleFactor)!==null&&V!==void 0?V:1,this.minX=(it=w==null?void 0:w.minX)!==null&&it!==void 0?it:0,this.minY=(Q=w==null?void 0:w.minY)!==null&&Q!==void 0?Q:0,this.maxX=(lt=w==null?void 0:w.maxX)!==null&&lt!==void 0?lt:0,this.maxY=(xt=w==null?void 0:w.maxY)!==null&&xt!==void 0?xt:0}return P.new=function(w){var I=w.fit,z=w.alignment,V=w.minX,it=w.minY,Q=w.maxX,lt=w.maxY;return console.warn("This function is deprecated: please use `new Layout({})` instead"),new P({fit:I,alignment:z,minX:V,minY:it,maxX:Q,maxY:lt})},P.prototype.copyWith=function(w){var I=w.fit,z=w.alignment,V=w.layoutScaleFactor,it=w.minX,Q=w.minY,lt=w.maxX,xt=w.maxY;return new P({fit:I??this.fit,alignment:z??this.alignment,layoutScaleFactor:V??this.layoutScaleFactor,minX:it??this.minX,minY:Q??this.minY,maxX:lt??this.maxX,maxY:xt??this.maxY})},P.prototype.runtimeFit=function(w){return this.cachedRuntimeFit?this.cachedRuntimeFit:(I=this.fit===r.Cover?w.Fit.cover:this.fit===r.Contain?w.Fit.contain:this.fit===r.Fill?w.Fit.fill:this.fit===r.FitWidth?w.Fit.fitWidth:this.fit===r.FitHeight?w.Fit.fitHeight:this.fit===r.ScaleDown?w.Fit.scaleDown:this.fit===r.Layout?w.Fit.layout:w.Fit.none,this.cachedRuntimeFit=I,I);var I},P.prototype.runtimeAlignment=function(w){return this.cachedRuntimeAlignment?this.cachedRuntimeAlignment:(I=this.alignment===i.TopLeft?w.Alignment.topLeft:this.alignment===i.TopCenter?w.Alignment.topCenter:this.alignment===i.TopRight?w.Alignment.topRight:this.alignment===i.CenterLeft?w.Alignment.centerLeft:this.alignment===i.CenterRight?w.Alignment.centerRight:this.alignment===i.BottomLeft?w.Alignment.bottomLeft:this.alignment===i.BottomCenter?w.Alignment.bottomCenter:this.alignment===i.BottomRight?w.Alignment.bottomRight:w.Alignment.center,this.cachedRuntimeAlignment=I,I);var I},P}(),S=function(){function P(){}return P.loadRuntime=function(){c.default({locateFile:function(){return P.wasmURL}}).then(function(w){var I;for(P.runtime=w;P.callBackQueue.length>0;)(I=P.callBackQueue.shift())===null||I===void 0||I(P.runtime)}).catch(function(w){var I={message:(w==null?void 0:w.message)||"Unknown error",type:(w==null?void 0:w.name)||"Error",wasmError:w instanceof WebAssembly.CompileError||w instanceof WebAssembly.RuntimeError,originalError:w};console.debug("Rive WASM load error details:",I);var z="https://cdn.jsdelivr.net/npm/".concat(a.name,"@").concat(a.version,"/rive_fallback.wasm");if(P.wasmURL.toLowerCase()!==z)console.warn("Failed to load WASM from ".concat(P.wasmURL," (").concat(I.message,"), trying jsdelivr as a backup")),P.setWasmUrl(z),P.loadRuntime();else{var V=["Could not load Rive WASM file from ".concat(P.wasmURL," or ").concat(z,"."),"Possible reasons:","- Network connection is down","- WebAssembly is not supported in this environment","- The WASM file is corrupted or incompatible",`
Error details:`,"- Type: ".concat(I.type),"- Message: ".concat(I.message),"- WebAssembly-specific error: ".concat(I.wasmError),`
To resolve, you may need to:`,"1. Check your network connection","2. Set a new WASM source via RuntimeLoader.setWasmUrl()","3. Call RuntimeLoader.loadRuntime() again"].join(`
`);console.error(V)}})},P.getInstance=function(w){P.isLoading||(P.isLoading=!0,P.loadRuntime()),P.runtime?w(P.runtime):P.callBackQueue.push(w)},P.awaitInstance=function(){return new Promise(function(w){return P.getInstance(function(I){return w(I)})})},P.setWasmUrl=function(w){P.wasmURL=w},P.getWasmUrl=function(){return P.wasmURL},P.isLoading=!1,P.callBackQueue=[],P.wasmURL="https://unpkg.com/".concat(a.name,"@").concat(a.version,"/rive.wasm"),P}();(function(P){P[P.Number=56]="Number",P[P.Trigger=58]="Trigger",P[P.Boolean=59]="Boolean"})(T||(T={}));var H,O=function(){function P(w,I){this.type=w,this.runtimeInput=I}return Object.defineProperty(P.prototype,"name",{get:function(){return this.runtimeInput.name},enumerable:!1,configurable:!0}),Object.defineProperty(P.prototype,"value",{get:function(){return this.runtimeInput.value},set:function(w){this.runtimeInput.value=w},enumerable:!1,configurable:!0}),P.prototype.fire=function(){this.type===T.Trigger&&this.runtimeInput.fire()},P.prototype.delete=function(){this.runtimeInput=null},P}();(function(P){P[P.General=128]="General",P[P.OpenUrl=131]="OpenUrl"})(H||(H={}));var B,ut,kt=function(){function P(w,I,z,V){this.stateMachine=w,this.playing=z,this.artboard=V,this.inputs=[],this.instance=new I.StateMachineInstance(w,V),this.initInputs(I)}return Object.defineProperty(P.prototype,"name",{get:function(){return this.stateMachine.name},enumerable:!1,configurable:!0}),Object.defineProperty(P.prototype,"statesChanged",{get:function(){for(var w=[],I=0;I<this.instance.stateChangedCount();I++)w.push(this.instance.stateChangedNameByIndex(I));return w},enumerable:!1,configurable:!0}),P.prototype.advance=function(w){this.instance.advance(w)},P.prototype.advanceAndApply=function(w){this.instance.advanceAndApply(w)},P.prototype.reportedEventCount=function(){return this.instance.reportedEventCount()},P.prototype.reportedEventAt=function(w){return this.instance.reportedEventAt(w)},P.prototype.initInputs=function(w){for(var I=0;I<this.instance.inputCount();I++){var z=this.instance.input(I);this.inputs.push(this.mapRuntimeInput(z,w))}},P.prototype.mapRuntimeInput=function(w,I){return w.type===I.SMIInput.bool?new O(T.Boolean,w.asBool()):w.type===I.SMIInput.number?new O(T.Number,w.asNumber()):w.type===I.SMIInput.trigger?new O(T.Trigger,w.asTrigger()):void 0},P.prototype.cleanup=function(){this.inputs.forEach(function(w){w.delete()}),this.inputs.length=0,this.instance.delete()},P}(),rt=function(){function P(w,I,z,V,it){V===void 0&&(V=[]),it===void 0&&(it=[]),this.runtime=w,this.artboard=I,this.eventManager=z,this.animations=V,this.stateMachines=it}return P.prototype.add=function(w,I,z){if(z===void 0&&(z=!0),(w=Mt(w)).length===0)this.animations.forEach(function(he){return he.playing=I}),this.stateMachines.forEach(function(he){return he.playing=I});else for(var V=this.animations.map(function(he){return he.name}),it=this.stateMachines.map(function(he){return he.name}),Q=0;Q<w.length;Q++){var lt=V.indexOf(w[Q]),xt=it.indexOf(w[Q]);if(lt>=0||xt>=0)lt>=0?this.animations[lt].playing=I:this.stateMachines[xt].playing=I;else{var Wt=this.artboard.animationByName(w[Q]);if(Wt){var Et=new l.Animation(Wt,this.artboard,this.runtime,I);Et.advance(0),Et.apply(1),this.animations.push(Et)}else{var ye=this.artboard.stateMachineByName(w[Q]);if(ye){var Tt=new kt(ye,this.runtime,I,this.artboard);this.stateMachines.push(Tt)}}}}return z&&(I?this.eventManager.fire({type:B.Play,data:this.playing}):this.eventManager.fire({type:B.Pause,data:this.paused})),I?this.playing:this.paused},P.prototype.initLinearAnimations=function(w,I){for(var z=this.animations.map(function(xt){return xt.name}),V=0;V<w.length;V++){var it=z.indexOf(w[V]);if(it>=0)this.animations[it].playing=I;else{var Q=this.artboard.animationByName(w[V]);if(Q){var lt=new l.Animation(Q,this.artboard,this.runtime,I);lt.advance(0),lt.apply(1),this.animations.push(lt)}}}},P.prototype.initStateMachines=function(w,I){for(var z=this.stateMachines.map(function(xt){return xt.name}),V=0;V<w.length;V++){var it=z.indexOf(w[V]);if(it>=0)this.stateMachines[it].playing=I;else{var Q=this.artboard.stateMachineByName(w[V]);if(Q){var lt=new kt(Q,this.runtime,I,this.artboard);this.stateMachines.push(lt)}else this.initLinearAnimations([w[V]],I)}}},P.prototype.play=function(w){return this.add(w,!0)},P.prototype.pause=function(w){return this.add(w,!1)},P.prototype.scrub=function(w,I){var z=this.animations.filter(function(V){return w.includes(V.name)});return z.forEach(function(V){return V.scrubTo=I}),z.map(function(V){return V.name})},Object.defineProperty(P.prototype,"playing",{get:function(){return this.animations.filter(function(w){return w.playing}).map(function(w){return w.name}).concat(this.stateMachines.filter(function(w){return w.playing}).map(function(w){return w.name}))},enumerable:!1,configurable:!0}),Object.defineProperty(P.prototype,"paused",{get:function(){return this.animations.filter(function(w){return!w.playing}).map(function(w){return w.name}).concat(this.stateMachines.filter(function(w){return!w.playing}).map(function(w){return w.name}))},enumerable:!1,configurable:!0}),P.prototype.stop=function(w){var I=this,z=[];if((w=Mt(w)).length===0)z=this.animations.map(function(Q){return Q.name}).concat(this.stateMachines.map(function(Q){return Q.name})),this.animations.forEach(function(Q){return Q.cleanup()}),this.stateMachines.forEach(function(Q){return Q.cleanup()}),this.animations.splice(0,this.animations.length),this.stateMachines.splice(0,this.stateMachines.length);else{var V=this.animations.filter(function(Q){return w.includes(Q.name)});V.forEach(function(Q){Q.cleanup(),I.animations.splice(I.animations.indexOf(Q),1)});var it=this.stateMachines.filter(function(Q){return w.includes(Q.name)});it.forEach(function(Q){Q.cleanup(),I.stateMachines.splice(I.stateMachines.indexOf(Q),1)}),z=V.map(function(Q){return Q.name}).concat(it.map(function(Q){return Q.name}))}return this.eventManager.fire({type:B.Stop,data:z}),z},Object.defineProperty(P.prototype,"isPlaying",{get:function(){return this.animations.reduce(function(w,I){return w||I.playing},!1)||this.stateMachines.reduce(function(w,I){return w||I.playing},!1)},enumerable:!1,configurable:!0}),Object.defineProperty(P.prototype,"isPaused",{get:function(){return!this.isPlaying&&(this.animations.length>0||this.stateMachines.length>0)},enumerable:!1,configurable:!0}),Object.defineProperty(P.prototype,"isStopped",{get:function(){return this.animations.length===0&&this.stateMachines.length===0},enumerable:!1,configurable:!0}),P.prototype.atLeastOne=function(w,I){var z;return I===void 0&&(I=!0),this.animations.length===0&&this.stateMachines.length===0&&(this.artboard.animationCount()>0?this.add([z=this.artboard.animationByIndex(0).name],w,I):this.artboard.stateMachineCount()>0&&this.add([z=this.artboard.stateMachineByIndex(0).name],w,I)),z},P.prototype.handleLooping=function(){for(var w=0,I=this.animations.filter(function(V){return V.playing});w<I.length;w++){var z=I[w];z.loopValue===0&&z.loopCount?(z.loopCount=0,this.stop(z.name)):z.loopValue===1&&z.loopCount?(this.eventManager.fire({type:B.Loop,data:{animation:z.name,type:ut.Loop}}),z.loopCount=0):z.loopValue===2&&z.loopCount>1&&(this.eventManager.fire({type:B.Loop,data:{animation:z.name,type:ut.PingPong}}),z.loopCount=0)}},P.prototype.handleStateChanges=function(){for(var w=[],I=0,z=this.stateMachines.filter(function(it){return it.playing});I<z.length;I++){var V=z[I];w.push.apply(w,V.statesChanged)}w.length>0&&this.eventManager.fire({type:B.StateChange,data:w})},P.prototype.handleAdvancing=function(w){this.eventManager.fire({type:B.Advance,data:w})},P}();(function(P){P.Load="load",P.LoadError="loaderror",P.Play="play",P.Pause="pause",P.Stop="stop",P.Loop="loop",P.Draw="draw",P.Advance="advance",P.StateChange="statechange",P.RiveEvent="riveevent",P.AudioStatusChange="audiostatuschange"})(B||(B={})),function(P){P.OneShot="oneshot",P.Loop="loop",P.PingPong="pingpong"}(ut||(ut={}));var vt,et=function(){function P(w){w===void 0&&(w=[]),this.listeners=w}return P.prototype.getListeners=function(w){return this.listeners.filter(function(I){return I.type===w})},P.prototype.add=function(w){this.listeners.includes(w)||this.listeners.push(w)},P.prototype.remove=function(w){for(var I=0;I<this.listeners.length;I++){var z=this.listeners[I];if(z.type===w.type&&z.callback===w.callback){this.listeners.splice(I,1);break}}},P.prototype.removeAll=function(w){var I=this;w?this.listeners.filter(function(z){return z.type===w}).forEach(function(z){return I.remove(z)}):this.listeners.splice(0,this.listeners.length)},P.prototype.fire=function(w){this.getListeners(w.type).forEach(function(I){return I.callback(w)})},P}(),At=function(){function P(w){this.eventManager=w,this.queue=[]}return P.prototype.add=function(w){this.queue.push(w)},P.prototype.process=function(){for(;this.queue.length>0;){var w=this.queue.shift();w!=null&&w.action&&w.action(),w!=null&&w.event&&this.eventManager.fire(w.event)}},P}();(function(P){P[P.AVAILABLE=0]="AVAILABLE",P[P.UNAVAILABLE=1]="UNAVAILABLE"})(vt||(vt={}));var St=function(P){function w(){var I=P!==null&&P.apply(this,arguments)||this;return I._started=!1,I._enabled=!1,I._status=vt.UNAVAILABLE,I}return p(w,P),w.prototype.delay=function(I){return g(this,void 0,void 0,function(){return h(this,function(z){return[2,new Promise(function(V){return setTimeout(V,I)})]})})},w.prototype.timeout=function(){return g(this,void 0,void 0,function(){return h(this,function(I){return[2,new Promise(function(z,V){return setTimeout(V,50)})]})})},w.prototype.reportToListeners=function(){this.fire({type:B.AudioStatusChange}),this.removeAll()},w.prototype.enableAudio=function(){return g(this,void 0,void 0,function(){return h(this,function(I){return this._enabled||(this._enabled=!0,this._status=vt.AVAILABLE,this.reportToListeners()),[2]})})},w.prototype.testAudio=function(){return g(this,void 0,void 0,function(){return h(this,function(I){switch(I.label){case 0:if(this._status!==vt.UNAVAILABLE||this._audioContext===null)return[3,4];I.label=1;case 1:return I.trys.push([1,3,,4]),[4,Promise.race([this._audioContext.resume(),this.timeout()])];case 2:return I.sent(),this.enableAudio(),[3,4];case 3:return I.sent(),[3,4];case 4:return[2]}})})},w.prototype._establishAudio=function(){return g(this,void 0,void 0,function(){return h(this,function(I){switch(I.label){case 0:return this._started?[3,5]:(this._started=!0,typeof window<"u"?[3,1]:(this.enableAudio(),[3,5]));case 1:this._audioContext=new AudioContext,this.listenForUserAction(),I.label=2;case 2:return this._status!==vt.UNAVAILABLE?[3,5]:[4,this.testAudio()];case 3:return I.sent(),[4,this.delay(1e3)];case 4:return I.sent(),[3,2];case 5:return[2]}})})},w.prototype.listenForUserAction=function(){var I=this;document.addEventListener("pointerdown",function(){return g(I,void 0,void 0,function(){return h(this,function(z){return this.enableAudio(),[2]})})},{once:!0})},w.prototype.establishAudio=function(){return g(this,void 0,void 0,function(){return h(this,function(I){return this._establishAudio(),[2]})})},Object.defineProperty(w.prototype,"systemVolume",{get:function(){return this._status===vt.UNAVAILABLE?(this.testAudio(),0):1},enumerable:!1,configurable:!0}),Object.defineProperty(w.prototype,"status",{get:function(){return this._status},enumerable:!1,configurable:!0}),w}(et),It=new St,G=function(){function P(){}return P.prototype.observe=function(){},P.prototype.unobserve=function(){},P.prototype.disconnect=function(){},P}(),Dt=globalThis.ResizeObserver||G,Rt=function(){function P(){var w=this;this._elementsMap=new Map,this._onObservedEntry=function(I){var z=w._elementsMap.get(I.target);z!==null?z.onResize(I.target.clientWidth==0||I.target.clientHeight==0):w._resizeObserver.unobserve(I.target)},this._onObserved=function(I){I.forEach(w._onObservedEntry)},this._resizeObserver=new Dt(this._onObserved)}return P.prototype.add=function(w,I){var z={onResize:I,element:w};return this._elementsMap.set(w,z),this._resizeObserver.observe(w),z},P.prototype.remove=function(w){this._resizeObserver.unobserve(w.element),this._elementsMap.delete(w.element)},P}(),jt=new Rt,Zt=function(){function P(w){this.enableRiveAssetCDN=!0,this.referenceCount=0,this.destroyed=!1,this.src=w.src,this.buffer=w.buffer,w.assetLoader&&(this.assetLoader=w.assetLoader),this.enableRiveAssetCDN=typeof w.enableRiveAssetCDN!="boolean"||w.enableRiveAssetCDN,this.eventManager=new et,w.onLoad&&this.on(B.Load,w.onLoad),w.onLoadError&&this.on(B.LoadError,w.onLoadError)}return P.prototype.initData=function(){return g(this,void 0,void 0,function(){var w,I,z,V;return h(this,function(it){switch(it.label){case 0:return this.src?(w=this,[4,$e(this.src)]):[3,2];case 1:w.buffer=it.sent(),it.label=2;case 2:return this.destroyed?[2]:(this.assetLoader&&(I=new this.runtime.CustomFileAssetLoader({loadContents:this.assetLoader})),z=this,[4,this.runtime.load(new Uint8Array(this.buffer),I,this.enableRiveAssetCDN)]);case 3:if(z.file=it.sent(),this.destroyed)return(V=this.file)===null||V===void 0||V.delete(),this.file=null,[2];if(this.file===null)throw this.eventManager.fire({type:B.LoadError,data:null}),new Error(P.fileLoadErrorMessage);return this.eventManager.fire({type:B.Load,data:this}),[2]}})})},P.prototype.init=function(){return g(this,void 0,void 0,function(){var w;return h(this,function(I){switch(I.label){case 0:if(!this.src&&!this.buffer)throw new Error(P.missingErrorMessage);return w=this,[4,S.awaitInstance()];case 1:return w.runtime=I.sent(),this.destroyed?[2]:[4,this.initData()];case 2:return I.sent(),[2]}})})},P.prototype.on=function(w,I){this.eventManager.add({type:w,callback:I})},P.prototype.off=function(w,I){this.eventManager.remove({type:w,callback:I})},P.prototype.cleanup=function(){var w;this.referenceCount-=1,this.referenceCount<=0&&(this.removeAllRiveEventListeners(),(w=this.file)===null||w===void 0||w.delete(),this.file=null,this.destroyed=!0)},P.prototype.removeAllRiveEventListeners=function(w){this.eventManager.removeAll(w)},P.prototype.getInstance=function(){if(this.file!==null)return this.referenceCount+=1,this.file},P.missingErrorMessage="Rive source file or data buffer required",P.fileLoadErrorMessage="The file failed to load",P}(),Bt=function(){function P(w){var I,z=this;this.loaded=!1,this.destroyed=!1,this._observed=null,this.readyForPlaying=!1,this.artboard=null,this.eventCleanup=null,this.shouldDisableRiveListeners=!1,this.automaticallyHandleEvents=!1,this.enableRiveAssetCDN=!0,this._volume=1,this._artboardWidth=void 0,this._artboardHeight=void 0,this._devicePixelRatioUsed=1,this._hasZeroSize=!1,this._audioEventListener=null,this._boundDraw=null,this.durations=[],this.frameTimes=[],this.frameCount=0,this.isTouchScrollEnabled=!1,this.onCanvasResize=function(V){var it=z._hasZeroSize!==V;z._hasZeroSize=V,V?z._layout.maxX&&z._layout.maxY||z.resizeToCanvas():it&&z.resizeDrawingSurfaceToCanvas()},this.renderSecondTimer=0,this._boundDraw=this.draw.bind(this),this.canvas=w.canvas,w.canvas.constructor===HTMLCanvasElement&&(this._observed=jt.add(this.canvas,this.onCanvasResize)),this.src=w.src,this.buffer=w.buffer,this.riveFile=w.riveFile,this.layout=(I=w.layout)!==null&&I!==void 0?I:new b,this.shouldDisableRiveListeners=!!w.shouldDisableRiveListeners,this.isTouchScrollEnabled=!!w.isTouchScrollEnabled,this.automaticallyHandleEvents=!!w.automaticallyHandleEvents,this.enableRiveAssetCDN=w.enableRiveAssetCDN===void 0||w.enableRiveAssetCDN,this.eventManager=new et,w.onLoad&&this.on(B.Load,w.onLoad),w.onLoadError&&this.on(B.LoadError,w.onLoadError),w.onPlay&&this.on(B.Play,w.onPlay),w.onPause&&this.on(B.Pause,w.onPause),w.onStop&&this.on(B.Stop,w.onStop),w.onLoop&&this.on(B.Loop,w.onLoop),w.onStateChange&&this.on(B.StateChange,w.onStateChange),w.onAdvance&&this.on(B.Advance,w.onAdvance),w.onload&&!w.onLoad&&this.on(B.Load,w.onload),w.onloaderror&&!w.onLoadError&&this.on(B.LoadError,w.onloaderror),w.onplay&&!w.onPlay&&this.on(B.Play,w.onplay),w.onpause&&!w.onPause&&this.on(B.Pause,w.onpause),w.onstop&&!w.onStop&&this.on(B.Stop,w.onstop),w.onloop&&!w.onLoop&&this.on(B.Loop,w.onloop),w.onstatechange&&!w.onStateChange&&this.on(B.StateChange,w.onstatechange),w.assetLoader&&(this.assetLoader=w.assetLoader),this.taskQueue=new At(this.eventManager),this.init({src:this.src,buffer:this.buffer,riveFile:this.riveFile,autoplay:w.autoplay,animations:w.animations,stateMachines:w.stateMachines,artboard:w.artboard,useOffscreenRenderer:w.useOffscreenRenderer})}return P.new=function(w){return console.warn("This function is deprecated: please use `new Rive({})` instead"),new P(w)},P.prototype.onSystemAudioChanged=function(){this.volume=this._volume},P.prototype.init=function(w){var I=this,z=w.src,V=w.buffer,it=w.riveFile,Q=w.animations,lt=w.stateMachines,xt=w.artboard,Wt=w.autoplay,Et=Wt!==void 0&&Wt,ye=w.useOffscreenRenderer,Tt=ye!==void 0&&ye;if(!this.destroyed){if(this.src=z,this.buffer=V,this.riveFile=it,!this.src&&!this.buffer&&!this.riveFile)throw new k(P.missingErrorMessage);var he=Mt(Q),Pe=Mt(lt);this.loaded=!1,this.readyForPlaying=!1,S.awaitInstance().then(function(je){I.destroyed||(I.runtime=je,I.removeRiveListeners(),I.deleteRiveRenderer(),I.renderer=I.runtime.makeRenderer(I.canvas,Tt),I.canvas.width||I.canvas.height||I.resizeDrawingSurfaceToCanvas(),I.initData(xt,he,Pe,Et).then(function(){return I.setupRiveListeners()}).catch(function(Te){console.error(Te)}))}).catch(function(je){console.error(je)})}},P.prototype.setupRiveListeners=function(w){var I=this;if(this.eventCleanup&&this.eventCleanup(),!this.shouldDisableRiveListeners){var z=(this.animator.stateMachines||[]).filter(function(it){return it.playing&&I.runtime.hasListeners(it.instance)}).map(function(it){return it.instance}),V=this.isTouchScrollEnabled;w&&"isTouchScrollEnabled"in w&&(V=w.isTouchScrollEnabled),this.eventCleanup=(0,u.registerTouchInteractions)({canvas:this.canvas,artboard:this.artboard,stateMachines:z,renderer:this.renderer,rive:this.runtime,fit:this._layout.runtimeFit(this.runtime),alignment:this._layout.runtimeAlignment(this.runtime),isTouchScrollEnabled:V,layoutScaleFactor:this._layout.layoutScaleFactor})}},P.prototype.removeRiveListeners=function(){this.eventCleanup&&(this.eventCleanup(),this.eventCleanup=null)},P.prototype.initializeAudio=function(){var w,I=this;It.status==vt.UNAVAILABLE&&(!((w=this.artboard)===null||w===void 0)&&w.hasAudio)&&this._audioEventListener===null&&(this._audioEventListener={type:B.AudioStatusChange,callback:function(){return I.onSystemAudioChanged()}},It.add(this._audioEventListener),It.establishAudio())},P.prototype.initArtboardSize=function(){this.artboard&&(this._artboardWidth=this.artboard.width=this._artboardWidth||this.artboard.width,this._artboardHeight=this.artboard.height=this._artboardHeight||this.artboard.height)},P.prototype.initData=function(w,I,z,V){return g(this,void 0,void 0,function(){var it,Q,lt;return h(this,function(xt){switch(xt.label){case 0:return xt.trys.push([0,3,,4]),this.riveFile!=null?[3,2]:(this.riveFile=new Zt({src:this.src,buffer:this.buffer,enableRiveAssetCDN:this.enableRiveAssetCDN,assetLoader:this.assetLoader}),[4,this.riveFile.init()]);case 1:xt.sent(),xt.label=2;case 2:if(!this.riveFile)throw new k(P.cleanupErrorMessage);return this.file=this.riveFile.getInstance(),this.initArtboard(w,I,z,V),this.initArtboardSize(),this.initializeAudio(),this.loaded=!0,this.eventManager.fire({type:B.Load,data:(lt=this.src)!==null&&lt!==void 0?lt:"buffer"}),this.readyForPlaying=!0,this.taskQueue.process(),this.drawFrame(),[2,Promise.resolve()];case 3:return it=xt.sent(),Q=(Wt=it)&&Wt.isHandledError?Wt.message:"Problem loading file; may be corrupt!",console.warn(Q),this.eventManager.fire({type:B.LoadError,data:Q}),[2,Promise.reject(Q)];case 4:return[2]}var Wt})})},P.prototype.initArtboard=function(w,I,z,V){if(this.file){var it,Q=w?this.file.artboardByName(w):this.file.defaultArtboard();if(!Q){var lt="Invalid artboard name or no default artboard";return console.warn(lt),void this.eventManager.fire({type:B.LoadError,data:lt})}if(this.artboard=Q,Q.volume=this._volume*It.systemVolume,this.artboard.animationCount()<1)throw lt="Artboard has no animations",this.eventManager.fire({type:B.LoadError,data:lt}),lt;this.animator=new rt(this.runtime,this.artboard,this.eventManager),I.length>0||z.length>0?(it=I.concat(z),this.animator.initLinearAnimations(I,V),this.animator.initStateMachines(z,V)):it=[this.animator.atLeastOne(V,!1)],this.taskQueue.add({event:{type:V?B.Play:B.Pause,data:it}})}},P.prototype.drawFrame=function(){var w;!((w=document==null?void 0:document.timeline)===null||w===void 0)&&w.currentTime?this.loaded&&this.artboard&&!this.frameRequestId&&this._boundDraw(document.timeline.currentTime):this.startRendering()},P.prototype.draw=function(w,I){this.frameRequestId=null;var z=performance.now();this.lastRenderTime||(this.lastRenderTime=w),this.renderSecondTimer+=w-this.lastRenderTime,this.renderSecondTimer>5e3&&(this.renderSecondTimer=0,I==null||I());var V=(w-this.lastRenderTime)/1e3;this.lastRenderTime=w;for(var it=0,Q=this.animator.animations.filter(function(en){return en.playing||en.needsScrub}).sort(function(en){return en.needsScrub?-1:1});it<Q.length;it++){var lt=Q[it];lt.advance(V),lt.instance.didLoop&&(lt.loopCount+=1),lt.apply(1)}for(var xt=0,Wt=this.animator.stateMachines.filter(function(en){return en.playing});xt<Wt.length;xt++){var Et=Wt[xt],ye=Et.reportedEventCount();if(ye)for(var Tt=0;Tt<ye;Tt++){var he=Et.reportedEventAt(Tt);if(he)if(he.type===H.OpenUrl){if(this.eventManager.fire({type:B.RiveEvent,data:he}),this.automaticallyHandleEvents){var Pe=document.createElement("a"),je=he,Te=je.url,Ke=je.target,Ue=(0,u.sanitizeUrl)(Te);Te&&Pe.setAttribute("href",Ue),Ke&&Pe.setAttribute("target",Ke),Ue&&Ue!==u.BLANK_URL&&Pe.click()}}else this.eventManager.fire({type:B.RiveEvent,data:he})}Et.advanceAndApply(V)}this.animator.stateMachines.length==0&&this.artboard.advance(V);var Le=this.renderer;Le.clear(),Le.save(),this.alignRenderer(),this._hasZeroSize||this.artboard.draw(Le),Le.restore(),Le.flush(),this.animator.handleLooping(),this.animator.handleStateChanges(),this.animator.handleAdvancing(V),this.frameCount++;var Ae=performance.now();for(this.frameTimes.push(Ae),this.durations.push(Ae-z);this.frameTimes[0]<=Ae-1e3;)this.frameTimes.shift(),this.durations.shift();this.animator.isPlaying?this.startRendering():(this.animator.isPaused||this.animator.isStopped)&&(this.lastRenderTime=0)},P.prototype.alignRenderer=function(){var w=this,I=w.renderer,z=w.runtime,V=w._layout,it=w.artboard;I.align(V.runtimeFit(z),V.runtimeAlignment(z),{minX:V.minX,minY:V.minY,maxX:V.maxX,maxY:V.maxY},it.bounds,this._devicePixelRatioUsed*V.layoutScaleFactor)},Object.defineProperty(P.prototype,"fps",{get:function(){return this.durations.length},enumerable:!1,configurable:!0}),Object.defineProperty(P.prototype,"frameTime",{get:function(){return this.durations.length===0?0:(this.durations.reduce(function(w,I){return w+I},0)/this.durations.length).toFixed(4)},enumerable:!1,configurable:!0}),P.prototype.cleanup=function(){var w;this.destroyed=!0,this.stopRendering(),this.cleanupInstances(),this._observed!==null&&jt.remove(this._observed),this.removeRiveListeners(),this.file&&((w=this.riveFile)===null||w===void 0||w.cleanup(),this.file=null),this.riveFile=null,this.deleteRiveRenderer(),this._audioEventListener!==null&&(It.remove(this._audioEventListener),this._audioEventListener=null)},P.prototype.deleteRiveRenderer=function(){var w;(w=this.renderer)===null||w===void 0||w.delete(),this.renderer=null},P.prototype.cleanupInstances=function(){this.eventCleanup!==null&&this.eventCleanup(),this.stop(),this.artboard&&(this.artboard.delete(),this.artboard=null)},P.prototype.retrieveTextRun=function(w){var I;if(w)if(this.artboard){var z=this.artboard.textRun(w);if(z)return z;console.warn("Could not access a text run with name '".concat(w,"' in the '").concat((I=this.artboard)===null||I===void 0?void 0:I.name,"' Artboard. Note that you must rename a text run node in the Rive editor to make it queryable at runtime."))}else console.warn("Tried to access text run, but the Artboard is null");else console.warn("No text run name provided")},P.prototype.getTextRunValue=function(w){var I=this.retrieveTextRun(w);return I?I.text:void 0},P.prototype.setTextRunValue=function(w,I){var z=this.retrieveTextRun(w);z&&(z.text=I)},P.prototype.play=function(w,I){var z=this;w=Mt(w),this.readyForPlaying?(this.animator.play(w),this.eventCleanup&&this.eventCleanup(),this.setupRiveListeners(),this.startRendering()):this.taskQueue.add({action:function(){return z.play(w,I)}})},P.prototype.pause=function(w){var I=this;w=Mt(w),this.readyForPlaying?(this.eventCleanup&&this.eventCleanup(),this.animator.pause(w)):this.taskQueue.add({action:function(){return I.pause(w)}})},P.prototype.scrub=function(w,I){var z=this;w=Mt(w),this.readyForPlaying?(this.animator.scrub(w,I||0),this.drawFrame()):this.taskQueue.add({action:function(){return z.scrub(w,I)}})},P.prototype.stop=function(w){var I=this;w=Mt(w),this.readyForPlaying?(this.animator&&this.animator.stop(w),this.eventCleanup&&this.eventCleanup()):this.taskQueue.add({action:function(){return I.stop(w)}})},P.prototype.reset=function(w){var I,z=w==null?void 0:w.artboard,V=Mt(w==null?void 0:w.animations),it=Mt(w==null?void 0:w.stateMachines),Q=(I=w==null?void 0:w.autoplay)!==null&&I!==void 0&&I;this.cleanupInstances(),this.initArtboard(z,V,it,Q),this.taskQueue.process()},P.prototype.load=function(w){this.file=null,this.stop(),this.init(w)},Object.defineProperty(P.prototype,"layout",{get:function(){return this._layout},set:function(w){this._layout=w,w.maxX&&w.maxY||this.resizeToCanvas(),this.loaded&&!this.animator.isPlaying&&this.drawFrame()},enumerable:!1,configurable:!0}),P.prototype.resizeToCanvas=function(){this._layout=this.layout.copyWith({minX:0,minY:0,maxX:this.canvas.width,maxY:this.canvas.height})},P.prototype.resizeDrawingSurfaceToCanvas=function(w){if(this.canvas instanceof HTMLCanvasElement&&window){var I=this.canvas.getBoundingClientRect(),z=I.width,V=I.height,it=w||window.devicePixelRatio||1;if(this.devicePixelRatioUsed=it,this.canvas.width=it*z,this.canvas.height=it*V,this.resizeToCanvas(),this.drawFrame(),this.layout.fit===r.Layout){var Q=this._layout.layoutScaleFactor;this.artboard.width=z/Q,this.artboard.height=V/Q}}},Object.defineProperty(P.prototype,"source",{get:function(){return this.src},enumerable:!1,configurable:!0}),Object.defineProperty(P.prototype,"activeArtboard",{get:function(){return this.artboard?this.artboard.name:""},enumerable:!1,configurable:!0}),Object.defineProperty(P.prototype,"animationNames",{get:function(){if(!this.loaded||!this.artboard)return[];for(var w=[],I=0;I<this.artboard.animationCount();I++)w.push(this.artboard.animationByIndex(I).name);return w},enumerable:!1,configurable:!0}),Object.defineProperty(P.prototype,"stateMachineNames",{get:function(){if(!this.loaded||!this.artboard)return[];for(var w=[],I=0;I<this.artboard.stateMachineCount();I++)w.push(this.artboard.stateMachineByIndex(I).name);return w},enumerable:!1,configurable:!0}),P.prototype.stateMachineInputs=function(w){if(this.loaded){var I=this.animator.stateMachines.find(function(z){return z.name===w});return I==null?void 0:I.inputs}},P.prototype.retrieveInputAtPath=function(w,I){if(w)if(this.artboard){var z=this.artboard.inputByPath(w,I);if(z)return z;console.warn("Could not access an input with name: '".concat(w,"', at path:'").concat(I,"'"))}else console.warn("Tried to access input: '".concat(w,"', at path: '").concat(I,"', but the Artboard is null"));else console.warn("No input name provided for path '".concat(I,"'"))},P.prototype.setBooleanStateAtPath=function(w,I,z){var V=this.retrieveInputAtPath(w,z);V&&(V.type===T.Boolean?V.asBool().value=I:console.warn("Input with name: '".concat(w,"', at path:'").concat(z,"' is not a boolean")))},P.prototype.setNumberStateAtPath=function(w,I,z){var V=this.retrieveInputAtPath(w,z);V&&(V.type===T.Number?V.asNumber().value=I:console.warn("Input with name: '".concat(w,"', at path:'").concat(z,"' is not a number")))},P.prototype.fireStateAtPath=function(w,I){var z=this.retrieveInputAtPath(w,I);z&&(z.type===T.Trigger?z.asTrigger().fire():console.warn("Input with name: '".concat(w,"', at path:'").concat(I,"' is not a trigger")))},P.prototype.retrieveTextAtPath=function(w,I){if(w)if(I)if(this.artboard){var z=this.artboard.textByPath(w,I);if(z)return z;console.warn("Could not access text with name: '".concat(w,"', at path:'").concat(I,"'"))}else console.warn("Tried to access text: '".concat(w,"', at path: '").concat(I,"', but the Artboard is null"));else console.warn("No path provided for text '".concat(w,"'"));else console.warn("No text name provided for path '".concat(I,"'"))},P.prototype.getTextRunValueAtPath=function(w,I){var z=this.retrieveTextAtPath(w,I);if(z)return z.text;console.warn("Could not get text with name: '".concat(w,"', at path:'").concat(I,"'"))},P.prototype.setTextRunValueAtPath=function(w,I,z){var V=this.retrieveTextAtPath(w,z);V?V.text=I:console.warn("Could not set text with name: '".concat(w,"', at path:'").concat(z,"'"))},Object.defineProperty(P.prototype,"playingStateMachineNames",{get:function(){return this.loaded?this.animator.stateMachines.filter(function(w){return w.playing}).map(function(w){return w.name}):[]},enumerable:!1,configurable:!0}),Object.defineProperty(P.prototype,"playingAnimationNames",{get:function(){return this.loaded?this.animator.animations.filter(function(w){return w.playing}).map(function(w){return w.name}):[]},enumerable:!1,configurable:!0}),Object.defineProperty(P.prototype,"pausedAnimationNames",{get:function(){return this.loaded?this.animator.animations.filter(function(w){return!w.playing}).map(function(w){return w.name}):[]},enumerable:!1,configurable:!0}),Object.defineProperty(P.prototype,"pausedStateMachineNames",{get:function(){return this.loaded?this.animator.stateMachines.filter(function(w){return!w.playing}).map(function(w){return w.name}):[]},enumerable:!1,configurable:!0}),Object.defineProperty(P.prototype,"isPlaying",{get:function(){return this.animator.isPlaying},enumerable:!1,configurable:!0}),Object.defineProperty(P.prototype,"isPaused",{get:function(){return this.animator.isPaused},enumerable:!1,configurable:!0}),Object.defineProperty(P.prototype,"isStopped",{get:function(){return this.animator.isStopped},enumerable:!1,configurable:!0}),Object.defineProperty(P.prototype,"bounds",{get:function(){return this.artboard?this.artboard.bounds:void 0},enumerable:!1,configurable:!0}),P.prototype.on=function(w,I){this.eventManager.add({type:w,callback:I})},P.prototype.off=function(w,I){this.eventManager.remove({type:w,callback:I})},P.prototype.unsubscribe=function(w,I){console.warn("This function is deprecated: please use `off()` instead."),this.off(w,I)},P.prototype.removeAllRiveEventListeners=function(w){this.eventManager.removeAll(w)},P.prototype.unsubscribeAll=function(w){console.warn("This function is deprecated: please use `removeAllRiveEventListeners()` instead."),this.removeAllRiveEventListeners(w)},P.prototype.stopRendering=function(){this.loaded&&this.frameRequestId&&(this.runtime.cancelAnimationFrame?this.runtime.cancelAnimationFrame(this.frameRequestId):cancelAnimationFrame(this.frameRequestId),this.frameRequestId=null)},P.prototype.startRendering=function(){this.loaded&&this.artboard&&!this.frameRequestId&&(this.runtime.requestAnimationFrame?this.frameRequestId=this.runtime.requestAnimationFrame(this._boundDraw):this.frameRequestId=requestAnimationFrame(this._boundDraw))},P.prototype.enableFPSCounter=function(w){this.runtime.enableFPSCounter(w)},P.prototype.disableFPSCounter=function(){this.runtime.disableFPSCounter()},Object.defineProperty(P.prototype,"contents",{get:function(){if(this.loaded){for(var w={artboards:[]},I=0;I<this.file.artboardCount();I++){for(var z=this.file.artboardByIndex(I),V={name:z.name,animations:[],stateMachines:[]},it=0;it<z.animationCount();it++){var Q=z.animationByIndex(it);V.animations.push(Q.name)}for(var lt=0;lt<z.stateMachineCount();lt++){for(var xt=z.stateMachineByIndex(lt),Wt=xt.name,Et=new this.runtime.StateMachineInstance(xt,z),ye=[],Tt=0;Tt<Et.inputCount();Tt++){var he=Et.input(Tt);ye.push({name:he.name,type:he.type})}V.stateMachines.push({name:Wt,inputs:ye})}w.artboards.push(V)}return w}},enumerable:!1,configurable:!0}),Object.defineProperty(P.prototype,"volume",{get:function(){return this.artboard&&this.artboard.volume!==this._volume&&(this._volume=this.artboard.volume),this._volume},set:function(w){this._volume=w,this.artboard&&(this.artboard.volume=w*It.systemVolume)},enumerable:!1,configurable:!0}),Object.defineProperty(P.prototype,"artboardWidth",{get:function(){var w;return this.artboard?this.artboard.width:(w=this._artboardWidth)!==null&&w!==void 0?w:0},set:function(w){this._artboardWidth=w,this.artboard&&(this.artboard.width=w)},enumerable:!1,configurable:!0}),Object.defineProperty(P.prototype,"artboardHeight",{get:function(){var w;return this.artboard?this.artboard.height:(w=this._artboardHeight)!==null&&w!==void 0?w:0},set:function(w){this._artboardHeight=w,this.artboard&&(this.artboard.height=w)},enumerable:!1,configurable:!0}),P.prototype.resetArtboardSize=function(){this.artboard?(this.artboard.resetArtboardSize(),this._artboardWidth=this.artboard.width,this._artboardHeight=this.artboard.height):(this._artboardWidth=void 0,this._artboardHeight=void 0)},Object.defineProperty(P.prototype,"devicePixelRatioUsed",{get:function(){return this._devicePixelRatioUsed},set:function(w){this._devicePixelRatioUsed=w},enumerable:!1,configurable:!0}),P.missingErrorMessage="Rive source file or data buffer required",P.cleanupErrorMessage="Attempt to use file after calling cleanup.",P}(),$e=function(P){return g(void 0,void 0,void 0,function(){var w;return h(this,function(I){switch(I.label){case 0:return w=new Request(P),[4,fetch(w)];case 1:return[4,I.sent().arrayBuffer()];case 2:return[2,I.sent()]}})})},Mt=function(P){return typeof P=="string"?[P]:P instanceof Array?P:[]},qt={EventManager:et,TaskQueueManager:At},me=function(P){return new Promise(function(w){return S.getInstance(function(I){I.decodeAudio(P,w)})})},ke=function(P){return new Promise(function(w){return S.getInstance(function(I){I.decodeImage(P,w)})})},Xe=function(P){return new Promise(function(w){return S.getInstance(function(I){I.decodeFont(P,w)})})}})(),e})();var rh=oh.exports=Bl();const br=class br{constructor(){st(this,"memoryUpdates",xe(null));st(this,"clearTimeout")}notifyMemoryUpdated(){this.clearTimeout||(this.memoryUpdates.set({timestamp:Date.now()}),clearTimeout(this.clearTimeout),this.clearTimeout=void 0,this.clearTimeout=setTimeout(()=>{this.memoryUpdates.set(null),this.clearTimeout=void 0},br.CLEAR_DELAY_MS))}subscribe(t){return this.memoryUpdates.subscribe(t)}};st(br,"CLEAR_DELAY_MS",1e4);let rs=br;const zl=new rs,sh=""+new URL("memories-dark-DhQ4ghw7.riv",import.meta.url).href,pa=""+new URL("memories-light-Cj0fATGz.riv",import.meta.url).href;function ih(s){let t,n,e;return{c(){t=F("span"),t.textContent="Augment Memories",E(t,"role","button"),E(t,"tabindex","0")},m(o,r){_(o,t,r),n||(e=[bt(t,"click",s[5]),bt(t,"keydown",s[6])],n=!0)},p:D,d(o){o&&y(t),n=!1,Re(e)}}}function ah(s){let t,n;return t=new we({props:{content:"Information that Agent remembered from previous interactions (click to open)",$$slots:{default:[ih]},$$scope:{ctx:s}}}),{c(){C(t.$$.fragment)},m(e,o){x(t,e,o),n=!0},p(e,o){const r={};8192&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){M(t,e)}}}function ch(s){let t,n,e={slot:"chaser",repeat:1,speed:1.3,onStopChaser:s[2]};return t=new Dl({props:e}),s[8](t),{c(){C(t.$$.fragment)},m(o,r){x(t,o,r),n=!0},p(o,r){t.$set({})},i(o){n||(f(t.$$.fragment,o),n=!0)},o(o){$(t.$$.fragment,o),n=!1},d(o){s[8](null),M(t,o)}}}function lh(s){let t;return{c(){t=F("canvas"),E(t,"slot","leftIcon"),E(t,"width","32"),E(t,"height","32"),Qe(t,"width","14px"),Qe(t,"height","14px")},m(n,e){_(n,t,e),s[7](t)},p:D,d(n){n&&y(t),s[7](null)}}}function uh(s){let t,n;return t=new Un({props:{$$slots:{leftIcon:[lh],chaser:[ch],default:[ah]},$$scope:{ctx:s}}}),{c(){C(t.$$.fragment)},m(e,o){x(t,e,o),n=!0},p(e,[o]){const r={};8195&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){M(t,e)}}}function dh(s,t,n){let e;Vt(s,zl,u=>n(4,e=u));let o,r,i,c=pa;function a(){r&&(r==null||r.cleanup(),n(3,r=void 0)),o&&!r&&n(3,r=new rh.Rive({src:c,canvas:o,autoplay:!1,onLoad:()=>{r==null||r.resizeDrawingSurfaceToCanvas(),r==null||r.play(),r==null||r.stop()}}))}function l(u){c=u===Lu.dark?sh:pa,a()}return jn(()=>{ku(l),l(Tu())}),Io(()=>{r==null||r.cleanup()}),s.$$.update=()=>{9&s.$$.dirty&&o&&!r&&a(),16&s.$$.dirty&&(e!=null&&e.timestamp)&&(r==null||r.reset(),r==null||r.play(),i==null||i.startChaser())},[o,i,function(){r==null||r.reset()},r,e,function(u){Rn.call(this,s,u)},function(u){Rn.call(this,s,u)},function(u){ue[u?"unshift":"push"](()=>{o=u,n(0,o)})},function(u){ue[u?"unshift":"push"](()=>{i=u,n(1,i)})}]}class fh extends nt{constructor(t){super(),ot(this,t,dh,uh,tt,{})}}function $a(s){let t,n,e,o,r,i,c,a;const l=[gh,hh,$h,ph,mh],u=[];function p(g,h){return 2&h&&(t=null),2&h&&(n=null),2&h&&(e=null),2&h&&(o=null),t==null&&(t=!!Zu(g[1])),t?0:(n==null&&(n=!!Ju(g[1])),n?1:(e==null&&(e=!!ml(g[1])),e?2:(o==null&&(o=!!pl(g[1])),o?3:4)))}return r=p(s,-1),i=u[r]=l[r](s),{c(){i.c(),c=ft()},m(g,h){u[r].m(g,h),_(g,c,h),a=!0},p(g,h){let k=r;r=p(g,h),r===k?u[r].p(g,h):(K(),$(u[k],1,1,()=>{u[k]=null}),Z(),i=u[r],i?i.p(g,h):(i=u[r]=l[r](g),i.c()),f(i,1),i.m(c.parentNode,c))},i(g){a||(f(i),a=!0)},o(g){$(i),a=!1},d(g){g&&y(c),u[r].d(g)}}}function mh(s){let t,n,e,o,r,i;const c=[yh,wh,vh],a=[];function l(u,p){return u[3]?0:u[2].iconName?1:2}return n=l(s),e=a[n]=c[n](s),{c(){t=F("div"),e.c(),E(t,"class","pulse-chip-container svelte-tiegzu")},m(u,p){_(u,t,p),a[n].m(t,null),o=!0,r||(i=Iu(Td.call(null,t,s[6])),r=!0)},p(u,p){let g=n;n=l(u),n===g?a[n].p(u,p):(K(),$(a[g],1,1,()=>{a[g]=null}),Z(),e=a[n],e?e.p(u,p):(e=a[n]=c[n](u),e.c()),f(e,1),e.m(t,null))},i(u){o||(f(e),o=!0)},o(u){$(e),o=!1},d(u){u&&y(t),a[n].d(),r=!1,i()}}}function ph(s){let t,n;return t=new fh({}),t.$on("click",function(){ve(s[2].onClick)&&s[2].onClick.apply(this,arguments)}),{c(){C(t.$$.fragment)},m(e,o){x(t,e,o),n=!0},p(e,o){s=e},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){M(t,e)}}}function $h(s){let t,n;return t=new S0({props:{item:s[1],chatModel:s[0]}}),{c(){C(t.$$.fragment)},m(e,o){x(t,e,o),n=!0},p(e,o){const r={};2&o&&(r.item=e[1]),1&o&&(r.chatModel=e[0]),t.$set(r)},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){M(t,e)}}}function hh(s){let t,n;return t=new nh({props:{item:s[1]}}),{c(){C(t.$$.fragment)},m(e,o){x(t,e,o),n=!0},p(e,o){const r={};2&o&&(r.item=e[1]),t.$set(r)},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){M(t,e)}}}function gh(s){let t,n;return t=new W0({props:{originalCode:s[1].selection.originalCode,onRemove:s[7]}}),{c(){C(t.$$.fragment)},m(e,o){x(t,e,o),n=!0},p(e,o){const r={};2&o&&(r.originalCode=e[1].selection.originalCode),t.$set(r)},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){M(t,e)}}}function vh(s){let t,n;return t=new Un({props:{removeBtn:{title:s[2].removeTitle,onRemove:s[7]},showWarning:s[2].showWarning,$$slots:{default:[Ch]},$$scope:{ctx:s}}}),t.$on("click",function(){ve(s[2].onClick)&&s[2].onClick.apply(this,arguments)}),{c(){C(t.$$.fragment)},m(e,o){x(t,e,o),n=!0},p(e,o){s=e;const r={};4&o&&(r.removeBtn={title:s[2].removeTitle,onRemove:s[7]}),4&o&&(r.showWarning=s[2].showWarning),4102&o&&(r.$$scope={dirty:o,ctx:s}),t.$set(r)},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){M(t,e)}}}function wh(s){let t,n;return t=new Un({props:{removeBtn:{title:s[2].removeTitle,onRemove:s[7]},showWarning:s[2].showWarning,$$slots:{leftIcon:[Eh],default:[Ah]},$$scope:{ctx:s}}}),t.$on("click",function(){ve(s[2].onClick)&&s[2].onClick.apply(this,arguments)}),{c(){C(t.$$.fragment)},m(e,o){x(t,e,o),n=!0},p(e,o){s=e;const r={};4&o&&(r.removeBtn={title:s[2].removeTitle,onRemove:s[7]}),4&o&&(r.showWarning=s[2].showWarning),4102&o&&(r.$$scope={dirty:o,ctx:s}),t.$set(r)},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){M(t,e)}}}function yh(s){let t,n;return t=new Un({props:{removeBtn:{title:s[2].removeTitle,onRemove:s[7]},showWarning:s[2].showWarning,$$slots:{leftButtons:[Ih],default:[Lh]},$$scope:{ctx:s}}}),t.$on("click",function(){ve(s[2].onClick)&&s[2].onClick.apply(this,arguments)}),{c(){C(t.$$.fragment)},m(e,o){x(t,e,o),n=!0},p(e,o){s=e;const r={};4&o&&(r.removeBtn={title:s[2].removeTitle,onRemove:s[7]}),4&o&&(r.showWarning=s[2].showWarning),4118&o&&(r.$$scope={dirty:o,ctx:s}),t.$set(r)},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){M(t,e)}}}function bh(s){let t,n;return t=new Cr({props:{nopath:!0,filepath:s[2].filepath}}),{c(){C(t.$$.fragment)},m(e,o){x(t,e,o),n=!0},p(e,o){const r={};4&o&&(r.filepath=e[2].filepath),t.$set(r)},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){M(t,e)}}}function _h(s){let t,n;return t=new Ar({props:{option:s[1],slot:"content"}}),{c(){C(t.$$.fragment)},m(e,o){x(t,e,o),n=!0},p(e,o){const r={};2&o&&(r.option=e[1]),t.$set(r)},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){M(t,e)}}}function Ch(s){let t,n;return t=new we({props:{$$slots:{content:[_h],default:[bh]},$$scope:{ctx:s}}}),{c(){C(t.$$.fragment)},m(e,o){x(t,e,o),n=!0},p(e,o){const r={};4102&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){M(t,e)}}}function xh(s){let t,n;return t=new Cr({props:{nopath:!0,filepath:s[2].filepath}}),{c(){C(t.$$.fragment)},m(e,o){x(t,e,o),n=!0},p(e,o){const r={};4&o&&(r.filepath=e[2].filepath),t.$set(r)},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){M(t,e)}}}function Mh(s){let t,n;return t=new Ar({props:{option:s[1],slot:"content"}}),{c(){C(t.$$.fragment)},m(e,o){x(t,e,o),n=!0},p(e,o){const r={};2&o&&(r.option=e[1]),t.$set(r)},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){M(t,e)}}}function Ah(s){let t,n;return t=new we({props:{$$slots:{content:[Mh],default:[xh]},$$scope:{ctx:s}}}),{c(){C(t.$$.fragment)},m(e,o){x(t,e,o),n=!0},p(e,o){const r={};4102&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){M(t,e)}}}function Eh(s){let t,n;return t=new J$({props:{icon:s[2].iconName,slot:"leftIcon"}}),{c(){C(t.$$.fragment)},m(e,o){x(t,e,o),n=!0},p(e,o){const r={};4&o&&(r.icon=e[2].iconName),t.$set(r)},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){M(t,e)}}}function kh(s){let t,n;return t=new Cr({props:{nopath:!0,filepath:s[2].filepath}}),{c(){C(t.$$.fragment)},m(e,o){x(t,e,o),n=!0},p(e,o){const r={};4&o&&(r.filepath=e[2].filepath),t.$set(r)},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){M(t,e)}}}function Th(s){let t,n;return t=new Ar({props:{option:s[1],slot:"content"}}),{c(){C(t.$$.fragment)},m(e,o){x(t,e,o),n=!0},p(e,o){const r={};2&o&&(r.option=e[1]),t.$set(r)},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){M(t,e)}}}function Lh(s){let t,n;return t=new we({props:{$$slots:{content:[Th],default:[kh]},$$scope:{ctx:s}}}),{c(){C(t.$$.fragment)},m(e,o){x(t,e,o),n=!0},p(e,o){const r={};4102&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){M(t,e)}}}function Ih(s){let t,n;const e=[s[4],{slot:"leftButtons"}];let o={};for(let r=0;r<e.length;r+=1)o=Ct(o,e[r]);return t=new P$({props:o}),{c(){C(t.$$.fragment)},m(r,i){x(t,r,i),n=!0},p(r,i){const c=16&i?ge(e,[zn(r[4]),e[1]]):{};t.$set(c)},i(r){n||(f(t.$$.fragment,r),n=!0)},o(r){$(t.$$.fragment,r),n=!1},d(r){M(t,r)}}}function Sh(s){let t,n,e=s[1]&&$a(s);return{c(){e&&e.c(),t=ft()},m(o,r){e&&e.m(o,r),_(o,t,r),n=!0},p(o,[r]){o[1]?e?(e.p(o,r),2&r&&f(e,1)):(e=$a(o),e.c(),f(e,1),e.m(t.parentNode,t)):e&&(K(),$(e,1,1,()=>{e=null}),Z())},i(o){n||(f(e),n=!0)},o(o){$(e),n=!1},d(o){o&&y(t),e&&e.d(o)}}}function Rh(s,t,n){let e,o,r,i,c,a,l=D,u=D,p=()=>(u(),u=se(g,b=>n(10,a=b)),g);s.$$.on_destroy.push(()=>l()),s.$$.on_destroy.push(()=>u());let{chatModel:g}=t;p();let{item:h}=t,k=!1;const T=new kd({onHoverStart:()=>{n(8,k=!0)},onHoverEnd:()=>{n(8,k=!1)},hoverTriggerDuration:0});return s.$$set=b=>{"chatModel"in b&&p(n(0,g=b.chatModel)),"item"in b&&n(1,h=b.item)},s.$$.update=()=>{1024&s.$$.dirty&&(n(5,e=a==null?void 0:a.specialContextInputModel),l(),l=se(e,b=>n(9,c=b))),2&s.$$.dirty&&n(2,o=(b=>{const S={onClick:void 0,removeTitle:"",filepath:"",pinnable:!0,iconName:void 0,showWarning:!1};return Gu(b)?{...S,onClick:()=>g==null?void 0:g.extensionClient.openFile(b.file),removeTitle:"Remove file from context",filepath:b.file.pathName}:Yu(b)?{...S,onClick:()=>g==null?void 0:g.extensionClient.openFile(b.recentFile),removeTitle:"Remove file from context",filepath:b.recentFile.pathName}:Xu(b)?{...S,onClick:()=>g==null?void 0:g.extensionClient.openFile(b.folder),removeTitle:"Remove folder from context",filepath:b.folder.pathName,iconName:"folder-opened"}:Ku(b)?{...S,removeTitle:"Remove external source from context",filepath:b.label,iconName:"book"}:fl(b)?{...S,removeTitle:"Remove source folder from context",filepath:b.sourceFolder.folderRoot,iconName:"root-folder",pinnable:!1,showWarning:b.showWarning}:ml(b)?{...S,iconName:"root-folder",pinnable:!1}:pl(b)?{...S,onClick:()=>{const H=g==null?void 0:g.flags.agentMemoriesFilePathName;g!=null&&g.currentConversationId&&g.extensionClient.reportAgentSessionEvent({eventName:mr.openedMemoriesFile,conversationId:g.currentConversationId,eventData:{memoriesFileOpenData:{memoriesPathUndefined:!H}}}),g==null||g.extensionClient.openMemoriesFile()},pinnable:!1}:S})(h)),514&s.$$.dirty&&n(4,r={title:h.pinned?"Unpin":"Pin to context",onPin:()=>c==null?void 0:c.togglePinned(h),isPinned:h.pinned}),262&s.$$.dirty&&n(3,i=o.pinnable&&(k||h.pinned))},[g,h,o,i,r,e,T,()=>{c==null||c.markInactive(h),c==null||c.unpin(h)},k,c,a]}class Ph extends nt{constructor(t){super(),ot(this,t,Rh,Sh,tt,{chatModel:0,item:1})}}function ha(s,t,n){const e=s.slice();return e[6]=t[n],e}function ga(s){let t,n;return t=new Ph({props:{item:s[6],chatModel:s[0]}}),{c(){C(t.$$.fragment)},m(e,o){x(t,e,o),n=!0},p(e,o){const r={};2&o&&(r.item=e[6]),1&o&&(r.chatModel=e[0]),t.$set(r)},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){M(t,e)}}}function va(s){let t,n;return t=new Cd({props:{color:"premium",size:1,variant:"soft",$$slots:{default:[Dh]},$$scope:{ctx:s}}}),{c(){C(t.$$.fragment)},m(e,o){x(t,e,o),n=!0},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){M(t,e)}}}function Dh(s){let t;return{c(){t=X("Beta")},m(n,e){_(n,t,e)},d(n){n&&y(t)}}}function Nh(s){let t,n,e,o,r=Ie(s[4]),i=de(s[1]),c=[];for(let u=0;u<i.length;u+=1)c[u]=ga(ha(s,i,u));const a=u=>$(c[u],1,1,()=>{c[u]=null});let l=r&&va(s);return{c(){t=F("div"),n=F("div");for(let u=0;u<c.length;u+=1)c[u].c();e=W(),l&&l.c(),E(n,"class","c-action-bar-context-container svelte-1wj2viq"),E(t,"class","c-action-bar-context svelte-1wj2viq")},m(u,p){_(u,t,p),U(t,n);for(let g=0;g<c.length;g+=1)c[g]&&c[g].m(n,null);U(t,e),l&&l.m(t,null),o=!0},p(u,[p]){if(3&p){let g;for(i=de(u[1]),g=0;g<i.length;g+=1){const h=ha(u,i,g);c[g]?(c[g].p(h,p),f(c[g],1)):(c[g]=ga(h),c[g].c(),f(c[g],1),c[g].m(n,null))}for(K(),g=i.length;g<c.length;g+=1)a(g);Z()}16&p&&(r=Ie(u[4])),r?l?16&p&&f(l,1):(l=va(u),l.c(),f(l,1),l.m(t,null)):l&&(K(),$(l,1,1,()=>{l=null}),Z())},i(u){if(!o){for(let p=0;p<i.length;p+=1)f(c[p]);f(l),o=!0}},o(u){c=c.filter(Boolean);for(let p=0;p<c.length;p+=1)$(c[p]);$(l),o=!1},d(u){u&&y(t),fn(c,u),l&&l.d()}}}function Fh(s,t,n){let e,o,r,i,c=D,a=D;s.$$.on_destroy.push(()=>c()),s.$$.on_destroy.push(()=>a());let{chatModel:l}=t,u=[];return s.$$set=p=>{"chatModel"in p&&n(0,l=p.chatModel)},s.$$.update=()=>{if(1&s.$$.dirty&&(n(3,e=l.specialContextInputModel),c(),c=se(e,p=>n(5,r=p))),1&s.$$.dirty&&(n(2,o=l.currentConversationModel),a(),a=se(o,p=>n(4,i=p))),32&s.$$.dirty){const p=r.recentActiveItems,g=[],h=p.filter(k=>!fl(k)||(g.push(k),!1));g.length>1?(h.push({id:"sourceFoldersGroup",label:"Repos",status:Qu.active,sourceFolderGroup:g.sort((k,T)=>{const b=ns(k.sourceFolder.folderRoot),S=ns(T.sourceFolder.folderRoot);return b.localeCompare(S)}),referenceCount:1}),n(1,u=h.reverse())):n(1,u=p.reverse())}},[l,u,o,e,i,r]}class Oh extends nt{constructor(t){super(),ot(this,t,Fh,Nh,tt,{chatModel:0})}}const Bh=s=>({}),wa=s=>({}),zh=s=>({}),ya=s=>({});function Hh(s){let t,n,e,o,r;const i=s[1].leftAlign,c=Gt(i,s,s[0],ya),a=s[1].rightAlign,l=Gt(a,s,s[0],wa);return{c(){t=F("div"),n=F("div"),c&&c.c(),e=W(),o=F("div"),l&&l.c(),E(n,"class","c-input-action-bar__left-align"),E(o,"class","c-input-action-bar__right-align"),E(t,"class","c-input-action-bar svelte-188f6za")},m(u,p){_(u,t,p),U(t,n),c&&c.m(n,null),U(t,e),U(t,o),l&&l.m(o,null),r=!0},p(u,[p]){c&&c.p&&(!r||1&p)&&Yt(c,i,u,u[0],r?Kt(i,u[0],p,zh):Xt(u[0]),ya),l&&l.p&&(!r||1&p)&&Yt(l,a,u,u[0],r?Kt(a,u[0],p,Bh):Xt(u[0]),wa)},i(u){r||(f(c,u),f(l,u),r=!0)},o(u){$(c,u),$(l,u),r=!1},d(u){u&&y(t),c&&c.d(u),l&&l.d(u)}}}function jh(s,t,n){let{$$slots:e={},$$scope:o}=t;return s.$$set=r=>{"$$scope"in r&&n(0,o=r.$$scope)},[o,e]}function Uh(s){let t;const n=s[2].default,e=Gt(n,s,s[3],null);return{c(){e&&e.c()},m(o,r){e&&e.m(o,r),t=!0},p(o,r){e&&e.p&&(!t||8&r)&&Yt(e,n,o,o[3],t?Kt(n,o[3],r,null):Xt(o[3]),null)},i(o){t||(f(e,o),t=!0)},o(o){$(e,o),t=!1},d(o){e&&e.d(o)}}}function qh(s){let t,n;return t=new pe({props:{size:1,variant:"solid",disabled:s[0],"data-input-action-bar___send-split-button":"true",$$slots:{default:[Uh]},$$scope:{ctx:s}}}),t.$on("keyup",function(){ve(xn("Enter",s[1]))&&xn("Enter",s[1]).apply(this,arguments)}),t.$on("click",function(){ve(s[1])&&s[1].apply(this,arguments)}),{c(){C(t.$$.fragment)},m(e,o){x(t,e,o),n=!0},p(e,[o]){s=e;const r={};1&o&&(r.disabled=s[0]),8&o&&(r.$$scope={dirty:o,ctx:s}),t.$set(r)},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){M(t,e)}}}function Wh(s,t,n){let{$$slots:e={},$$scope:o}=t,{disabled:r=!1}=t,{onSend:i}=t;return s.$$set=c=>{"disabled"in c&&n(0,r=c.disabled),"onSend"in c&&n(1,i=c.onSend),"$$scope"in c&&n(3,o=c.$$scope)},[r,i,e,o]}class Hl extends nt{constructor(t){super(),ot(this,t,Wh,qh,tt,{disabled:0,onSend:1})}}function ba(s,t,n){const e=s.slice();e[11]=t[n];const o=e[2][e[11]];e[12]=o;const r=e[11]===e[4].currentConversationModel.selectedModelId;return e[13]=r,e}function _a(s){let t,n;return t=new _t.Root({props:{open:s[3],$$slots:{default:[Qh]},$$scope:{ctx:s}}}),{c(){C(t.$$.fragment)},m(e,o){x(t,e,o),n=!0},p(e,o){const r={};8&o&&(r.open=e[3]),1039&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){M(t,e)}}}function Vh(s){let t,n;return t=new Ro({}),{c(){C(t.$$.fragment)},m(e,o){x(t,e,o),n=!0},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){M(t,e)}}}function Gh(s){let t,n;return t=new vl({}),{c(){C(t.$$.fragment)},m(e,o){x(t,e,o),n=!0},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){M(t,e)}}}function Yh(s){let t,n,e,o;const r=[Gh,Vh],i=[];function c(a,l){return a[3]?0:1}return t=c(s),n=i[t]=r[t](s),{c(){n.c(),e=ft()},m(a,l){i[t].m(a,l),_(a,e,l),o=!0},p(a,l){let u=t;t=c(a),t!==u&&(K(),$(i[u],1,1,()=>{i[u]=null}),Z(),n=i[t],n||(n=i[t]=r[t](a),n.c()),f(n,1),n.m(e.parentNode,e))},i(a){o||(f(n),o=!0)},o(a){$(n),o=!1},d(a){a&&y(e),i[t].d(a)}}}function Xh(s){let t,n;return t=new Me({props:{size:1,variant:"solid",disabled:s[0],"data-input-action-bar__model-select-button":"true",$$slots:{default:[Yh]},$$scope:{ctx:s}}}),t.$on("click",s[6]),{c(){C(t.$$.fragment)},m(e,o){x(t,e,o),n=!0},p(e,o){const r={};1&o&&(r.disabled=e[0]),1032&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){M(t,e)}}}function Kh(s){let t;return{c(){t=X("Models")},m(n,e){_(n,t,e)},d(n){n&&y(t)}}}function Zh(s){let t,n,e=s[12]+"";return{c(){t=X(e),n=W()},m(o,r){_(o,t,r),_(o,n,r)},p(o,r){4&r&&e!==(e=o[12]+"")&&Lt(t,e)},d(o){o&&(y(t),y(n))}}}function Ca(s){let t,n;function e(){return s[7](s[11])}return t=new _t.Item({props:{highlight:s[13],onSelect:e,$$slots:{default:[Zh]},$$scope:{ctx:s}}}),{c(){C(t.$$.fragment)},m(o,r){x(t,o,r),n=!0},p(o,r){s=o;const i={};4&r&&(i.highlight=s[13]),14&r&&(i.onSelect=e),1028&r&&(i.$$scope={dirty:r,ctx:s}),t.$set(i)},i(o){n||(f(t.$$.fragment,o),n=!0)},o(o){$(t.$$.fragment,o),n=!1},d(o){M(t,o)}}}function Jh(s){let t,n,e,o;t=new _t.Label({props:{$$slots:{default:[Kh]},$$scope:{ctx:s}}});let r=de(Object.keys(s[2])),i=[];for(let a=0;a<r.length;a+=1)i[a]=Ca(ba(s,r,a));const c=a=>$(i[a],1,1,()=>{i[a]=null});return{c(){C(t.$$.fragment),n=W();for(let a=0;a<i.length;a+=1)i[a].c();e=ft()},m(a,l){x(t,a,l),_(a,n,l);for(let u=0;u<i.length;u+=1)i[u]&&i[u].m(a,l);_(a,e,l),o=!0},p(a,l){const u={};if(1024&l&&(u.$$scope={dirty:l,ctx:a}),t.$set(u),30&l){let p;for(r=de(Object.keys(a[2])),p=0;p<r.length;p+=1){const g=ba(a,r,p);i[p]?(i[p].p(g,l),f(i[p],1)):(i[p]=Ca(g),i[p].c(),f(i[p],1),i[p].m(e.parentNode,e))}for(K(),p=r.length;p<i.length;p+=1)c(p);Z()}},i(a){if(!o){f(t.$$.fragment,a);for(let l=0;l<r.length;l+=1)f(i[l]);o=!0}},o(a){$(t.$$.fragment,a),i=i.filter(Boolean);for(let l=0;l<i.length;l+=1)$(i[l]);o=!1},d(a){a&&(y(n),y(e)),M(t,a),fn(i,a)}}}function Qh(s){let t,n,e,o;return t=new _t.Trigger({props:{$$slots:{default:[Xh]},$$scope:{ctx:s}}}),e=new _t.Content({props:{size:1,side:"top",align:"end",onClickOutside:s[8],onEscapeKeyDown:s[9],$$slots:{default:[Jh]},$$scope:{ctx:s}}}),{c(){C(t.$$.fragment),n=W(),C(e.$$.fragment)},m(r,i){x(t,r,i),_(r,n,i),x(e,r,i),o=!0},p(r,i){const c={};1033&i&&(c.$$scope={dirty:i,ctx:r}),t.$set(c);const a={};8&i&&(a.onClickOutside=r[8]),8&i&&(a.onEscapeKeyDown=r[9]),1038&i&&(a.$$scope={dirty:i,ctx:r}),e.$set(a)},i(r){o||(f(t.$$.fragment,r),f(e.$$.fragment,r),o=!0)},o(r){$(t.$$.fragment,r),$(e.$$.fragment,r),o=!1},d(r){r&&y(n),M(t,r),M(e,r)}}}function tg(s){let t,n,e,o=Object.keys(s[2]).length>1;const r=s[5].default,i=Gt(r,s,s[10],null);let c=o&&_a(s);return{c(){t=F("div"),i&&i.c(),n=W(),c&&c.c(),E(t,"class","c-send-split-button svelte-hycw6v")},m(a,l){_(a,t,l),i&&i.m(t,null),U(t,n),c&&c.m(t,null),e=!0},p(a,[l]){i&&i.p&&(!e||1024&l)&&Yt(i,r,a,a[10],e?Kt(r,a[10],l,null):Xt(a[10]),null),4&l&&(o=Object.keys(a[2]).length>1),o?c?(c.p(a,l),4&l&&f(c,1)):(c=_a(a),c.c(),f(c,1),c.m(t,null)):c&&(K(),$(c,1,1,()=>{c=null}),Z())},i(a){e||(f(i,a),f(c),e=!0)},o(a){$(i,a),$(c),e=!1},d(a){a&&y(t),i&&i.d(a),c&&c.d()}}}function eg(s,t,n){let{$$slots:e={},$$scope:o}=t,{disabled:r=!1}=t,{onSelectModel:i}=t,{modelIdToDisplayName:c}=t;const a=Ht("chatModel");if(!a)throw new Error("ChatModel not found in context");let l=!1;return s.$$set=u=>{"disabled"in u&&n(0,r=u.disabled),"onSelectModel"in u&&n(1,i=u.onSelectModel),"modelIdToDisplayName"in u&&n(2,c=u.modelIdToDisplayName),"$$scope"in u&&n(10,o=u.$$scope)},[r,i,c,l,a,e,()=>n(3,l=!l),u=>{i(u),n(3,l=!1)},()=>n(3,l=!1),()=>n(3,l=!1),o]}class ng extends nt{constructor(t){super(),ot(this,t,eg,tg,tt,{disabled:0,onSelectModel:1,modelIdToDisplayName:2})}}function xa(s){let t,n;return{c(){t=F("span"),n=X(s[3]),E(t,"class","c-model-preference-name svelte-unwyym")},m(e,o){_(e,t,o),U(t,n)},p(e,o){8&o&&Lt(n,e[3])},d(e){e&&y(t)}}}function og(s){var c;let t,n,e,o,r=s[3]&&((c=s[3])==null?void 0:c.toLowerCase())!=="default";t=new Od({});let i=r&&xa(s);return{c(){C(t.$$.fragment),n=W(),i&&i.c(),e=ft()},m(a,l){x(t,a,l),_(a,n,l),i&&i.m(a,l),_(a,e,l),o=!0},p(a,l){var u;8&l&&(r=a[3]&&((u=a[3])==null?void 0:u.toLowerCase())!=="default"),r?i?i.p(a,l):(i=xa(a),i.c(),i.m(e.parentNode,e)):i&&(i.d(1),i=null)},i(a){o||(f(t.$$.fragment,a),o=!0)},o(a){$(t.$$.fragment,a),o=!1},d(a){a&&(y(n),y(e)),M(t,a),i&&i.d(a)}}}function rg(s){let t,n;return t=new Hl({props:{disabled:s[1],onSend:s[0],$$slots:{default:[og]},$$scope:{ctx:s}}}),{c(){C(t.$$.fragment)},m(e,o){x(t,e,o),n=!0},p(e,o){const r={};2&o&&(r.disabled=e[1]),1&o&&(r.onSend=e[0]),4104&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){M(t,e)}}}function sg(s){let t,n;return t=new ng({props:{disabled:s[1],onSelectModel:s[10],modelIdToDisplayName:s[2],$$slots:{default:[rg]},$$scope:{ctx:s}}}),{c(){C(t.$$.fragment)},m(e,o){x(t,e,o),n=!0},p(e,[o]){const r={};2&o&&(r.disabled=e[1]),32&o&&(r.onSelectModel=e[10]),4&o&&(r.modelIdToDisplayName=e[2]),4107&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){M(t,e)}}}function ig(s,t,n){let e,o,r,i,c,a,l=D,u=D;s.$$.on_destroy.push(()=>l()),s.$$.on_destroy.push(()=>u());const p=Ht("chatModel");Vt(s,p,b=>n(9,a=b));const g=Ht("agentConversationModel");if(!p)throw new Error("ChatModel not found in context");if(!g)throw new Error("AgentConversationModel not found in context");let{primaryAction:h}=t,{isDisabled:k=!1}=t,T={};return s.$$set=b=>{"primaryAction"in b&&n(0,h=b.primaryAction),"isDisabled"in b&&n(1,k=b.isDisabled)},s.$$.update=()=>{512&s.$$.dirty&&(n(5,e=a.currentConversationModel),l(),l=se(e,b=>n(7,i=b))),512&s.$$.dirty&&(n(4,o=a.flags),u(),u=se(o,b=>n(8,c=b))),512&s.$$.dirty&&n(2,T=Object.fromEntries(Object.entries(a.flags.modelDisplayNameToId).map(([b,S])=>[S,b]))),384&s.$$.dirty&&n(3,r=c.getModelDisplayName(i.selectedModelId))},[h,k,T,r,o,e,p,i,c,a,b=>e.setSelectedModelId(b)]}const ag=s=>({}),Ma=s=>({});function Aa(s){let t,n;return{c(){t=F("span"),n=X(s[0]),E(t,"class","c-input-action-bar-command__command svelte-xsyu9p")},m(e,o){_(e,t,o),U(t,n)},p(e,o){1&o&&Lt(n,e[0])},d(e){e&&y(t)}}}function cg(s){let t,n,e,o;const r=s[3].symbol,i=Gt(r,s,s[2],Ma),c=i||function(l){let u;return{c(){u=X(l[1])},m(p,g){_(p,u,g)},p(p,g){2&g&&Lt(u,p[1])},d(p){p&&y(u)}}}(s);let a=s[0]&&Aa(s);return{c(){t=F("span"),n=F("span"),c&&c.c(),e=W(),a&&a.c(),E(n,"class","c-input-action-bar-command__symbol svelte-xsyu9p"),E(t,"class","c-input-action-bar-command svelte-xsyu9p")},m(l,u){_(l,t,u),U(t,n),c&&c.m(n,null),U(t,e),a&&a.m(t,null),o=!0},p(l,[u]){i?i.p&&(!o||4&u)&&Yt(i,r,l,l[2],o?Kt(r,l[2],u,ag):Xt(l[2]),Ma):c&&c.p&&(!o||2&u)&&c.p(l,o?u:-1),l[0]?a?a.p(l,u):(a=Aa(l),a.c(),a.m(t,null)):a&&(a.d(1),a=null)},i(l){o||(f(c,l),o=!0)},o(l){$(c,l),o=!1},d(l){l&&y(t),c&&c.d(l),a&&a.d()}}}function lg(s,t,n){let{$$slots:e={},$$scope:o}=t,{command:r}=t,{symbol:i="/"}=t;return s.$$set=c=>{"command"in c&&n(0,r=c.command),"symbol"in c&&n(1,i=c.symbol),"$$scope"in c&&n(2,o=c.$$scope)},[r,i,o,e]}class ds extends nt{constructor(t){super(),ot(this,t,lg,cg,tt,{command:0,symbol:1})}}function ug(s){let t,n,e=[{xmlns:"http://www.w3.org/2000/svg"},{"data-ds-icon":"fa"},{viewBox:"0 0 512 512"},s[0]],o={};for(let r=0;r<e.length;r+=1)o=Ct(o,e[r]);return{c(){t=Nt("svg"),n=new Fe(!0),this.h()},l(r){t=Oe(r,"svg",{xmlns:!0,"data-ds-icon":!0,viewBox:!0});var i=Be(t);n=ze(i,!0),i.forEach(y),this.h()},h(){n.a=null,ne(t,o)},m(r,i){He(r,t,i),n.m('<!--! Font Awesome Pro 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2024 Fonticons, Inc.--><path d="M256 48C141.1 48 48 141.1 48 256s93.1 208 208 208c13.3 0 24 10.7 24 24s-10.7 24-24 24C114.6 512 0 397.4 0 256S114.6 0 256 0s256 114.6 256 256v28c0 50.8-41.2 92-92 92-31.1 0-58.7-15.5-75.3-39.2-22 24.1-53.6 39.2-88.7 39.2-66.3 0-120-53.7-120-120s53.7-120 120-120c28.8 0 55.2 10.1 75.8 27 4.3-6.6 11.7-11 20.2-11 13.3 0 24 10.7 24 24v108c0 24.3 19.7 44 44 44s44-19.7 44-44v-28c0-114.9-93.1-208-208-208m72 208a72 72 0 1 0-144 0 72 72 0 1 0 144 0"/>',t)},p(r,[i]){ne(t,o=ge(e,[{xmlns:"http://www.w3.org/2000/svg"},{"data-ds-icon":"fa"},{viewBox:"0 0 512 512"},1&i&&r[0]]))},i:D,o:D,d(r){r&&y(t)}}}function dg(s,t,n){return s.$$set=e=>{n(0,t=Ct(Ct({},t),Qt(e)))},[t=Qt(t)]}class fg extends nt{constructor(t){super(),ot(this,t,dg,ug,tt,{})}}function Ea(s,t,n){const e=s.slice();return e[21]=t[n],e}function mg(s){let t,n;return t=new fg({props:{slot:"symbol"}}),{c(){C(t.$$.fragment)},m(e,o){x(t,e,o),n=!0},p:D,i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){M(t,e)}}}function pg(s){let t,n,e;return n=new ds({props:{$$slots:{symbol:[mg]},$$scope:{ctx:s}}}),{c(){t=F("div"),C(n.$$.fragment),E(t,"class","c-context-menu__trigger-text svelte-1jreht0")},m(o,r){_(o,t,r),x(n,t,null),e=!0},p(o,r){const i={};16777216&r&&(i.$$scope={dirty:r,ctx:o}),n.$set(i)},i(o){e||(f(n.$$.fragment,o),e=!0)},o(o){$(n.$$.fragment,o),e=!1},d(o){o&&y(t),M(n)}}}function $g(s){let t,n;return t=new pe({props:{size:1,variant:"ghost",color:"accent",$$slots:{default:[pg]},$$scope:{ctx:s}}}),t.$on("click",s[2]),{c(){C(t.$$.fragment)},m(e,o){x(t,e,o),n=!0},p(e,o){const r={};16777216&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){M(t,e)}}}function ka(s){let t,n;function e(){return s[15](s[21])}return t=new zd({props:{item:s[21],onSelect:e}}),{c(){C(t.$$.fragment)},m(o,r){x(t,o,r),n=!0},p(o,r){s=o;const i={};32&r&&(i.item=s[21]),32&r&&(i.onSelect=e),t.$set(i)},i(o){n||(f(t.$$.fragment,o),n=!0)},o(o){$(t.$$.fragment,o),n=!1},d(o){M(t,o)}}}function hg(s){let t,n,e,o,r,i,c,a=de(s[5]),l=[];for(let h=0;h<a.length;h+=1)l[h]=ka(Ea(s,a,h));const u=h=>$(l[h],1,1,()=>{l[h]=null});function p(h){s[16](h)}e=new _t.Separator({});let g={placeholder:"Focus context"};return s[6]!==void 0&&(g.value=s[6]),r=new _t.TextFieldItem({props:g}),ue.push(()=>Ye(r,"value",p)),{c(){t=F("div");for(let h=0;h<l.length;h+=1)l[h].c();n=W(),C(e.$$.fragment),o=W(),C(r.$$.fragment),E(t,"class","c-context-menu__items svelte-1jreht0")},m(h,k){_(h,t,k);for(let T=0;T<l.length;T+=1)l[T]&&l[T].m(t,null);_(h,n,k),x(e,h,k),_(h,o,k),x(r,h,k),c=!0},p(h,k){if(800&k){let b;for(a=de(h[5]),b=0;b<a.length;b+=1){const S=Ea(h,a,b);l[b]?(l[b].p(S,k),f(l[b],1)):(l[b]=ka(S),l[b].c(),f(l[b],1),l[b].m(t,null))}for(K(),b=a.length;b<l.length;b+=1)u(b);Z()}const T={};!i&&64&k&&(i=!0,T.value=h[6],Ze(()=>i=!1)),r.$set(T)},i(h){if(!c){for(let k=0;k<a.length;k+=1)f(l[k]);f(e.$$.fragment,h),f(r.$$.fragment,h),c=!0}},o(h){l=l.filter(Boolean);for(let k=0;k<l.length;k+=1)$(l[k]);$(e.$$.fragment,h),$(r.$$.fragment,h),c=!1},d(h){h&&(y(t),y(n),y(o)),fn(l,h),M(e,h),M(r,h)}}}function gg(s){let t,n,e,o;return t=new _t.Trigger({props:{$$slots:{default:[$g]},$$scope:{ctx:s}}}),e=new _t.Content({props:{size:1,side:"top",align:"start",onClickOutside:s[1],onEscapeKeyDown:s[1],onRequestClose:s[1],$$slots:{default:[hg]},$$scope:{ctx:s}}}),e.$on("keydown",s[7]),{c(){C(t.$$.fragment),n=W(),C(e.$$.fragment)},m(r,i){x(t,r,i),_(r,n,i),x(e,r,i),o=!0},p(r,i){const c={};16777216&i&&(c.$$scope={dirty:i,ctx:r}),t.$set(c);const a={};16777312&i&&(a.$$scope={dirty:i,ctx:r}),e.$set(a)},i(r){o||(f(t.$$.fragment,r),f(e.$$.fragment,r),o=!0)},o(r){$(t.$$.fragment,r),$(e.$$.fragment,r),o=!1},d(r){r&&y(n),M(t,r),M(e,r)}}}function vg(s){let t,n,e={open:s[4],onOpenChange:s[17],nested:!1,$$slots:{default:[gg]},$$scope:{ctx:s}};return t=new _t.Root({props:e}),s[18](t),{c(){C(t.$$.fragment)},m(o,r){x(t,o,r),n=!0},p(o,[r]){const i={};16&r&&(i.open=o[4]),1&r&&(i.onOpenChange=o[17]),16777312&r&&(i.$$scope={dirty:r,ctx:o}),t.$set(i)},i(o){n||(f(t.$$.fragment,o),n=!0)},o(o){$(t.$$.fragment,o),n=!1},d(o){s[18](null),M(t,o)}}}function wg(s,t,n){let e,o,r,i,{onCloseDropdown:c=()=>{}}=t,{onInsertMentionable:a}=t;const l=Ht("chatModel");if(!l)throw new Error("ChatModel not found in context");const u=()=>{i==null||i.focusIdx(-1)},p=()=>{i==null||i.focusIdx(0)},g=new Bd(l,b=>!!a&&a(b)),{displayItems:h,active:k,userQuery:T}=g;return Vt(s,h,b=>n(5,o=b)),Vt(s,k,b=>n(4,e=b)),Vt(s,T,b=>n(6,r=b)),Io(g.dispose),s.$$set=b=>{"onCloseDropdown"in b&&n(0,c=b.onCloseDropdown),"onInsertMentionable"in b&&n(13,a=b.onInsertMentionable)},[c,async()=>{g.closeDropdown()},async()=>{g.toggleDropdown()&&(await xo(),u())},i,e,o,r,async b=>{switch(b.key){case"ArrowLeft":b.preventDefault(),g.popBreadcrumb(),await xo(),i==null||i.focusIdx(0);break;case"ArrowRight":case"ArrowDown":case"ArrowUp":case"Enter":break;default:b.defaultPrevented||u()}},p,g,h,k,T,a,async()=>{g.openDropdown(),await xo(),u()},async b=>{g.selectMentionable(b),await xo(),p()},function(b){r=b,T.set(r)},b=>{b||c()},function(b){ue[b?"unshift":"push"](()=>{i=b,n(3,i)})}]}function Ta(s){return s.line_start===s.line_end?`L${s.line_start+1}`:`L${s.line_start+1}-${s.line_end+1}`}const jl=[{id:"find",label:"find",description:"things in your code base",requiresInput:!0,requiresEditorSelection:!1,placeholderText:"What code are you looking for?",selectionReminderMessage:"Select code in the editor to find.",visible:!0,promptFactory:async s=>`Find ${s}`},{id:"explain",label:"explain",description:"how selected code works",requiresInput:!1,requiresEditorSelection:!0,placeholderText:"",selectionReminderMessage:"Select code in the editor to explain.",visible:!0,promptFactory:async()=>"Explain the selected code"},{id:"fix",label:"fix",description:"issues in selected code",requiresInput:!1,requiresEditorSelection:!0,placeholderText:"",selectionReminderMessage:"Select code in the editor to fix.",visible:!0,promptFactory:async function(s,t){const n=await async function(o){let r=[];try{r=await o.extensionClient.getDiagnostics()}catch(i){console.error("Failed to get diagnostic messages:",i)}return r}(t);let e="Fix the selected code.";return e+=function(o){if(o.length===0)return" The IDE does not report any issues on the selected code.";if(o.length===1)return` The IDE reports the following issue:

• ${Ta(o[0].location)}: ${o[0].message}`;{const r=o.sort((l,u)=>l.location.line_start-u.location.line_start).reduce((l,u)=>{const p=`${u.location.line_start},${u.location.line_end}`;return l[p]||(l[p]=[]),l[p].push(u),l},{}),i=Object.entries(r).map(([l,u])=>{const[p,g]=l.split(",").map(Number),h=Ta({path:"",line_start:p,line_end:g});return u.length===1?`• ${h}: ${u[0].message}`:`• ${h}:
${u.map((k,T)=>`    ${T+1}. ${k.message}`).join(`
`)}`}).join(`
`),c=Math.min(...o.map(l=>l.location.line_start)),a=Math.max(...o.map(l=>l.location.line_end));return` The IDE reports the following issues on ${c===a?`L${c+1}`:`L${c+1}-${a+1}`}:

${i}`}}(n),e}},{id:"write-test",label:"write-test",description:"add tests for selected code",requiresInput:!1,requiresEditorSelection:!0,placeholderText:"",selectionReminderMessage:"Select code in the editor to test.",visible:!0,promptFactory:async()=>"Write a test for the selected code"},{id:"document",label:"document",description:"write documentation for selected code",requiresInput:!1,requiresEditorSelection:!0,placeholderText:"",selectionReminderMessage:"Select code in the editor to document.",visible:!0,promptFactory:async()=>"Document selected code. Do not make unnecessary changes."},{id:"generate-commit-message",label:"generate-commit-message",description:"generate a commit message",requiresInput:!1,requiresEditorSelection:!1,placeholderText:"",selectionReminderMessage:"Hit enter or send to generate a commit message",visible:!0,promptFactory:async()=>""}];function ur(s){return jl.find(t=>t.id===s)}function Ul(){return jl.filter(s=>s.visible)}class yg{constructor(t,n){st(this,"_model");st(this,"_fn");st(this,"dispose",()=>{this._model.removeAfterCommandListener(this._fn)});this._model=t,this._fn=n}}class bg{constructor(t,n){st(this,"_activeCommand",xe(void 0));st(this,"_isActiveCommandRunnable",xe(!1));st(this,"_afterCommandListeners",[]);st(this,"_inputText","");st(this,"_selections",[]);st(this,"hasActiveCommand",un(this._activeCommand,t=>t!==void 0));st(this,"isActiveCommandRunnable",Qr(this._isActiveCommandRunnable));st(this,"activeCommand",Qr(this._activeCommand));st(this,"activeCommandData",un(this._activeCommand,t=>ur(t)));this._chatModel=t,this._agentConversationModel=n}get inputText(){return this._inputText}get selections(){return this._selections}setActiveCommand(t){this._activeCommand.set(t),this.updateRunnable()}setInputText(t){this._inputText=t,this.updateRunnable()}setSelections(t){this._selections=t,this.updateRunnable()}async runActiveCommand(){var e,o,r;const t=ur(ce(this._activeCommand));if(!t)return;const n=await t.promptFactory(this._inputText,this._chatModel);this._activeCommand.set(void 0),this._chatModel.setCurrentConversation(),t.id==="generate-commit-message"?(e=this._chatModel.currentConversationModel)==null||e.generateCommitMessage():(r=this._chatModel.currentConversationModel)==null||r.sendExchange({request_message:n,rich_text_json_repr:void 0,status:_e.draft,model_id:((o=this._chatModel.currentConversationModel)==null?void 0:o.selectedModelId)??void 0}),this._chatModel.host.postMessage({type:fe.usedSlashAction}),this.reportCommandMetric(t.id),this._afterCommandListeners.forEach(i=>i(n))}reportCommandMetric(t){switch(t){case"fix":this._chatModel.extensionClient.reportWebviewClientEvent(Mo.chatUseActionFix);break;case"explain":this._chatModel.extensionClient.reportWebviewClientEvent(Mo.chatUseActionExplain);break;case"write-test":this._chatModel.extensionClient.reportWebviewClientEvent(Mo.chatUseActionWriteTest);break;case"find":this._chatModel.extensionClient.reportWebviewClientEvent(Mo.chatUseActionFind)}}cancelActiveCommand(){this._activeCommand.set(void 0),this._afterCommandListeners.forEach(t=>t(void 0))}afterCommand(t){return this._afterCommandListeners.push(t),new yg(this,t)}removeAfterCommandListener(t){this._afterCommandListeners=this._afterCommandListeners.filter(n=>n!==t)}updateRunnable(){let t=!1;const n=ce(this._activeCommand),e=ur(n);n!==void 0&&e!==void 0&&(t=!0,e!=null&&e.requiresInput&&(t=t&&this._inputText!==""),e!=null&&e.requiresEditorSelection&&(t=t&&this._selections.length>0)),this._isActiveCommandRunnable.set(t)}handleMessageFromExtension(t){const n=t.data;return n.type===fe.runSlashCommand&&(this._agentConversationModel.isCurrConversationAgentic&&this._agentConversationModel.setToChat(),this.setActiveCommand(n.data),this.runActiveCommand(),!0)}}function La(s,t,n){const e=s.slice();return e[14]=t[n],e}function _g(s){let t,n,e;return n=new ds({props:{symbol:"/"}}),{c(){t=F("div"),C(n.$$.fragment),E(t,"class","c-actions-menu__trigger-text svelte-1d6vv18")},m(o,r){_(o,t,r),x(n,t,null),e=!0},p:D,i(o){e||(f(n.$$.fragment,o),e=!0)},o(o){$(n.$$.fragment,o),e=!1},d(o){o&&y(t),M(n)}}}function Cg(s){let t,n;return t=new pe({props:{size:1,variant:"ghost",color:"accent",$$slots:{default:[_g]},$$scope:{ctx:s}}}),{c(){C(t.$$.fragment)},m(e,o){x(t,e,o),n=!0},p(e,o){const r={};131072&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){M(t,e)}}}function xg(s){let t,n,e,o=s[14].label+"";return{c(){t=X("/"),n=X(o),e=W()},m(r,i){_(r,t,i),_(r,n,i),_(r,e,i)},p(r,i){4&i&&o!==(o=r[14].label+"")&&Lt(n,o)},d(r){r&&(y(t),y(n),y(e))}}}function Ia(s){let t,n;function e(){return s[7](s[14])}return t=new _t.Item({props:{onSelect:e,$$slots:{default:[xg]},$$scope:{ctx:s}}}),{c(){C(t.$$.fragment)},m(o,r){x(t,o,r),n=!0},p(o,r){s=o;const i={};4&r&&(i.onSelect=e),131076&r&&(i.$$scope={dirty:r,ctx:s}),t.$set(i)},i(o){n||(f(t.$$.fragment,o),n=!0)},o(o){$(t.$$.fragment,o),n=!1},d(o){M(t,o)}}}function Mg(s){let t,n,e,o,r,i,c,a=de(s[2]),l=[];for(let h=0;h<a.length;h+=1)l[h]=Ia(La(s,a,h));const u=h=>$(l[h],1,1,()=>{l[h]=null});function p(h){s[8](h)}e=new _t.Separator({});let g={placeholder:"Run an action"};return s[0]!==void 0&&(g.value=s[0]),r=new _t.TextFieldItem({props:g}),ue.push(()=>Ye(r,"value",p)),{c(){t=F("div");for(let h=0;h<l.length;h+=1)l[h].c();n=W(),C(e.$$.fragment),o=W(),C(r.$$.fragment),E(t,"class","c-actions-menu__items svelte-1d6vv18")},m(h,k){_(h,t,k);for(let T=0;T<l.length;T+=1)l[T]&&l[T].m(t,null);_(h,n,k),x(e,h,k),_(h,o,k),x(r,h,k),c=!0},p(h,k){if(36&k){let b;for(a=de(h[2]),b=0;b<a.length;b+=1){const S=La(h,a,b);l[b]?(l[b].p(S,k),f(l[b],1)):(l[b]=Ia(S),l[b].c(),f(l[b],1),l[b].m(t,null))}for(K(),b=a.length;b<l.length;b+=1)u(b);Z()}const T={};!i&&1&k&&(i=!0,T.value=h[0],Ze(()=>i=!1)),r.$set(T)},i(h){if(!c){for(let k=0;k<a.length;k+=1)f(l[k]);f(e.$$.fragment,h),f(r.$$.fragment,h),c=!0}},o(h){l=l.filter(Boolean);for(let k=0;k<l.length;k+=1)$(l[k]);$(e.$$.fragment,h),$(r.$$.fragment,h),c=!1},d(h){h&&(y(t),y(n),y(o)),fn(l,h),M(e,h),M(r,h)}}}function Ag(s){let t,n,e,o;return t=new _t.Trigger({props:{$$slots:{default:[Cg]},$$scope:{ctx:s}}}),e=new _t.Content({props:{size:1,side:"top",align:"start",$$slots:{default:[Mg]},$$scope:{ctx:s}}}),e.$on("keydown",s[4]),{c(){C(t.$$.fragment),n=W(),C(e.$$.fragment)},m(r,i){x(t,r,i),_(r,n,i),x(e,r,i),o=!0},p(r,i){const c={};131072&i&&(c.$$scope={dirty:i,ctx:r}),t.$set(c);const a={};131077&i&&(a.$$scope={dirty:i,ctx:r}),e.$set(a)},i(r){o||(f(t.$$.fragment,r),f(e.$$.fragment,r),o=!0)},o(r){$(t.$$.fragment,r),$(e.$$.fragment,r),o=!1},d(r){r&&y(n),M(t,r),M(e,r)}}}function Eg(s){let t,n,e={onOpenChange:s[3],nested:!1,$$slots:{default:[Ag]},$$scope:{ctx:s}};return t=new _t.Root({props:e}),s[9](t),{c(){C(t.$$.fragment)},m(o,r){x(t,o,r),n=!0},p(o,[r]){const i={};131077&r&&(i.$$scope={dirty:r,ctx:o}),t.$set(i)},i(o){n||(f(t.$$.fragment,o),n=!0)},o(o){$(t.$$.fragment,o),n=!1},d(o){s[9](null),M(t,o)}}}function kg(s,t,n){let e,o,{onCloseDropdown:r=()=>{}}=t;const i=Ht("chatModel");if(!i)throw new Error("ChatModel not found in context");const c=Ht("slashCommandModel");function a(){o==null||o.focusIdx(-1)}let l="";function u(p){c.setActiveCommand(p.id),o==null||o.requestClose()}return s.$$set=p=>{"onCloseDropdown"in p&&n(6,r=p.onCloseDropdown)},s.$$.update=()=>{1&s.$$.dirty&&n(2,e=function(p){let g=Ul();return i.flags.enableGenerateCommitMessage||(g=g.filter(h=>h.id!=="generate-commit-message")),p===void 0?g:g.filter(h=>h.label.toLowerCase().includes(p.toLowerCase()))}(l))},[l,o,e,async function(p){p?(await xo(),a()):(r(),n(0,l=""))},async p=>{switch(p.key){case"ArrowLeft":case"ArrowRight":case"ArrowDown":case"ArrowUp":case"Enter":break;default:p.defaultPrevented||a()}},u,r,p=>u(p),function(p){l=p,n(0,l)},function(p){ue[p?"unshift":"push"](()=>{o=p,n(1,o)})}]}function Tg(s){let t,n,e=[{xmlns:"http://www.w3.org/2000/svg"},{"data-ds-icon":"fa"},{viewBox:"0 0 448 512"},s[0]],o={};for(let r=0;r<e.length;r+=1)o=Ct(o,e[r]);return{c(){t=Nt("svg"),n=new Fe(!0),this.h()},l(r){t=Oe(r,"svg",{xmlns:!0,"data-ds-icon":!0,viewBox:!0});var i=Be(t);n=ze(i,!0),i.forEach(y),this.h()},h(){n.a=null,ne(t,o)},m(r,i){He(r,t,i),n.m('<!--! Font Awesome Pro 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2024 Fonticons, Inc.--><path d="M375 73c-26-26-68.1-26-94.1 0L89 265c-43.7 43.6-43.7 114.4 0 158s114.4 43.6 158.1 0L399 271c9.4-9.4 24.6-9.4 33.9 0s9.4 24.6 0 33.9L281 457c-62.4 62.4-163.5 62.4-225.9 0S-7.4 293.4 55 231L247 39c44.7-44.7 117.3-44.7 162 0s44.7 117.2 0 161.9L225.2 384.7c-31.6 31.6-83.6 28.7-111.5-6.2-23.8-29.8-21.5-72.8 5.5-99.8L271 127c9.4-9.4 24.6-9.4 33.9 0s9.4 24.6 0 33.9L153.2 312.7c-9.7 9.7-10.6 25.1-2 35.8 10 12.5 28.7 13.6 40 2.2L375 167c26-26 26-68.1 0-94.1z"/>',t)},p(r,[i]){ne(t,o=ge(e,[{xmlns:"http://www.w3.org/2000/svg"},{"data-ds-icon":"fa"},{viewBox:"0 0 448 512"},1&i&&r[0]]))},i:D,o:D,d(r){r&&y(t)}}}function Lg(s,t,n){return s.$$set=e=>{n(0,t=Ct(Ct({},t),Qt(e)))},[t=Qt(t)]}class Ig extends nt{constructor(t){super(),ot(this,t,Lg,Tg,tt,{})}}function Sg(s){let t,n,e;return n=new Ig({}),{c(){t=F("span"),C(n.$$.fragment),E(t,"class","c-input-action-bar__icon svelte-5w6pdf"),E(t,"slot","symbol")},m(o,r){_(o,t,r),x(n,t,null),e=!0},p:D,i(o){e||(f(n.$$.fragment,o),e=!0)},o(o){$(n.$$.fragment,o),e=!1},d(o){o&&y(t),M(n)}}}function Rg(s){let t,n,e,o,r,i,c;return n=new ds({props:{$$slots:{symbol:[Sg]},$$scope:{ctx:s}}}),{c(){t=F("label"),C(n.$$.fragment),e=W(),o=F("input"),E(t,"for",s[3]),E(t,"class","c-input-action-bar__label svelte-5w6pdf"),E(o,"type","file"),o.hidden=!0,E(o,"id",s[3]),E(o,"accept",s[0])},m(a,l){_(a,t,l),x(n,t,null),_(a,e,l),_(a,o,l),r=!0,i||(c=[bt(o,"click",Dg),bt(o,"input",s[4])],i=!0)},p(a,l){const u={};128&l&&(u.$$scope={dirty:l,ctx:a}),n.$set(u),(!r||1&l)&&E(o,"accept",a[0])},i(a){r||(f(n.$$.fragment,a),r=!0)},o(a){$(n.$$.fragment,a),r=!1},d(a){a&&(y(t),y(e),y(o)),M(n),i=!1,Re(c)}}}function Pg(s){let t,n;return t=new pe({props:{size:1,variant:"ghost-block",color:"accent",disabled:s[1],class:"c-input-action-bar__add-file-btn",$$slots:{default:[Rg]},$$scope:{ctx:s}}}),{c(){C(t.$$.fragment)},m(e,o){x(t,e,o),n=!0},p(e,[o]){const r={};2&o&&(r.disabled=e[1]),133&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){M(t,e)}}}const Dg=function(){this.value=null};function Ng(s,t,n){let{accept:e="*"}=t,{disabled:o=!1}=t,{onAddFiles:r=a}=t;const i=`file-${Date.now()}-${Math.floor(1e4*Math.random())}`,c=Hd();function a(l){var u,p,g;(g=(p=(u=c.commandManager)==null?void 0:u.chain())==null?void 0:p.insertImagesIntoEditor)==null||g.call(p,l)}return s.$$set=l=>{"accept"in l&&n(0,e=l.accept),"disabled"in l&&n(1,o=l.disabled),"onAddFiles"in l&&n(2,r=l.onAddFiles)},[e,o,r,i,function(l){var u;r([...((u=l.currentTarget)==null?void 0:u.files)??[]])}]}function Fg(s){let t,n;return{c(){t=Nt("svg"),n=Nt("path"),E(n,"d","M2 3C2 2.44772 2.44772 2 3 2H12C12.5523 2 13 2.44772 13 3V12C13 12.5523 12.5523 13 12 13H3C2.44772 13 2 12.5523 2 12V3Z"),E(n,"fill","currentColor"),E(n,"fill-rule","evenodd"),E(n,"clip-rule","evenodd"),E(t,"width","15"),E(t,"height","15"),E(t,"viewBox","0 0 15 15"),E(t,"fill","none"),E(t,"xmlns","http://www.w3.org/2000/svg")},m(e,o){_(e,t,o),U(t,n)},p:D,i:D,o:D,d(e){e&&y(t)}}}class Og extends nt{constructor(t){super(),ot(this,t,null,Fg,tt,{})}}function Bg(s){let t,n;return t=new Og({}),{c(){C(t.$$.fragment)},m(e,o){x(t,e,o),n=!0},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){M(t,e)}}}function zg(s){let t,n,e;return n=new pe({props:{size:1,variant:"soft",color:"neutral",$$slots:{default:[Bg]},$$scope:{ctx:s}}}),n.$on("click",function(){ve(s[0])&&s[0].apply(this,arguments)}),{c(){t=F("div"),C(n.$$.fragment),E(t,"class","c-cancel-button svelte-1b7ib22")},m(o,r){_(o,t,r),x(n,t,null),e=!0},p(o,[r]){s=o;const i={};2&r&&(i.$$scope={dirty:r,ctx:s}),n.$set(i)},i(o){e||(f(n.$$.fragment,o),e=!0)},o(o){$(n.$$.fragment,o),e=!1},d(o){o&&y(t),M(n)}}}function Hg(s,t,n){let{cancelAction:e}=t;return s.$$set=o=>{"cancelAction"in o&&n(0,e=o.cancelAction)},[e]}function jg(s){let t;return{c(){t=X("Resend")},m(n,e){_(n,t,e)},d(n){n&&y(t)}}}function Ug(s){let t,n,e,o;return t=new xd({}),e=new Ot({props:{size:1,$$slots:{default:[jg]},$$scope:{ctx:s}}}),{c(){C(t.$$.fragment),n=W(),C(e.$$.fragment)},m(r,i){x(t,r,i),_(r,n,i),x(e,r,i),o=!0},p(r,i){const c={};2&i&&(c.$$scope={dirty:i,ctx:r}),e.$set(c)},i(r){o||(f(t.$$.fragment,r),f(e.$$.fragment,r),o=!0)},o(r){$(t.$$.fragment,r),$(e.$$.fragment,r),o=!1},d(r){r&&y(n),M(t,r),M(e,r)}}}function qg(s){let t,n,e;return n=new pe({props:{size:1,variant:"soft",color:"neutral",$$slots:{default:[Ug]},$$scope:{ctx:s}}}),n.$on("click",function(){ve(s[0])&&s[0].apply(this,arguments)}),n.$on("keyup",function(){ve(s[0])&&s[0].apply(this,arguments)}),{c(){t=F("div"),C(n.$$.fragment),E(t,"class","c-resend-button svelte-1a3z7my")},m(o,r){_(o,t,r),x(n,t,null),e=!0},p(o,[r]){s=o;const i={};2&r&&(i.$$scope={dirty:r,ctx:s}),n.$set(i)},i(o){e||(f(n.$$.fragment,o),e=!0)},o(o){$(n.$$.fragment,o),e=!1},d(o){o&&y(t),M(n)}}}function Wg(s,t,n){let{resendAction:e}=t;return s.$$set=o=>{"resendAction"in o&&n(0,e=o.resendAction)},[e]}function Vg(s){let t,n,e=[{width:"15"},{height:"15"},{viewBox:"0 0 512 512"},{fill:"none"},{xmlns:"http://www.w3.org/2000/svg"},s[0]],o={};for(let r=0;r<e.length;r+=1)o=Ct(o,e[r]);return{c(){t=Nt("svg"),n=Nt("path"),E(n,"d","M327.5 85.2c-4.5 1.7-7.5 6-7.5 10.8s3 9.1 7.5 10.8L384 128l21.2 56.5c1.7 4.5 6 7.5 10.8 7.5s9.1-3 10.8-7.5L448 128l56.5-21.2c4.5-1.7 7.5-6 7.5-10.8s-3-9.1-7.5-10.8L448 64 426.8 7.5C425.1 3 420.8 0 416 0s-9.1 3-10.8 7.5L384 64 327.5 85.2zM9.3 240C3.6 242.6 0 248.3 0 254.6s3.6 11.9 9.3 14.5L26.3 277l8.1 3.7 .6 .3 88.3 40.8L164.1 410l.3 .6 3.7 8.1 7.9 17.1c2.6 5.7 8.3 9.3 14.5 9.3s11.9-3.6 14.5-9.3l7.9-17.1 3.7-8.1 .3-.6 40.8-88.3L346 281l.6-.3 8.1-3.7 17.1-7.9c5.7-2.6 9.3-8.3 9.3-14.5s-3.6-11.9-9.3-14.5l-17.1-7.9-8.1-3.7-.6-.3-88.3-40.8L217 99.1l-.3-.6L213 90.3l-7.9-17.1c-2.6-5.7-8.3-9.3-14.5-9.3s-11.9 3.6-14.5 9.3l-7.9 17.1-3.7 8.1-.3 .6-40.8 88.3L35.1 228.1l-.6 .3-8.1 3.7L9.3 240zm83 14.5l51.2-23.6c10.4-4.8 18.7-13.1 23.5-23.5l23.6-51.2 23.6 51.2c4.8 10.4 13.1 18.7 23.5 23.5l51.2 23.6-51.2 23.6c-10.4 4.8-18.7 13.1-23.5 23.5l-23.6 51.2-23.6-51.2c-4.8-10.4-13.1-18.7-23.5-23.5L92.3 254.6zM384 384l-56.5 21.2c-4.5 1.7-7.5 6-7.5 10.8s3 9.1 7.5 10.8L384 448l21.2 56.5c1.7 4.5 6 7.5 10.8 7.5s9.1-3 10.8-7.5L448 448l56.5-21.2c4.5-1.7 7.5-6 7.5-10.8s-3-9.1-7.5-10.8L448 384l-21.2-56.5c-1.7-4.5-6-7.5-10.8-7.5s-9.1 3-10.8 7.5L384 384z"),E(n,"fill","currentColor"),ne(t,o)},m(r,i){_(r,t,i),U(t,n)},p(r,[i]){ne(t,o=ge(e,[{width:"15"},{height:"15"},{viewBox:"0 0 512 512"},{fill:"none"},{xmlns:"http://www.w3.org/2000/svg"},1&i&&r[0]]))},i:D,o:D,d(r){r&&y(t)}}}function Gg(s,t,n){return s.$$set=e=>{n(0,t=Ct(Ct({},t),Qt(e)))},[t=Qt(t)]}class Yg extends nt{constructor(t){super(),ot(this,t,Gg,Vg,tt,{})}}function Sa(s){let t,n,e;return n=new Me({props:{size:1,variant:"soft",color:"neutral",disabled:s[0],title:"Enhance Prompt",$$slots:{default:[Zg]},$$scope:{ctx:s}}}),n.$on("click",s[5]),{c(){t=F("div"),C(n.$$.fragment),E(t,"class","c-rewrite-prompt-button svelte-1k3jvo8")},m(o,r){_(o,t,r),x(n,t,null),e=!0},p(o,r){const i={};1&r&&(i.disabled=o[0]),130&r&&(i.$$scope={dirty:r,ctx:o}),n.$set(i)},i(o){e||(f(n.$$.fragment,o),e=!0)},o(o){$(n.$$.fragment,o),e=!1},d(o){o&&y(t),M(n)}}}function Xg(s){let t,n;return t=new Yg({}),{c(){C(t.$$.fragment)},m(e,o){x(t,e,o),n=!0},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){M(t,e)}}}function Kg(s){let t,n;return t=new Hn({props:{size:1,useCurrentColor:!0}}),{c(){C(t.$$.fragment)},m(e,o){x(t,e,o),n=!0},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){M(t,e)}}}function Zg(s){let t,n,e,o;const r=[Kg,Xg],i=[];function c(a,l){return a[1]?0:1}return t=c(s),n=i[t]=r[t](s),{c(){n.c(),e=ft()},m(a,l){i[t].m(a,l),_(a,e,l),o=!0},p(a,l){let u=t;t=c(a),t!==u&&(K(),$(i[u],1,1,()=>{i[u]=null}),Z(),n=i[t],n||(n=i[t]=r[t](a),n.c()),f(n,1),n.m(e.parentNode,e))},i(a){o||(f(n),o=!0)},o(a){$(n),o=!1},d(a){a&&y(e),i[t].d(a)}}}function Jg(s){let t,n,e=s[2].flags.enableDebugFeatures&&Sa(s);return{c(){e&&e.c(),t=ft()},m(o,r){e&&e.m(o,r),_(o,t,r),n=!0},p(o,[r]){o[2].flags.enableDebugFeatures?e?(e.p(o,r),4&r&&f(e,1)):(e=Sa(o),e.c(),f(e,1),e.m(t.parentNode,t)):e&&(K(),$(e,1,1,()=>{e=null}),Z())},i(o){n||(f(e),n=!0)},o(o){$(e),n=!1},d(o){o&&y(t),e&&e.d(o)}}}function Qg(s,t,n){let e,o,{onRewrite:r}=t,{isDisabled:i=!1}=t;const c=Ht("chatModel");if(Vt(s,c,l=>n(2,o=l)),!c)throw new Error("ChatModel not found in context");const a=xe(!1);return Vt(s,a,l=>n(1,e=l)),s.$$set=l=>{"onRewrite"in l&&n(6,r=l.onRewrite),"isDisabled"in l&&n(0,i=l.isDisabled)},[i,e,o,c,a,function(){Ao(a,e=!0,e);try{Promise.resolve(r()).finally(()=>{Ao(a,e=!1,e)})}catch{Ao(a,e=!1,e)}},r]}const Mn={Root:class extends nt{constructor(s){super(),ot(this,s,jh,Hh,tt,{})}},SingleSendButton:Hl,SendButton:class extends nt{constructor(s){super(),ot(this,s,ig,sg,tt,{primaryAction:0,isDisabled:1})}},ContextMenu:class extends nt{constructor(s){super(),ot(this,s,wg,vg,tt,{onCloseDropdown:0,onInsertMentionable:13,closeDropdown:1,openDropdown:14,toggleDropdown:2})}get closeDropdown(){return this.$$.ctx[1]}get openDropdown(){return this.$$.ctx[14]}get toggleDropdown(){return this.$$.ctx[2]}},ActionsMenu:class extends nt{constructor(s){super(),ot(this,s,kg,Eg,tt,{onCloseDropdown:6})}},AddFileButton:class extends nt{constructor(s){super(),ot(this,s,Ng,Pg,tt,{accept:0,disabled:1,onAddFiles:2})}},ResendButton:class extends nt{constructor(s){super(),ot(this,s,Wg,qg,tt,{resendAction:0})}},CancelButton:class extends nt{constructor(s){super(),ot(this,s,Hg,zg,tt,{cancelAction:0})}},RewritePromptButton:class extends nt{constructor(s){super(),ot(this,s,Qg,Jg,tt,{onRewrite:6,isDisabled:0})}},NotifyButton:kl};function Ra(s){let t;function n(r,i){return r[0]===r[1]?e2:t2}let e=n(s),o=e(s);return{c(){o.c(),t=ft()},m(r,i){o.m(r,i),_(r,t,i)},p(r,i){e===(e=n(r))&&o?o.p(r,i):(o.d(1),o=e(r),o&&(o.c(),o.m(t.parentNode,t)))},d(r){r&&y(t),o.d(r)}}}function t2(s){let t,n,e,o,r=s[0]+1+"",i=s[1]+1+"";return{c(){t=X("L"),n=X(r),e=X("-"),o=X(i)},m(c,a){_(c,t,a),_(c,n,a),_(c,e,a),_(c,o,a)},p(c,a){1&a&&r!==(r=c[0]+1+"")&&Lt(n,r),2&a&&i!==(i=c[1]+1+"")&&Lt(o,i)},d(c){c&&(y(t),y(n),y(e),y(o))}}}function e2(s){let t,n,e=s[0]+1+"";return{c(){t=X("L"),n=X(e)},m(o,r){_(o,t,r),_(o,n,r)},p(o,r){1&r&&e!==(e=o[0]+1+"")&&Lt(n,e)},d(o){o&&(y(t),y(n))}}}function n2(s){let t,n,e,o=s[0]!==void 0&&s[1]!==void 0&&Ra(s);return{c(){t=F("span"),n=X(s[2]),e=W(),o&&o.c(),E(t,"class","c-selection-item svelte-198ldgd")},m(r,i){_(r,t,i),U(t,n),U(t,e),o&&o.m(t,null)},p(r,[i]){4&i&&Lt(n,r[2]),r[0]!==void 0&&r[1]!==void 0?o?o.p(r,i):(o=Ra(r),o.c(),o.m(t,null)):o&&(o.d(1),o=null)},i:D,o:D,d(r){r&&y(t),o&&o.d()}}}function o2(s,t,n){let e,o,r,i,c,{fileSelection:a}=t;return s.$$set=l=>{"fileSelection"in l&&n(3,a=l.fileSelection)},s.$$.update=()=>{8&s.$$.dirty&&n(5,e=a.pathName||""),8&s.$$.dirty&&(a.fullRange?(n(0,i=a.fullRange.startLineNumber),n(1,c=a.fullRange.endLineNumber)):a.range&&(n(0,i=a.range.start),n(1,c=a.range.stop))),32&s.$$.dirty&&n(4,o=e.split("/").filter(l=>l.length>0)),16&s.$$.dirty&&n(2,r=o[o.length-1])},[i,c,r,a,o,e]}class r2 extends nt{constructor(t){super(),ot(this,t,o2,n2,tt,{fileSelection:3})}}function Pa(s,t,n){const e=s.slice();return e[18]=t[n],e}function s2(s){let t,n,e,o,r,i,c,a,l,u,p,g;const h=[c2,a2],k=[];function T(b,S){var H;return b[1]!==void 0&&((H=b[1])==null?void 0:H.length)>0?0:1}return i=T(s),c=k[i]=h[i](s),{c(){t=F("p"),n=X("/"),e=X(s[2]),o=W(),r=F("div"),c.c(),a=W(),l=F("input"),E(t,"class","c-action-label svelte-34wttr"),E(l,"type","text"),E(l,"class","c-tiny-input-inline svelte-34wttr"),E(r,"class","c-max-element-inline svelte-34wttr")},m(b,S){_(b,t,S),U(t,n),U(t,e),_(b,o,S),_(b,r,S),k[i].m(r,null),U(r,a),U(r,l),u=!0,p||(g=[bt(l,"keydown",s[9]),bt(l,"keyup",s[10])],p=!0)},p(b,S){(!u||4&S)&&Lt(e,b[2]);let H=i;i=T(b),i===H?k[i].p(b,S):(K(),$(k[H],1,1,()=>{k[H]=null}),Z(),c=k[i],c?c.p(b,S):(c=k[i]=h[i](b),c.c()),f(c,1),c.m(r,a))},i(b){u||(f(c),u=!0)},o(b){$(c),u=!1},d(b){b&&(y(t),y(o),y(r)),k[i].d(),p=!1,Re(g)}}}function i2(s){let t,n,e,o,r,i,c,a;return{c(){var l;t=F("p"),n=X("/"),e=X(s[2]),o=W(),r=F("input"),E(t,"class","c-action-label svelte-34wttr"),E(r,"type","text"),E(r,"class","c-max-element-inline svelte-34wttr"),E(r,"placeholder",i=(l=s[4])==null?void 0:l.placeholderText)},m(l,u){_(l,t,u),U(t,n),U(t,e),_(l,o,u),_(l,r,u),li(r,s[0]),c||(a=[bt(r,"input",s[12]),bt(r,"keydown",s[8]),bt(r,"keyup",s[10])],c=!0)},p(l,u){var p;4&u&&Lt(e,l[2]),16&u&&i!==(i=(p=l[4])==null?void 0:p.placeholderText)&&E(r,"placeholder",i),1&u&&r.value!==l[0]&&li(r,l[0])},i:D,o:D,d(l){l&&(y(t),y(o),y(r)),c=!1,Re(a)}}}function a2(s){var o;let t,n,e=((o=s[4])==null?void 0:o.selectionReminderMessage)+"";return{c(){t=F("span"),n=X(e),E(t,"class","c-select-code-msg")},m(r,i){_(r,t,i),U(t,n)},p(r,i){var c;16&i&&e!==(e=((c=r[4])==null?void 0:c.selectionReminderMessage)+"")&&Lt(n,e)},i:D,o:D,d(r){r&&y(t)}}}function c2(s){let t,n,e=de(s[1]),o=[];for(let i=0;i<e.length;i+=1)o[i]=Da(Pa(s,e,i));const r=i=>$(o[i],1,1,()=>{o[i]=null});return{c(){for(let i=0;i<o.length;i+=1)o[i].c();t=ft()},m(i,c){for(let a=0;a<o.length;a+=1)o[a]&&o[a].m(i,c);_(i,t,c),n=!0},p(i,c){if(2&c){let a;for(e=de(i[1]),a=0;a<e.length;a+=1){const l=Pa(i,e,a);o[a]?(o[a].p(l,c),f(o[a],1)):(o[a]=Da(l),o[a].c(),f(o[a],1),o[a].m(t.parentNode,t))}for(K(),a=e.length;a<o.length;a+=1)r(a);Z()}},i(i){if(!n){for(let c=0;c<e.length;c+=1)f(o[c]);n=!0}},o(i){o=o.filter(Boolean);for(let c=0;c<o.length;c+=1)$(o[c]);n=!1},d(i){i&&y(t),fn(o,i)}}}function Da(s){let t,n;return t=new r2({props:{fileSelection:s[18].selection}}),{c(){C(t.$$.fragment)},m(e,o){x(t,e,o),n=!0},p(e,o){const r={};2&o&&(r.fileSelection=e[18].selection),t.$set(r)},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){M(t,e)}}}function l2(s){let t,n,e,o,r,i,c;const a=[i2,s2],l=[];function u(p,g){return p[2]==="find"?0:1}return e=u(s),o=l[e]=a[e](s),{c(){t=F("div"),n=F("div"),o.c(),E(n,"class","c-action-row svelte-34wttr"),E(t,"class","c-action svelte-34wttr"),E(t,"role","button"),E(t,"tabindex","-1")},m(p,g){_(p,t,g),U(t,n),l[e].m(n,null),r=!0,i||(c=[bt(t,"click",s[7]),bt(t,"keydown",u2)],i=!0)},p(p,[g]){let h=e;e=u(p),e===h?l[e].p(p,g):(K(),$(l[h],1,1,()=>{l[h]=null}),Z(),o=l[e],o?o.p(p,g):(o=l[e]=a[e](p),o.c()),f(o,1),o.m(n,null))},i(p){r||(f(o),r=!0)},o(p){$(o),r=!1},d(p){p&&y(t),l[e].d(),i=!1,Re(c)}}}const u2=s=>{};function d2(s,t,n){let e,o,r,i,c,a,l,u,p=D,g=D,h=D;s.$$.on_destroy.push(()=>p()),s.$$.on_destroy.push(()=>g()),s.$$.on_destroy.push(()=>h());let k=Ht("chatModel");if(!k)throw new Error("ChatModel not found in context");let T=Ht("slashCommandModel");const b=()=>{const B=document.querySelector("input");B&&(B.focus(),B.select())};let S="",H=!1;function O(){T.cancelActiveCommand()}return jn(b),s.$$.update=()=>{2048&s.$$.dirty&&n(1,o=Object.values(u.selections).sort((B,ut)=>B.selection.pathName.localeCompare(ut.selection.pathName))),2&s.$$.dirty&&T.setSelections(o),4&s.$$.dirty&&n(4,i=ur(l)),1&s.$$.dirty&&T.setInputText(S)},n(6,e=k.specialContextInputModel),h(),h=se(e,B=>n(11,u=B)),n(5,r=T.activeCommand),g(),g=se(r,B=>n(2,l=B)),n(3,c=T.isActiveCommandRunnable),p(),p=se(c,B=>n(14,a=B)),[S,o,l,c,i,r,e,b,function(B){return!(B.shiftKey||B.ctrlKey||B.metaKey)&&(B.stopPropagation(),B.key==="Enter"?(H=!0,!0):B.key==="Escape"?(O(),!0):B.key==="Backspace"&&(S===""&&O(),!0))},function(B){if(B.ctrlKey||B.metaKey||B.key==="Tab")return!1;if(B.stopPropagation(),!B.shiftKey){if(B.key==="Escape"||B.key==="Backspace")return O(),!0;if(B.key==="Enter"&&a)return T.runActiveCommand(),!0}return B.preventDefault(),!0},function(B){return!B.shiftKey&&!(B.key!=="Enter"||!H||!a)&&(H=!1,T.runActiveCommand(),!0)},u,function(){S=this.value,n(0,S)}]}class f2 extends nt{constructor(t){super(),ot(this,t,d2,l2,tt,{})}}function Na(s,t,n){const e=s.slice();return e[11]=t[n],e}function m2(s){let t,n,e,o=s[11].label+"";return{c(){t=X("/"),n=X(o),e=W()},m(r,i){_(r,t,i),_(r,n,i),_(r,e,i)},p(r,i){1&i&&o!==(o=r[11].label+"")&&Lt(n,o)},d(r){r&&(y(t),y(n),y(e))}}}function Fa(s){let t,n;return t=new hr.Menu.Item({props:{mentionable:s[11],$$slots:{default:[m2]},$$scope:{ctx:s}}}),{c(){C(t.$$.fragment)},m(e,o){x(t,e,o),n=!0},p(e,o){const r={};1&o&&(r.mentionable=e[11]),16385&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){M(t,e)}}}function p2(s){let t,n,e=de(s[0]),o=[];for(let i=0;i<e.length;i+=1)o[i]=Fa(Na(s,e,i));const r=i=>$(o[i],1,1,()=>{o[i]=null});return{c(){for(let i=0;i<o.length;i+=1)o[i].c();t=ft()},m(i,c){for(let a=0;a<o.length;a+=1)o[a]&&o[a].m(i,c);_(i,t,c),n=!0},p(i,c){if(1&c){let a;for(e=de(i[0]),a=0;a<e.length;a+=1){const l=Na(i,e,a);o[a]?(o[a].p(l,c),f(o[a],1)):(o[a]=Fa(l),o[a].c(),f(o[a],1),o[a].m(t.parentNode,t))}for(K(),a=e.length;a<o.length;a+=1)r(a);Z()}},i(i){if(!n){for(let c=0;c<e.length;c+=1)f(o[c]);n=!0}},o(i){o=o.filter(Boolean);for(let c=0;c<o.length;c+=1)$(o[c]);n=!1},d(i){i&&y(t),fn(o,i)}}}function $2(s){let t,n,e=s[10].label+"";return{c(){t=F("span"),n=X(e),E(t,"slot","mentionable")},m(o,r){_(o,t,r),U(t,n)},p(o,r){1024&r&&e!==(e=o[10].label+"")&&Lt(n,e)},d(o){o&&y(t)}}}function h2(s){let t,n,e,o;return t=new hr.Menu.Root({props:{mentionables:s[0],onQueryUpdate:s[3],onSelectMentionable:s[6],$$slots:{default:[p2]},$$scope:{ctx:s}}}),e=new hr.ChipTooltip({props:{$$slots:{mentionable:[$2,({mentionable:r})=>({10:r}),({mentionable:r})=>r?1024:0]},$$scope:{ctx:s}}}),{c(){C(t.$$.fragment),n=W(),C(e.$$.fragment)},m(r,i){x(t,r,i),_(r,n,i),x(e,r,i),o=!0},p(r,i){const c={};1&i&&(c.mentionables=r[0]),16385&i&&(c.$$scope={dirty:i,ctx:r}),t.$set(c);const a={};17408&i&&(a.$$scope={dirty:i,ctx:r}),e.$set(a)},i(r){o||(f(t.$$.fragment,r),f(e.$$.fragment,r),o=!0)},o(r){$(t.$$.fragment,r),$(e.$$.fragment,r),o=!1},d(r){r&&y(n),M(t,r),M(e,r)}}}function g2(s){let t,n;return t=new hr.Root({props:{pluginId:"augment-slash-actions",triggerCharacter:"/",allowedPrefixes:[],renderText:v2,$$slots:{default:[h2]},$$scope:{ctx:s}}}),{c(){C(t.$$.fragment)},m(e,o){x(t,e,o),n=!0},p(e,[o]){const r={};16385&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){M(t,e)}}}const v2=()=>"";function w2(s,t,n){let e,o;const r=Ht("chatModel"),i=Ht("slashCommandModel"),{activeCommand:c}=i;Vt(s,c,u=>n(5,o=u));const a=Ht(cs.CONTEXT_KEY);let l;return s.$$.update=()=>{16&s.$$.dirty&&n(0,e=function(u){let p=Ul();return r.flags.enableGenerateCommitMessage||(p=p.filter(g=>g.id!=="generate-commit-message")),u===void 0?p:p.filter(g=>g.label.toLowerCase().includes(u.toLowerCase()))}(l)),32&s.$$.dirty&&(o?(a.commandManager.hide(),a.commandManager.clearContent()):(a.commandManager.show(),a.commandManager.clearContent(),a.commandManager.requestFocus()))},[e,i,c,function(u){n(4,l=u)},l,o,u=>(i.setActiveCommand(u.id),!0)]}class y2 extends nt{constructor(t){super(),ot(this,t,w2,g2,tt,{})}}const b2=(s,t,n)=>()=>{if(!s.currentAgentId){if(s.isCreatingAgent)return!1;s.setIsCreatingAgent(!0);const o=async()=>{var r;try{const i=await s.createRemoteAgentFromDraft(((r=t.draftExchange)==null?void 0:r.request_message)??"");i&&(s==null||s.setCurrentAgent(i),t.clearDraftExchange())}catch(i){console.error("Failed to create remote agent: ",i)}finally{s.setIsCreatingAgent(!1)}};return n?(n==null||n.isGithubAuthenticated().then(r=>{r?o():s.setIsCreatingAgent(!1)}).catch(r=>{console.error("Failed to check GitHub authentication status:",r),s.setIsCreatingAgent(!1)}),!0):(o(),!0)}const e=t.draftExchange;return e&&s&&s.sendMessage(e.request_message).then(o=>{o&&t.clearDraftExchange()}),!0};class co{constructor(t){this._asyncMsgSender=t}async listBranches(t=""){try{return{branches:(await this._asyncMsgSender.send({type:fe.getGitBranchesRequest,data:{prefix:t}},1e4)).data.branches}}catch(n){return console.error("Failed to fetch branches:",n),{branches:[]}}}async getWorkspaceDiff(t){try{return(await this._asyncMsgSender.send({type:fe.getWorkspaceDiffRequest,data:{branchName:t}},1e4)).data.diff}catch(n){return console.error("Failed to get workspace diff:",n),""}}async getRemoteUrl(){try{return(await this._asyncMsgSender.send({type:fe.getRemoteUrlRequest},1e4)).data.remoteUrl}catch(t){return console.error("Failed to get remote url:",t),""}}async fetch(){try{await this._asyncMsgSender.send({type:fe.gitFetchRequest},1e4)}catch(t){console.error("Failed to fetch remote branch:",t)}}async isGitRepository(){try{return(await this._asyncMsgSender.send({type:fe.isGitRepositoryRequest},1e4)).data.isGitRepository}catch(t){return console.error("Failed to check if is git repository:",t),!1}}async isGithubAuthenticated(){try{return(await this._asyncMsgSender.send({type:fe.isGithubAuthenticatedRequest},1e4)).data.isAuthenticated}catch(t){return console.error("Failed to check GitHub authentication status:",t),!1}}async authenticateGithub(){try{const t=await this._asyncMsgSender.send({type:fe.authenticateGithubRequest},1e4);return{success:t.data.success,message:t.data.message}}catch(t){return console.error("Failed to authenticate with GitHub:",t),{success:!1,message:`Error: ${t instanceof Error?t.message:String(t)}`}}}async revokeGithubAccess(){try{const t=await this._asyncMsgSender.send({type:fe.revokeGithubAccessRequest},1e4);return{success:t.data.success,message:t.data.message}}catch(t){return console.error("Failed to revoke GitHub access:",t),{success:!1,message:`Error: ${t instanceof Error?t.message:String(t)}`}}}}st(co,"key","gitReferenceModel");const _2=s=>({}),Oa=s=>({}),C2=s=>({}),Ba=s=>({}),x2=s=>({}),za=s=>({}),M2=s=>({}),Ha=s=>({});function A2(s){let t;return{c(){t=X(s[0])},m(n,e){_(n,t,e)},p(n,e){1&e&&Lt(t,n[0])},d(n){n&&y(t)}}}function ja(s){let t,n;const e=s[3].subtitle,o=Gt(e,s,s[4],Ba),r=o||function(i){let c,a;return c=new Ot({props:{size:2,$$slots:{default:[E2]},$$scope:{ctx:i}}}),{c(){C(c.$$.fragment)},m(l,u){x(c,l,u),a=!0},p(l,u){const p={};18&u&&(p.$$scope={dirty:u,ctx:l}),c.$set(p)},i(l){a||(f(c.$$.fragment,l),a=!0)},o(l){$(c.$$.fragment,l),a=!1},d(l){M(c,l)}}}(s);return{c(){t=F("div"),r&&r.c(),E(t,"class","c-card-button__subtitle svelte-1c82nwt")},m(i,c){_(i,t,c),r&&r.m(t,null),n=!0},p(i,c){o?o.p&&(!n||16&c)&&Yt(o,e,i,i[4],n?Kt(e,i[4],c,C2):Xt(i[4]),Ba):r&&r.p&&(!n||2&c)&&r.p(i,n?c:-1)},i(i){n||(f(r,i),n=!0)},o(i){$(r,i),n=!1},d(i){i&&y(t),r&&r.d(i)}}}function E2(s){let t;return{c(){t=X(s[1])},m(n,e){_(n,t,e)},p(n,e){2&e&&Lt(t,n[1])},d(n){n&&y(t)}}}function Ua(s){let t,n;const e=s[3].iconRight,o=Gt(e,s,s[4],Oa);return{c(){t=F("div"),o&&o.c(),E(t,"class","c-card-button__icon-right svelte-1c82nwt")},m(r,i){_(r,t,i),o&&o.m(t,null),n=!0},p(r,i){o&&o.p&&(!n||16&i)&&Yt(o,e,r,r[4],n?Kt(e,r[4],i,_2):Xt(r[4]),Oa)},i(r){n||(f(o,r),n=!0)},o(r){$(o,r),n=!1},d(r){r&&y(t),o&&o.d(r)}}}function k2(s){let t,n,e,o,r,i,c,a;const l=s[3].iconLeft,u=Gt(l,s,s[4],Ha),p=s[3].title,g=Gt(p,s,s[4],za),h=g||function(b){let S,H;return S=new Ot({props:{size:2,$$slots:{default:[A2]},$$scope:{ctx:b}}}),{c(){C(S.$$.fragment)},m(O,B){x(S,O,B),H=!0},p(O,B){const ut={};17&B&&(ut.$$scope={dirty:B,ctx:O}),S.$set(ut)},i(O){H||(f(S.$$.fragment,O),H=!0)},o(O){$(S.$$.fragment,O),H=!1},d(O){M(S,O)}}}(s);let k=s[1]&&ja(s),T=s[2].iconRight&&Ua(s);return{c(){t=F("div"),u&&u.c(),n=W(),e=F("div"),o=F("div"),h&&h.c(),r=W(),k&&k.c(),i=W(),T&&T.c(),c=ft(),E(t,"class","c-card-button__icon-left svelte-1c82nwt"),E(o,"class","c-card-button__title svelte-1c82nwt"),E(e,"class","c-card-button__content svelte-1c82nwt")},m(b,S){_(b,t,S),u&&u.m(t,null),_(b,n,S),_(b,e,S),U(e,o),h&&h.m(o,null),U(e,r),k&&k.m(e,null),_(b,i,S),T&&T.m(b,S),_(b,c,S),a=!0},p(b,[S]){u&&u.p&&(!a||16&S)&&Yt(u,l,b,b[4],a?Kt(l,b[4],S,M2):Xt(b[4]),Ha),g?g.p&&(!a||16&S)&&Yt(g,p,b,b[4],a?Kt(p,b[4],S,x2):Xt(b[4]),za):h&&h.p&&(!a||1&S)&&h.p(b,a?S:-1),b[1]?k?(k.p(b,S),2&S&&f(k,1)):(k=ja(b),k.c(),f(k,1),k.m(e,null)):k&&(K(),$(k,1,1,()=>{k=null}),Z()),b[2].iconRight?T?(T.p(b,S),4&S&&f(T,1)):(T=Ua(b),T.c(),f(T,1),T.m(c.parentNode,c)):T&&(K(),$(T,1,1,()=>{T=null}),Z())},i(b){a||(f(u,b),f(h,b),f(k),f(T),a=!0)},o(b){$(u,b),$(h,b),$(k),$(T),a=!1},d(b){b&&(y(t),y(n),y(e),y(i),y(c)),u&&u.d(b),h&&h.d(b),k&&k.d(),T&&T.d(b)}}}function T2(s,t,n){let{$$slots:e={},$$scope:o}=t;const r=al(e);let{title:i="Select an option"}=t,{subtitle:c=""}=t;return s.$$set=a=>{"title"in a&&n(0,i=a.title),"subtitle"in a&&n(1,c=a.subtitle),"$$scope"in a&&n(4,o=a.$$scope)},[i,c,r,e,o]}class ql extends nt{constructor(t){super(),ot(this,t,T2,k2,tt,{title:0,subtitle:1})}}const L2=s=>({}),qa=s=>({slot:"iconLeft"}),I2=s=>({}),Wa=s=>({slot:"iconRight"});function Va(s,t,n){const e=s.slice();return e[18]=t[n],e}const S2=s=>({}),Ga=s=>({}),R2=s=>({}),Ya=s=>({slot:"iconLeft"}),P2=s=>({}),Xa=s=>({slot:"iconRight"});function D2(s){let t,n,e,o,r;return n=new ql({props:{title:s[3],subtitle:s[4],$$slots:{iconRight:[O2],iconLeft:[F2]},$$scope:{ctx:s}}}),{c(){t=F("button"),C(n.$$.fragment),E(t,"class","c-card-button__display svelte-1sjyo69"),E(t,"type","button")},m(i,c){_(i,t,c),x(n,t,null),e=!0,o||(r=[bt(t,"click",s[15]),bt(t,"keydown",s[16])],o=!0)},p(i,c){const a={};8&c&&(a.title=i[3]),16&c&&(a.subtitle=i[4]),131072&c&&(a.$$scope={dirty:c,ctx:i}),n.$set(a)},i(i){e||(f(n.$$.fragment,i),e=!0)},o(i){$(n.$$.fragment,i),e=!1},d(i){i&&y(t),M(n),o=!1,Re(r)}}}function N2(s){let t,n,e;function o(i){s[14](i)}let r={onOpenChange:s[9],$$slots:{default:[G2]},$$scope:{ctx:s}};return s[1]!==void 0&&(r.requestClose=s[1]),t=new _t.Root({props:r}),ue.push(()=>Ye(t,"requestClose",o)),{c(){C(t.$$.fragment)},m(i,c){x(t,i,c),e=!0},p(i,c){const a={};512&c&&(a.onOpenChange=i[9]),131545&c&&(a.$$scope={dirty:c,ctx:i}),!n&&2&c&&(n=!0,a.requestClose=i[1],Ze(()=>n=!1)),t.$set(a)},i(i){e||(f(t.$$.fragment,i),e=!0)},o(i){$(t.$$.fragment,i),e=!1},d(i){M(t,i)}}}function F2(s){let t;const n=s[12].iconLeft,e=Gt(n,s,s[17],qa);return{c(){e&&e.c()},m(o,r){e&&e.m(o,r),t=!0},p(o,r){e&&e.p&&(!t||131072&r)&&Yt(e,n,o,o[17],t?Kt(n,o[17],r,L2):Xt(o[17]),qa)},i(o){t||(f(e,o),t=!0)},o(o){$(e,o),t=!1},d(o){e&&e.d(o)}}}function O2(s){let t;const n=s[12].iconRight,e=Gt(n,s,s[17],Wa);return{c(){e&&e.c()},m(o,r){e&&e.m(o,r),t=!0},p(o,r){e&&e.p&&(!t||131072&r)&&Yt(e,n,o,o[17],t?Kt(n,o[17],r,I2):Xt(o[17]),Wa)},i(o){t||(f(e,o),t=!0)},o(o){$(e,o),t=!1},d(o){e&&e.d(o)}}}function B2(s){let t;const n=s[12].iconLeft,e=Gt(n,s,s[17],Ya);return{c(){e&&e.c()},m(o,r){e&&e.m(o,r),t=!0},p(o,r){e&&e.p&&(!t||131072&r)&&Yt(e,n,o,o[17],t?Kt(n,o[17],r,R2):Xt(o[17]),Ya)},i(o){t||(f(e,o),t=!0)},o(o){$(e,o),t=!1},d(o){e&&e.d(o)}}}function z2(s){let t;const n=s[12].iconRight,e=Gt(n,s,s[17],Xa),o=e||function(r){let i,c;return i=new Ro({}),{c(){C(i.$$.fragment)},m(a,l){x(i,a,l),c=!0},i(a){c||(f(i.$$.fragment,a),c=!0)},o(a){$(i.$$.fragment,a),c=!1},d(a){M(i,a)}}}();return{c(){o&&o.c()},m(r,i){o&&o.m(r,i),t=!0},p(r,i){e&&e.p&&(!t||131072&i)&&Yt(e,n,r,r[17],t?Kt(n,r[17],i,P2):Xt(r[17]),Xa)},i(r){t||(f(o,r),t=!0)},o(r){$(o,r),t=!1},d(r){o&&o.d(r)}}}function H2(s){let t,n,e;return n=new ql({props:{title:s[3],subtitle:s[4],$$slots:{iconRight:[z2],iconLeft:[B2]},$$scope:{ctx:s}}}),{c(){t=F("div"),C(n.$$.fragment),E(t,"class","c-card-button__display svelte-1sjyo69")},m(o,r){_(o,t,r),x(n,t,null),e=!0},p(o,r){const i={};8&r&&(i.title=o[3]),16&r&&(i.subtitle=o[4]),131072&r&&(i.$$scope={dirty:r,ctx:o}),n.$set(i)},i(o){e||(f(n.$$.fragment,o),e=!0)},o(o){$(n.$$.fragment,o),e=!1},d(o){o&&y(t),M(n)}}}function j2(s){let t,n;return t=new _t.Label({props:{$$slots:{default:[q2]},$$scope:{ctx:s}}}),{c(){C(t.$$.fragment)},m(e,o){x(t,e,o),n=!0},p(e,o){const r={};131328&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){M(t,e)}}}function U2(s){let t,n,e=[],o=new Map,r=de(s[6]);const i=c=>c[7](c[18]);for(let c=0;c<r.length;c+=1){let a=Va(s,r,c),l=i(a);o.set(l,e[c]=Ka(l,a))}return{c(){for(let c=0;c<e.length;c+=1)e[c].c();t=ft()},m(c,a){for(let l=0;l<e.length;l+=1)e[l]&&e[l].m(c,a);_(c,t,a),n=!0},p(c,a){1217&a&&(r=de(c[6]),K(),e=ss(e,a,i,1,c,r,o,t.parentNode,ll,Ka,t,Va),Z())},i(c){if(!n){for(let a=0;a<r.length;a+=1)f(e[a]);n=!0}},o(c){for(let a=0;a<e.length;a+=1)$(e[a]);n=!1},d(c){c&&y(t);for(let a=0;a<e.length;a+=1)e[a].d(c)}}}function q2(s){let t;return{c(){t=X(s[8])},m(n,e){_(n,t,e)},p(n,e){256&e&&Lt(t,n[8])},d(n){n&&y(t)}}}function W2(s){let t,n,e=s[7](s[18])+"";return{c(){t=X(e),n=W()},m(o,r){_(o,t,r),_(o,n,r)},p(o,r){192&r&&e!==(e=o[7](o[18])+"")&&Lt(t,e)},d(o){o&&(y(t),y(n))}}}function Ka(s,t){let n,e,o;function r(){return t[13](t[18])}return e=new _t.Item({props:{onSelect:r,highlight:t[0]===t[18],$$slots:{default:[W2]},$$scope:{ctx:t}}}),{key:s,first:null,c(){n=ft(),C(e.$$.fragment),this.first=n},m(i,c){_(i,n,c),x(e,i,c),o=!0},p(i,c){t=i;const a={};64&c&&(a.onSelect=r),65&c&&(a.highlight=t[0]===t[18]),131264&c&&(a.$$scope={dirty:c,ctx:t}),e.$set(a)},i(i){o||(f(e.$$.fragment,i),o=!0)},o(i){$(e.$$.fragment,i),o=!1},d(i){i&&y(n),M(e,i)}}}function V2(s){let t;const n=s[12]["dropdown-content"],e=Gt(n,s,s[17],Ga),o=e||function(r){let i,c,a,l;const u=[U2,j2],p=[];function g(h,k){return h[6].length>0?0:1}return i=g(r),c=p[i]=u[i](r),{c(){c.c(),a=ft()},m(h,k){p[i].m(h,k),_(h,a,k),l=!0},p(h,k){let T=i;i=g(h),i===T?p[i].p(h,k):(K(),$(p[T],1,1,()=>{p[T]=null}),Z(),c=p[i],c?c.p(h,k):(c=p[i]=u[i](h),c.c()),f(c,1),c.m(a.parentNode,a))},i(h){l||(f(c),l=!0)},o(h){$(c),l=!1},d(h){h&&y(a),p[i].d(h)}}}(s);return{c(){o&&o.c()},m(r,i){o&&o.m(r,i),t=!0},p(r,i){e?e.p&&(!t||131072&i)&&Yt(e,n,r,r[17],t?Kt(n,r[17],i,S2):Xt(r[17]),Ga):o&&o.p&&(!t||449&i)&&o.p(r,t?i:-1)},i(r){t||(f(o,r),t=!0)},o(r){$(o,r),t=!1},d(r){o&&o.d(r)}}}function G2(s){let t,n,e,o;return t=new _t.Trigger({props:{$$slots:{default:[H2]},$$scope:{ctx:s}}}),e=new _t.Content({props:{side:"bottom",align:"start",$$slots:{default:[V2]},$$scope:{ctx:s}}}),{c(){C(t.$$.fragment),n=W(),C(e.$$.fragment)},m(r,i){x(t,r,i),_(r,n,i),x(e,r,i),o=!0},p(r,i){const c={};131096&i&&(c.$$scope={dirty:i,ctx:r}),t.$set(c);const a={};131521&i&&(a.$$scope={dirty:i,ctx:r}),e.$set(a)},i(r){o||(f(t.$$.fragment,r),f(e.$$.fragment,r),o=!0)},o(r){$(t.$$.fragment,r),$(e.$$.fragment,r),o=!1},d(r){r&&y(n),M(t,r),M(e,r)}}}function Y2(s){let t,n,e,o;const r=[N2,D2],i=[];function c(a,l){return a[2]==="dropdown"?0:1}return n=c(s),e=i[n]=r[n](s),{c(){t=F("div"),e.c(),E(t,"class","c-card-button svelte-1sjyo69")},m(a,l){_(a,t,l),i[n].m(t,null),o=!0},p(a,[l]){let u=n;n=c(a),n===u?i[n].p(a,l):(K(),$(i[u],1,1,()=>{i[u]=null}),Z(),e=i[n],e?e.p(a,l):(e=i[n]=r[n](a),e.c()),f(e,1),e.m(t,null))},i(a){o||(f(e),o=!0)},o(a){$(e),o=!1},d(a){a&&y(t),i[n].d()}}}function X2(s,t,n){let{$$slots:e={},$$scope:o}=t,{type:r="button"}=t,{title:i="Select an option"}=t,{subtitle:c=""}=t,{onClick:a=()=>{}}=t,{items:l=[]}=t,{selectedItem:u}=t,{formatItemLabel:p=S=>(S==null?void 0:S.toString())||""}=t,{noItemsLabel:g="No items found"}=t,{onDropdownOpenChange:h=()=>{}}=t,{requestClose:k=()=>{}}=t;function T(S){n(0,u=S),b("select",S)}const b=cl();return s.$$set=S=>{"type"in S&&n(2,r=S.type),"title"in S&&n(3,i=S.title),"subtitle"in S&&n(4,c=S.subtitle),"onClick"in S&&n(5,a=S.onClick),"items"in S&&n(6,l=S.items),"selectedItem"in S&&n(0,u=S.selectedItem),"formatItemLabel"in S&&n(7,p=S.formatItemLabel),"noItemsLabel"in S&&n(8,g=S.noItemsLabel),"onDropdownOpenChange"in S&&n(9,h=S.onDropdownOpenChange),"requestClose"in S&&n(1,k=S.requestClose),"$$scope"in S&&n(17,o=S.$$scope)},[u,k,r,i,c,a,l,p,g,h,T,b,e,S=>T(S),function(S){k=S,n(1,k)},()=>{a(),b("click")},S=>{S.key!=="Enter"&&S.key!==" "||(a(),b("click"))},o]}class Wl extends nt{constructor(t){super(),ot(this,t,X2,Y2,tt,{type:2,title:3,subtitle:4,onClick:5,items:6,selectedItem:0,formatItemLabel:7,noItemsLabel:8,onDropdownOpenChange:9,requestClose:1,selectItem:10})}get selectItem(){return this.$$.ctx[10]}}function K2(s){let t,n;return t=new Wl({props:{type:"dropdown",title:"Connected to your GitHub account",$$slots:{"dropdown-content":[rv],iconLeft:[J2]},$$scope:{ctx:s}}}),{c(){C(t.$$.fragment)},m(e,o){x(t,e,o),n=!0},p(e,o){const r={};4100&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){M(t,e)}}}function Z2(s){let t,n;return t=new Wl({props:{type:"button",title:s[1]?"Cancel":"Connect to GitHub",onClick:s[4],$$slots:{iconRight:[cv],iconLeft:[sv]},$$scope:{ctx:s}}}),{c(){C(t.$$.fragment)},m(e,o){x(t,e,o),n=!0},p(e,o){const r={};2&o&&(r.title=e[1]?"Cancel":"Connect to GitHub"),4098&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){M(t,e)}}}function J2(s){let t,n;return t=new yl({props:{slot:"iconLeft"}}),{c(){C(t.$$.fragment)},m(e,o){x(t,e,o),n=!0},p:D,i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){M(t,e)}}}function Q2(s){let t,n;return t=new Ot({props:{size:1,weight:"medium",$$slots:{default:[ev]},$$scope:{ctx:s}}}),{c(){C(t.$$.fragment)},m(e,o){x(t,e,o),n=!0},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){M(t,e)}}}function tv(s){let t,n,e,o;return t=new Hn({props:{slot:"iconLeft",useCurrentColor:!0,size:1}}),e=new Ot({props:{size:1,weight:"medium",$$slots:{default:[nv]},$$scope:{ctx:s}}}),{c(){C(t.$$.fragment),n=W(),C(e.$$.fragment)},m(r,i){x(t,r,i),_(r,n,i),x(e,r,i),o=!0},i(r){o||(f(t.$$.fragment,r),f(e.$$.fragment,r),o=!0)},o(r){$(t.$$.fragment,r),$(e.$$.fragment,r),o=!1},d(r){r&&y(n),M(t,r),M(e,r)}}}function ev(s){let t;return{c(){t=X("Revoke Access")},m(n,e){_(n,t,e)},d(n){n&&y(t)}}}function nv(s){let t;return{c(){t=X("Revoking...")},m(n,e){_(n,t,e)},d(n){n&&y(t)}}}function ov(s){let t,n,e,o;const r=[tv,Q2],i=[];function c(a,l){return a[2]?0:1}return t=c(s),n=i[t]=r[t](s),{c(){n.c(),e=ft()},m(a,l){i[t].m(a,l),_(a,e,l),o=!0},p(a,l){let u=t;t=c(a),t!==u&&(K(),$(i[u],1,1,()=>{i[u]=null}),Z(),n=i[t],n||(n=i[t]=r[t](a),n.c()),f(n,1),n.m(e.parentNode,e))},i(a){o||(f(n),o=!0)},o(a){$(n),o=!1},d(a){a&&y(e),i[t].d(a)}}}function rv(s){let t,n,e;return n=new _t.Item({props:{color:"error",onSelect:s[6],$$slots:{default:[ov]},$$scope:{ctx:s}}}),{c(){t=F("div"),C(n.$$.fragment),E(t,"slot","dropdown-content")},m(o,r){_(o,t,r),x(n,t,null),e=!0},p(o,r){const i={};4100&r&&(i.$$scope={dirty:r,ctx:o}),n.$set(i)},i(o){e||(f(n.$$.fragment,o),e=!0)},o(o){$(n.$$.fragment,o),e=!1},d(o){o&&y(t),M(n)}}}function sv(s){let t,n;return t=new yl({props:{slot:"iconLeft"}}),{c(){C(t.$$.fragment)},m(e,o){x(t,e,o),n=!0},p:D,i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){M(t,e)}}}function iv(s){let t,n;return t=new ud({}),{c(){C(t.$$.fragment)},m(e,o){x(t,e,o),n=!0},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){M(t,e)}}}function av(s){let t,n;return t=new Hn({props:{size:1,useCurrentColor:!0}}),{c(){C(t.$$.fragment)},m(e,o){x(t,e,o),n=!0},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){M(t,e)}}}function cv(s){let t,n,e,o;const r=[av,iv],i=[];function c(a,l){return a[1]?0:1}return n=c(s),e=i[n]=r[n](s),{c(){t=F("div"),e.c(),E(t,"slot","iconRight")},m(a,l){_(a,t,l),i[n].m(t,null),o=!0},p(a,l){let u=n;n=c(a),n!==u&&(K(),$(i[u],1,1,()=>{i[u]=null}),Z(),e=i[n],e||(e=i[n]=r[n](a),e.c()),f(e,1),e.m(t,null))},i(a){o||(f(e),o=!0)},o(a){$(e),o=!1},d(a){a&&y(t),i[n].d()}}}function lv(s){let t,n,e,o,r;const i=[Z2,K2],c=[];function a(l,u){return l[0]?1:0}return e=a(s),o=c[e]=i[e](s),{c(){t=F("div"),n=F("div"),o.c(),E(n,"class","github-auth-button"),E(t,"class","github-auth-card svelte-zdlnsr")},m(l,u){_(l,t,u),U(t,n),c[e].m(n,null),r=!0},p(l,[u]){let p=e;e=a(l),e===p?c[e].p(l,u):(K(),$(c[p],1,1,()=>{c[p]=null}),Z(),o=c[e],o?o.p(l,u):(o=c[e]=i[e](l),o.c()),f(o,1),o.m(n,null))},i(l){r||(f(o),r=!0)},o(l){$(o),r=!1},d(l){l&&y(t),c[e].d()}}}function uv(s,t,n){const e=cl(),o=Ht(co.key);let r=!1,i=!1,c=!1,a=null,l=null;async function u(){if(!c){n(2,c=!0);try{const p=await o.revokeGithubAccess();p.success?(n(0,r=!1),e("authStateChange",{isAuthenticated:!1})):console.error("Failed to revoke GitHub access:",p.message)}catch(p){console.error("Error revoking GitHub access:",p)}finally{n(2,c=!1)}}}return jn(async()=>{await async function(){try{const p=await o.isGithubAuthenticated();p!==r?(n(0,r=p),e("authStateChange",{isAuthenticated:r})):n(0,r=p)}catch(p){console.error("Failed to check GitHub authentication status:",p),n(0,r=!1),e("authStateChange",{isAuthenticated:!1})}}()}),Io(()=>{a&&(clearTimeout(a),a=null),l&&(clearInterval(l),l=null)}),[r,i,c,()=>{},async function(){if(i)return n(1,i=!1),void(a&&(clearTimeout(a),a=null));n(1,i=!0);try{await o.authenticateGithub(),l=setInterval(async()=>{await o.isGithubAuthenticated()&&(n(0,r=!0),n(1,i=!1),e("authStateChange",{isAuthenticated:!0}),l&&clearInterval(l),a&&(clearTimeout(a),a=null))},5e3),a=setTimeout(()=>{l&&clearInterval(l),n(1,i=!1),a=null},6e4)}catch(p){console.error("Failed to authenticate with GitHub:",p),n(1,i=!1)}},u,()=>{u()}]}class dv extends nt{constructor(t){super(),ot(this,t,uv,lv,tt,{})}}const{window:Jr}=Vd,fv=s=>({}),Za=s=>({slot:"banner"});function Ja(s){let t,n,e={requestEditorFocus:s[34],onMentionItemsUpdated:s[33]};return t=new qd({props:e}),s[46](t),{c(){C(t.$$.fragment)},m(o,r){x(t,o,r),n=!0},p(o,r){t.$set({})},i(o){n||(f(t.$$.fragment,o),n=!0)},o(o){$(t.$$.fragment,o),n=!1},d(o){s[46](null),M(t,o)}}}function Qa(s){let t,n;return t=new y2({}),{c(){C(t.$$.fragment)},m(e,o){x(t,e,o),n=!0},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){M(t,e)}}}function tc(s){let t,n,e,o;return t=new Dp({props:{saveImage:s[6].saveImage,deleteImage:s[6].deleteImage,renderImage:s[6].renderImage}}),e=new cp({}),{c(){C(t.$$.fragment),n=W(),C(e.$$.fragment)},m(r,i){x(t,r,i),_(r,n,i),x(e,r,i),o=!0},p(r,i){const c={};64&i[0]&&(c.saveImage=r[6].saveImage),64&i[0]&&(c.deleteImage=r[6].deleteImage),64&i[0]&&(c.renderImage=r[6].renderImage),t.$set(c)},i(r){o||(f(t.$$.fragment,r),f(e.$$.fragment,r),o=!0)},o(r){$(t.$$.fragment,r),$(e.$$.fragment,r),o=!1},d(r){r&&y(n),M(t,r),M(e,r)}}}function ec(s){let t,n;return t=new f2({}),{c(){C(t.$$.fragment)},m(e,o){x(t,e,o),n=!0},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){M(t,e)}}}function mv(s){let t,n,e,o,r,i,c,a,l,u,p;t=new jd({props:{shortcuts:s[12]}});let g=!s[21].doHideAtMentions&&Ja(s),h=!s[5]&&!s[21].doHideSlashActions&&Qa();r=new Ud({props:{placeholder:s[9]}}),c=new bl.Content({props:{content:s[20],onContentChanged:s[32]}});let k=s[6].flags.enableChatMultimodal&&!s[21].doHideMultimodalActions&&tc(s),T=s[24]&&ec();return{c(){C(t.$$.fragment),n=W(),g&&g.c(),e=W(),h&&h.c(),o=W(),C(r.$$.fragment),i=W(),C(c.$$.fragment),a=W(),k&&k.c(),l=W(),T&&T.c(),u=ft()},m(b,S){x(t,b,S),_(b,n,S),g&&g.m(b,S),_(b,e,S),h&&h.m(b,S),_(b,o,S),x(r,b,S),_(b,i,S),x(c,b,S),_(b,a,S),k&&k.m(b,S),_(b,l,S),T&&T.m(b,S),_(b,u,S),p=!0},p(b,S){const H={};4096&S[0]&&(H.shortcuts=b[12]),t.$set(H),b[21].doHideAtMentions?g&&(K(),$(g,1,1,()=>{g=null}),Z()):g?(g.p(b,S),2097152&S[0]&&f(g,1)):(g=Ja(b),g.c(),f(g,1),g.m(e.parentNode,e)),b[5]||b[21].doHideSlashActions?h&&(K(),$(h,1,1,()=>{h=null}),Z()):h?2097184&S[0]&&f(h,1):(h=Qa(),h.c(),f(h,1),h.m(o.parentNode,o));const O={};512&S[0]&&(O.placeholder=b[9]),r.$set(O);const B={};1048576&S[0]&&(B.content=b[20]),c.$set(B),b[6].flags.enableChatMultimodal&&!b[21].doHideMultimodalActions?k?(k.p(b,S),2097216&S[0]&&f(k,1)):(k=tc(b),k.c(),f(k,1),k.m(l.parentNode,l)):k&&(K(),$(k,1,1,()=>{k=null}),Z()),b[24]?T?16777216&S[0]&&f(T,1):(T=ec(),T.c(),f(T,1),T.m(u.parentNode,u)):T&&(K(),$(T,1,1,()=>{T=null}),Z())},i(b){p||(f(t.$$.fragment,b),f(g),f(h),f(r.$$.fragment,b),f(c.$$.fragment,b),f(k),f(T),p=!0)},o(b){$(t.$$.fragment,b),$(g),$(h),$(r.$$.fragment,b),$(c.$$.fragment,b),$(k),$(T),p=!1},d(b){b&&(y(n),y(e),y(o),y(i),y(a),y(l),y(u)),M(t,b),g&&g.d(b),h&&h.d(b),M(r,b),M(c,b),k&&k.d(b),T&&T.d(b)}}}function pv(s){let t;const n=s[44].banner,e=Gt(n,s,s[48],Za);return{c(){e&&e.c()},m(o,r){e&&e.m(o,r),t=!0},p(o,r){e&&e.p&&(!t||131072&r[1])&&Yt(e,n,o,o[48],t?Kt(n,o[48],r,fv):Xt(o[48]),Za)},i(o){t||(f(e,o),t=!0)},o(o){$(e,o),t=!1},d(o){e&&e.d(o)}}}function nc(s){let t,n;return t=new Oh({props:{chatModel:s[25]}}),{c(){C(t.$$.fragment)},m(e,o){x(t,e,o),n=!0},p:D,i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){M(t,e)}}}function $v(s){let t,n,e=!s[21].doHideContextBar&&nc(s);return{c(){e&&e.c(),t=ft()},m(o,r){e&&e.m(o,r),_(o,t,r),n=!0},p(o,r){o[21].doHideContextBar?e&&(K(),$(e,1,1,()=>{e=null}),Z()):e?(e.p(o,r),2097152&r[0]&&f(e,1)):(e=nc(o),e.c(),f(e,1),e.m(t.parentNode,t))},i(o){n||(f(e),n=!0)},o(o){$(e),n=!1},d(o){o&&y(t),e&&e.d(o)}}}function oc(s){let t,n;return t=new b$({props:{chatModel:s[25],agentConversationModel:s[26]}}),{c(){C(t.$$.fragment)},m(e,o){x(t,e,o),n=!0},p:D,i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){M(t,e)}}}function rc(s){let t,n;return t=new Mn.AddFileButton({props:{accept:".png,.jpg,.jpeg"}}),{c(){C(t.$$.fragment)},m(e,o){x(t,e,o),n=!0},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){M(t,e)}}}function sc(s){let t,n;return t=new Mn.ActionsMenu({props:{onCloseDropdown:s[34]}}),{c(){C(t.$$.fragment)},m(e,o){x(t,e,o),n=!0},p:D,i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){M(t,e)}}}function ic(s){var e;let t,n;return t=new Mn.ContextMenu({props:{onCloseDropdown:s[34],onInsertMentionable:(e=s[7])==null?void 0:e.insertMentionNode}}),{c(){C(t.$$.fragment)},m(o,r){x(t,o,r),n=!0},p(o,r){var c;const i={};128&r[0]&&(i.onInsertMentionable=(c=o[7])==null?void 0:c.insertMentionNode),t.$set(i)},i(o){n||(f(t.$$.fragment,o),n=!0)},o(o){$(t.$$.fragment,o),n=!1},d(o){M(t,o)}}}function hv(s){let t,n,e,o,r,i=s[23].enableAgentMode&&!s[21].doHideAgentSwitcher&&oc(s),c=s[6].flags.enableChatMultimodal&&!s[21].doHideMultimodalActions&&rc(),a=!s[5]&&!s[21].doHideAtMentions&&sc(s),l=!s[21].doHideSlashActions&&ic(s);return{c(){i&&i.c(),t=W(),c&&c.c(),n=W(),a&&a.c(),e=W(),l&&l.c(),o=ft()},m(u,p){i&&i.m(u,p),_(u,t,p),c&&c.m(u,p),_(u,n,p),a&&a.m(u,p),_(u,e,p),l&&l.m(u,p),_(u,o,p),r=!0},p(u,p){u[23].enableAgentMode&&!u[21].doHideAgentSwitcher?i?(i.p(u,p),10485760&p[0]&&f(i,1)):(i=oc(u),i.c(),f(i,1),i.m(t.parentNode,t)):i&&(K(),$(i,1,1,()=>{i=null}),Z()),u[6].flags.enableChatMultimodal&&!u[21].doHideMultimodalActions?c?2097216&p[0]&&f(c,1):(c=rc(),c.c(),f(c,1),c.m(n.parentNode,n)):c&&(K(),$(c,1,1,()=>{c=null}),Z()),u[5]||u[21].doHideAtMentions?a&&(K(),$(a,1,1,()=>{a=null}),Z()):a?(a.p(u,p),2097184&p[0]&&f(a,1)):(a=sc(u),a.c(),f(a,1),a.m(e.parentNode,e)),u[21].doHideSlashActions?l&&(K(),$(l,1,1,()=>{l=null}),Z()):l?(l.p(u,p),2097152&p[0]&&f(l,1)):(l=ic(u),l.c(),f(l,1),l.m(o.parentNode,o))},i(u){r||(f(i),f(c),f(a),f(l),r=!0)},o(u){$(i),$(c),$(a),$(l),r=!1},d(u){u&&(y(t),y(n),y(e),y(o)),i&&i.d(u),c&&c.d(u),a&&a.d(u),l&&l.d(u)}}}function ac(s){let t,n;return t=new Mn.NotifyButton({}),{c(){C(t.$$.fragment)},m(e,o){x(t,e,o),n=!0},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){M(t,e)}}}function gv(s){let t,n,e,o;return t=new Mn.RewritePromptButton({props:{isDisabled:s[15],onRewrite:s[35]}}),e=new Mn.SendButton({props:{isDisabled:s[15],primaryAction:s[3]}}),{c(){C(t.$$.fragment),n=W(),C(e.$$.fragment)},m(r,i){x(t,r,i),_(r,n,i),x(e,r,i),o=!0},p(r,i){const c={};32768&i[0]&&(c.isDisabled=r[15]),t.$set(c);const a={};32768&i[0]&&(a.isDisabled=r[15]),8&i[0]&&(a.primaryAction=r[3]),e.$set(a)},i(r){o||(f(t.$$.fragment,r),f(e.$$.fragment,r),o=!0)},o(r){$(t.$$.fragment,r),$(e.$$.fragment,r),o=!1},d(r){r&&y(n),M(t,r),M(e,r)}}}function vv(s){var e;let t,n;return t=new Mn.ResendButton({props:{resendAction:(e=s[4])==null?void 0:e.resendLastExchange}}),{c(){C(t.$$.fragment)},m(o,r){x(t,o,r),n=!0},p(o,r){var c;const i={};16&r[0]&&(i.resendAction=(c=o[4])==null?void 0:c.resendLastExchange),t.$set(i)},i(o){n||(f(t.$$.fragment,o),n=!0)},o(o){$(t.$$.fragment,o),n=!1},d(o){M(t,o)}}}function wv(s){let t,n;return t=new Mn.CancelButton({props:{cancelAction:s[26].interruptAgent}}),{c(){C(t.$$.fragment)},m(e,o){x(t,e,o),n=!0},p:D,i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){M(t,e)}}}function yv(s){let t,n;return t=new Mn.CancelButton({props:{cancelAction:s[14]}}),{c(){C(t.$$.fragment)},m(e,o){x(t,e,o),n=!0},p(e,o){const r={};16384&o[0]&&(r.cancelAction=e[14]),t.$set(r)},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){M(t,e)}}}function bv(s){let t,n;return t=new dv({}),t.$on("authStateChange",s[45]),{c(){C(t.$$.fragment)},m(e,o){x(t,e,o),n=!0},p:D,i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){M(t,e)}}}function _v(s){let t,n,e,o,r,i=s[22]&&!s[19]&&ac();const c=[bv,yv,wv,vv,gv],a=[];function l(u,p){return u[19]?0:u[16]?1:u[10]?2:u[2]?3:4}return n=l(s),e=a[n]=c[n](s),{c(){i&&i.c(),t=W(),e.c(),o=ft()},m(u,p){i&&i.m(u,p),_(u,t,p),a[n].m(u,p),_(u,o,p),r=!0},p(u,p){u[22]&&!u[19]?i?4718592&p[0]&&f(i,1):(i=ac(),i.c(),f(i,1),i.m(t.parentNode,t)):i&&(K(),$(i,1,1,()=>{i=null}),Z());let g=n;n=l(u),n===g?a[n].p(u,p):(K(),$(a[g],1,1,()=>{a[g]=null}),Z(),e=a[n],e?e.p(u,p):(e=a[n]=c[n](u),e.c()),f(e,1),e.m(o.parentNode,o))},i(u){r||(f(i),f(e),r=!0)},o(u){$(i),$(e),r=!1},d(u){u&&(y(t),y(o)),i&&i.d(u),a[n].d(u)}}}function Cv(s){let t,n;return t=new Mn.Root({props:{slot:"footer",$$slots:{rightAlign:[_v],leftAlign:[hv]},$$scope:{ctx:s}}}),{c(){C(t.$$.fragment)},m(e,o){x(t,e,o),n=!0},p(e,o){const r={};15320318&o[0]|131072&o[1]&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){M(t,e)}}}function cc(s){let t,n,e={editable:s[0],$$slots:{footer:[Cv],header:[$v],banner:[pv],default:[mv]},$$scope:{ctx:s}};return t=new bl.Root({props:e}),s[47](t),{c(){C(t.$$.fragment)},m(o,r){x(t,o,r),n=!0},p(o,r){const i={};1&r[0]&&(i.editable=o[0]),33150718&r[0]|131072&r[1]&&(i.$$scope={dirty:r,ctx:o}),t.$set(i)},i(o){n||(f(t.$$.fragment,o),n=!0)},o(o){$(t.$$.fragment,o),n=!1},d(o){s[47](null),M(t,o)}}}function xv(s){let t,n,e,o,r=s[13],i=cc(s);return{c(){t=F("div"),i.c(),E(t,"class","c-chat-input svelte-1fe9e8j"),E(t,"data-testid","design-system-chat-input")},m(c,a){_(c,t,a),i.m(t,null),n=!0,e||(o=[bt(Jr,"focus",s[34]),bt(Jr,"blur",function(){ve(s[6].saveImmediate)&&s[6].saveImmediate.apply(this,arguments)}),bt(Jr,"beforeunload",function(){ve(s[6].saveImmediate)&&s[6].saveImmediate.apply(this,arguments)})],e=!0)},p(c,a){s=c,8192&a[0]&&tt(r,r=s[13])?(K(),$(i,1,1,D),Z(),i=cc(s),i.c(),f(i,1),i.m(t,null)):i.p(s,a)},i(c){n||(f(i),n=!0)},o(c){$(i),n=!1},d(c){c&&y(t),i.d(c),e=!1,Re(o)}}}function Mv(s,t,n){let e,o,r,i,c,a,l,u,p,g,h,k,T,b,S,H,O,B,ut,kt,rt,vt,et,At,St,It,G,Dt=D,Rt=D,jt=D;s.$$.on_destroy.push(()=>Dt()),s.$$.on_destroy.push(()=>Rt()),s.$$.on_destroy.push(()=>jt());let{$$slots:Zt={},$$scope:Bt}=t;const $e=Ht("chatModel");Vt(s,$e,Tt=>n(6,At=Tt));const Mt=Ht("toolsWebviewModel"),qt=Ht("agentConversationModel"),me=Ht(Zn.key);Vt(s,me,Tt=>n(41,rt=Tt));const ke=Ht(co.key),Xe=Ht("slashCommandModel"),P=$e.flags;Vt(s,P,Tt=>n(23,It=Tt));const w=Ht(pr)??xe($r);Vt(s,w,Tt=>n(43,St=Tt));const{currentConversationModel:I}=$e;Vt(s,I,Tt=>n(40,ut=Tt));const{activeCommand:z}=Xe;Vt(s,z,Tt=>n(24,G=Tt));let{editable:V=!0}=t,{placeholder:it="Ask or instruct Augment..."}=t;const Q=I.onNewConversation(()=>Et());Io(Q);let lt,xt,Wt=!0;const Et=()=>xt==null?void 0:xt.forceFocus();let ye=!1;return s.$$set=Tt=>{"editable"in Tt&&n(0,V=Tt.editable),"placeholder"in Tt&&n(36,it=Tt.placeholder),"$$scope"in Tt&&n(48,Bt=Tt.$$scope)},s.$$.update=()=>{var Tt,he,Pe,je;if(1024&s.$$.dirty[1]&&n(22,e=!!(rt!=null&&rt.isActive)),4096&s.$$.dirty[1]&&n(21,o=St),512&s.$$.dirty[1]&&n(20,r=(Tt=ut.draftExchange)==null?void 0:Tt.rich_text_json_repr),1024&s.$$.dirty[1]&&(rt!=null&&rt.isActive)&&!(me!=null&&me.currentAgent)&&async function(){if(ke&&(me!=null&&me.isActive))try{n(1,Wt=await ke.isGithubAuthenticated())}catch(Te){console.error("Failed to check GitHub authentication status:",Te),n(1,Wt=!1)}}(),2&s.$$.dirty[0]|1024&s.$$.dirty[1]&&n(19,i=(rt==null?void 0:rt.isActive)&&!(me!=null&&me.currentAgent)&&!Wt),64&s.$$.dirty[0]|1024&s.$$.dirty[1]&&n(39,l=function(Te,Ke,Ue,Le,Ae,en){var vn;const qe=Te.currentConversationModel,Nn=ce(Le.activeCommand),An=ce(Ke.isCurrConversationAgentic),nn=(()=>{var an;if(Te.flags.enableChatMultimodal){const uo=(an=qe.draftExchange)==null?void 0:an.rich_text_json_repr;return!!uo&&gr.hasLoadingImages(uo)}return!1})();if(Ae!=null&&Ae.isActive){let an=!1;return Ae.currentAgentId||(an=!((vn=qe.draftExchange)!=null&&vn.request_message)||Ae.isCreatingAgent),{stateName:"remoteAgentMode",showCancelButton:Ae.isCurrentAgentRunning,isDisabled:an,action:b2(Ae,qe,en),cancelAction:()=>(Ae.interruptAgent(),!0)}}return nn?{stateName:"imagesLoading",showCancelButton:!1,isDisabled:!0,action:()=>!1,cancelAction:()=>(An?Ke.interruptAgent():Ue.interruptToolsConversation(),!0)}:Nn?{stateName:"slashCommandActive",showCancelButton:!1,isDisabled:!1,action:()=>(Le.runActiveCommand(),qe.clearDraftExchange(),!0),cancelAction:()=>!1}:An?{stateName:"agentMode",showCancelButton:!1,isDisabled:!qe.hasDraft,action:()=>(Ke.interruptAgent().then(()=>{qe.sendDraftExchange()}),!0),cancelAction:()=>(Ke.interruptAgent(),!0)}:{stateName:"chatMode",showCancelButton:qe.canCancelMessage,isDisabled:!qe.canSendDraft,action:()=>(qe.sendDraftExchange(),!0),cancelAction:()=>(Ue.interruptToolsConversation(),!0)}}(At,qt,Mt,Xe,rt,ke)),256&s.$$.dirty[1]&&n(16,u=l.showCancelButton),256&s.$$.dirty[1]&&n(15,p=l.isDisabled),256&s.$$.dirty[1]&&n(3,g=l.action),256&s.$$.dirty[1]&&n(14,h=l.cancelAction),32&s.$$.dirty[0]|1056&s.$$.dirty[1]&&n(13,k=`${et}-${rt==null?void 0:rt.isActive}-${it}`),8&s.$$.dirty[0]&&n(12,T={Enter:g}),64&s.$$.dirty[0]&&(n(11,b=At.currentConversationModel),Dt(),Dt=se(b,Te=>n(4,kt=Te))),16&s.$$.dirty[0]){const Te=(he=kt==null?void 0:kt.lastExchange)==null?void 0:he.status,Ke=Te===_e.cancelled,Ue=kt==null?void 0:kt.getLastToolUseState().phase,Le=Ue===Ee.cancelled;n(37,ye=Ke||Le)}32&s.$$.dirty[0]|3072&s.$$.dirty[1]&&n(10,S=!(rt!=null&&rt.isActive)&&et&&vt!==cr.notRunning),1600&s.$$.dirty[1]&&n(2,H=!(rt!=null&&rt.isActive)&&ye&&((Pe=ut.draftExchange)==null?void 0:Pe.request_message)===""),16&s.$$.dirty[0]&&n(38,O=(je=kt==null?void 0:kt.lastExchange)==null?void 0:je.request_message),4&s.$$.dirty[0]|160&s.$$.dirty[1]&&n(9,B=H&&O?O:it)},n(18,{isCurrConversationAgentic:c,agentExchangeStatus:a}=qt,c,(n(17,a),Rt(),Rt=se(a,Tt=>n(42,vt=Tt)),a)),jt(),jt=se(c,Tt=>n(5,et=Tt)),[V,Wt,H,g,kt,et,At,lt,xt,B,S,b,T,k,h,p,u,a,c,i,r,o,e,It,G,$e,qt,me,P,w,I,z,function(Tt){ut.saveDraftExchange(Tt.rawText,Tt.richTextJsonRepr)},function(Tt){ut.saveDraftMentions(Tt.current)},()=>xt==null?void 0:xt.requestFocus(),async function(){var Tt,he,Pe,je;try{const Te=((Tt=ut.draftExchange)==null?void 0:Tt.request_message)||"";if(!Te||Te.trim()==="")return;const Ke=`Here is an instruction that I'd like to give you, but it needs to be improved. Rewrite and enhance this instruction to make it clearer, more specific, less ambiguous, and correct any mistakes. Consider the context of our conversation history when enhancing the prompt. Reply with the following format:

### BEGIN RESPONSE ###
Here is an enhanced version of the original instruction that is more specific and clear:
<augment-enhanced-prompt>enhanced prompt goes here</augment-enhanced-prompt>

### END RESPONSE ###

Here is my original instruction:`,Ue=(he=ut.draftExchange)==null?void 0:he.rich_text_json_repr;try{const{responseText:Le}=await ut.sendSilentExchange({request_message:`${Ke}

${Te}`,disableHistory:!1,disableRetrieval:!0});ut.extensionClient.reportAgentSessionEvent({eventName:mr.enhancedPrompt,conversationId:ut.id});let Ae="";const en=/<augment-enhanced-prompt>([\s\S]*?)<\/augment-enhanced-prompt>/,qe=Le.match(en);if(qe&&qe[1]?Ae=qe[1].trim():(Ae=Le.trim(),console.warn("Enhanced prompt tags not found in response, using full response")),Ae&&Ae.trim()!==""){const Nn={type:"doc",content:[{type:"paragraph",content:[{type:"text",text:Ae}]}]};ut.saveDraftExchange(Ae,Nn),setTimeout(()=>{Et();try{const An=document.querySelector(".ProseMirror");if(An){const nn=An.querySelector("p");if(nn){const vn=document.createRange(),an=window.getSelection();vn.setStart(nn,0),vn.collapse(!0),an&&(an.removeAllRanges(),an.addRange(vn))}}}catch{}},200)}else ut.saveDraftExchange(Ue&&((Pe=ut.draftExchange)==null?void 0:Pe.request_message)||"",Ue||{type:"doc",content:[]})}catch{ut.saveDraftExchange(Ue&&((je=ut.draftExchange)==null?void 0:je.request_message)||"",Ue||{type:"doc",content:[]})}Et()}catch{}},it,ye,O,l,ut,rt,vt,St,Zt,({detail:Tt})=>{n(1,Wt=Tt.isAuthenticated)},function(Tt){ue[Tt?"unshift":"push"](()=>{lt=Tt,n(7,lt)})},function(Tt){ue[Tt?"unshift":"push"](()=>{xt=Tt,n(8,xt)})},Bt]}class Av extends nt{constructor(t){super(),ot(this,t,Mv,xv,tt,{editable:0,placeholder:36},null,[-1,-1])}}const Ev=s=>({}),lc=s=>({}),kv=s=>({}),uc=s=>({}),Tv=s=>({}),dc=s=>({}),Lv=s=>({}),fc=s=>({});function Iv(s){let t,n,e,o,r,i,c,a,l,u;const p=s[1]["floating-area"],g=Gt(p,s,s[0],fc),h=s[1]["message-area"],k=Gt(h,s,s[0],dc),T=s[1]["actions-area"],b=Gt(T,s,s[0],uc),S=s[1]["input-area"],H=Gt(S,s,s[0],lc);return{c(){t=F("div"),n=F("div"),g&&g.c(),e=W(),o=F("div"),r=F("div"),k&&k.c(),i=W(),c=F("div"),b&&b.c(),a=W(),l=F("div"),H&&H.c(),E(n,"class","l-chat__floating svelte-1cmc9fm"),E(r,"class","l-chat__msg_area_body svelte-1cmc9fm"),E(o,"class","l-chat__msg_area svelte-1cmc9fm"),E(c,"class","l-chat__actions_area svelte-1cmc9fm"),E(l,"class","l-chat__input_area svelte-1cmc9fm"),E(t,"class","l-chat svelte-1cmc9fm"),E(t,"data-testid","main-chat"),E(t,"data-vscode-context",JSON.stringify({preventDefaultContextMenuItems:!0}))},m(O,B){_(O,t,B),U(t,n),g&&g.m(n,null),U(t,e),U(t,o),U(o,r),k&&k.m(r,null),U(t,i),U(t,c),b&&b.m(c,null),U(t,a),U(t,l),H&&H.m(l,null),u=!0},p(O,[B]){g&&g.p&&(!u||1&B)&&Yt(g,p,O,O[0],u?Kt(p,O[0],B,Lv):Xt(O[0]),fc),k&&k.p&&(!u||1&B)&&Yt(k,h,O,O[0],u?Kt(h,O[0],B,Tv):Xt(O[0]),dc),b&&b.p&&(!u||1&B)&&Yt(b,T,O,O[0],u?Kt(T,O[0],B,kv):Xt(O[0]),uc),H&&H.p&&(!u||1&B)&&Yt(H,S,O,O[0],u?Kt(S,O[0],B,Ev):Xt(O[0]),lc)},i(O){u||(f(g,O),f(k,O),f(b,O),f(H,O),u=!0)},o(O){$(g,O),$(k,O),$(b,O),$(H,O),u=!1},d(O){O&&y(t),g&&g.d(O),k&&k.d(O),b&&b.d(O),H&&H.d(O)}}}function Sv(s,t,n){let{$$slots:e={},$$scope:o}=t;return s.$$set=r=>{"$$scope"in r&&n(0,o=r.$$scope)},[o,e]}class Rv extends nt{constructor(t){super(),ot(this,t,Sv,Iv,tt,{})}}class Pv{constructor(t,n){st(this,"subscribers",new Set);st(this,"isAutofixConversation",()=>td(this._conversationModel));st(this,"subscribe",t=>(this.subscribers.add(t),t(this),()=>{this.subscribers.delete(t)}));st(this,"notifySubscribers",()=>{this.subscribers.forEach(t=>t(this))});st(this,"update",t=>{this._conversationModel.extraData={...this.extraData,...t},this.notifySubscribers(),this.sendAutofixStateUpdate()});st(this,"shouldShowAutofixCommandInput",()=>{var t;return!((t=this.extraData.autofixIterations)!=null&&t.length)});st(this,"launchAutofixPanel",async(t,n)=>{await this._extensionClient.launchAutofixPanel(this.conversationId,t,n)});this._conversationModel=t,this._extensionClient=n,this._conversationModel.subscribe(e=>this.notifySubscribers())}get conversationId(){return this._conversationModel.id}async sendAutofixStateUpdate(){await this._extensionClient.sendAutofixStateUpdate(this._conversationModel.extraData)}setCommand(t){this.update({autofixCommand:t})}get extraData(){return this._conversationModel.extraData}addChatItem(t){this._conversationModel.addChatItem(t)}getAutofixIteration(t){var n;return(n=this.extraData.autofixIterations)==null?void 0:n.find(e=>e.id===t)}insertNewAutofixIteration(t){this.update({autofixIterations:[...this.extraData.autofixIterations||[],t]})}updateAutofixIteration(t){const n=this.extraData.autofixIterations||[],e=n.findIndex(o=>o.id===t.id);if(e===-1)throw new Error(`No autofix iteration found with id ${t.id}`);this.update({autofixIterations:n.map((o,r)=>r===e?{...o,...t}:o)})}async handleFixWasApplied(t){var e,o;const n=(o=(e=this.extraData.autofixIterations)==null?void 0:e.at(-1))==null?void 0:o.id;if(!n)throw new Error("No latest iteration found");this.updateAutofixIteration({id:n,selectedSolutions:t}),await this.startNewAutofixIteration()}async handleUserSteering(t){var o,r;const n=(o=this.extraData.autofixIterations)==null?void 0:o.at(-1);if(!n)throw new Error("No latest iteration found");const e=(r=n.suggestedSolutions)==null?void 0:r.at(-1);if(!e)throw new Error("No latest suggested solution found");this.addChatItem({chatItemType:Cn.autofixSteeringMessage,request_id:crypto.randomUUID(),status:_e.sent,response_text:t}),this.update({autofixSteeringHistory:[...this.extraData.autofixSteeringHistory||[],{requestId:crypto.randomUUID(),requestMessage:t,summary:e.summary,replacements:e.originalReplacements}]}),await this.planSolution(n.id)}async startNewAutofixIteration(){var r;const t=this.extraData.autofixCommand;if(!t)throw new Error("No command set");const n=this.extraData,e=crypto.randomUUID(),o=!((r=n.autofixIterations)!=null&&r.length);this.insertNewAutofixIteration({id:e,currentStage:no.runTest,commandOutput:"",isFirstIteration:o}),this.addChatItem({chatItemType:Cn.autofixStage,request_id:crypto.randomUUID(),iterationId:e,status:_e.sent,stage:no.runTest}),await this.launchAutofixPanel(e,no.runTest);try{const i=t.split(" "),c=i[0],a=i.slice(1),l=await this._extensionClient.executeCommand(e,c,a),u=l.returnCode!==0;if(this.updateAutofixIteration({id:e,commandOutput:l.output,commandFailed:u}),!u)return e}catch(i){return console.error("[ConversationModel] Error executing command:",i),this.updateAutofixIteration({id:e,commandOutput:String(i),commandFailed:!0}),e}return await this.planSolution(e),e}async planSolution(t){var r,i;const n=this.extraData.autofixCommand;if(!n)throw new Error("No command set");const e=this.getAutofixIteration(t);if(!e)throw new Error(`No iteration found with id ${t}`);this.updateAutofixIteration({id:t,currentStage:no.applyFix}),this.addChatItem({chatItemType:Cn.autofixStage,request_id:crypto.randomUUID(),iterationId:t,status:_e.sent,stage:no.applyFix,stageCount:((r=e.suggestedSolutions)==null?void 0:r.length)||0});const o=await this._extensionClient.autofixPlan({input:n,output:((i=this.getAutofixIteration(t))==null?void 0:i.commandOutput)||""},this.extraData.autofixSteeringHistory);this.addChatItem({chatItemType:Cn.autofixMessage,request_id:crypto.randomUUID(),status:_e.sent,response_text:o.summary}),this.updateAutofixIteration({id:t,suggestedSolutions:[...e.suggestedSolutions||[],o]}),await this.launchAutofixPanel(t,no.applyFix)}handleMessageFromExtension(t){const n=t.data;switch(n.type){case fe.chatAutofixStateUpdateRequest:return this.sendAutofixStateUpdate(),!0;case fe.chatAutofixSuggestionsApplied:return this.handleFixWasApplied(n.data.selectedSolutions),!0;default:return!1}}initializeAutofixConversation(){this.update({isAutofix:!0,autofixIterations:[]});const t={chatItemType:Cn.autofixMessage,request_id:crypto.randomUUID(),status:_e.success,response_text:"Autofix enables you to run your tests and suggests fixes for you. Start by typing a command to run your test such as `pytest path/to/test`"};this._conversationModel.chatHistory.push(t)}}function Dv(s){let t,n;return t=new Cl({props:{iconName:"play_arrow"}}),{c(){C(t.$$.fragment)},m(e,o){x(t,e,o),n=!0},p:D,i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){M(t,e)}}}function Nv(s){let t,n,e,o,r,i;function c(l){s[2](l)}let a={placeholder:"Enter test command (e.g. pytest path/to/test.py)",variant:"surface",size:2};return s[0]!==void 0&&(a.value=s[0]),n=new xr({props:a}),ue.push(()=>Ye(n,"value",c)),n.$on("keydown",s[1]),r=new pe({props:{disabled:!s[0],size:2,variant:"solid",color:"accent",$$slots:{default:[Dv]},$$scope:{ctx:s}}}),r.$on("click",s[3]),{c(){t=F("div"),C(n.$$.fragment),o=W(),C(r.$$.fragment),E(t,"class","command-input-container svelte-3c7cic")},m(l,u){_(l,t,u),x(n,t,null),U(t,o),x(r,t,null),i=!0},p(l,[u]){const p={};!e&&1&u&&(e=!0,p.value=l[0],Ze(()=>e=!1)),n.$set(p);const g={};1&u&&(g.disabled=!l[0]),64&u&&(g.$$scope={dirty:u,ctx:l}),r.$set(g)},i(l){i||(f(n.$$.fragment,l),f(r.$$.fragment,l),i=!0)},o(l){$(n.$$.fragment,l),$(r.$$.fragment,l),i=!1},d(l){l&&y(t),M(n),M(r)}}}function Fv(s,t,n){const e=Ht("autofixConversationModel");if(!e)throw new Error("AutofixConversationModel not found in context");let o="";async function r(i){return!(i.shiftKey||i.ctrlKey||i.metaKey)&&(i.stopPropagation(),i.key==="Enter"&&o.length>0?(e.setCommand(o),await e.startNewAutofixIteration(),n(0,o=""),!0):i.key==="Escape")}return jn(()=>{const i=document.querySelector("input");i&&(i.focus(),i.select())}),[o,r,function(i){o=i,n(0,o)},()=>r(new KeyboardEvent("keydown",{key:"Enter"}))]}class Ov extends nt{constructor(t){super(),ot(this,t,Fv,Nv,tt,{})}}function Bv(s){let t,n,e;return n=new Ot({props:{size:1,color:"error",$$slots:{default:[zv]},$$scope:{ctx:s}}}),{c(){t=F("div"),C(n.$$.fragment),E(t,"class","c-lazy-loading-error")},m(o,r){_(o,t,r),x(n,t,null),e=!0},i(o){e||(f(n.$$.fragment,o),e=!0)},o(o){$(n.$$.fragment,o),e=!1},d(o){o&&y(t),M(n)}}}function zv(s){let t;return{c(){t=X(`Failed to load agent setup. Please try closing and re-opening the panel, or contact support
      if this problem persists.`)},m(n,e){_(n,t,e)},d(n){n&&y(t)}}}function Hv(s){let t,n;return function(e){e[0]=e[1].default}(s),t=new s[0]({}),{c(){C(t.$$.fragment)},m(e,o){x(t,e,o),n=!0},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){M(t,e)}}}function jv(s){let t,n,e,o,r;return n=new Hn({props:{size:1}}),o=new Ot({props:{size:1,color:"secondary",$$slots:{default:[Uv]},$$scope:{ctx:s}}}),{c(){t=F("div"),C(n.$$.fragment),e=W(),C(o.$$.fragment),E(t,"class","c-lazy-loading-container")},m(i,c){_(i,t,c),x(n,t,null),U(t,e),x(o,t,null),r=!0},i(i){r||(f(n.$$.fragment,i),f(o.$$.fragment,i),r=!0)},o(i){$(n.$$.fragment,i),$(o.$$.fragment,i),r=!1},d(i){i&&y(t),M(n),M(o)}}}function Uv(s){let t;return{c(){t=X("Loading agent setup...")},m(n,e){_(n,t,e)},d(n){n&&y(t)}}}function qv(s){let t,n,e={ctx:s,current:null,token:null,hasCatch:!0,pending:jv,then:Hv,catch:Bv,value:1,error:2,blocks:[,,,]};return ao(kr(()=>import("./RemoteAgentSetup-DaE_fZ-V.js"),__vite__mapDeps([2,0,1,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45]),import.meta.url),e),{c(){t=ft(),e.block.c()},m(o,r){_(o,t,r),e.block.m(o,e.anchor=r),e.mount=()=>t.parentNode,e.anchor=t,n=!0},p(o,[r]){s=o},i(o){n||(f(e.block),n=!0)},o(o){for(let r=0;r<3;r+=1){const i=e.blocks[r];$(i)}n=!1},d(o){o&&y(t),e.block.d(o),e.token=null,e=null}}}class Wv extends nt{constructor(t){super(),ot(this,t,null,qv,tt,{})}}function Vv(s){let t,n,e,o,r;return{c(){t=X("Error loading message list: "),n=X(s[0]),e=W(),o=F("br"),r=X(`
    Please consider restarting your extension, or contact support if this problem persists.`)},m(i,c){_(i,t,c),_(i,n,c),_(i,e,c),_(i,o,c),_(i,r,c)},p(i,c){1&c&&Lt(n,i[0])},d(i){i&&(y(t),y(n),y(e),y(o),y(r))}}}function Gv(s){let t,n;return t=new Dn({props:{slot:"icon"}}),{c(){C(t.$$.fragment)},m(e,o){x(t,e,o),n=!0},p:D,i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){M(t,e)}}}function Yv(s){let t,n,e;return n=new Pn({props:{variant:"soft",color:"error",$$slots:{icon:[Gv],default:[Vv]},$$scope:{ctx:s}}}),{c(){t=F("div"),C(n.$$.fragment),E(t,"class","l-error-message svelte-1w3i40p")},m(o,r){_(o,t,r),x(n,t,null),e=!0},p(o,[r]){const i={};3&r&&(i.$$scope={dirty:r,ctx:o}),n.$set(i)},i(o){e||(f(n.$$.fragment,o),e=!0)},o(o){$(n.$$.fragment,o),e=!1},d(o){o&&y(t),M(n)}}}function Xv(s,t,n){let{errorMessage:e}=t;return s.$$set=o=>{"errorMessage"in o&&n(0,e=o.errorMessage)},[e]}class Vl extends nt{constructor(t){super(),ot(this,t,Xv,Yv,tt,{errorMessage:0})}}function Kv(s){let t,n,e={ctx:s,current:null,token:null,hasCatch:!0,pending:n4,then:Qv,catch:Jv,value:13,error:14,blocks:[,,,]};return ao(kr(()=>import("./MessageList-DKI8TvIX.js"),__vite__mapDeps([46,0,1,4,5,47,19,20,42,43,48,26,27,22,11,12,13,7,8,9,14,15,16,17,18,30,31,32,33,34,41,29,49,6,10,39,50,51,52,53,54,55,56,57,3,21,23,58,40,28,35,36,37,38,44,59]),import.meta.url),e),{c(){t=ft(),e.block.c()},m(o,r){_(o,t,r),e.block.m(o,e.anchor=r),e.mount=()=>t.parentNode,e.anchor=t,n=!0},p(o,r){Er(e,s=o,r)},i(o){n||(f(e.block),n=!0)},o(o){for(let r=0;r<3;r+=1){const i=e.blocks[r];$(i)}n=!1},d(o){o&&y(t),e.block.d(o),e.token=null,e=null}}}function Zv(s){let t,n,e={ctx:s,current:null,token:null,hasCatch:!0,pending:l4,then:i4,catch:s4,value:13,error:14,blocks:[,,,]};return ao(kr(()=>import("./VirtualizedMessageList-BAafiPKO.js"),__vite__mapDeps([60,0,1,4,5,47,19,20,42,43,48,26,27,22,11,12,13,7,8,9,14,15,16,17,18,30,31,32,33,34,41,29,49,6,10,39,50,51,52,53,54,55,56,57,3,21,23,58,40,35,36,37,38,28,44,61]),import.meta.url),e),{c(){t=ft(),e.block.c()},m(o,r){_(o,t,r),e.block.m(o,e.anchor=r),e.mount=()=>t.parentNode,e.anchor=t,n=!0},p(o,r){Er(e,s=o,r)},i(o){n||(f(e.block),n=!0)},o(o){for(let r=0;r<3;r+=1){const i=e.blocks[r];$(i)}n=!1},d(o){o&&y(t),e.block.d(o),e.token=null,e=null}}}function Jv(s){let t,n,e;return n=new Vl({props:{errorMessage:s[14].message}}),{c(){t=F("div"),C(n.$$.fragment),E(t,"class","l-center-contents svelte-mlzu3y"),E(t,"data-testid","l-lazy-message-list-loading-error")},m(o,r){_(o,t,r),x(n,t,null),e=!0},p:D,i(o){e||(f(n.$$.fragment,o),e=!0)},o(o){$(n.$$.fragment,o),e=!1},d(o){o&&y(t),M(n)}}}function Qv(s){let t,n,e=s[4],o=mc(s);return{c(){o.c(),t=ft()},m(r,i){o.m(r,i),_(r,t,i),n=!0},p(r,i){16&i&&tt(e,e=r[4])?(K(),$(o,1,1,D),Z(),o=mc(r),o.c(),f(o,1),o.m(t.parentNode,t)):o.p(r,i)},i(r){n||(f(o),n=!0)},o(r){$(o),n=!1},d(r){r&&y(t),o.d(r)}}}function t4(s){let t,n,e;const o=[{chatModel:s[0]},{onboardingWorkspaceModel:s[1]},s[8]];var r=s[13].default;function i(c,a){let l={};for(let u=0;u<o.length;u+=1)l=Ct(l,o[u]);return a!==void 0&&259&a&&(l=Ct(l,ge(o,[1&a&&{chatModel:c[0]},2&a&&{onboardingWorkspaceModel:c[1]},256&a&&zn(c[8])]))),{props:l}}return r&&(t=ro(r,i(s))),{c(){t&&C(t.$$.fragment),n=ft()},m(c,a){t&&x(t,c,a),_(c,n,a),e=!0},p(c,a){if(r!==(r=c[13].default)){if(t){K();const l=t;$(l.$$.fragment,1,0,()=>{M(l,1)}),Z()}r?(t=ro(r,i(c,a)),C(t.$$.fragment),f(t.$$.fragment,1),x(t,n.parentNode,n)):t=null}else if(r){const l=259&a?ge(o,[1&a&&{chatModel:c[0]},2&a&&{onboardingWorkspaceModel:c[1]},256&a&&zn(c[8])]):{};t.$set(l)}},i(c){e||(t&&f(t.$$.fragment,c),e=!0)},o(c){t&&$(t.$$.fragment,c),e=!1},d(c){c&&y(n),t&&M(t,c)}}}function e4(s){let t;return{c(){t=F("div"),E(t,"class","l-center-contents svelte-mlzu3y"),E(t,"data-testid","l-lazy-message-list-center-contents")},m(n,e){_(n,t,e)},p:D,i:D,o:D,d(n){n&&y(t)}}}function mc(s){let t,n,e,o;const r=[e4,t4],i=[];function c(a,l){return a[3].chatHistory.length===0?0:1}return t=c(s),n=i[t]=r[t](s),{c(){n.c(),e=ft()},m(a,l){i[t].m(a,l),_(a,e,l),o=!0},p(a,l){let u=t;t=c(a),t===u?i[t].p(a,l):(K(),$(i[u],1,1,()=>{i[u]=null}),Z(),n=i[t],n?n.p(a,l):(n=i[t]=r[t](a),n.c()),f(n,1),n.m(e.parentNode,e))},i(a){o||(f(n),o=!0)},o(a){$(n),o=!1},d(a){a&&y(e),i[t].d(a)}}}function n4(s){let t,n=s[4],e=pc(s);return{c(){e.c(),t=ft()},m(o,r){e.m(o,r),_(o,t,r)},p(o,r){16&r&&tt(n,n=o[4])?(e.d(1),e=pc(o),e.c(),e.m(t.parentNode,t)):e.p(o,r)},i:D,o:D,d(o){o&&y(t),e.d(o)}}}function o4(s){let t;return{c(){t=F("div"),t.textContent="Loading...",E(t,"class","l-center-contents svelte-mlzu3y")},m(n,e){_(n,t,e)},d(n){n&&y(t)}}}function r4(s){let t;return{c(){t=F("div"),E(t,"class","l-center-contents svelte-mlzu3y")},m(n,e){_(n,t,e)},d(n){n&&y(t)}}}function pc(s){let t;function n(r,i){return r[3].chatHistory.length===0?r4:o4}let e=n(s),o=e(s);return{c(){o.c(),t=ft()},m(r,i){o.m(r,i),_(r,t,i)},p(r,i){e!==(e=n(r))&&(o.d(1),o=e(r),o&&(o.c(),o.m(t.parentNode,t)))},d(r){r&&y(t),o.d(r)}}}function s4(s){let t,n,e;return n=new Vl({props:{errorMessage:s[14].message}}),{c(){t=F("div"),C(n.$$.fragment),E(t,"class","l-center-contents svelte-mlzu3y"),E(t,"data-testid","l-lazy-message-list-loading-error")},m(o,r){_(o,t,r),x(n,t,null),e=!0},p:D,i(o){e||(f(n.$$.fragment,o),e=!0)},o(o){$(n.$$.fragment,o),e=!1},d(o){o&&y(t),M(n)}}}function i4(s){let t,n,e=s[4],o=$c(s);return{c(){o.c(),t=ft()},m(r,i){o.m(r,i),_(r,t,i),n=!0},p(r,i){16&i&&tt(e,e=r[4])?(K(),$(o,1,1,D),Z(),o=$c(r),o.c(),f(o,1),o.m(t.parentNode,t)):o.p(r,i)},i(r){n||(f(o),n=!0)},o(r){$(o),n=!1},d(r){r&&y(t),o.d(r)}}}function a4(s){let t,n,e;const o=[{chatModel:s[0]},{onboardingWorkspaceModel:s[1]},s[8]];var r=s[13].default;function i(c,a){let l={};for(let u=0;u<o.length;u+=1)l=Ct(l,o[u]);return a!==void 0&&259&a&&(l=Ct(l,ge(o,[1&a&&{chatModel:c[0]},2&a&&{onboardingWorkspaceModel:c[1]},256&a&&zn(c[8])]))),{props:l}}return r&&(t=ro(r,i(s))),{c(){t&&C(t.$$.fragment),n=ft()},m(c,a){t&&x(t,c,a),_(c,n,a),e=!0},p(c,a){if(r!==(r=c[13].default)){if(t){K();const l=t;$(l.$$.fragment,1,0,()=>{M(l,1)}),Z()}r?(t=ro(r,i(c,a)),C(t.$$.fragment),f(t.$$.fragment,1),x(t,n.parentNode,n)):t=null}else if(r){const l=259&a?ge(o,[1&a&&{chatModel:c[0]},2&a&&{onboardingWorkspaceModel:c[1]},256&a&&zn(c[8])]):{};t.$set(l)}},i(c){e||(t&&f(t.$$.fragment,c),e=!0)},o(c){t&&$(t.$$.fragment,c),e=!1},d(c){c&&y(n),t&&M(t,c)}}}function c4(s){let t;return{c(){t=F("div"),E(t,"class","l-center-contents svelte-mlzu3y"),E(t,"data-testid","l-lazy-message-list-center-contents")},m(n,e){_(n,t,e)},p:D,i:D,o:D,d(n){n&&y(t)}}}function $c(s){let t,n,e,o;const r=[c4,a4],i=[];function c(a,l){return a[3].chatHistory.length===0?0:1}return t=c(s),n=i[t]=r[t](s),{c(){n.c(),e=ft()},m(a,l){i[t].m(a,l),_(a,e,l),o=!0},p(a,l){let u=t;t=c(a),t===u?i[t].p(a,l):(K(),$(i[u],1,1,()=>{i[u]=null}),Z(),n=i[t],n?n.p(a,l):(n=i[t]=r[t](a),n.c()),f(n,1),n.m(e.parentNode,e))},i(a){o||(f(n),o=!0)},o(a){$(n),o=!1},d(a){a&&y(e),i[t].d(a)}}}function l4(s){let t,n=s[4],e=hc(s);return{c(){e.c(),t=ft()},m(o,r){e.m(o,r),_(o,t,r)},p(o,r){16&r&&tt(n,n=o[4])?(e.d(1),e=hc(o),e.c(),e.m(t.parentNode,t)):e.p(o,r)},i:D,o:D,d(o){o&&y(t),e.d(o)}}}function u4(s){let t;return{c(){t=F("div"),t.textContent="Loading...",E(t,"class","l-center-contents svelte-mlzu3y")},m(n,e){_(n,t,e)},d(n){n&&y(t)}}}function d4(s){let t;return{c(){t=F("div"),E(t,"class","l-center-contents svelte-mlzu3y")},m(n,e){_(n,t,e)},d(n){n&&y(t)}}}function hc(s){let t;function n(r,i){return r[3].chatHistory.length===0?d4:u4}let e=n(s),o=e(s);return{c(){o.c(),t=ft()},m(r,i){o.m(r,i),_(r,t,i)},p(r,i){e!==(e=n(r))&&(o.d(1),o=e(r),o&&(o.c(),o.m(t.parentNode,t)))},d(r){r&&y(t),o.d(r)}}}function f4(s){let t,n,e,o;const r=[Zv,Kv],i=[];function c(a,l){return a[5]?0:1}return t=c(s),n=i[t]=r[t](s),{c(){n.c(),e=ft()},m(a,l){i[t].m(a,l),_(a,e,l),o=!0},p(a,[l]){let u=t;t=c(a),t===u?i[t].p(a,l):(K(),$(i[u],1,1,()=>{i[u]=null}),Z(),n=i[t],n?n.p(a,l):(n=i[t]=r[t](a),n.c()),f(n,1),n.m(e.parentNode,e))},i(a){o||(f(n),o=!0)},o(a){$(n),o=!1},d(a){a&&y(e),i[t].d(a)}}}function m4(s,t,n){let e,o,r,i,c;const a=["chatModel","onboardingWorkspaceModel","remoteAgentsModel"];let l,u,p,g,h=ui(t,a),k=D,T=()=>(k(),k=se(kt,rt=>n(10,l=rt)),kt),b=D,S=D,H=D,O=()=>(H(),H=se(B,rt=>n(12,g=rt)),B);s.$$.on_destroy.push(()=>k()),s.$$.on_destroy.push(()=>b()),s.$$.on_destroy.push(()=>S()),s.$$.on_destroy.push(()=>H());let{chatModel:B}=t;O();let{onboardingWorkspaceModel:ut}=t,{remoteAgentsModel:kt}=t;return T(),s.$$set=rt=>{t=Ct(Ct({},t),Qt(rt)),n(8,h=ui(t,a)),"chatModel"in rt&&O(n(0,B=rt.chatModel)),"onboardingWorkspaceModel"in rt&&n(1,ut=rt.onboardingWorkspaceModel),"remoteAgentsModel"in rt&&T(n(2,kt=rt.remoteAgentsModel))},s.$$.update=()=>{4096&s.$$.dirty&&(n(7,e=g.currentConversationModel),b(),b=se(e,rt=>n(3,u=rt))),4096&s.$$.dirty&&(n(6,o=g.flags),S(),S=se(o,rt=>n(11,p=rt))),1024&s.$$.dirty&&n(9,r=l.currentAgentId),3072&s.$$.dirty&&n(5,i=p.enableVirtualizedMessageList&&!l.isActive),1544&s.$$.dirty&&n(4,c=`${u.id}-${l.isActive?r:""}`)},[B,ut,kt,u,c,i,o,e,h,r,l,p,g]}class p4 extends nt{constructor(t){super(),ot(this,t,m4,f4,tt,{chatModel:0,onboardingWorkspaceModel:1,remoteAgentsModel:2})}}function $4(s){let t,n,e;return n=new Wv({}),{c(){t=F("div"),C(n.$$.fragment),E(t,"class","l-center-contents svelte-b0o8lx")},m(o,r){_(o,t,r),x(n,t,null),e=!0},p:D,i(o){e||(f(n.$$.fragment,o),e=!0)},o(o){$(n.$$.fragment,o),e=!1},d(o){o&&y(t),M(n)}}}function h4(s){let t,n;return t=new p4({props:{chatModel:s[0],onboardingWorkspaceModel:s[1],remoteAgentsModel:s[2]}}),{c(){C(t.$$.fragment)},m(e,o){x(t,e,o),n=!0},p(e,o){const r={};1&o&&(r.chatModel=e[0]),2&o&&(r.onboardingWorkspaceModel=e[1]),4&o&&(r.remoteAgentsModel=e[2]),t.$set(r)},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){M(t,e)}}}function g4(s){let t,n,e,o;const r=[h4,$4],i=[];function c(a,l){return a[4]?0:a[3]?1:-1}return~(t=c(s))&&(n=i[t]=r[t](s)),{c(){n&&n.c(),e=ft()},m(a,l){~t&&i[t].m(a,l),_(a,e,l),o=!0},p(a,[l]){let u=t;t=c(a),t===u?~t&&i[t].p(a,l):(n&&(K(),$(i[u],1,1,()=>{i[u]=null}),Z()),~t?(n=i[t],n?n.p(a,l):(n=i[t]=r[t](a),n.c()),f(n,1),n.m(e.parentNode,e)):n=null)},i(a){o||(f(n),o=!0)},o(a){$(n),o=!1},d(a){a&&y(e),~t&&i[t].d(a)}}}function v4(s,t,n){let e,o,r,i=D,c=()=>(i(),i=se(u,p=>n(5,r=p)),u);s.$$.on_destroy.push(()=>i());let{chatModel:a}=t,{onboardingWorkspaceModel:l}=t,{remoteAgentsModel:u}=t;return c(),s.$$set=p=>{"chatModel"in p&&n(0,a=p.chatModel),"onboardingWorkspaceModel"in p&&n(1,l=p.onboardingWorkspaceModel),"remoteAgentsModel"in p&&c(n(2,u=p.remoteAgentsModel))},s.$$.update=()=>{32&s.$$.dirty&&n(3,e=r.isActive&&!r.currentAgentId),8&s.$$.dirty&&n(4,o=!e)},[a,l,u,e,o,r]}class w4 extends nt{constructor(t){super(),ot(this,t,v4,g4,tt,{chatModel:0,onboardingWorkspaceModel:1,remoteAgentsModel:2})}}function y4(s){let t,n,e,o;return{c(){t=W(),n=F("div"),n.innerHTML='<div class="c-chat-input-dialog-hr svelte-7lmigv"></div>',E(n,"class","c-chat-input-dialog-hr-handle svelte-7lmigv"),E(n,"role","separator")},m(r,i){_(r,t,i),_(r,n,i),e||(o=[bt(document,"mousemove",s[1]),bt(document,"mouseup",s[2]),bt(n,"mousedown",s[0])],e=!0)},p:D,i:D,o:D,d(r){r&&(y(t),y(n)),e=!1,Re(o)}}}function b4(s,t,n){let e,{inputArea:o}=t;return s.$$set=r=>{"inputArea"in r&&n(3,o=r.inputArea)},[r=>{e={startY:r.clientY,initialHeight:o.offsetHeight}},r=>{if(!e)return;const i=r.clientY-e.startY;n(3,o.style.height=e.initialHeight-i+"px",o)},()=>{e=void 0},o]}class _4 extends nt{constructor(t){super(),ot(this,t,b4,y4,tt,{inputArea:3})}}const C4=s=>({}),gc=s=>({}),x4=s=>({}),vc=s=>({}),M4=s=>({}),wc=s=>({});function A4(s){let t;return{c(){t=X(s[2])},m(n,e){_(n,t,e)},p(n,e){4&e&&Lt(t,n[2])},d(n){n&&y(t)}}}function yc(s){let t,n;const e=s[4]["sort-options"],o=Gt(e,s,s[8],vc);return{c(){t=F("div"),o&&o.c(),E(t,"class","l-threads-menu__sort-options svelte-k6qn47")},m(r,i){_(r,t,i),o&&o.m(t,null),n=!0},p(r,i){o&&o.p&&(!n||256&i)&&Yt(o,e,r,r[8],n?Kt(e,r[8],i,x4):Xt(r[8]),vc)},i(r){n||(f(o,r),n=!0)},o(r){$(o,r),n=!1},d(r){r&&y(t),o&&o.d(r)}}}function bc(s){let t,n;const e=s[4].body,o=Gt(e,s,s[8],gc);return{c(){t=F("div"),o&&o.c(),E(t,"class","l-threads-menu__body svelte-k6qn47")},m(r,i){_(r,t,i),o&&o.m(t,null),n=!0},p(r,i){o&&o.p&&(!n||256&i)&&Yt(o,e,r,r[8],n?Kt(e,r[8],i,C4):Xt(r[8]),gc)},i(r){n||(f(o,r),n=!0)},o(r){$(o,r),n=!1},d(r){r&&y(t),o&&o.d(r)}}}function E4(s){let t,n,e,o,r,i,c,a,l,u,p,g,h,k;i=new Ot({props:{size:1,weight:"regular",$$slots:{default:[A4]},$$scope:{ctx:s}}});const T=s[4].buttons,b=Gt(T,s,s[8],wc);let S=s[1]&&yc(s),H=s[1]&&bc(s);return{c(){t=F("div"),n=F("div"),e=F("div"),o=F("div"),r=F("div"),C(i.$$.fragment),c=W(),a=F("div"),b&&b.c(),l=W(),S&&S.c(),u=W(),H&&H.c(),E(r,"class","l-threads-menu__title svelte-k6qn47"),E(r,"data-testid","threads-menu-header-title"),E(o,"class","l-threads-menu__header svelte-k6qn47"),E(o,"role","button"),E(o,"tabindex","0"),E(o,"data-testid","threads-menu-header"),E(e,"class","l-threads-menu__content svelte-k6qn47"),E(n,"class","l-threads-menu__wrapper svelte-k6qn47"),E(t,"data-testid","threads-menu"),E(t,"class",p=dr(`l-threads-menu ${s[3]}`)+" svelte-k6qn47"),Pt(t,"l-threads-menu--active",s[1])},m(O,B){_(O,t,B),U(t,n),U(n,e),U(e,o),U(o,r),x(i,r,null),U(o,c),U(o,a),b&&b.m(a,null),U(e,l),S&&S.m(e,null),U(e,u),H&&H.m(e,null),s[7](t),g=!0,h||(k=[bt(o,"click",Eo(ar(s[5]))),bt(o,"keydown",s[6])],h=!0)},p(O,[B]){const ut={};260&B&&(ut.$$scope={dirty:B,ctx:O}),i.$set(ut),b&&b.p&&(!g||256&B)&&Yt(b,T,O,O[8],g?Kt(T,O[8],B,M4):Xt(O[8]),wc),O[1]?S?(S.p(O,B),2&B&&f(S,1)):(S=yc(O),S.c(),f(S,1),S.m(e,u)):S&&(K(),$(S,1,1,()=>{S=null}),Z()),O[1]?H?(H.p(O,B),2&B&&f(H,1)):(H=bc(O),H.c(),f(H,1),H.m(e,null)):H&&(K(),$(H,1,1,()=>{H=null}),Z()),(!g||8&B&&p!==(p=dr(`l-threads-menu ${O[3]}`)+" svelte-k6qn47"))&&E(t,"class",p),(!g||10&B)&&Pt(t,"l-threads-menu--active",O[1])},i(O){g||(f(i.$$.fragment,O),f(b,O),f(S),f(H),g=!0)},o(O){$(i.$$.fragment,O),$(b,O),$(S),$(H),g=!1},d(O){O&&y(t),M(i),b&&b.d(O),S&&S.d(),H&&H.d(),s[7](null),h=!1,Re(k)}}}function k4(s,t,n){let{$$slots:e={},$$scope:o}=t,{active:r=!1}=t,{element:i}=t,{title:c=""}=t,{class:a=""}=t;return s.$$set=l=>{"active"in l&&n(1,r=l.active),"element"in l&&n(0,i=l.element),"title"in l&&n(2,c=l.title),"class"in l&&n(3,a=l.class),"$$scope"in l&&n(8,o=l.$$scope)},[i,r,c,a,e,function(l){Rn.call(this,s,l)},function(l){Rn.call(this,s,l)},function(l){ue[l?"unshift":"push"](()=>{i=l,n(0,i)})},o]}class T4 extends nt{constructor(t){super(),ot(this,t,k4,E4,tt,{active:1,element:0,title:2,class:3})}}const L4=s=>({}),_c=s=>({}),I4=s=>({}),Cc=s=>({});function S4(s){let t,n;const e=s[2].title,o=Gt(e,s,s[6],Cc);return{c(){t=F("div"),o&&o.c(),E(t,"class","l-thread-menu-item__title svelte-1iwlval")},m(r,i){_(r,t,i),o&&o.m(t,null),n=!0},p(r,i){o&&o.p&&(!n||64&i)&&Yt(o,e,r,r[6],n?Kt(e,r[6],i,I4):Xt(r[6]),Cc)},i(r){n||(f(o,r),n=!0)},o(r){$(o,r),n=!1},d(r){r&&y(t),o&&o.d(r)}}}function R4(s){let t,n,e,o,r,i,c;n=new Ot({props:{size:1,weight:"regular",$$slots:{default:[S4]},$$scope:{ctx:s}}});const a=s[2].right,l=Gt(a,s,s[6],_c);return{c(){t=F("div"),C(n.$$.fragment),e=W(),o=F("div"),l&&l.c(),E(o,"class","l-thread-menu-item__right svelte-1iwlval"),E(t,"class","l-thread-menu-item svelte-1iwlval"),E(t,"data-testid","thread-menu-item"),E(t,"role","button"),E(t,"tabindex","0"),Pt(t,"l-thread-menu-item--selected",s[0]&&s[1]),Pt(t,"l-thread-menu-item--selectable",s[1])},m(u,p){_(u,t,p),x(n,t,null),U(t,e),U(t,o),l&&l.m(o,null),r=!0,i||(c=[bt(t,"click",s[3]),bt(t,"mousedown",s[4]),bt(t,"keydown",s[5])],i=!0)},p(u,[p]){const g={};64&p&&(g.$$scope={dirty:p,ctx:u}),n.$set(g),l&&l.p&&(!r||64&p)&&Yt(l,a,u,u[6],r?Kt(a,u[6],p,L4):Xt(u[6]),_c),(!r||3&p)&&Pt(t,"l-thread-menu-item--selected",u[0]&&u[1]),(!r||2&p)&&Pt(t,"l-thread-menu-item--selectable",u[1])},i(u){r||(f(n.$$.fragment,u),f(l,u),r=!0)},o(u){$(n.$$.fragment,u),$(l,u),r=!1},d(u){u&&y(t),M(n),l&&l.d(u),i=!1,Re(c)}}}function P4(s,t,n){let{$$slots:e={},$$scope:o}=t,{selected:r=!1}=t,{isSelectable:i=!1}=t;return s.$$set=c=>{"selected"in c&&n(0,r=c.selected),"isSelectable"in c&&n(1,i=c.isSelectable),"$$scope"in c&&n(6,o=c.$$scope)},[r,i,e,function(c){Rn.call(this,s,c)},function(c){Rn.call(this,s,c)},function(c){Rn.call(this,s,c)},o]}class Gl extends nt{constructor(t){super(),ot(this,t,P4,R4,tt,{selected:0,isSelectable:1})}}function D4(s){let t,n,e,o;return{c(){t=F("div"),n=X(s[1]),E(t,"class","c-editable-text__text svelte-1kpc8s8"),E(t,"role","button"),E(t,"tabindex","0"),Pt(t,"c-editable-text--disabled",s[3])},m(r,i){_(r,t,i),U(t,n),e||(o=bt(t,"dblclick",s[4]),e=!0)},p(r,i){2&i&&Lt(n,r[1]),8&i&&Pt(t,"c-editable-text--disabled",r[3])},i:D,o:D,d(r){r&&y(t),e=!1,o()}}}function N4(s){let t,n,e,o;function r(a){s[15](a)}function i(a){s[16](a)}let c={size:1,variant:"surface",placeholder:s[2]};return s[5]!==void 0&&(c.textInput=s[5]),s[6]!==void 0&&(c.value=s[6]),t=new xr({props:c}),ue.push(()=>Ye(t,"textInput",r)),ue.push(()=>Ye(t,"value",i)),t.$on("click",O4),t.$on("keydown",s[7]),{c(){C(t.$$.fragment)},m(a,l){x(t,a,l),o=!0},p(a,l){const u={};4&l&&(u.placeholder=a[2]),!n&&32&l&&(n=!0,u.textInput=a[5],Ze(()=>n=!1)),!e&&64&l&&(e=!0,u.value=a[6],Ze(()=>e=!1)),t.$set(u)},i(a){o||(f(t.$$.fragment,a),o=!0)},o(a){$(t.$$.fragment,a),o=!1},d(a){M(t,a)}}}function F4(s){let t,n,e,o,r,i,c;const a=[N4,D4],l=[];function u(p,g){return!p[3]&&p[0]?0:1}return n=u(s),e=l[n]=a[n](s),{c(){t=W(),e.c(),o=ft()},m(p,g){_(p,t,g),l[n].m(p,g),_(p,o,g),r=!0,i||(c=bt(document.body,"click",s[8]),i=!0)},p(p,[g]){let h=n;n=u(p),n===h?l[n].p(p,g):(K(),$(l[h],1,1,()=>{l[h]=null}),Z(),e=l[n],e?e.p(p,g):(e=l[n]=a[n](p),e.c()),f(e,1),e.m(o.parentNode,o))},i(p){r||(f(e),r=!0)},o(p){$(e),r=!1},d(p){p&&(y(t),y(o)),l[n].d(p),i=!1,c()}}}const O4=s=>s.stopPropagation();function B4(s,t,n){let e,{isEditing:o=!1}=t,{value:r}=t,{cancelOnClickOutside:i=!0}=t,{placeholder:c=""}=t,{disabled:a=!1}=t,{onStartEdit:l}=t,{onAcceptEdit:u}=t,{onCancelEdit:p}=t,g=r;function h(T){o&&(u(g),n(0,o=!1),n(6,g=""),T==null||T.stopPropagation())}function k(T){o&&i&&(p(),n(0,o=!1),n(6,g=""),T==null||T.stopPropagation())}return s.$$set=T=>{"isEditing"in T&&n(0,o=T.isEditing),"value"in T&&n(1,r=T.value),"cancelOnClickOutside"in T&&n(9,i=T.cancelOnClickOutside),"placeholder"in T&&n(2,c=T.placeholder),"disabled"in T&&n(3,a=T.disabled),"onStartEdit"in T&&n(10,l=T.onStartEdit),"onAcceptEdit"in T&&n(11,u=T.onAcceptEdit),"onCancelEdit"in T&&n(12,p=T.onCancelEdit)},s.$$.update=()=>{32&s.$$.dirty&&(e==null||e.focus())},[o,r,c,a,function(T){o||a||(n(6,g=r),n(0,o=!0),l(),T==null||T.stopPropagation())},e,g,function(T){o&&(T.key==="Enter"?h(T):T.key==="Escape"&&k(T))},function(T){const b=T.target;b&&b.closest(`.${Xl}`)||k(T)},i,l,u,p,h,k,function(T){e=T,n(5,e)},function(T){g=T,n(6,g)}]}class z4 extends nt{constructor(t){super(),ot(this,t,B4,F4,tt,{isEditing:0,value:1,cancelOnClickOutside:9,placeholder:2,disabled:3,onStartEdit:10,onAcceptEdit:11,onCancelEdit:12,startEdit:4,acceptEdit:13,cancelEdit:14})}get startEdit(){return this.$$.ctx[4]}get acceptEdit(){return this.$$.ctx[13]}get cancelEdit(){return this.$$.ctx[14]}}function H4(s){let t,n;return{c(){t=Nt("svg"),n=Nt("path"),E(n,"fill-rule","evenodd"),E(n,"clip-rule","evenodd"),E(n,"d","M6 3.5C6 2.67157 6.67157 2 7.5 2C8.32843 2 9 2.67157 9 3.5C9 4.32843 8.32843 5 7.5 5C6.67157 5 6 4.32843 6 3.5ZM8 5.94999C9.14112 5.71836 10 4.70948 10 3.5C10 2.11929 8.88071 1 7.5 1C6.11929 1 5 2.11929 5 3.5C5 4.70948 5.85888 5.71836 7 5.94999V13.5C7 13.7761 7.22386 14 7.5 14C7.77614 14 8 13.7761 8 13.5V5.94999Z"),E(n,"fill","currentColor"),E(t,"width","15"),E(t,"height","15"),E(t,"viewBox","0 0 15 15"),E(t,"fill","none"),E(t,"xmlns","http://www.w3.org/2000/svg")},m(e,o){_(e,t,o),U(t,n)},p:D,i:D,o:D,d(e){e&&y(t)}}}class j4 extends nt{constructor(t){super(),ot(this,t,null,H4,tt,{})}}function U4(s){let t,n;return{c(){t=Nt("svg"),n=Nt("path"),E(n,"fill-rule","evenodd"),E(n,"clip-rule","evenodd"),E(n,"d","M10 3.5C10 4.70948 9.14112 5.71836 8 5.94999V13.5C8 13.7761 7.77614 14 7.5 14C7.22386 14 7 13.7761 7 13.5V5.94999C5.85888 5.71836 5 4.70948 5 3.5C5 2.11929 6.11929 1 7.5 1C8.88071 1 10 2.11929 10 3.5Z"),E(n,"fill","currentColor"),E(t,"width","15"),E(t,"height","15"),E(t,"viewBox","0 0 15 15"),E(t,"fill","none"),E(t,"xmlns","http://www.w3.org/2000/svg")},m(e,o){_(e,t,o),U(t,n)},p:D,i:D,o:D,d(e){e&&y(t)}}}class q4 extends nt{constructor(t){super(),ot(this,t,null,U4,tt,{})}}function W4(s){let t,n,e=[{xmlns:"http://www.w3.org/2000/svg"},{"data-ds-icon":"fa"},{viewBox:"0 0 448 512"},s[0]],o={};for(let r=0;r<e.length;r+=1)o=Ct(o,e[r]);return{c(){t=Nt("svg"),n=new Fe(!0),this.h()},l(r){t=Oe(r,"svg",{xmlns:!0,"data-ds-icon":!0,viewBox:!0});var i=Be(t);n=ze(i,!0),i.forEach(y),this.h()},h(){n.a=null,ne(t,o)},m(r,i){He(r,t,i),n.m('<!--! Font Awesome Pro 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2024 Fonticons, Inc.--><path d="M241 7c-9.4-9.4-24.6-9.4-33.9 0L79 135c-9.4 9.4-9.4 24.6 0 33.9s24.6 9.4 33.9 0l87-87L200 328c0 13.3 10.7 24 24 24s24-10.7 24-24V81.9l87 87c9.4 9.4 24.6 9.4 33.9 0s9.4-24.6 0-33.9zM48 344c0-13.3-10.7-24-24-24S0 330.7 0 344v80c0 48.6 39.4 88 88 88h272c48.6 0 88-39.4 88-88v-80c0-13.3-10.7-24-24-24s-24 10.7-24 24v80c0 22.1-17.9 40-40 40H88c-22.1 0-40-17.9-40-40z"/>',t)},p(r,[i]){ne(t,o=ge(e,[{xmlns:"http://www.w3.org/2000/svg"},{"data-ds-icon":"fa"},{viewBox:"0 0 448 512"},1&i&&r[0]]))},i:D,o:D,d(r){r&&y(t)}}}function V4(s,t,n){return s.$$set=e=>{n(0,t=Ct(Ct({},t),Qt(e)))},[t=Qt(t)]}class G4 extends nt{constructor(t){super(),ot(this,t,V4,W4,tt,{})}}const Y4=s=>({}),xc=s=>({});function Mc(s){let t,n,e,o;const r=[K4,X4],i=[];function c(a,l){return a[9]?0:1}return t=c(s),n=i[t]=r[t](s),{c(){n.c(),e=ft()},m(a,l){i[t].m(a,l),_(a,e,l),o=!0},p(a,l){let u=t;t=c(a),t!==u&&(K(),$(i[u],1,1,()=>{i[u]=null}),Z(),n=i[t],n||(n=i[t]=r[t](a),n.c()),f(n,1),n.m(e.parentNode,e))},i(a){o||(f(n),o=!0)},o(a){$(n),o=!1},d(a){a&&y(e),i[t].d(a)}}}function X4(s){let t,n;return t=new Jn.Root({props:{color:"accent",size:1,variant:"soft",$$slots:{default:[Z4]},$$scope:{ctx:s}}}),{c(){C(t.$$.fragment)},m(e,o){x(t,e,o),n=!0},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){M(t,e)}}}function K4(s){let t,n;return t=new Jn.Root({props:{color:"accent",size:1,variant:"solid",highContrast:!0,$$slots:{default:[J4]},$$scope:{ctx:s}}}),{c(){C(t.$$.fragment)},m(e,o){x(t,e,o),n=!0},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){M(t,e)}}}function Z4(s){let t;return{c(){t=X("Agent")},m(n,e){_(n,t,e)},d(n){n&&y(t)}}}function J4(s){let t;return{c(){t=X("Agent")},m(n,e){_(n,t,e)},d(n){n&&y(t)}}}function Q4(s){let t,n,e,o,r,i=Ie(s[2]);function c(u){s[22](u)}let a={value:dn.getDisplayName(s[2]),placeholder:"Conversation name",onAcceptEdit:s[20],onStartEdit:S3,onCancelEdit:R3};s[0]!==void 0&&(a.isEditing=s[0]),n=new z4({props:a}),s[21](n),ue.push(()=>Ye(n,"isEditing",c));let l=i&&Mc(s);return{c(){t=F("span"),C(n.$$.fragment),o=W(),l&&l.c(),E(t,"class","l-thread-menu-item__title svelte-nvsyjc"),E(t,"data-testid","thread-menu-item-title"),E(t,"slot","title")},m(u,p){_(u,t,p),x(n,t,null),U(t,o),l&&l.m(t,null),r=!0},p(u,p){const g={};4&p&&(g.value=dn.getDisplayName(u[2])),12&p&&(g.onAcceptEdit=u[20]),!e&&1&p&&(e=!0,g.isEditing=u[0],Ze(()=>e=!1)),n.$set(g),4&p&&(i=Ie(u[2])),i?l?(l.p(u,p),4&p&&f(l,1)):(l=Mc(u),l.c(),f(l,1),l.m(t,null)):l&&(K(),$(l,1,1,()=>{l=null}),Z())},i(u){r||(f(n.$$.fragment,u),f(l),r=!0)},o(u){$(n.$$.fragment,u),$(l),r=!1},d(u){u&&y(t),s[21](null),M(n),l&&l.d()}}}function t3(s){let t,n;return t=new _t.Root({props:{open:s[7],$$slots:{default:[x3]},$$scope:{ctx:s}}}),{c(){C(t.$$.fragment)},m(e,o){x(t,e,o),n=!0},p(e,o){const r={};128&o&&(r.open=e[7]),33555942&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){M(t,e)}}}function e3(s){let t,n,e,o;return t=new Me({props:{size:1,variant:"soft",color:"success",title:"Save",$$slots:{default:[M3]},$$scope:{ctx:s}}}),t.$on("click",function(){ve(s[1].acceptEdit)&&s[1].acceptEdit.apply(this,arguments)}),e=new Me({props:{size:1,variant:"soft",color:"neutral",title:"Cancel",$$slots:{default:[A3]},$$scope:{ctx:s}}}),e.$on("click",function(){ve(s[1].cancelEdit)&&s[1].cancelEdit.apply(this,arguments)}),{c(){C(t.$$.fragment),n=W(),C(e.$$.fragment)},m(r,i){x(t,r,i),_(r,n,i),x(e,r,i),o=!0},p(r,i){s=r;const c={};33554432&i&&(c.$$scope={dirty:i,ctx:s}),t.$set(c);const a={};33554432&i&&(a.$$scope={dirty:i,ctx:s}),e.$set(a)},i(r){o||(f(t.$$.fragment,r),f(e.$$.fragment,r),o=!0)},o(r){$(t.$$.fragment,r),$(e.$$.fragment,r),o=!1},d(r){r&&y(n),M(t,r),M(e,r)}}}function n3(s){let t,n;return t=new lo({}),{c(){C(t.$$.fragment)},m(e,o){x(t,e,o),n=!0},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){M(t,e)}}}function o3(s){let t,n,e;return n=new Me({props:{variant:"ghost-block",color:"neutral",size:1,title:T3,$$slots:{default:[n3]},$$scope:{ctx:s}}}),n.$on("click",s[13]),{c(){t=F("div"),C(n.$$.fragment),E(t,"class","l-thread-menu-item__options svelte-nvsyjc")},m(o,r){_(o,t,r),x(n,t,null),e=!0},p(o,r){const i={};33554432&r&&(i.$$scope={dirty:r,ctx:o}),n.$set(i)},i(o){e||(f(n.$$.fragment,o),e=!0)},o(o){$(n.$$.fragment,o),e=!1},d(o){o&&y(t),M(n)}}}function r3(s){let t;return{c(){t=X("Options")},m(n,e){_(n,t,e)},d(n){n&&y(t)}}}function Ac(s){let t,n;return t=new _t.Item({props:{class:"c-thread-menu__share-link",onSelect:s[14],$$slots:{iconLeft:[p3],default:[l3]},$$scope:{ctx:s}}}),{c(){C(t.$$.fragment)},m(e,o){x(t,e,o),n=!0},p(e,o){const r={};4&o&&(r.onSelect=e[14]),33554688&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){M(t,e)}}}function s3(s){let t;return{c(){t=X("Share link to session")},m(n,e){_(n,t,e)},d(n){n&&y(t)}}}function i3(s){let t;return{c(){t=X("Unable to create link")},m(n,e){_(n,t,e)},d(n){n&&y(t)}}}function a3(s){let t;return{c(){t=X("Link copied")},m(n,e){_(n,t,e)},d(n){n&&y(t)}}}function c3(s){let t;return{c(){t=X("Creating link")},m(n,e){_(n,t,e)},d(n){n&&y(t)}}}function l3(s){let t;function n(r,i){return r[8]==="retrieving"?c3:r[8]==="copied"?a3:r[8]==="failure"?i3:s3}let e=n(s),o=e(s);return{c(){o.c(),t=ft()},m(r,i){o.m(r,i),_(r,t,i)},p(r,i){e!==(e=n(r))&&(o.d(1),o=e(r),o&&(o.c(),o.m(t.parentNode,t)))},d(r){r&&y(t),o.d(r)}}}function u3(s){let t,n;return t=new G4({}),{c(){C(t.$$.fragment)},m(e,o){x(t,e,o),n=!0},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){M(t,e)}}}function d3(s){let t,n;return t=new Mr({}),{c(){C(t.$$.fragment)},m(e,o){x(t,e,o),n=!0},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){M(t,e)}}}function f3(s){let t,n;return t=new So({}),{c(){C(t.$$.fragment)},m(e,o){x(t,e,o),n=!0},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){M(t,e)}}}function m3(s){let t,n;return t=new Hn({props:{size:1}}),{c(){C(t.$$.fragment)},m(e,o){x(t,e,o),n=!0},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){M(t,e)}}}function p3(s){let t,n,e,o;const r=[m3,f3,d3,u3],i=[];function c(a,l){return a[8]==="retrieving"?0:a[8]==="copied"?1:a[8]==="failure"?2:3}return t=c(s),n=i[t]=r[t](s),{c(){n.c(),e=ft()},m(a,l){i[t].m(a,l),_(a,e,l),o=!0},p(a,l){let u=t;t=c(a),t!==u&&(K(),$(i[u],1,1,()=>{i[u]=null}),Z(),n=i[t],n||(n=i[t]=r[t](a),n.c()),f(n,1),n.m(e.parentNode,e))},i(a){o||(f(n),o=!0)},o(a){$(n),o=!1},d(a){a&&y(e),i[t].d(a)}}}function $3(s){let t;return{c(){t=X("Rename")},m(n,e){_(n,t,e)},d(n){n&&y(t)}}}function h3(s){let t,n;return t=new xl({props:{slot:"iconLeft"}}),{c(){C(t.$$.fragment)},m(e,o){x(t,e,o),n=!0},p:D,i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){M(t,e)}}}function g3(s){let t,n=s[2].isPinned?"Unpin":"Pin";return{c(){t=X(n)},m(e,o){_(e,t,o)},p(e,o){4&o&&n!==(n=e[2].isPinned?"Unpin":"Pin")&&Lt(t,n)},d(e){e&&y(t)}}}function v3(s){let t,n;return t=new q4({}),{c(){C(t.$$.fragment)},m(e,o){x(t,e,o),n=!0},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){M(t,e)}}}function w3(s){let t,n;return t=new j4({}),{c(){C(t.$$.fragment)},m(e,o){x(t,e,o),n=!0},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){M(t,e)}}}function y3(s){let t,n,e,o;const r=[w3,v3],i=[];function c(a,l){return a[2].isPinned?0:1}return t=c(s),n=i[t]=r[t](s),{c(){n.c(),e=ft()},m(a,l){i[t].m(a,l),_(a,e,l),o=!0},p(a,l){let u=t;t=c(a),t!==u&&(K(),$(i[u],1,1,()=>{i[u]=null}),Z(),n=i[t],n||(n=i[t]=r[t](a),n.c()),f(n,1),n.m(e.parentNode,e))},i(a){o||(f(n),o=!0)},o(a){$(n),o=!1},d(a){a&&y(e),i[t].d(a)}}}function b3(s){let t;return{c(){t=X("Delete")},m(n,e){_(n,t,e)},d(n){n&&y(t)}}}function _3(s){let t,n;return t=new Tr({props:{slot:"iconLeft"}}),{c(){C(t.$$.fragment)},m(e,o){x(t,e,o),n=!0},p:D,i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){M(t,e)}}}function C3(s){let t,n,e,o,r,i,c,a,l;t=new _t.Label({props:{$$slots:{default:[r3]},$$scope:{ctx:s}}});let u=s[10]&&s[2].isShareable&&Ac(s);return o=new _t.Item({props:{onSelect:s[15],$$slots:{iconLeft:[h3],default:[$3]},$$scope:{ctx:s}}}),i=new _t.Item({props:{title:L3,onSelect:s[16],$$slots:{iconLeft:[y3],default:[g3]},$$scope:{ctx:s}}}),a=new _t.Item({props:{title:I3,color:"error",onSelect:s[17],$$slots:{iconLeft:[_3],default:[b3]},$$scope:{ctx:s}}}),{c(){C(t.$$.fragment),n=W(),u&&u.c(),e=W(),C(o.$$.fragment),r=W(),C(i.$$.fragment),c=W(),C(a.$$.fragment)},m(p,g){x(t,p,g),_(p,n,g),u&&u.m(p,g),_(p,e,g),x(o,p,g),_(p,r,g),x(i,p,g),_(p,c,g),x(a,p,g),l=!0},p(p,g){const h={};33554432&g&&(h.$$scope={dirty:g,ctx:p}),t.$set(h),p[10]&&p[2].isShareable?u?(u.p(p,g),1028&g&&f(u,1)):(u=Ac(p),u.c(),f(u,1),u.m(e.parentNode,e)):u&&(K(),$(u,1,1,()=>{u=null}),Z());const k={};130&g&&(k.onSelect=p[15]),33554432&g&&(k.$$scope={dirty:g,ctx:p}),o.$set(k);const T={};196&g&&(T.onSelect=p[16]),33554436&g&&(T.$$scope={dirty:g,ctx:p}),i.$set(T);const b={};164&g&&(b.onSelect=p[17]),33554432&g&&(b.$$scope={dirty:g,ctx:p}),a.$set(b)},i(p){l||(f(t.$$.fragment,p),f(u),f(o.$$.fragment,p),f(i.$$.fragment,p),f(a.$$.fragment,p),l=!0)},o(p){$(t.$$.fragment,p),$(u),$(o.$$.fragment,p),$(i.$$.fragment,p),$(a.$$.fragment,p),l=!1},d(p){p&&(y(n),y(e),y(r),y(c)),M(t,p),u&&u.d(p),M(o,p),M(i,p),M(a,p)}}}function x3(s){let t,n,e,o;return t=new _t.Trigger({props:{$$slots:{default:[o3]},$$scope:{ctx:s}}}),e=new _t.Content({props:{size:1,side:"bottom",align:"end",onClickOutside:s[18],onEscapeKeyDown:s[19],$$slots:{default:[C3]},$$scope:{ctx:s}}}),{c(){C(t.$$.fragment),n=W(),C(e.$$.fragment)},m(r,i){x(t,r,i),_(r,n,i),x(e,r,i),o=!0},p(r,i){const c={};33554560&i&&(c.$$scope={dirty:i,ctx:r}),t.$set(c);const a={};128&i&&(a.onClickOutside=r[18]),128&i&&(a.onEscapeKeyDown=r[19]),33555942&i&&(a.$$scope={dirty:i,ctx:r}),e.$set(a)},i(r){o||(f(t.$$.fragment,r),f(e.$$.fragment,r),o=!0)},o(r){$(t.$$.fragment,r),$(e.$$.fragment,r),o=!1},d(r){r&&y(n),M(t,r),M(e,r)}}}function M3(s){let t,n;return t=new So({}),{c(){C(t.$$.fragment)},m(e,o){x(t,e,o),n=!0},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){M(t,e)}}}function A3(s){let t,n;return t=new Mr({}),{c(){C(t.$$.fragment)},m(e,o){x(t,e,o),n=!0},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){M(t,e)}}}function E3(s){let t,n,e,o,r;const i=[e3,t3],c=[];function a(p,g){return p[0]?0:1}n=a(s),e=c[n]=i[n](s);const l=s[12].right,u=Gt(l,s,s[25],xc);return{c(){t=F("div"),e.c(),o=W(),u&&u.c(),E(t,"slot","right"),E(t,"class","l-thread-menu-item__right svelte-nvsyjc")},m(p,g){_(p,t,g),c[n].m(t,null),U(t,o),u&&u.m(t,null),r=!0},p(p,g){let h=n;n=a(p),n===h?c[n].p(p,g):(K(),$(c[h],1,1,()=>{c[h]=null}),Z(),e=c[n],e?e.p(p,g):(e=c[n]=i[n](p),e.c()),f(e,1),e.m(t,o)),u&&u.p&&(!r||33554432&g)&&Yt(u,l,p,p[25],r?Kt(l,p[25],g,Y4):Xt(p[25]),xc)},i(p){r||(f(e),f(u,p),r=!0)},o(p){$(e),$(u,p),r=!1},d(p){p&&y(t),c[n].d(),u&&u.d(p)}}}function k3(s){let t,n;return t=new Gl({props:{selected:s[9],isSelectable:!0,$$slots:{right:[E3],title:[Q4]},$$scope:{ctx:s}}}),t.$on("click",s[23]),t.$on("keydown",function(){ve(xn("Enter",s[24]))&&xn("Enter",s[24]).apply(this,arguments)}),{c(){C(t.$$.fragment)},m(e,o){x(t,e,o),n=!0},p(e,[o]){s=e;const r={};512&o&&(r.selected=s[9]),33556463&o&&(r.$$scope={dirty:o,ctx:s}),t.$set(r)},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){M(t,e)}}}const T3="Conversation Options",L3="Pin session",I3="Delete session",S3=()=>{},R3=()=>{};function P3(s,t,n){let e,o,r,i=D,c=()=>(i(),i=se(p,O=>n(6,r=O)),p);s.$$.on_destroy.push(()=>i());let{$$slots:a={},$$scope:l}=t,{conversation:u}=t,{chatModel:p}=t;c();let g,{onConversationClicked:h}=t,{deleteConversation:k}=t,{editableTitle:T}=t,{isEditingTitle:b=!1}=t,S=!1;async function H(O){if(O!==void 0&&g===void 0){n(8,g=u.lastUrl?"copied":"retrieving");try{const B=await p.getConversationUrl(O);navigator.clipboard.writeText(B),n(8,g="copied")}catch(B){console.error("Failed to get conversation URL: ",B),n(8,g="failure")}finally{setTimeout(()=>{n(7,S=!1),n(8,g=void 0)},1200)}}}return s.$$set=O=>{"conversation"in O&&n(2,u=O.conversation),"chatModel"in O&&c(n(3,p=O.chatModel)),"onConversationClicked"in O&&n(4,h=O.onConversationClicked),"deleteConversation"in O&&n(5,k=O.deleteConversation),"editableTitle"in O&&n(1,T=O.editableTitle),"isEditingTitle"in O&&n(0,b=O.isEditingTitle),"$$scope"in O&&n(25,l=O.$$scope)},s.$$.update=()=>{64&s.$$.dirty&&n(10,e=r.flags.enableShareService),13&s.$$.dirty&&n(9,o=u.id===p.currentConversationId&&!b)},[b,T,u,p,h,k,r,S,g,o,e,H,a,()=>{n(7,S=!S)},()=>H(u.id),O=>{n(7,S=!1),T==null||T.startEdit(O)},()=>{r.toggleConversationPinned(u.id),n(7,S=!1)},async()=>{k(u.id),n(7,S=!1)},()=>n(7,S=!1),()=>n(7,S=!1),O=>{p.renameConversation(u.id,O)},function(O){ue[O?"unshift":"push"](()=>{T=O,n(1,T)})},function(O){b=O,n(0,b)},()=>h(u.id),()=>h(u.id),l]}class D3 extends nt{constructor(t){super(),ot(this,t,P3,k3,tt,{conversation:2,chatModel:3,onConversationClicked:4,deleteConversation:5,editableTitle:1,isEditingTitle:0})}}function Ec(s,t,n){const e=s.slice();return e[10]=t[n],e}function kc(s){let t,n,e,o,r,i;e=new Gl({props:{$$slots:{right:[U3],title:[N3]},$$scope:{ctx:s}}});let c=de(s[1]),a=[];for(let u=0;u<c.length;u+=1)a[u]=Tc(Ec(s,c,u));const l=u=>$(a[u],1,1,()=>{a[u]=null});return{c(){t=F("div"),n=F("div"),C(e.$$.fragment),o=W(),r=F("div");for(let u=0;u<a.length;u+=1)a[u].c();E(n,"class","l-thread-group__header svelte-1c3ly67"),E(t,"class","l-thread-group")},m(u,p){_(u,t,p),U(t,n),x(e,n,null),U(t,o),U(t,r);for(let g=0;g<a.length;g+=1)a[g]&&a[g].m(r,null);i=!0},p(u,p){const g={};if(8227&p&&(g.$$scope={dirty:p,ctx:u}),e.$set(g),30&p){let h;for(c=de(u[1]),h=0;h<c.length;h+=1){const k=Ec(u,c,h);a[h]?(a[h].p(k,p),f(a[h],1)):(a[h]=Tc(k),a[h].c(),f(a[h],1),a[h].m(r,null))}for(K(),h=c.length;h<a.length;h+=1)l(h);Z()}},i(u){if(!i){f(e.$$.fragment,u);for(let p=0;p<c.length;p+=1)f(a[p]);i=!0}},o(u){$(e.$$.fragment,u),a=a.filter(Boolean);for(let p=0;p<a.length;p+=1)$(a[p]);i=!1},d(u){u&&y(t),M(e),fn(a,u)}}}function N3(s){let t,n;return{c(){t=F("span"),n=X(s[0]),E(t,"slot","title")},m(e,o){_(e,t,o),U(t,n)},p(e,o){1&o&&Lt(n,e[0])},d(e){e&&y(t)}}}function F3(s){let t,n;return t=new lo({}),{c(){C(t.$$.fragment)},m(e,o){x(t,e,o),n=!0},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){M(t,e)}}}function O3(s){let t,n;return t=new Me({props:{variant:"ghost-block",color:"neutral",size:1,title:"Group options",$$slots:{default:[F3]},$$scope:{ctx:s}}}),t.$on("click",s[7]),{c(){C(t.$$.fragment)},m(e,o){x(t,e,o),n=!0},p(e,o){const r={};8192&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){M(t,e)}}}function B3(s){let t,n,e,o,r=s[1].length+"",i=s[1].length>1?"s":"";return{c(){t=X("Delete "),n=X(r),e=X(" thread"),o=X(i)},m(c,a){_(c,t,a),_(c,n,a),_(c,e,a),_(c,o,a)},p(c,a){2&a&&r!==(r=c[1].length+"")&&Lt(n,r),2&a&&i!==(i=c[1].length>1?"s":"")&&Lt(o,i)},d(c){c&&(y(t),y(n),y(e),y(o))}}}function z3(s){let t,n;return t=new Tr({props:{slot:"iconLeft"}}),{c(){C(t.$$.fragment)},m(e,o){x(t,e,o),n=!0},p:D,i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){M(t,e)}}}function H3(s){let t,n;return t=new _t.Item({props:{color:"error",onSelect:s[6],$$slots:{iconLeft:[z3],default:[B3]},$$scope:{ctx:s}}}),{c(){C(t.$$.fragment)},m(e,o){x(t,e,o),n=!0},p(e,o){const r={};8194&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){M(t,e)}}}function j3(s){let t,n,e,o;return t=new _t.Trigger({props:{$$slots:{default:[O3]},$$scope:{ctx:s}}}),e=new _t.Content({props:{size:1,side:"bottom",align:"end",$$slots:{default:[H3]},$$scope:{ctx:s}}}),{c(){C(t.$$.fragment),n=W(),C(e.$$.fragment)},m(r,i){x(t,r,i),_(r,n,i),x(e,r,i),o=!0},p(r,i){const c={};8224&i&&(c.$$scope={dirty:i,ctx:r}),t.$set(c);const a={};8194&i&&(a.$$scope={dirty:i,ctx:r}),e.$set(a)},i(r){o||(f(t.$$.fragment,r),f(e.$$.fragment,r),o=!0)},o(r){$(t.$$.fragment,r),$(e.$$.fragment,r),o=!1},d(r){r&&y(n),M(t,r),M(e,r)}}}function U3(s){let t,n,e;return n=new _t.Root({props:{open:s[5],triggerOn:[Ne.Hover,Ne.Click],onHoverStart:W3,onHoverEnd:s[8],onOpenChange:s[9],$$slots:{default:[j3]},$$scope:{ctx:s}}}),{c(){t=F("div"),C(n.$$.fragment),E(t,"slot","right"),E(t,"class","l-thread-group__options")},m(o,r){_(o,t,r),x(n,t,null),e=!0},p(o,r){const i={};32&r&&(i.open=o[5]),32&r&&(i.onHoverEnd=o[8]),8226&r&&(i.$$scope={dirty:r,ctx:o}),n.$set(i)},i(o){e||(f(n.$$.fragment,o),e=!0)},o(o){$(n.$$.fragment,o),e=!1},d(o){o&&y(t),M(n)}}}function Tc(s){let t,n;return t=new D3({props:{conversation:s[10],chatModel:s[4],onConversationClicked:s[2],deleteConversation:s[3]}}),{c(){C(t.$$.fragment)},m(e,o){x(t,e,o),n=!0},p(e,o){const r={};2&o&&(r.conversation=e[10]),16&o&&(r.chatModel=e[4]),4&o&&(r.onConversationClicked=e[2]),8&o&&(r.deleteConversation=e[3]),t.$set(r)},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){M(t,e)}}}function q3(s){let t,n,e=s[1].length>0&&kc(s);return{c(){e&&e.c(),t=ft()},m(o,r){e&&e.m(o,r),_(o,t,r),n=!0},p(o,[r]){o[1].length>0?e?(e.p(o,r),2&r&&f(e,1)):(e=kc(o),e.c(),f(e,1),e.m(t.parentNode,t)):e&&(K(),$(e,1,1,()=>{e=null}),Z())},i(o){n||(f(e),n=!0)},o(o){$(e),n=!1},d(o){o&&y(t),e&&e.d(o)}}}const W3=()=>{};function V3(s,t,n){let{groupTitle:e}=t,{conversations:o}=t,{onConversationClicked:r}=t,{deleteConversation:i}=t,{chatModel:c}=t,a=!1;return s.$$set=l=>{"groupTitle"in l&&n(0,e=l.groupTitle),"conversations"in l&&n(1,o=l.conversations),"onConversationClicked"in l&&n(2,r=l.onConversationClicked),"deleteConversation"in l&&n(3,i=l.deleteConversation),"chatModel"in l&&n(4,c=l.chatModel)},[e,o,r,i,c,a,async function(){await c.deleteConversations(o.map(l=>l.id))},()=>n(5,a=!a),()=>n(5,a=!1),l=>{var u;l||(u=document.activeElement)!=null&&u.closest(".l-thread-group__options")&&document.activeElement instanceof HTMLElement&&document.activeElement.blur()}]}class G3 extends nt{constructor(t){super(),ot(this,t,V3,q3,tt,{groupTitle:0,conversations:1,onConversationClicked:2,deleteConversation:3,chatModel:4})}}const Y3=navigator.platform.toUpperCase().indexOf("MAC")>=0;var Yl=(s=>(s.leftBracket="[",s.rightBracket="]",s.forwardSlash="/",s.backSlash="\\",s.ctrl="Ctrl",s.L="L",s.R="R",s))(Yl||{});const X3={cmdOrCtrl:Y3?"⌘":"Ctrl"};function Lc(s,t,n){const e=s.slice();return e[39]=t[n].label,e[40]=t[n].value,e}function Ic(s,t,n){const e=s.slice();return e[36]=t[n],e[38]=n,e}function Sc(s){let t,n,e={triggerOn:[Ne.Click],$$slots:{content:[nw],default:[Z3]},$$scope:{ctx:s}};return t=new we({props:e}),s[28](t),{c(){C(t.$$.fragment)},m(o,r){x(t,o,r),n=!0},p(o,r){const i={};2144&r[0]|4096&r[1]&&(i.$$scope={dirty:r,ctx:o}),t.$set(i)},i(o){n||(f(t.$$.fragment,o),n=!0)},o(o){$(t.$$.fragment,o),n=!1},d(o){s[28](null),M(t,o)}}}function K3(s){let t,n;return t=new wd({}),{c(){C(t.$$.fragment)},m(e,o){x(t,e,o),n=!0},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){M(t,e)}}}function Z3(s){let t,n;return t=new Me({props:{variant:"ghost-block",color:"neutral",size:1,title:"Share session",$$slots:{default:[K3]},$$scope:{ctx:s}}}),t.$on("click",s[27]),{c(){C(t.$$.fragment)},m(e,o){x(t,e,o),n=!0},p(e,o){const r={};4096&o[1]&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){M(t,e)}}}function J3(s){let t;return{c(){t=X("Copy link to thread")},m(n,e){_(n,t,e)},p:D,i:D,o:D,d(n){n&&y(t)}}}function Q3(s){let t;return{c(){t=X(s[6])},m(n,e){_(n,t,e)},p(n,e){64&e[0]&&Lt(t,n[6])},i:D,o:D,d(n){n&&y(t)}}}function tw(s){let t;return{c(){t=X("Copied link to clipboard!")},m(n,e){_(n,t,e)},p:D,i:D,o:D,d(n){n&&y(t)}}}function ew(s){let t,n,e,o;return n=new Hn({props:{size:1,useCurrentColor:!0}}),{c(){t=F("div"),C(n.$$.fragment),e=X(" Copying link...")},m(r,i){_(r,t,i),x(n,t,null),U(t,e),o=!0},p:D,i(r){o||(f(n.$$.fragment,r),o=!0)},o(r){$(n.$$.fragment,r),o=!1},d(r){r&&y(t),M(n)}}}function nw(s){let t,n,e,o;const r=[ew,tw,Q3,J3],i=[];function c(a,l){return a[5]==="retrieving"?0:a[5]==="copied"?1:a[5]==="failure"?2:3}return n=c(s),e=i[n]=r[n](s),{c(){t=F("div"),e.c(),E(t,"slot","content")},m(a,l){_(a,t,l),i[n].m(t,null),o=!0},p(a,l){let u=n;n=c(a),n===u?i[n].p(a,l):(K(),$(i[u],1,1,()=>{i[u]=null}),Z(),e=i[n],e?e.p(a,l):(e=i[n]=r[n](a),e.c()),f(e,1),e.m(t,null))},i(a){o||(f(e),o=!0)},o(a){$(e),o=!1},d(a){a&&y(t),i[n].d()}}}function ow(s){let t,n;return t=new Ro({}),{c(){C(t.$$.fragment)},m(e,o){x(t,e,o),n=!0},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){M(t,e)}}}function rw(s){let t,n;return t=new gl({}),{c(){C(t.$$.fragment)},m(e,o){x(t,e,o),n=!0},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){M(t,e)}}}function sw(s){let t,n;return t=new Me({props:{variant:"solid",color:"accent",size:1,"data-testid":gw,$$slots:{default:[rw]},$$scope:{ctx:s}}}),t.$on("click",s[29]),{c(){C(t.$$.fragment)},m(e,o){x(t,e,o),n=!0},p(e,o){const r={};4096&o[1]&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){M(t,e)}}}function iw(s){let t,n,e;return n=new Wd({props:{icons:[`${X3.cmdOrCtrl}`,"L"]}}),{c(){t=F("div"),C(n.$$.fragment),E(t,"slot","content"),E(t,"class","c-threads-menu__new-thread-tooltip-content svelte-113v40n")},m(o,r){_(o,t,r),x(n,t,null),e=!0},p:D,i(o){e||(f(n.$$.fragment,o),e=!0)},o(o){$(n.$$.fragment,o),e=!1},d(o){o&&y(t),M(n)}}}function aw(s){let t,n,e,o,r,i,c=s[1].flags.enableShareService&&s[10]&&Sc(s);return e=new Me({props:{variant:"ghost-block",color:"neutral",size:1,title:s[3]?Fc:Nc,$$slots:{default:[ow]},$$scope:{ctx:s}}}),e.$on("click",s[14]),e.$on("keydown",xn("Enter",s[14])),r=new we({props:{$$slots:{content:[iw],default:[sw]},$$scope:{ctx:s}}}),{c(){t=F("div"),c&&c.c(),n=W(),C(e.$$.fragment),o=W(),C(r.$$.fragment),E(t,"class","c-threads-menu__right-btns svelte-113v40n"),E(t,"slot","buttons")},m(a,l){_(a,t,l),c&&c.m(t,null),U(t,n),x(e,t,null),U(t,o),x(r,t,null),i=!0},p(a,l){a[1].flags.enableShareService&&a[10]?c?(c.p(a,l),1026&l[0]&&f(c,1)):(c=Sc(a),c.c(),f(c,1),c.m(t,n)):c&&(K(),$(c,1,1,()=>{c=null}),Z());const u={};8&l[0]&&(u.title=a[3]?Fc:Nc),4096&l[1]&&(u.$$scope={dirty:l,ctx:a}),e.$set(u);const p={};4096&l[1]&&(p.$$scope={dirty:l,ctx:a}),r.$set(p)},i(a){i||(f(c),f(e.$$.fragment,a),f(r.$$.fragment,a),i=!0)},o(a){$(c),$(e.$$.fragment,a),$(r.$$.fragment,a),i=!1},d(a){a&&y(t),c&&c.d(),M(e),M(r)}}}function cw(s){let t;return{c(){t=X("Sort by:")},m(n,e){_(n,t,e)},d(n){n&&y(t)}}}function lw(s){let t,n=s[2]==="lastMessageTimestamp"?"Last Message":"Created Date";return{c(){t=X(n)},m(e,o){_(e,t,o)},p(e,o){4&o[0]&&n!==(n=e[2]==="lastMessageTimestamp"?"Last Message":"Created Date")&&Lt(t,n)},d(e){e&&y(t)}}}function uw(s){let t,n,e,o,r;return n=new Ot({props:{size:1,$$slots:{default:[lw]},$$scope:{ctx:s}}}),o=new Ro({}),{c(){t=F("div"),C(n.$$.fragment),e=W(),C(o.$$.fragment),E(t,"class","c-threads-menu__sort-trigger svelte-113v40n")},m(i,c){_(i,t,c),x(n,t,null),U(t,e),x(o,t,null),r=!0},p(i,c){const a={};4&c[0]|4096&c[1]&&(a.$$scope={dirty:c,ctx:i}),n.$set(a)},i(i){r||(f(n.$$.fragment,i),f(o.$$.fragment,i),r=!0)},o(i){$(n.$$.fragment,i),$(o.$$.fragment,i),r=!1},d(i){i&&y(t),M(n),M(o)}}}function dw(s){let t,n,e=s[39]+"";return{c(){t=X(e),n=W()},m(o,r){_(o,t,r),_(o,n,r)},p:D,d(o){o&&(y(t),y(n))}}}function Rc(s){let t,n;function e(){return s[25](s[40])}return t=new _t.Item({props:{onSelect:e,highlight:s[2]===s[40],$$slots:{default:[dw]},$$scope:{ctx:s}}}),{c(){C(t.$$.fragment)},m(o,r){x(t,o,r),n=!0},p(o,r){s=o;const i={};513&r[0]&&(i.onSelect=e),4&r[0]&&(i.highlight=s[2]===s[40]),4096&r[1]&&(i.$$scope={dirty:r,ctx:s}),t.$set(i)},i(o){n||(f(t.$$.fragment,o),n=!0)},o(o){$(t.$$.fragment,o),n=!1},d(o){M(t,o)}}}function fw(s){let t,n,e=de(s[13]),o=[];for(let i=0;i<e.length;i+=1)o[i]=Rc(Lc(s,e,i));const r=i=>$(o[i],1,1,()=>{o[i]=null});return{c(){for(let i=0;i<o.length;i+=1)o[i].c();t=ft()},m(i,c){for(let a=0;a<o.length;a+=1)o[a]&&o[a].m(i,c);_(i,t,c),n=!0},p(i,c){if(8709&c[0]){let a;for(e=de(i[13]),a=0;a<e.length;a+=1){const l=Lc(i,e,a);o[a]?(o[a].p(l,c),f(o[a],1)):(o[a]=Rc(l),o[a].c(),f(o[a],1),o[a].m(t.parentNode,t))}for(K(),a=e.length;a<o.length;a+=1)r(a);Z()}},i(i){if(!n){for(let c=0;c<e.length;c+=1)f(o[c]);n=!0}},o(i){o=o.filter(Boolean);for(let c=0;c<o.length;c+=1)$(o[c]);n=!1},d(i){i&&y(t),fn(o,i)}}}function mw(s){let t,n,e,o;return t=new _t.Trigger({props:{$$slots:{default:[uw]},$$scope:{ctx:s}}}),e=new _t.Content({props:{size:1,side:"bottom",align:"start",$$slots:{default:[fw]},$$scope:{ctx:s}}}),{c(){C(t.$$.fragment),n=W(),C(e.$$.fragment)},m(r,i){x(t,r,i),_(r,n,i),x(e,r,i),o=!0},p(r,i){const c={};4&i[0]|4096&i[1]&&(c.$$scope={dirty:i,ctx:r}),t.$set(c);const a={};517&i[0]|4096&i[1]&&(a.$$scope={dirty:i,ctx:r}),e.$set(a)},i(r){o||(f(t.$$.fragment,r),f(e.$$.fragment,r),o=!0)},o(r){$(t.$$.fragment,r),$(e.$$.fragment,r),o=!1},d(r){r&&y(n),M(t,r),M(e,r)}}}function pw(s){let t,n,e,o,r,i;e=new Ot({props:{size:1,weight:"medium",$$slots:{default:[cw]},$$scope:{ctx:s}}});let c={$$slots:{default:[mw]},$$scope:{ctx:s}};return r=new _t.Root({props:c}),s[26](r),{c(){t=F("div"),n=F("div"),C(e.$$.fragment),o=W(),C(r.$$.fragment),E(n,"class","c-threads-menu__sort-label svelte-113v40n"),E(t,"slot","sort-options"),E(t,"class","c-threads-menu__sort-options svelte-113v40n")},m(a,l){_(a,t,l),U(t,n),x(e,n,null),U(t,o),x(r,t,null),i=!0},p(a,l){const u={};4096&l[1]&&(u.$$scope={dirty:l,ctx:a}),e.$set(u);const p={};517&l[0]|4096&l[1]&&(p.$$scope={dirty:l,ctx:a}),r.$set(p)},i(a){i||(f(e.$$.fragment,a),f(r.$$.fragment,a),i=!0)},o(a){$(e.$$.fragment,a),$(r.$$.fragment,a),i=!1},d(a){a&&y(t),M(e),s[26](null),M(r)}}}function Pc(s){let t,n,e,o;return n=new dd({props:{size:4}}),{c(){t=F("div"),C(n.$$.fragment),e=W(),E(t,"class","c-threads-menu__separator svelte-113v40n")},m(r,i){_(r,t,i),x(n,t,null),U(t,e),o=!0},i(r){o||(f(n.$$.fragment,r),o=!0)},o(r){$(n.$$.fragment,r),o=!1},d(r){r&&y(t),M(n)}}}function Dc(s){let t,n,e,o;t=new G3({props:{groupTitle:s[36].groupTitle,conversations:s[36].conversations,onConversationClicked:s[17],deleteConversation:s[18],chatModel:s[1]}});let r=s[38]<s[4].length-1&&Pc();return{c(){C(t.$$.fragment),n=W(),r&&r.c(),e=ft()},m(i,c){x(t,i,c),_(i,n,c),r&&r.m(i,c),_(i,e,c),o=!0},p(i,c){const a={};16&c[0]&&(a.groupTitle=i[36].groupTitle),16&c[0]&&(a.conversations=i[36].conversations),2&c[0]&&(a.chatModel=i[1]),t.$set(a),i[38]<i[4].length-1?r?16&c[0]&&f(r,1):(r=Pc(),r.c(),f(r,1),r.m(e.parentNode,e)):r&&(K(),$(r,1,1,()=>{r=null}),Z())},i(i){o||(f(t.$$.fragment,i),f(r),o=!0)},o(i){$(t.$$.fragment,i),$(r),o=!1},d(i){i&&(y(n),y(e)),M(t,i),r&&r.d(i)}}}function $w(s){let t,n,e=de(s[4]),o=[];for(let i=0;i<e.length;i+=1)o[i]=Dc(Ic(s,e,i));const r=i=>$(o[i],1,1,()=>{o[i]=null});return{c(){t=F("div");for(let i=0;i<o.length;i+=1)o[i].c();E(t,"slot","body"),E(t,"data-testid","threads-menu-body")},m(i,c){_(i,t,c);for(let a=0;a<o.length;a+=1)o[a]&&o[a].m(t,null);n=!0},p(i,c){if(393234&c[0]){let a;for(e=de(i[4]),a=0;a<e.length;a+=1){const l=Ic(i,e,a);o[a]?(o[a].p(l,c),f(o[a],1)):(o[a]=Dc(l),o[a].c(),f(o[a],1),o[a].m(t,null))}for(K(),a=e.length;a<o.length;a+=1)r(a);Z()}},i(i){if(!n){for(let c=0;c<e.length;c+=1)f(o[c]);n=!0}},o(i){o=o.filter(Boolean);for(let c=0;c<o.length;c+=1)$(o[c]);n=!1},d(i){i&&y(t),fn(o,i)}}}function hw(s){let t,n,e,o,r;function i(a){s[30](a)}let c={active:s[3],class:Xl,title:dn.getDisplayName(s[11]),$$slots:{body:[$w],"sort-options":[pw],buttons:[aw]},$$scope:{ctx:s}};return s[8]!==void 0&&(c.element=s[8]),t=new T4({props:c}),ue.push(()=>Ye(t,"element",i)),t.$on("click",s[14]),t.$on("keydown",xn("Enter",s[14])),{c(){C(t.$$.fragment)},m(a,l){x(t,a,l),e=!0,o||(r=[bt(window,"blur",s[19]),bt(window,"keydown",xn("Escape",s[15])),bt(window,"click",s[24],!0)],o=!0)},p(a,l){const u={};8&l[0]&&(u.active=a[3]),2048&l[0]&&(u.title=dn.getDisplayName(a[11])),3839&l[0]|4096&l[1]&&(u.$$scope={dirty:l,ctx:a}),!n&&256&l[0]&&(n=!0,u.element=a[8],Ze(()=>n=!1)),t.$set(u)},i(a){e||(f(t.$$.fragment,a),e=!0)},o(a){$(t.$$.fragment,a),e=!1},d(a){M(t,a),o=!1,Re(r)}}}new Set(Object.values(Yl));const Xl="js-threads-menu",gw="new-thread-button",Nc="Show Sessions",Fc="Collapse Sessions";var hn=(s=>(s.Pinned="Pinned",s.Today="Today",s.ThisWeek="Last 7 days",s.ThisMonth="Last 30 days",s.Older="Older",s))(hn||{});function vw(s,t,n){let e,o,r,i,c,a,l=D,u=()=>(l(),l=se(h,G=>n(1,i=G)),h),p=D,g=D;s.$$.on_destroy.push(()=>l()),s.$$.on_destroy.push(()=>p()),s.$$.on_destroy.push(()=>g());let{chatModel:h}=t;u();let{onActiveChanged:k=()=>{}}=t,{active:T}=t,b=T||!1;const S=[hn.Pinned,hn.Today,hn.ThisWeek,hn.ThisMonth,hn.Older];let H=[];function O(G){T===void 0&&b!==G&&(n(3,b=G),k(G))}function B(){O(!1)}function ut(){h.setCurrentConversation(),B()}let kt,rt=!1,vt,et,At,St="";async function It(G){if(G!==void 0){vt&&(clearTimeout(void 0),vt.requestOpen()),n(5,kt="retrieving"),n(6,St="");try{const Dt=await h.getConversationUrl(G);navigator.clipboard.writeText(Dt),n(5,kt="copied")}catch(Dt){const Rt=Dt;n(5,kt="failure"),n(6,St=Rt.message)}finally{setTimeout(()=>{vt==null||vt.requestClose()},1200)}}}return s.$$set=G=>{"chatModel"in G&&u(n(0,h=G.chatModel)),"onActiveChanged"in G&&n(21,k=G.onActiveChanged),"active"in G&&n(22,T=G.active)},s.$$.update=()=>{2&s.$$.dirty[0]&&(n(12,e=i.sortConversationsBy),p(),p=se(e,G=>n(2,c=G))),2&s.$$.dirty[0]&&(n(11,o=i.currentConversationModel),g(),g=se(o,G=>n(23,a=G))),8388609&s.$$.dirty[0]&&n(10,r=!!a.id&&h.isConversationShareable(a.id)),7&s.$$.dirty[0]&&(G=>{var Zt;const Dt=new Map,Rt=new Date(new Date().setHours(0,0,0,0)),jt=[{age:hn.Today,date:Rt},{age:hn.ThisWeek,date:new Date(Rt.getTime()-6048e5)},{age:hn.ThisMonth,date:new Date(Rt.getTime()-2592e6)}];for(const Bt of G){const $e=dn.getTime(Bt,c);let Mt=((Zt=jt.find(qt=>$e>=qt.date))==null?void 0:Zt.age)||hn.Older;Bt.isPinned&&(Mt=hn.Pinned),Dt.set(Mt,[...Dt.get(Mt)||[],Bt])}n(4,H=S.map(Bt=>({groupTitle:Bt,conversations:Dt.get(Bt)||[]})).filter(Bt=>Bt.conversations.length>0))})(i.orderedConversations(c).filter(G=>!!h.flags.enableAgentMode||!Ie(G)))},[h,i,c,b,H,kt,St,vt,et,At,r,o,e,[{label:"Last Message",value:"lastMessageTimestamp"},{label:"Created Date",value:"createdAt"}],function(G){O(!b),G.stopPropagation(),G.preventDefault()},B,ut,function(G){h.setCurrentConversation(G),B()},async function(G){try{rt=!0,await i.deleteConversation(G)}finally{rt=!1}},function(){rt||B()},It,k,T,a,G=>{et&&G.composedPath().includes(et)||B()},G=>{h.setSortConversationsBy(G),At==null||At.requestClose()},function(G){ue[G?"unshift":"push"](()=>{At=G,n(9,At)})},G=>{It(o.id),G.stopPropagation()},function(G){ue[G?"unshift":"push"](()=>{vt=G,n(7,vt)})},G=>{ut(),G.stopPropagation()},function(G){et=G,n(8,et)}]}class ww extends nt{constructor(t){super(),ot(this,t,vw,hw,tt,{chatModel:0,onActiveChanged:21,active:22},null,[-1,-1])}}function Oc(s){let t,n;return t=new Pn({props:{color:s[3],size:1,$$slots:{icon:[xw],default:[yw]},$$scope:{ctx:s}}}),{c(){C(t.$$.fragment)},m(e,o){x(t,e,o),n=!0},p(e,o){const r={};8&o&&(r.color=e[3]),2070&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){M(t,e)}}}function yw(s){let t,n,e=s[1]===Je.inProgress?` ${s[2].progress}%`:"";return{c(){t=X(s[4]),n=X(e)},m(o,r){_(o,t,r),_(o,n,r)},p(o,r){16&r&&Lt(t,o[4]),6&r&&e!==(e=o[1]===Je.inProgress?` ${o[2].progress}%`:"")&&Lt(n,e)},d(o){o&&(y(t),y(n))}}}function bw(s){let t,n,e;return n=new wl({}),{c(){t=F("div"),C(n.$$.fragment),E(t,"class","c-orientation-status--spin-icon svelte-1a8540p")},m(o,r){_(o,t,r),x(n,t,null),e=!0},i(o){e||(f(n.$$.fragment,o),e=!0)},o(o){$(n.$$.fragment,o),e=!1},d(o){o&&y(t),M(n)}}}function _w(s){let t,n;return t=new Dn({}),{c(){C(t.$$.fragment)},m(e,o){x(t,e,o),n=!0},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){M(t,e)}}}function Cw(s){let t,n;return t=new So({}),{c(){C(t.$$.fragment)},m(e,o){x(t,e,o),n=!0},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){M(t,e)}}}function xw(s){let t,n,e,o;const r=[Cw,_w,bw],i=[];function c(a,l){return a[1]===Je.succeeded?0:a[1]===Je.failed?1:2}return t=c(s),n=i[t]=r[t](s),{c(){n.c(),e=ft()},m(a,l){i[t].m(a,l),_(a,e,l),o=!0},p(a,l){let u=t;t=c(a),t!==u&&(K(),$(i[u],1,1,()=>{i[u]=null}),Z(),n=i[t],n||(n=i[t]=r[t](a),n.c()),f(n,1),n.m(e.parentNode,e))},i(a){o||(f(n),o=!0)},o(a){$(n),o=!1},d(a){a&&y(e),i[t].d(a)}}}function Mw(s){let t,n,e,o,r=s[0]&&Oc(s);return{c(){r&&r.c(),t=ft()},m(i,c){r&&r.m(i,c),_(i,t,c),n=!0,e||(o=bt(window,"message",s[5].onMessageFromExtension),e=!0)},p(i,[c]){i[0]?r?(r.p(i,c),1&c&&f(r,1)):(r=Oc(i),r.c(),f(r,1),r.m(t.parentNode,t)):r&&(K(),$(r,1,1,()=>{r=null}),Z())},i(i){n||(f(r),n=!0)},o(i){$(r),n=!1},d(i){i&&y(t),r&&r.d(i),e=!1,o()}}}function Aw(s,t,n){let e,o;const r=new _r(sn),i=xe({state:Je.idle});Vt(s,i,g=>n(2,o=g));const c=un(i,g=>g.state);Vt(s,c,g=>n(1,e=g));const a={handleMessageFromExtension:g=>!(!g.data||g.data.type!==fe.orientationStatusUpdate)&&(i.set(g.data.data),!0)};let l,u;jn(()=>{r.registerConsumer(a),sn.postMessage({type:fe.getOrientationStatus})});let p=!1;return s.$$.update=()=>{var g;2&s.$$.dirty&&n(3,l=(g=e)===Je.succeeded?"success":g===Je.failed||g===Je.aborted?"error":"warning"),6&s.$$.dirty&&n(4,u=function(h,k){return h===Je.succeeded?"Orientation complete! Check out `.augment-guidelines` file.":h===Je.failed?k.errorMessage?`Orientation failed: ${k.errorMessage}`:"Orientation failed":h===Je.aborted?k.errorMessage?`Orientation aborted: ${k.errorMessage}`:"Orientation aborted":"Orienting to codebase and creating .augment-guidelines file ... "}(e,o)),3&s.$$.dirty&&(p?e!==Je.succeeded&&e!==Je.failed||setTimeout(()=>{n(0,p=!1)},3e3):e===Je.inProgress&&n(0,p=!0))},[p,e,o,l,u,r,i,c]}class Ew extends nt{constructor(t){super(),ot(this,t,Aw,Mw,tt,{})}}function Bc(s){let t,n;return t=new Pn({props:{color:"error",size:1,$$slots:{icon:[Tw],default:[kw]},$$scope:{ctx:s}}}),{c(){C(t.$$.fragment)},m(e,o){x(t,e,o),n=!0},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){M(t,e)}}}function kw(s){let t;return{c(){t=X("Syncing disabled")},m(n,e){_(n,t,e)},d(n){n&&y(t)}}}function Tw(s){let t,n;return t=new yd({}),{c(){C(t.$$.fragment)},m(e,o){x(t,e,o),n=!0},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){M(t,e)}}}function Lw(s){let t,n,e=s[1].syncEnabledState==="disabled"&&Bc(s);return{c(){e&&e.c(),t=ft()},m(o,r){e&&e.m(o,r),_(o,t,r),n=!0},p(o,[r]){o[1].syncEnabledState==="disabled"?e?2&r&&f(e,1):(e=Bc(o),e.c(),f(e,1),e.m(t.parentNode,t)):e&&(K(),$(e,1,1,()=>{e=null}),Z())},i(o){n||(f(e),n=!0)},o(o){$(e),n=!1},d(o){o&&y(t),e&&e.d(o)}}}function Iw(s,t,n){let e,o=D,r=()=>(o(),o=se(i,c=>n(1,e=c)),i);s.$$.on_destroy.push(()=>o());let{contextModel:i}=t;return r(),s.$$set=c=>{"contextModel"in c&&r(n(0,i=c.contextModel))},[i,e]}class Sw extends nt{constructor(t){super(),ot(this,t,Iw,Lw,tt,{contextModel:0})}}function zc(s){let t,n;return t=new Pn({props:{color:s[2],size:1,$$slots:{icon:[Nw],default:[Rw]},$$scope:{ctx:s}}}),{c(){C(t.$$.fragment)},m(e,o){x(t,e,o),n=!0},p(e,o){const r={};4&o&&(r.color=e[2]),89&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){M(t,e)}}}function Rw(s){var o;let t,n,e=((o=s[0])==null?void 0:o.status)===Sn.done?"":` ${s[4]}%`;return{c(){t=X(s[3]),n=X(e)},m(r,i){_(r,t,i),_(r,n,i)},p(r,i){var c;8&i&&Lt(t,r[3]),17&i&&e!==(e=((c=r[0])==null?void 0:c.status)===Sn.done?"":` ${r[4]}%`)&&Lt(n,e)},d(r){r&&(y(t),y(n))}}}function Pw(s){let t,n,e;return n=new wl({}),{c(){t=F("div"),C(n.$$.fragment),E(t,"class","c-sync-status--spin-icon svelte-18a88kw")},m(o,r){_(o,t,r),x(n,t,null),e=!0},i(o){e||(f(n.$$.fragment,o),e=!0)},o(o){$(n.$$.fragment,o),e=!1},d(o){o&&y(t),M(n)}}}function Dw(s){let t,n;return t=new So({}),{c(){C(t.$$.fragment)},m(e,o){x(t,e,o),n=!0},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){M(t,e)}}}function Nw(s){let t,n,e,o;const r=[Dw,Pw],i=[];function c(a,l){var u;return((u=a[0])==null?void 0:u.status)===Sn.done?0:1}return t=c(s),n=i[t]=r[t](s),{c(){n.c(),e=ft()},m(a,l){i[t].m(a,l),_(a,e,l),o=!0},p(a,l){let u=t;t=c(a),t!==u&&(K(),$(i[u],1,1,()=>{i[u]=null}),Z(),n=i[t],n||(n=i[t]=r[t](a),n.c()),f(n,1),n.m(e.parentNode,e))},i(a){o||(f(n),o=!0)},o(a){$(n),o=!1},d(a){a&&y(e),i[t].d(a)}}}function Fw(s){let t,n,e=!isNaN(s[4])&&s[1],o=e&&zc(s);return{c(){o&&o.c(),t=ft()},m(r,i){o&&o.m(r,i),_(r,t,i),n=!0},p(r,[i]){18&i&&(e=!isNaN(r[4])&&r[1]),e?o?(o.p(r,i),18&i&&f(o,1)):(o=zc(r),o.c(),f(o,1),o.m(t.parentNode,t)):o&&(K(),$(o,1,1,()=>{o=null}),Z())},i(r){n||(f(o),n=!0)},o(r){$(o),n=!1},d(r){r&&y(t),o&&o.d(r)}}}function Ow(s,t,n){let e,o,r,i,{progress:c}=t;return s.$$set=a=>{"progress"in a&&n(0,c=a.progress)},s.$$.update=()=>{var a;1&s.$$.dirty&&n(4,e=!(a=c)||a.totalFiles<=0?NaN:a.status===Sn.done?100:Math.floor(a.syncedCount/a.totalFiles*100)),1&s.$$.dirty&&n(2,i=(c==null?void 0:c.status)===Sn.done?"success":"info"),1&s.$$.dirty&&n(3,o=(c==null?void 0:c.status)===Sn.done?"Indexing complete.":"Indexing codebase..."),3&s.$$.dirty&&(r?(c==null?void 0:c.status)===Sn.done&&setTimeout(()=>{n(1,r=!1)},3e3):c&&c.status!==Sn.done&&(c.status===Sn.longRunning||c.newlyTrackedFolders.length>0)&&n(1,r=!0))},n(1,r=!1),[c,r,i,o,e]}class Bw extends nt{constructor(t){super(),ot(this,t,Ow,Fw,tt,{progress:0})}}function zw(s){let t,n,e,o,r,i;return t=new Sw({props:{contextModel:s[0]}}),e=new Bw({props:{progress:s[1].syncProgress}}),r=new Ew({}),{c(){C(t.$$.fragment),n=W(),C(e.$$.fragment),o=W(),C(r.$$.fragment)},m(c,a){x(t,c,a),_(c,n,a),x(e,c,a),_(c,o,a),x(r,c,a),i=!0},p(c,[a]){const l={};1&a&&(l.contextModel=c[0]),t.$set(l);const u={};2&a&&(u.progress=c[1].syncProgress),e.$set(u)},i(c){i||(f(t.$$.fragment,c),f(e.$$.fragment,c),f(r.$$.fragment,c),i=!0)},o(c){$(t.$$.fragment,c),$(e.$$.fragment,c),$(r.$$.fragment,c),i=!1},d(c){c&&(y(n),y(o)),M(t,c),M(e,c),M(r,c)}}}function Hw(s,t,n){let e,o=D,r=()=>(o(),o=se(i,c=>n(1,e=c)),i);s.$$.on_destroy.push(()=>o());let{contextModel:i}=t;return r(),s.$$set=c=>{"contextModel"in c&&r(n(0,i=c.contextModel))},[i,e]}class jw extends nt{constructor(t){super(),ot(this,t,Hw,zw,tt,{contextModel:0})}}function Uw(s){let t,n,e;return t=new Cl({props:{iconName:"play_arrow"}}),{c(){C(t.$$.fragment),n=X(`
    Feedback`)},m(o,r){x(t,o,r),_(o,n,r),e=!0},p:D,i(o){e||(f(t.$$.fragment,o),e=!0)},o(o){$(t.$$.fragment,o),e=!1},d(o){o&&y(n),M(t,o)}}}function qw(s){let t,n,e,o,r,i;function c(l){s[3](l)}let a={disabled:s[1],variant:"surface",size:2};return s[0]!==void 0&&(a.value=s[0]),n=new xr({props:a}),ue.push(()=>Ye(n,"value",c)),n.$on("keydown",s[2]),r=new pe({props:{disabled:!s[0]||s[1],size:2,variant:"solid",color:"accent",$$slots:{default:[Uw]},$$scope:{ctx:s}}}),r.$on("click",s[4]),{c(){t=F("div"),C(n.$$.fragment),o=W(),C(r.$$.fragment),E(t,"class","simple-input-container svelte-16gfgo6")},m(l,u){_(l,t,u),x(n,t,null),U(t,o),x(r,t,null),i=!0},p(l,[u]){const p={};2&u&&(p.disabled=l[1]),!e&&1&u&&(e=!0,p.value=l[0],Ze(()=>e=!1)),n.$set(p);const g={};3&u&&(g.disabled=!l[0]||l[1]),128&u&&(g.$$scope={dirty:u,ctx:l}),r.$set(g)},i(l){i||(f(n.$$.fragment,l),f(r.$$.fragment,l),i=!0)},o(l){$(n.$$.fragment,l),$(r.$$.fragment,l),i=!1},d(l){l&&y(t),M(n),M(r)}}}function Ww(s,t,n){const e=Ht("autofixConversationModel");if(!e)throw new Error("AutofixConversationModel not found in context");let o="",r=!1;async function i(c){if(c.shiftKey||c.ctrlKey||c.metaKey)return!1;if(c.stopPropagation(),c.key==="Enter"&&o.length>0){n(1,r=!0);try{await e.handleUserSteering(o)}finally{n(1,r=!1)}return n(0,o=""),!0}return c.key==="Escape"}return jn(()=>{const c=document.querySelector("input");c&&(c.focus(),c.select())}),[o,r,i,function(c){o=c,n(0,o)},()=>i(new KeyboardEvent("keydown",{key:"Enter"}))]}class Vw extends nt{constructor(t){super(),ot(this,t,Ww,qw,tt,{})}}function Gw(s){let t;return{c(){t=X(`Agent Auto mode allows Augment to run commands automatically on your behalf without your
        explicit approval. Changes can be destructive -- proceed with caution.`)},m(n,e){_(n,t,e)},d(n){n&&y(t)}}}function Yw(s){let t;return{c(){t=X("Accept")},m(n,e){_(n,t,e)},d(n){n&&y(t)}}}function Xw(s){let t;return{c(){t=X("Back to Manual Mode")},m(n,e){_(n,t,e)},d(n){n&&y(t)}}}function Kw(s){let t,n,e,o,r,i,c,a;return n=new Ot({props:{size:2,$$slots:{default:[Gw]},$$scope:{ctx:s}}}),r=new pe({props:{size:1,variant:"solid",color:"accent",class:"c-agent-auto-mode-warning__button",$$slots:{default:[Yw]},$$scope:{ctx:s}}}),r.$on("click",s[1]),c=new pe({props:{size:1,variant:"solid",color:"neutral",class:"c-agent-auto-mode-warning__button",$$slots:{default:[Xw]},$$scope:{ctx:s}}}),c.$on("click",s[2]),{c(){t=F("div"),C(n.$$.fragment),e=W(),o=F("div"),C(r.$$.fragment),i=W(),C(c.$$.fragment),E(o,"class","c-agent-auto-mode-warning__buttons"),E(t,"class","c-agent-auto-mode-warning__content")},m(l,u){_(l,t,u),x(n,t,null),U(t,e),U(t,o),x(r,o,null),U(o,i),x(c,o,null),a=!0},p(l,u){const p={};8&u&&(p.$$scope={dirty:u,ctx:l}),n.$set(p);const g={};8&u&&(g.$$scope={dirty:u,ctx:l}),r.$set(g);const h={};8&u&&(h.$$scope={dirty:u,ctx:l}),c.$set(h)},i(l){a||(f(n.$$.fragment,l),f(r.$$.fragment,l),f(c.$$.fragment,l),a=!0)},o(l){$(n.$$.fragment,l),$(r.$$.fragment,l),$(c.$$.fragment,l),a=!1},d(l){l&&y(t),M(n),M(r),M(c)}}}function Zw(s){let t,n;return t=new Dn({props:{slot:"icon"}}),{c(){C(t.$$.fragment)},m(e,o){x(t,e,o),n=!0},p:D,i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){M(t,e)}}}function Jw(s){let t,n,e;return n=new Pn({props:{color:"warning",variant:"soft",size:1,$$slots:{icon:[Zw],default:[Kw]},$$scope:{ctx:s}}}),{c(){t=F("div"),C(n.$$.fragment),E(t,"class","c-agent-auto-mode-warning svelte-ffctgo")},m(o,r){_(o,t,r),x(n,t,null),e=!0},p(o,[r]){const i={};8&r&&(i.$$scope={dirty:r,ctx:o}),n.$set(i)},i(o){e||(f(n.$$.fragment,o),e=!0)},o(o){$(n.$$.fragment,o),e=!1},d(o){o&&y(t),M(n)}}}function Qw(s){const t=Ht("agentConversationModel");return[t,()=>t.acceptAutoMode(),()=>t.rejectAutoMode()]}class ty extends nt{constructor(t){super(),ot(this,t,Qw,Jw,tt,{})}}function ey(s){let t,n,e=[{xmlns:"http://www.w3.org/2000/svg"},{"data-ds-icon":"fa"},{viewBox:"0 0 512 512"},s[0]],o={};for(let r=0;r<e.length;r+=1)o=Ct(o,e[r]);return{c(){t=Nt("svg"),n=new Fe(!0),this.h()},l(r){t=Oe(r,"svg",{xmlns:!0,"data-ds-icon":!0,viewBox:!0});var i=Be(t);n=ze(i,!0),i.forEach(y),this.h()},h(){n.a=null,ne(t,o)},m(r,i){He(r,t,i),n.m('<!--! Font Awesome Pro 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2024 Fonticons, Inc.--><path d="M208 416c0-26.5-21.5-48-48-48H64c-8.8 0-16-7.2-16-16V64c0-8.8 7.2-16 16-16h384c8.8 0 16 7.2 16 16v288c0 8.8-7.2 16-16 16H309.3c-10.4 0-20.5 3.4-28.8 9.6L208 432zm-.2 76.2.2-.2 101.3-76H448c35.3 0 64-28.7 64-64V64c0-35.3-28.7-64-64-64H64C28.7 0 0 28.7 0 64v288c0 35.3 28.7 64 64 64h96v80c0 6.1 3.4 11.6 8.8 14.3s11.9 2.1 16.8-1.5l17.1-12.8zM232 296c0 13.3 10.7 24 24 24s24-10.7 24-24v-64h64c13.3 0 24-10.7 24-24s-10.7-24-24-24h-64v-64c0-13.3-10.7-24-24-24s-24 10.7-24 24v64h-64c-13.3 0-24 10.7-24 24s10.7 24 24 24h64z"/>',t)},p(r,[i]){ne(t,o=ge(e,[{xmlns:"http://www.w3.org/2000/svg"},{"data-ds-icon":"fa"},{viewBox:"0 0 512 512"},1&i&&r[0]]))},i:D,o:D,d(r){r&&y(t)}}}function ny(s,t,n){return s.$$set=e=>{n(0,t=Ct(Ct({},t),Qt(e)))},[t=Qt(t)]}class oy extends nt{constructor(t){super(),ot(this,t,ny,ey,tt,{})}}function ry(s){let t;return{c(){t=X("Long threads can lead to worse results.")},m(n,e){_(n,t,e)},d(n){n&&y(t)}}}function sy(s){let t,n;return t=new oy({}),{c(){C(t.$$.fragment)},m(e,o){x(t,e,o),n=!0},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){M(t,e)}}}function iy(s){let t,n;return t=new Me({props:{size:1,variant:"ghost",color:"neutral","data-testid":"new-thread-warning-button",$$slots:{default:[sy]},$$scope:{ctx:s}}}),t.$on("click",function(){ve(s[0])&&s[0].apply(this,arguments)}),{c(){C(t.$$.fragment)},m(e,o){x(t,e,o),n=!0},p(e,o){s=e;const r={};4&o&&(r.$$scope={dirty:o,ctx:s}),t.$set(r)},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){M(t,e)}}}function ay(s){let t,n;return t=new Ol({}),{c(){C(t.$$.fragment)},m(e,o){x(t,e,o),n=!0},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){M(t,e)}}}function cy(s){let t,n;return t=new Me({props:{size:1,variant:"ghost",color:"neutral","data-testid":"dismiss-thread-warning-button",$$slots:{default:[ay]},$$scope:{ctx:s}}}),t.$on("click",function(){ve(s[1])&&s[1].apply(this,arguments)}),{c(){C(t.$$.fragment)},m(e,o){x(t,e,o),n=!0},p(e,o){s=e;const r={};4&o&&(r.$$scope={dirty:o,ctx:s}),t.$set(r)},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){M(t,e)}}}function ly(s){let t,n,e,o,r,i,c,a;return n=new Ot({props:{$$slots:{default:[ry]},$$scope:{ctx:s}}}),r=new we({props:{content:"New Thread",triggerOn:[Ne.Hover,Ne.Click],$$slots:{default:[iy]},$$scope:{ctx:s}}}),c=new we({props:{content:"Dismiss",triggerOn:[Ne.Hover],$$slots:{default:[cy]},$$scope:{ctx:s}}}),{c(){t=F("div"),C(n.$$.fragment),e=W(),o=F("div"),C(r.$$.fragment),i=W(),C(c.$$.fragment),E(o,"class","l-thread-length-warning__right svelte-npaukb"),E(t,"class","l-thread-length-warning__content svelte-npaukb")},m(l,u){_(l,t,u),x(n,t,null),U(t,e),U(t,o),x(r,o,null),U(o,i),x(c,o,null),a=!0},p(l,[u]){const p={};4&u&&(p.$$scope={dirty:u,ctx:l}),n.$set(p);const g={};5&u&&(g.$$scope={dirty:u,ctx:l}),r.$set(g);const h={};6&u&&(h.$$scope={dirty:u,ctx:l}),c.$set(h)},i(l){a||(f(n.$$.fragment,l),f(r.$$.fragment,l),f(c.$$.fragment,l),a=!0)},o(l){$(n.$$.fragment,l),$(r.$$.fragment,l),$(c.$$.fragment,l),a=!1},d(l){l&&y(t),M(n),M(r),M(c)}}}function uy(s,t,n){let{onNewThreadClick:e}=t,{onDismiss:o}=t;return s.$$set=r=>{"onNewThreadClick"in r&&n(0,e=r.onNewThreadClick),"onDismiss"in r&&n(1,o=r.onDismiss)},[e,o]}class dy extends nt{constructor(t){super(),ot(this,t,uy,ly,tt,{onNewThreadClick:0,onDismiss:1})}}class fy{constructor(t,n,e,o){st(this,"_disposables",[]);st(this,"_chatHistoryCheckpoints");st(this,"_currentCheckpoint",xe({request_id:crypto.randomUUID(),uuid:crypto.randomUUID(),chatItemType:Cn.agenticCheckpointDelimiter,status:_e.draft,fromTimestamp:0,toTimestamp:Number.MAX_SAFE_INTEGER}));st(this,"checkpoints");st(this,"uuidToIdx");st(this,"_targetCheckpointIdx",xe(void 0));st(this,"targetCheckpoint");st(this,"isTargetCheckpointLatest");st(this,"totalCheckpointCount");st(this,"_targetCheckpointSummary",xe([]));st(this,"targetCheckpointSummary",Qr(this._targetCheckpointSummary));st(this,"targetCheckpointHasChanges",un(this.targetCheckpointSummary,t=>t.some(n=>{var e,o;return(((e=n.changesSummary)==null?void 0:e.totalAddedLines)??!1)||(((o=n.changesSummary)==null?void 0:o.totalRemovedLines)??!1)})));st(this,"_doNothingOnAgentDisabled",t=>(...n)=>{this._flagsModel.enableAgentMode&&t(...n)});st(this,"_doNothingOnNotAgentConversation",t=>(...n)=>{if(this._flagsModel.enableAgentMode&&Ie(ce(this._conversationModel)))return t(...n)});st(this,"_refreshAgentEditsImmediate",async()=>{const t=this._targetCheckpoint;if(!t)return;const n=this._agentConversationModel?this._agentConversationModel.getBaselineTimestamp():0,e=await this.getCheckpointSummary({...t,fromTimestamp:n,toTimestamp:Number.MAX_SAFE_INTEGER});this._targetCheckpointSummary.set(e)});st(this,"_refreshAgentEdits",Il(this._refreshAgentEditsImmediate,500,{leading:!0,trailing:!0}));st(this,"_revertToTimestamp",this._doNothingOnNotAgentConversation(async t=>{await this._extensionClient.revertToTimestamp(t),this.createNewCheckpoint(),this._refreshAgentEdits()}));st(this,"maybeCreateOriginalCheckpoint",this._doNothingOnNotAgentConversation(()=>{ce(this.checkpoints).length===0&&this.createNewCheckpoint()}));st(this,"dispose",()=>{this._disposables.forEach(t=>t.dispose())});this._flagsModel=t,this._conversationModel=n,this._extensionClient=e,this._agentConversationModel=o,this._chatHistoryCheckpoints=un([this._conversationModel],([r],i)=>{var a,l,u,p;const c=r.chatHistory.filter(dl);(c==null?void 0:c.length)===((a=ce(this._chatHistoryCheckpoints))==null?void 0:a.length)&&((l=c==null?void 0:c.at(-1))==null?void 0:l.uuid)===((p=(u=ce(this._chatHistoryCheckpoints))==null?void 0:u.at(-1))==null?void 0:p.uuid)||(this._currentCheckpoint.update(g=>{var h;return{...g,fromTimestamp:((h=c.at(-1))==null?void 0:h.toTimestamp)??0,toTimestamp:Number.MAX_SAFE_INTEGER}}),i(c))}),this.checkpoints=un([this._chatHistoryCheckpoints,this._currentCheckpoint],([r,i])=>[...r,i].filter(c=>c.status!==_e.draft)),this.totalCheckpointCount=un(this.checkpoints,r=>r.length),this.uuidToIdx=un(this.checkpoints,r=>new Map(r.map((i,c)=>[i.uuid,c]))),this.targetCheckpoint=un([this.targetCheckpointIdx,this.checkpoints],([r,i])=>i.at(r??-1)),this.isTargetCheckpointLatest=un([this.targetCheckpointIdx,this.checkpoints],([r,i])=>r===i.length-1||r===void 0),[this._conversationModel.onSendExchange(this._doNothingOnNotAgentConversation(()=>{ce(this._currentCheckpoint).status===_e.draft&&this._currentCheckpoint.update(r=>({...r,status:_e.sent}))})),this.targetCheckpoint.subscribe(this._doNothingOnAgentDisabled(()=>{this._refreshAgentEdits()})),this.checkpoints.subscribe(this._doNothingOnAgentDisabled(()=>{ce(this.isTargetCheckpointLatest)&&this._refreshAgentEdits()})),this._conversationModel.onNewConversation(()=>{this.targetCheckpointIdx.set(void 0),this._targetCheckpointSummary.set([]),this._refreshAgentEdits()}),this._conversationModel.onSendExchange(this._doNothingOnAgentDisabled(()=>this.targetCheckpointIdx.set(void 0)))].forEach(r=>{this._disposables.push({dispose:r})})}registerAgentConversationModel(t){this._agentConversationModel=t}get targetCheckpointIdx(){return{subscribe:this._targetCheckpointIdx.subscribe,set:()=>this._targetCheckpointIdx.set(void 0),update:()=>this._targetCheckpointIdx.set(void 0)}}get currentCheckpoint(){return this._currentCheckpoint}get _checkpoints(){return ce(this.checkpoints)}get _targetCheckpoint(){return ce(this.targetCheckpoint)}getCheckpointIdxForTimestamp(t){return this._checkpoints.findIndex(n=>n.fromTimestamp<=t&&n.toTimestamp>=t)}getCheckpointAtIdx(t){return this._checkpoints.at(t)}createNewCheckpoint(t={}){const n=ce(this._currentCheckpoint),e=Date.now(),o={...n,status:_e.success,toTimestamp:e,...t};this._currentCheckpoint.set({request_id:crypto.randomUUID(),uuid:crypto.randomUUID(),chatItemType:Cn.agenticCheckpointDelimiter,status:_e.draft,fromTimestamp:e,toTimestamp:Number.MAX_SAFE_INTEGER}),this._conversationModel.addChatItem(o)}async getCheckpointSummary(t){return(await this._extensionClient.getAgentEditList(t.fromTimestamp,t.toTimestamp)).edits}async getCheckpointIdxSummary(t){const n=this._checkpoints.at(t);return n?this.getCheckpointSummary(n):[]}async revertToCheckpoint(t){const n=ce(this.uuidToIdx).get(t);if(n===void 0)return!1;const e=this._checkpoints.at(n);if(!e)return!1;const o=ce(this._conversationModel).id,r=await this._extensionClient.revertToTimestamp(e.toTimestamp);return(r||ce(this._conversationModel).id===o)&&this.createNewCheckpoint({revertTarget:{uuid:t}}),r}async revertDocumentToTimestamp(t,n){const e=ce(this._conversationModel).id,o=await this._extensionClient.revertToTimestamp(n,[t]);return o&&ce(this._conversationModel).id===e&&this.createNewCheckpoint({revertTarget:{filePath:t}}),o}async acceptAll(){const t=this._checkpoints.at(-1);if(t){const n=t.toTimestamp;return Ie(ce(this._conversationModel))&&this._agentConversationModel&&this._agentConversationModel.updateBaselineTimestamp(n),await this._extensionClient.acceptAllAgentEdits(),this._refreshAgentEdits(),!0}return!1}async rejectAll(){var n;const t=await this._extensionClient.openConfirmationModal({title:"Discard All Changes",message:"Are you sure you want to discard all changes? This will apply to all changes whether made by the agent or yourself.",confirmButtonText:"Discard",cancelButtonText:"Cancel"});if(t){const e=((n=this._agentConversationModel)==null?void 0:n.getBaselineTimestamp())??0;Ie(ce(this._conversationModel))&&this._agentConversationModel&&this._agentConversationModel.updateBaselineTimestamp(e),await this._revertToTimestamp(e),this._refreshAgentEdits()}return t}handleMessageFromExtension(t){switch(t.data.type){case fe.chatAgentEditListHasUpdates:this._refreshAgentEdits();break;case fe.chatMemoryHasUpdates:zl.notifyMemoryUpdated()}return!0}async updateBaselineTimestamp(t){Ie(ce(this._conversationModel))&&this._agentConversationModel&&(this._agentConversationModel.updateBaselineTimestamp(t),this._refreshAgentEdits())}}function Hc(s){let t,n,e,o,r,i,c,a,l,u,p,g,h;r=new Ot({props:{size:1,weight:"medium",truncate:!0,$$slots:{default:[my]},$$scope:{ctx:s}}}),c=new us({props:{totalAddedLines:s[7],totalRemovedLines:s[6]}}),l=new id({});let k=s[0]&&jc(s);return{c(){t=F("div"),n=F("div"),e=F("div"),o=F("div"),C(r.$$.fragment),i=W(),C(c.$$.fragment),a=W(),C(l.$$.fragment),u=W(),k&&k.c(),E(o,"class","file-changes-info__text svelte-1j09i4t"),E(e,"class","file-changes-info svelte-1j09i4t"),E(e,"role","button"),E(e,"tabindex","0"),Pt(e,"active",s[2].isDiffPanelOpen),E(n,"class","file-changes-header svelte-1j09i4t"),E(t,"class","file-changes-summary svelte-1j09i4t"),Pt(t,"file-changes-summary--has-actions",s[0])},m(T,b){_(T,t,b),U(t,n),U(n,e),U(e,o),x(r,o,null),U(o,i),x(c,o,null),U(e,a),x(l,e,null),U(t,u),k&&k.m(t,null),p=!0,g||(h=[bt(e,"click",s[11]),bt(e,"keydown",s[13])],g=!0)},p(T,b){const S={};32770&b&&(S.$$scope={dirty:b,ctx:T}),r.$set(S);const H={};128&b&&(H.totalAddedLines=T[7]),64&b&&(H.totalRemovedLines=T[6]),c.$set(H),(!p||4&b)&&Pt(e,"active",T[2].isDiffPanelOpen),T[0]?k?(k.p(T,b),1&b&&f(k,1)):(k=jc(T),k.c(),f(k,1),k.m(t,null)):k&&(K(),$(k,1,1,()=>{k=null}),Z()),(!p||1&b)&&Pt(t,"file-changes-summary--has-actions",T[0])},i(T){p||(f(r.$$.fragment,T),f(c.$$.fragment,T),f(l.$$.fragment,T),f(k),p=!0)},o(T){$(r.$$.fragment,T),$(c.$$.fragment,T),$(l.$$.fragment,T),$(k),p=!1},d(T){T&&y(t),M(r),M(c),M(l),k&&k.d(),g=!1,Re(h)}}}function my(s){let t,n,e,o,r=s[1]===1?"":"s";return{c(){t=X(s[1]),n=X(" file"),e=X(r),o=X(" changed")},m(i,c){_(i,t,c),_(i,n,c),_(i,e,c),_(i,o,c)},p(i,c){2&c&&Lt(t,i[1]),2&c&&r!==(r=i[1]===1?"":"s")&&Lt(e,r)},d(i){i&&(y(t),y(n),y(e),y(o))}}}function jc(s){let t,n,e,o,r;return n=new pe({props:{variant:"ghost",color:"neutral",size:1,disabled:s[4],$$slots:{default:[hy]},$$scope:{ctx:s}}}),n.$on("click",s[9]),o=new pe({props:{variant:"ghost",color:"neutral",size:1,disabled:s[3],$$slots:{default:[wy]},$$scope:{ctx:s}}}),o.$on("click",s[10]),{c(){t=F("div"),C(n.$$.fragment),e=W(),C(o.$$.fragment),E(t,"class","file-changes-actions svelte-1j09i4t")},m(i,c){_(i,t,c),x(n,t,null),U(t,e),x(o,t,null),r=!0},p(i,c){const a={};16&c&&(a.disabled=i[4]),32784&c&&(a.$$scope={dirty:c,ctx:i}),n.$set(a);const l={};8&c&&(l.disabled=i[3]),32776&c&&(l.$$scope={dirty:c,ctx:i}),o.$set(l)},i(i){r||(f(n.$$.fragment,i),f(o.$$.fragment,i),r=!0)},o(i){$(n.$$.fragment,i),$(o.$$.fragment,i),r=!1},d(i){i&&y(t),M(n),M(o)}}}function py(s){let t;return{c(){t=X("Create PR")},m(n,e){_(n,t,e)},d(n){n&&y(t)}}}function $y(s){let t;return{c(){t=X("Creating PR...")},m(n,e){_(n,t,e)},d(n){n&&y(t)}}}function hy(s){let t;function n(r,i){return r[4]?$y:py}let e=n(s),o=e(s);return{c(){o.c(),t=ft()},m(r,i){o.m(r,i),_(r,t,i)},p(r,i){e!==(e=n(r))&&(o.d(1),o=e(r),o&&(o.c(),o.m(t.parentNode,t)))},d(r){r&&y(t),o.d(r)}}}function gy(s){let t;return{c(){t=X("Apply locally")},m(n,e){_(n,t,e)},d(n){n&&y(t)}}}function vy(s){let t;return{c(){t=X("Applied")},m(n,e){_(n,t,e)},d(n){n&&y(t)}}}function wy(s){let t;function n(r,i){return r[3]?vy:gy}let e=n(s),o=e(s);return{c(){o.c(),t=ft()},m(r,i){o.m(r,i),_(r,t,i)},p(r,i){e!==(e=n(r))&&(o.d(1),o=e(r),o&&(o.c(),o.m(t.parentNode,t)))},d(r){r&&y(t),o.d(r)}}}function yy(s){let t,n,e=s[5]&&Hc(s);return{c(){e&&e.c(),t=ft()},m(o,r){e&&e.m(o,r),_(o,t,r),n=!0},p(o,[r]){o[5]?e?(e.p(o,r),32&r&&f(e,1)):(e=Hc(o),e.c(),f(e,1),e.m(t.parentNode,t)):e&&(K(),$(e,1,1,()=>{e=null}),Z())},i(o){n||(f(e),n=!0)},o(o){$(e),n=!1},d(o){o&&y(t),e&&e.d(o)}}}function by(s,t,n){let e,o,r,i,c,a,{hasActions:l=!0}=t;const u=Ht(Zn.key);Vt(s,u,T=>n(2,a=T));const p=Ht(es.key);let g=!1,h=!1;function k(){var S,H,O;if(a.isDiffPanelOpen)return void a.closeRemoteAgentDiffPanel();let T=[],b="";T=Kr(((S=a.currentConversation)==null?void 0:S.exchanges)??[]),b=bd(((H=a.currentConversation)==null?void 0:H.exchanges)??[],1),a.showRemoteAgentDiffPanel({turnIdx:-1,changedFiles:T,userPrompt:b,sessionSummary:((O=a.currentAgent)==null?void 0:O.session_summary)??"",isShowingAggregateChanges:!0})}return s.$$set=T=>{"hasActions"in T&&n(0,l=T.hasActions)},s.$$.update=()=>{var T;4&s.$$.dirty&&n(12,e=Kr(((T=a.currentConversation)==null?void 0:T.exchanges)??[])),4096&s.$$.dirty&&n(1,o=e.length),4096&s.$$.dirty&&n(7,r=e.reduce((b,S)=>{var O,B;const H=((O=S.new_contents)==null?void 0:O.split(`
`).length)-(((B=S.old_contents)==null?void 0:B.split(`
`).length)||0);return b+(H>0?H:0)},0)),4096&s.$$.dirty&&n(6,i=e.reduce((b,S)=>{var O,B;const H=((O=S.old_contents)==null?void 0:O.split(`
`).length)-(((B=S.new_contents)==null?void 0:B.split(`
`).length)||0);return b+(H>0?H:0)},0)),2&s.$$.dirty&&n(5,c=o>0)},[l,o,a,g,h,c,i,r,u,function(){var T;(T=a.currentAgent)!=null&&T.remote_agent_id?(n(4,h=!0),a.sendMessage("Please create a pull request with the changes you've made.").then(()=>{n(4,h=!1)}).catch(b=>{console.error("Error sending PR creation request:",b),n(4,h=!1)})):console.error("No current agent ID found")},function(){var S;let T=[];T=Kr(((S=a.currentConversation)==null?void 0:S.exchanges)??[]);const b=T.map(H=>({path:H.new_path||H.old_path,originalCode:H.old_contents||"",newCode:H.new_contents||""})).filter(H=>H.path&&H.newCode);Gd(b,(H,O,B)=>{p.applyChanges(H,O,B)}),n(3,g=!0)},k,e,T=>T.key==="Enter"&&k()]}class _y extends nt{constructor(t){super(),ot(this,t,by,yy,tt,{hasActions:0})}}function Uc(s){let t,n,e,o,r,i,c;function a(g,h){return g[0]?xy:Cy}let l=a(s),u=l(s),p=s[6]&&qc(s);return i=new _y({props:{hasActions:!s[7]}}),{c(){t=F("div"),n=F("div"),u.c(),e=W(),p&&p.c(),o=W(),r=F("div"),C(i.$$.fragment),E(n,"class","c-agent-header-banner svelte-1rcchsc"),E(r,"class","c-agent-header-status svelte-1rcchsc"),E(t,"class","c-agent-header svelte-1rcchsc")},m(g,h){_(g,t,h),U(t,n),u.m(n,null),U(n,e),p&&p.m(n,null),U(t,o),U(t,r),x(i,r,null),c=!0},p(g,h){l!==(l=a(g))&&(u.d(1),u=l(g),u&&(u.c(),u.m(n,e))),g[6]?p?(p.p(g,h),64&h&&f(p,1)):(p=qc(g),p.c(),f(p,1),p.m(n,null)):p&&(K(),$(p,1,1,()=>{p=null}),Z());const k={};128&h&&(k.hasActions=!g[7]),i.$set(k)},i(g){c||(f(p),f(i.$$.fragment,g),c=!0)},o(g){$(p),$(i.$$.fragment,g),c=!1},d(g){g&&y(t),u.d(),p&&p.d(),M(i)}}}function Cy(s){let t;return{c(){t=F("span"),t.textContent="Running locally"},m(n,e){_(n,t,e)},d(n){n&&y(t)}}}function xy(s){let t;return{c(){t=F("span"),t.textContent="Running in the cloud"},m(n,e){_(n,t,e)},d(n){n&&y(t)}}}function qc(s){var e,o,r;let t,n;return t=new Tl({props:{agentId:s[6],onDelete:s[9],isDeleting:s[5],selectedBranch:s[4]?"...":(e=s[3])==null?void 0:e.name,onSsh:((o=s[2])==null?void 0:o.status)===Ve.agentRunning||((r=s[2])==null?void 0:r.status)===Ve.agentIdle?s[10]:void 0}}),{c(){C(t.$$.fragment)},m(i,c){x(t,i,c),n=!0},p(i,c){var l,u,p;const a={};64&c&&(a.agentId=i[6]),32&c&&(a.isDeleting=i[5]),24&c&&(a.selectedBranch=i[4]?"...":(l=i[3])==null?void 0:l.name),4&c&&(a.onSsh=((u=i[2])==null?void 0:u.status)===Ve.agentRunning||((p=i[2])==null?void 0:p.status)===Ve.agentIdle?i[10]:void 0),t.$set(a)},i(i){n||(f(t.$$.fragment,i),n=!0)},o(i){$(t.$$.fragment,i),n=!1},d(i){M(t,i)}}}function My(s){let t,n,e,o;Kn(s[14]);let r=s[0]&&s[2]&&Uc(s);return{c(){r&&r.c(),t=ft()},m(i,c){r&&r.m(i,c),_(i,t,c),n=!0,e||(o=bt(window,"resize",s[14]),e=!0)},p(i,[c]){i[0]&&i[2]?r?(r.p(i,c),5&c&&f(r,1)):(r=Uc(i),r.c(),f(r,1),r.m(t.parentNode,t)):r&&(K(),$(r,1,1,()=>{r=null}),Z())},i(i){n||(f(r),n=!0)},o(i){$(r),n=!1},d(i){i&&y(t),r&&r.d(i),e=!1,o()}}}function Ay(s,t,n){let e,o,r,i,c,{isRemote:a=!0}=t,l=0;const u=Ht(Zn.key);Vt(s,u,S=>n(13,c=S));const p=Ht(co.key);let g,h,k=[],T=!1,b=!1;return jn(async()=>{await async function(){if(p){n(4,T=!0);try{const S=await p.listBranches();if(n(11,k=S.branches.filter(H=>H.isRemote)),g=S.branches.find(H=>H.isCurrentBranch),i){const H=k.find(O=>O.name===i||O.name===`origin/${i}`||i===`origin/${O.name}`);n(3,h=H||g)}else n(3,h=g)}catch(S){console.error("Failed to fetch branches:",S)}finally{n(4,T=!1)}}}()}),s.$$set=S=>{"isRemote"in S&&n(0,a=S.isRemote)},s.$$.update=()=>{var S,H,O;if(2&s.$$.dirty&&n(7,e=l<700),8192&s.$$.dirty&&n(2,o=c==null?void 0:c.currentAgent),4&s.$$.dirty&&n(6,r=o==null?void 0:o.remote_agent_id),4&s.$$.dirty&&n(12,i=(O=(H=(S=o==null?void 0:o.workspace_setup)==null?void 0:S.starting_files)==null?void 0:H.github_commit_ref)==null?void 0:O.git_ref),6144&s.$$.dirty&&i&&k.length>0){const B=k.find(ut=>ut.name===i||ut.name===`origin/${i}`||i===`origin/${ut.name}`);B&&n(3,h=B)}},[a,l,o,h,T,b,r,e,u,async function(S){if(S){n(5,b=!0);try{await u.deleteAgent(S)}finally{n(5,b=!1)}}},async function(S){if(!S)return;const H=u.agentOverviews.find(O=>O.remote_agent_id===S);H&&await u.sshToRemoteAgent(H)},k,i,c,function(){n(1,l=window.innerHeight)}]}class Ey extends nt{constructor(t){super(),ot(this,t,Ay,My,tt,{isRemote:0})}}function ky(s){let t,n;return t=new ww({props:{chatModel:s[20]}}),{c(){C(t.$$.fragment)},m(e,o){x(t,e,o),n=!0},p:D,i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){M(t,e)}}}function Ty(s){let t,n;return t=new q1({}),{c(){C(t.$$.fragment)},m(e,o){x(t,e,o),n=!0},p:D,i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){M(t,e)}}}function Wc(s){let t,n;return t=new Ey({}),{c(){C(t.$$.fragment)},m(e,o){x(t,e,o),n=!0},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){M(t,e)}}}function Ly(s){let t,n,e,o,r;const i=[Ty,ky],c=[];function a(u,p){return u[5].isActive&&u[16].fullFeatured?0:u[16].fullFeatured&&!u[1].doHideThreadSelector?1:-1}~(n=a(s))&&(e=c[n]=i[n](s));let l=s[4]&&s[5].isActive&&Wc();return{c(){t=F("div"),e&&e.c(),o=W(),l&&l.c(),E(t,"class","l-chat-top-bars svelte-179efe3")},m(u,p){_(u,t,p),~n&&c[n].m(t,null),U(t,o),l&&l.m(t,null),r=!0},p(u,p){let g=n;n=a(u),n===g?~n&&c[n].p(u,p):(e&&(K(),$(c[g],1,1,()=>{c[g]=null}),Z()),~n?(e=c[n],e?e.p(u,p):(e=c[n]=i[n](u),e.c()),f(e,1),e.m(t,o)):e=null),u[4]&&u[5].isActive?l?48&p[0]&&f(l,1):(l=Wc(),l.c(),f(l,1),l.m(t,null)):l&&(K(),$(l,1,1,()=>{l=null}),Z())},i(u){r||(f(e),f(l),r=!0)},o(u){$(e),$(l),r=!1},d(u){u&&y(t),~n&&c[n].d(),l&&l.d()}}}function Iy(s){let t,n;return t=new w4({props:{chatModel:s[20],onboardingWorkspaceModel:s[24],remoteAgentsModel:s[23],slot:"message-area"}}),{c(){C(t.$$.fragment)},m(e,o){x(t,e,o),n=!0},p:D,i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){M(t,e)}}}function Vc(s){let t,n,e,o,r;t=new jw({props:{contextModel:s[18]}});let i=s[16].enableAgentMode&&Gc(s),c=s[11]&&Xc(s);return{c(){C(t.$$.fragment),n=W(),i&&i.c(),e=W(),c&&c.c(),o=ft()},m(a,l){x(t,a,l),_(a,n,l),i&&i.m(a,l),_(a,e,l),c&&c.m(a,l),_(a,o,l),r=!0},p(a,l){a[16].enableAgentMode?i?(i.p(a,l),65536&l[0]&&f(i,1)):(i=Gc(a),i.c(),f(i,1),i.m(e.parentNode,e)):i&&(K(),$(i,1,1,()=>{i=null}),Z()),a[11]?c?(c.p(a,l),2048&l[0]&&f(c,1)):(c=Xc(a),c.c(),f(c,1),c.m(o.parentNode,o)):c&&(K(),$(c,1,1,()=>{c=null}),Z())},i(a){r||(f(t.$$.fragment,a),f(i),f(c),r=!0)},o(a){$(t.$$.fragment,a),$(i),$(c),r=!1},d(a){a&&(y(n),y(e),y(o)),M(t,a),i&&i.d(a),c&&c.d(a)}}}function Gc(s){let t,n,e,o,r,i=s[10]&&Yc();const c=[Ry,Sy],a=[];function l(u,p){return u[15]?0:1}return n=l(s),e=a[n]=c[n](s),{c(){i&&i.c(),t=W(),e.c(),o=ft()},m(u,p){i&&i.m(u,p),_(u,t,p),a[n].m(u,p),_(u,o,p),r=!0},p(u,p){u[10]?i?1024&p[0]&&f(i,1):(i=Yc(),i.c(),f(i,1),i.m(t.parentNode,t)):i&&(K(),$(i,1,1,()=>{i=null}),Z());let g=n;n=l(u),n!==g&&(K(),$(a[g],1,1,()=>{a[g]=null}),Z(),e=a[n],e||(e=a[n]=c[n](u),e.c()),f(e,1),e.m(o.parentNode,o))},i(u){r||(f(i),f(e),r=!0)},o(u){$(i),$(e),r=!1},d(u){u&&(y(t),y(o)),i&&i.d(u),a[n].d(u)}}}function Yc(s){let t,n;return t=new em({}),{c(){C(t.$$.fragment)},m(e,o){x(t,e,o),n=!0},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){M(t,e)}}}function Sy(s){let t,n;return t=new ep({}),{c(){C(t.$$.fragment)},m(e,o){x(t,e,o),n=!0},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){M(t,e)}}}function Ry(s){let t,n;return t=new ty({}),{c(){C(t.$$.fragment)},m(e,o){x(t,e,o),n=!0},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){M(t,e)}}}function Xc(s){let t,n;return t=new Ll({props:{card:s[3].currentCard,flagsModel:s[16]}}),{c(){C(t.$$.fragment)},m(e,o){x(t,e,o),n=!0},p(e,o){const r={};8&o[0]&&(r.card=e[3].currentCard),65536&o[0]&&(r.flagsModel=e[16]),t.$set(r)},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){M(t,e)}}}function Py(s){let t,n,e=s[14]&&Vc(s);return{c(){t=F("div"),e&&e.c(),E(t,"slot","actions-area"),E(t,"class","l-chat-actions-area svelte-179efe3")},m(o,r){_(o,t,r),e&&e.m(t,null),n=!0},p(o,r){o[14]?e?(e.p(o,r),16384&r[0]&&f(e,1)):(e=Vc(o),e.c(),f(e,1),e.m(t,null)):e&&(K(),$(e,1,1,()=>{e=null}),Z())},i(o){n||(f(e),n=!0)},o(o){$(e),n=!1},d(o){o&&y(t),e&&e.d()}}}function Dy(s){let t,n,e,o,r,i;function c(l){s[34](l)}let a={};return s[7]!==void 0&&(a.inputArea=s[7]),t=new _4({props:a}),ue.push(()=>Ye(t,"inputArea",c)),r=new Av({props:{editable:!s[15],placeholder:s[12],$$slots:{banner:[Oy]},$$scope:{ctx:s}}}),{c(){C(t.$$.fragment),e=W(),o=F("div"),C(r.$$.fragment),E(o,"class","l-input-area-design-system svelte-179efe3")},m(l,u){x(t,l,u),_(l,e,u),_(l,o,u),x(r,o,null),s[37](o),i=!0},p(l,u){const p={};!n&&128&u[0]&&(n=!0,p.inputArea=l[7],Ze(()=>n=!1)),t.$set(p);const g={};32768&u[0]&&(g.editable=!l[15]),4096&u[0]&&(g.placeholder=l[12]),257&u[0]|131072&u[1]&&(g.$$scope={dirty:u,ctx:l}),r.$set(g)},i(l){i||(f(t.$$.fragment,l),f(r.$$.fragment,l),i=!0)},o(l){$(t.$$.fragment,l),$(r.$$.fragment,l),i=!1},d(l){l&&(y(e),y(o)),M(t,l),M(r),s[37](null)}}}function Ny(s){let t,n;return t=new El({props:{borders:["top"],style:"padding-top: 0;",overflowVisible:!0,$$slots:{default:[By]},$$scope:{ctx:s}}}),{c(){C(t.$$.fragment)},m(e,o){x(t,e,o),n=!0},p(e,o){const r={};131072&o[1]&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){M(t,e)}}}function Fy(s){let t,n;return t=new El({props:{borders:["top"],style:"padding-top: 0;",overflowVisible:!0,$$slots:{default:[zy]},$$scope:{ctx:s}}}),{c(){C(t.$$.fragment)},m(e,o){x(t,e,o),n=!0},p(e,o){const r={};131072&o[1]&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){M(t,e)}}}function Kc(s){let t,n;return t=new dy({props:{onNewThreadClick:s[35],onDismiss:s[36]}}),{c(){C(t.$$.fragment)},m(e,o){x(t,e,o),n=!0},p(e,o){const r={};1&o[0]&&(r.onDismiss=e[36]),t.$set(r)},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){M(t,e)}}}function Oy(s){let t,n,e=s[8]&&Kc(s);return{c(){e&&e.c(),t=ft()},m(o,r){e&&e.m(o,r),_(o,t,r),n=!0},p(o,r){o[8]?e?(e.p(o,r),256&r[0]&&f(e,1)):(e=Kc(o),e.c(),f(e,1),e.m(t.parentNode,t)):e&&(K(),$(e,1,1,()=>{e=null}),Z())},i(o){n||(f(e),n=!0)},o(o){$(e),n=!1},d(o){o&&y(t),e&&e.d(o)}}}function By(s){let t,n;return t=new Vw({}),{c(){C(t.$$.fragment)},m(e,o){x(t,e,o),n=!0},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){M(t,e)}}}function zy(s){let t,n;return t=new Ov({}),{c(){C(t.$$.fragment)},m(e,o){x(t,e,o),n=!0},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){M(t,e)}}}function Hy(s){let t,n,e,o;const r=[Fy,Ny,Dy],i=[];function c(a,l){return a[13]===ko.autofixCommand?0:a[13]===ko.autofixPrompt?1:2}return t=c(s),n=i[t]=r[t](s),{c(){n.c(),e=ft()},m(a,l){i[t].m(a,l),_(a,e,l),o=!0},p(a,l){let u=t;t=c(a),t===u?i[t].p(a,l):(K(),$(i[u],1,1,()=>{i[u]=null}),Z(),n=i[t],n?n.p(a,l):(n=i[t]=r[t](a),n.c()),f(n,1),n.m(e.parentNode,e))},i(a){o||(f(n),o=!0)},o(a){$(n),o=!1},d(a){a&&y(e),i[t].d(a)}}}function jy(s){let t,n,e,o;return t=new Rv({props:{$$slots:{"input-area":[Hy],"actions-area":[Py],"message-area":[Iy],"floating-area":[Ly]},$$scope:{ctx:s}}}),{c(){C(t.$$.fragment)},m(r,i){x(t,r,i),n=!0,e||(o=[bt(window,"message",s[17].onMessageFromExtension),bt(window,"beforeunload",s[32]),bt(window,"keydown",s[33])],e=!0)},p(r,i){const c={};130491&i[0]|131072&i[1]&&(c.$$scope={dirty:i,ctx:r}),t.$set(c)},i(r){n||(f(t.$$.fragment,r),n=!0)},o(r){$(t.$$.fragment,r),n=!1},d(r){M(t,r),e=!1,Re(o)}}}function Uy(s,t,n){let e,o,r,i,c,a,l,u,p,g,h,k,T,b,S,H,O,B=D,ut=D,kt=()=>(ut(),ut=se(w,Q=>n(31,S=Q)),w);s.$$.on_destroy.push(()=>B()),s.$$.on_destroy.push(()=>ut());let{initialConversation:rt}=t,{initialFlags:vt}=t;const et=new _r(sn);let At=new ed;et.registerConsumer(At);let St,It=new Al;Vt(s,It,Q=>n(3,h=Q)),et.registerConsumer(It);let G=new nd(et,sn,At,{initialConversation:rt,initialFlags:vt,onLoaded:()=>{if(G.flags.enableAgentMode){const Q=h.actions.some(xt=>xt===Ge.workspaceNotPopulated),lt=Object.keys(G.conversations).length<=1&&dn.isEmpty(G.currentConversationModel);Q&&lt&&St.setToAgentic()}else St.setToChat()}});Vt(s,G,Q=>n(2,g=Q));let Dt=new os(G.currentConversationModel,G.extensionClient,G);const Rt=new fy(G.flags,G.currentConversationModel,G.extensionClient);et.registerConsumer(Rt),et.registerConsumer(G);const jt=new Pv(G.currentConversationModel,G.extensionClient);Vt(s,jt,Q=>n(30,b=Q)),et.registerConsumer(jt),St=new Xf(G,Dt,Rt);const{showAutoModeWarning:Zt}=St;Vt(s,Zt,Q=>n(15,H=Q));const Bt=new Zn(et,!1,G.flags);Vt(s,Bt,Q=>n(5,T=Q));const $e=new co(et),Mt=new es(et);et.registerConsumer(Bt),et.registerConsumer(Mt),$n(Zn.key,Bt),$n(co.key,$e),$n(es.key,Mt);const qt=xe(-1);$n(_d,qt);const me=new vr(G,St,Bt);et.registerConsumer(me),$n(vr.key,me);const ke=new bg(G,St);et.registerConsumer(ke);const Xe=new Yd(G,G.flags);et.registerConsumer(Xe),od(G),$n("autofixConversationModel",jt),$n("agentConversationModel",St),$n("toolsWebviewModel",Dt),$n("checkpointStore",Rt),$n("slashCommandModel",ke);const P=Ht(pr);let w;P?kt(w=P):(kt(w=xe($r)),$n(pr,w));const I=g.flags;Vt(s,I,Q=>n(16,O=Q));const{isCurrConversationAgentic:z}=St;Vt(s,z,Q=>n(4,k=Q));let V,it=!1;return et.registerConsumer(new class{constructor(Q){this._agentConversationModel=Q}handleMessageFromExtension(Q){return Q.data.type===fe.resetAgentOnboarding&&(this._agentConversationModel.resetOnboarding(),!0)}}(St)),jn(()=>{const Q=[Dt.dispose,Bt.dispose];return()=>{Q.forEach(lt=>lt())}}),s.$$set=Q=>{"initialConversation"in Q&&n(27,rt=Q.initialConversation),"initialFlags"in Q&&n(28,vt=Q.initialFlags)},s.$$.update=()=>{1&s.$$.dirty[1]&&n(1,e=S),1073741826&s.$$.dirty[0]&&n(14,o=!b.isAutofixConversation()&&!e.doHideStatusBars),1073741824&s.$$.dirty[0]&&n(13,r=b.isAutofixConversation()?b.shouldShowAutofixCommandInput()?ko.autofixCommand:ko.autofixPrompt:ko.normal),48&s.$$.dirty[0]&&n(12,i=T.isActive?"Ask Remote Agent (Beta)":k?"Ask or instruct Augment Agent":"Ask or instruct Augment"),8&s.$$.dirty[0]&&n(11,c=h.actions.length>0),8&s.$$.dirty[0]&&n(10,a=h.actions.includes(Ge.allActionsComplete)),4&s.$$.dirty[0]&&(n(9,l=g.currentConversationModel.totalCharactersStore),B(),B=se(l,Q=>n(29,p=Q))),536870913&s.$$.dirty[0]&&n(8,u=!it&&p>6e5)},[it,e,g,h,k,T,w,V,u,l,a,c,i,r,o,H,O,et,At,It,G,jt,Zt,Bt,Xe,I,z,rt,vt,p,b,S,()=>{g.saveImmediate()},Q=>function(lt,xt,Wt){var Et,ye;!lt.ctrlKey&&!lt.metaKey||lt.key!=="l"||lt.shiftKey||(Wt.isActive?Wt.setCurrentAgent(void 0):(xt.setCurrentConversation(),xt.extensionClient.reportWebviewClientEvent(Mo.chatNewConversation)),lt.preventDefault()),xt.flags.enableDebugFeatures&&!Wt.isActive&&((lt.ctrlKey||lt.metaKey)&&lt.shiftKey&&lt.key==="l"&&(xt.popCurrentConversation(),lt.preventDefault()),lt.altKey&&lt.code==="BracketRight"&&(xt.setCurrentConversation((Et=xt.nextConversation)==null?void 0:Et.id,!1),lt.preventDefault()),lt.altKey&&lt.code==="BracketLeft"&&(xt.setCurrentConversation((ye=xt.previousConversation)==null?void 0:ye.id,!1),lt.preventDefault()),(lt.ctrlKey||lt.metaKey)&&lt.key==="]"&&(xt.currentConversationModel.focusModel.focusNext(),lt.preventDefault()),(lt.ctrlKey||lt.metaKey)&&lt.key==="["&&(xt.currentConversationModel.focusModel.focusPrev(),lt.preventDefault()),lt.key==="Escape"&&(xt.currentConversationModel.focusModel.setFocusIdx(void 0),lt.preventDefault()))}(Q,G,Bt),function(Q){V=Q,n(7,V)},()=>G.setCurrentConversation(),()=>n(0,it=!0),function(Q){ue[Q?"unshift":"push"](()=>{V=Q,n(7,V)})}]}class qy extends nt{constructor(t){super(),ot(this,t,Uy,jy,tt,{initialConversation:27,initialFlags:28},null,[-1,-1])}}function Zc(s){let t,n,e,o,r,i,c,a;n=new Ot({props:{size:1,$$slots:{default:[Wy]},$$scope:{ctx:s}}}),o=new Ot({props:{size:1,$$slots:{default:[Vy]},$$scope:{ctx:s}}}),i=new Ot({props:{size:1,$$slots:{default:[Gy]},$$scope:{ctx:s}}});let l=s[0]!=="intellij"&&Qc(s);return{c(){t=F("div"),C(n.$$.fragment),e=W(),C(o.$$.fragment),r=W(),C(i.$$.fragment),c=W(),l&&l.c(),E(t,"class","c-augment-features svelte-1jb2nyh")},m(u,p){_(u,t,p),x(n,t,null),U(t,e),x(o,t,null),U(t,r),x(i,t,null),U(t,c),l&&l.m(t,null),a=!0},p(u,p){const g={};2&p&&(g.$$scope={dirty:p,ctx:u}),n.$set(g);const h={};2&p&&(h.$$scope={dirty:p,ctx:u}),o.$set(h);const k={};3&p&&(k.$$scope={dirty:p,ctx:u}),i.$set(k),u[0]!=="intellij"?l?1&p&&f(l,1):(l=Qc(u),l.c(),f(l,1),l.m(t,null)):l&&(K(),$(l,1,1,()=>{l=null}),Z())},i(u){a||(f(n.$$.fragment,u),f(o.$$.fragment,u),f(i.$$.fragment,u),f(l),a=!0)},o(u){$(n.$$.fragment,u),$(o.$$.fragment,u),$(i.$$.fragment,u),$(l),a=!1},d(u){u&&y(t),M(n),M(o),M(i),l&&l.d()}}}function Wy(s){let t;return{c(){t=X("Augment Features:")},m(n,e){_(n,t,e)},d(n){n&&y(t)}}}function Vy(s){let t,n,e;return{c(){t=F("a"),t.textContent="Chat",n=X(` &
      `),e=F("a"),e.textContent="Agent,",E(t,"href","https://docs.augmentcode.com/using-augment/chat"),E(t,"class","svelte-1jb2nyh"),E(e,"href","https://docs.augmentcode.com/using-augment/agent"),E(e,"class","svelte-1jb2nyh")},m(o,r){_(o,t,r),_(o,n,r),_(o,e,r)},p:D,d(o){o&&(y(t),y(n),y(e))}}}function Jc(s){let t,n,e;return{c(){t=X(`,
        `),n=F("a"),n.textContent="Instructions",e=X(","),E(n,"href","https://docs.augmentcode.com/using-augment/instructions"),E(n,"class","svelte-1jb2nyh")},m(o,r){_(o,t,r),_(o,n,r),_(o,e,r)},d(o){o&&(y(t),y(n),y(e))}}}function Gy(s){let t,n,e=s[0]!=="intellij"&&Jc();return{c(){t=F("a"),t.textContent="Code Completions",e&&e.c(),n=ft(),E(t,"href","https://docs.augmentcode.com/using-augment/completions"),E(t,"class","svelte-1jb2nyh")},m(o,r){_(o,t,r),e&&e.m(o,r),_(o,n,r)},p(o,r){o[0]!=="intellij"?e||(e=Jc(),e.c(),e.m(n.parentNode,n)):e&&(e.d(1),e=null)},d(o){o&&(y(t),y(n)),e&&e.d(o)}}}function Qc(s){let t,n;return t=new Ot({props:{size:1,$$slots:{default:[Yy]},$$scope:{ctx:s}}}),{c(){C(t.$$.fragment)},m(e,o){x(t,e,o),n=!0},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){M(t,e)}}}function Yy(s){let t;return{c(){t=F("a"),t.textContent="Next Edit",E(t,"href","https://docs.augmentcode.com/using-augment/next-edit"),E(t,"class","svelte-1jb2nyh")},m(n,e){_(n,t,e)},p:D,d(n){n&&y(t)}}}function Xy(s){let t,n,e=s[0]!==void 0&&Zc(s);return{c(){e&&e.c(),t=ft()},m(o,r){e&&e.m(o,r),_(o,t,r),n=!0},p(o,[r]){o[0]!==void 0?e?(e.p(o,r),1&r&&f(e,1)):(e=Zc(o),e.c(),f(e,1),e.m(t.parentNode,t)):e&&(K(),$(e,1,1,()=>{e=null}),Z())},i(o){n||(f(e),n=!0)},o(o){$(e),n=!1},d(o){o&&y(t),e&&e.d(o)}}}function Ky(s,t,n){let{client:e}=t;return s.$$set=o=>{"client"in o&&n(0,e=o.client)},[e]}class Kl extends nt{constructor(t){super(),ot(this,t,Ky,Xy,tt,{client:0})}}const Zy=s=>({}),tl=s=>({}),Jy=s=>({}),el=s=>({});function nl(s){let t,n;const e=s[2].logo,o=Gt(e,s,s[1],el);return{c(){t=F("div"),o&&o.c(),E(t,"class","c-onboarding-layout__logo svelte-72kwkw")},m(r,i){_(r,t,i),o&&o.m(t,null),n=!0},p(r,i){o&&o.p&&(!n||2&i)&&Yt(o,e,r,r[1],n?Kt(e,r[1],i,Jy):Xt(r[1]),el)},i(r){n||(f(o,r),n=!0)},o(r){$(o,r),n=!1},d(r){r&&y(t),o&&o.d(r)}}}function ol(s){let t,n;const e=s[2].error,o=Gt(e,s,s[1],tl);return{c(){t=F("div"),o&&o.c(),E(t,"class","c-onboarding-layout__error svelte-72kwkw")},m(r,i){_(r,t,i),o&&o.m(t,null),n=!0},p(r,i){o&&o.p&&(!n||2&i)&&Yt(o,e,r,r[1],n?Kt(e,r[1],i,Zy):Xt(r[1]),tl)},i(r){n||(f(o,r),n=!0)},o(r){$(o,r),n=!1},d(r){r&&y(t),o&&o.d(r)}}}function Qy(s){let t,n,e,o,r,i=s[0].logo&&nl(s);const c=s[2].default,a=Gt(c,s,s[1],null);let l=s[0].error&&ol(s);return{c(){t=F("div"),i&&i.c(),n=W(),e=F("div"),a&&a.c(),o=W(),l&&l.c(),E(e,"class","c-onboarding-layout__content svelte-72kwkw"),E(t,"class","c-onboarding-layout svelte-72kwkw"),Pt(t,"c-onboarding-layout__has-logo",s[0].logo)},m(u,p){_(u,t,p),i&&i.m(t,null),U(t,n),U(t,e),a&&a.m(e,null),U(t,o),l&&l.m(t,null),r=!0},p(u,[p]){u[0].logo?i?(i.p(u,p),1&p&&f(i,1)):(i=nl(u),i.c(),f(i,1),i.m(t,n)):i&&(K(),$(i,1,1,()=>{i=null}),Z()),a&&a.p&&(!r||2&p)&&Yt(a,c,u,u[1],r?Kt(c,u[1],p,null):Xt(u[1]),null),u[0].error?l?(l.p(u,p),1&p&&f(l,1)):(l=ol(u),l.c(),f(l,1),l.m(t,null)):l&&(K(),$(l,1,1,()=>{l=null}),Z()),(!r||1&p)&&Pt(t,"c-onboarding-layout__has-logo",u[0].logo)},i(u){r||(f(i),f(a,u),f(l),r=!0)},o(u){$(i),$(a,u),$(l),r=!1},d(u){u&&y(t),i&&i.d(),a&&a.d(u),l&&l.d()}}}function t5(s,t,n){let{$$slots:e={},$$scope:o}=t;const r=al(e);return s.$$set=i=>{"$$scope"in i&&n(1,o=i.$$scope)},[r,o,e]}class fs extends nt{constructor(t){super(),ot(this,t,t5,Qy,tt,{})}}function e5(s){let t;return{c(){t=X(s[0])},m(n,e){_(n,t,e)},p(n,e){1&e&&Lt(t,n[0])},d(n){n&&y(t)}}}function n5(s){let t;return{c(){t=X(s[1])},m(n,e){_(n,t,e)},p(n,e){2&e&&Lt(t,n[1])},d(n){n&&y(t)}}}function o5(s){let t,n,e,o,r;return n=new Ot({props:{size:2,weight:"bold",class:"c-sign-in__welcome",$$slots:{default:[e5]},$$scope:{ctx:s}}}),o=new Ot({props:{size:1,$$slots:{default:[n5]},$$scope:{ctx:s}}}),{c(){t=F("div"),C(n.$$.fragment),e=W(),C(o.$$.fragment),E(t,"class","c-sign-in__title svelte-yuxz62")},m(i,c){_(i,t,c),x(n,t,null),U(t,e),x(o,t,null),r=!0},p(i,[c]){const a={};5&c&&(a.$$scope={dirty:c,ctx:i}),n.$set(a);const l={};6&c&&(l.$$scope={dirty:c,ctx:i}),o.$set(l)},i(i){r||(f(n.$$.fragment,i),f(o.$$.fragment,i),r=!0)},o(i){$(n.$$.fragment,i),$(o.$$.fragment,i),r=!1},d(i){i&&y(t),M(n),M(o)}}}function r5(s,t,n){let{title:e}=t,{subtitle:o}=t;return s.$$set=r=>{"title"in r&&n(0,e=r.title),"subtitle"in r&&n(1,o=r.subtitle)},[e,o]}class Zl extends nt{constructor(t){super(),ot(this,t,r5,o5,tt,{title:0,subtitle:1})}}function s5(s){let t,n,e,o,r,i;return{c(){t=Nt("svg"),n=Nt("g"),e=Nt("path"),o=Nt("defs"),r=Nt("clipPath"),i=Nt("rect"),E(e,"d","M16 7.99201C16 3.58042 12.416 0 8 0C3.584 0 0 3.58042 0 7.99201C0 10.4216 1.104 12.6114 2.832 14.0819C2.848 14.0979 2.864 14.0979 2.864 14.1139C3.008 14.2258 3.152 14.3377 3.312 14.4496C3.392 14.4975 3.456 14.5614 3.536 14.6254C4.816 15.4885 6.352 16 8.016 16C9.68 16 11.216 15.4885 12.496 14.6254C12.576 14.5774 12.64 14.5135 12.72 14.4655C12.864 14.3536 13.024 14.2418 13.168 14.1299C13.184 14.1139 13.2 14.1139 13.2 14.0979C14.896 12.6114 16 10.4216 16 7.99201ZM8 14.993C6.496 14.993 5.12 14.5135 3.984 13.7143C4 13.5864 4.032 13.4585 4.064 13.3307C4.16 12.979 4.304 12.6434 4.48 12.3397C4.656 12.036 4.864 11.7642 5.12 11.5245C5.36 11.2847 5.648 11.0609 5.936 10.8851C6.24 10.7093 6.56 10.5814 6.912 10.4855C7.264 10.3896 7.632 10.3417 8 10.3417C8.592 10.3417 9.136 10.4535 9.632 10.6613C10.128 10.8691 10.56 11.1568 10.928 11.5085C11.296 11.8761 11.584 12.3077 11.792 12.8032C11.904 13.0909 11.984 13.3946 12.032 13.7143C10.88 14.5135 9.504 14.993 8 14.993ZM5.552 7.59241C5.408 7.27273 5.344 6.92108 5.344 6.56943C5.344 6.21778 5.408 5.86613 5.552 5.54645C5.696 5.22677 5.888 4.93906 6.128 4.6993C6.368 4.45954 6.656 4.26773 6.976 4.12388C7.296 3.98002 7.648 3.91608 8 3.91608C8.368 3.91608 8.704 3.98002 9.024 4.12388C9.344 4.26773 9.632 4.45954 9.872 4.6993C10.112 4.93906 10.304 5.22677 10.448 5.54645C10.592 5.86613 10.656 6.21778 10.656 6.56943C10.656 6.93706 10.592 7.27273 10.448 7.59241C10.304 7.91209 10.112 8.1998 9.872 8.43956C9.632 8.67932 9.344 8.87113 9.024 9.01499C8.384 9.28671 7.6 9.28671 6.96 9.01499C6.64 8.87113 6.352 8.67932 6.112 8.43956C5.872 8.1998 5.68 7.91209 5.552 7.59241ZM12.976 12.8991C12.976 12.8671 12.96 12.8511 12.96 12.8192C12.8 12.3237 12.576 11.8442 12.272 11.4126C11.968 10.981 11.616 10.5974 11.184 10.2777C10.864 10.038 10.512 9.83017 10.144 9.67033C10.32 9.55844 10.48 9.41459 10.608 9.28671C10.848 9.04695 11.056 8.79121 11.232 8.5035C11.408 8.21579 11.536 7.91209 11.632 7.57642C11.728 7.24076 11.76 6.9051 11.76 6.56943C11.76 6.04196 11.664 5.54645 11.472 5.0989C11.28 4.65135 11.008 4.25175 10.656 3.9001C10.32 3.56444 9.904 3.29271 9.456 3.1009C9.008 2.90909 8.512 2.81319 7.984 2.81319C7.456 2.81319 6.96 2.90909 6.512 3.1009C6.064 3.29271 5.648 3.56444 5.312 3.91608C4.976 4.25175 4.704 4.66733 4.512 5.11489C4.32 5.56244 4.224 6.05794 4.224 6.58541C4.224 6.93706 4.272 7.27273 4.368 7.59241C4.464 7.92807 4.592 8.23177 4.768 8.51948C4.928 8.80719 5.152 9.06294 5.392 9.3027C5.536 9.44655 5.696 9.57443 5.872 9.68631C5.488 9.86214 5.136 10.0699 4.832 10.3097C4.416 10.6294 4.048 11.013 3.744 11.4286C3.44 11.8601 3.216 12.3237 3.056 12.8352C3.04 12.8671 3.04 12.8991 3.04 12.9151C1.776 11.6364 0.992 9.91009 0.992 7.99201C0.992 4.13986 4.144 0.991009 8 0.991009C11.856 0.991009 15.008 4.13986 15.008 7.99201C15.008 9.91009 14.224 11.6364 12.976 12.8991Z"),E(e,"fill","currentColor"),E(n,"clip-path","url(#clip0_9570_7560)"),E(i,"width","16"),E(i,"height","16"),E(i,"fill","currentColor"),E(r,"id","clip0_9570_7560"),E(t,"width","16"),E(t,"height","16"),E(t,"viewBox","0 0 16 16"),E(t,"fill","none"),E(t,"xmlns","http://www.w3.org/2000/svg")},m(c,a){_(c,t,a),U(t,n),U(n,e),U(t,o),U(o,r),U(r,i)},p:D,i:D,o:D,d(c){c&&y(t)}}}class i5 extends nt{constructor(t){super(),ot(this,t,null,s5,tt,{})}}function a5(s){let t;return{c(){t=X("Sign In")},m(n,e){_(n,t,e)},d(n){n&&y(t)}}}function c5(s){let t,n;return t=new i5({props:{slot:"iconLeft"}}),{c(){C(t.$$.fragment)},m(e,o){x(t,e,o),n=!0},p:D,i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){M(t,e)}}}function l5(s){let t,n,e,o,r,i,c;return n=new Zl({props:{title:"Welcome!",subtitle:"Please sign in below."}}),o=new pe({props:{variant:"solid",color:"accent","data-testid":"sign-in-button",$$slots:{iconLeft:[c5],default:[a5]},$$scope:{ctx:s}}}),o.$on("click",s[1]),i=new Kl({props:{client:s[0]}}),{c(){t=F("div"),C(n.$$.fragment),e=W(),C(o.$$.fragment),r=W(),C(i.$$.fragment),E(t,"class","c-sign-in svelte-77uw5c")},m(a,l){_(a,t,l),x(n,t,null),U(t,e),x(o,t,null),U(t,r),x(i,t,null),c=!0},p(a,l){const u={};8&l&&(u.$$scope={dirty:l,ctx:a}),o.$set(u);const p={};1&l&&(p.client=a[0]),i.$set(p)},i(a){c||(f(n.$$.fragment,a),f(o.$$.fragment,a),f(i.$$.fragment,a),c=!0)},o(a){$(n.$$.fragment,a),$(o.$$.fragment,a),$(i.$$.fragment,a),c=!1},d(a){a&&y(t),M(n),M(o),M(i)}}}function u5(s){let t,n;return t=new _l({props:{slot:"logo"}}),{c(){C(t.$$.fragment)},m(e,o){x(t,e,o),n=!0},p:D,i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){M(t,e)}}}function d5(s){let t,n,e,o;return t=new fs({props:{$$slots:{logo:[u5],default:[l5]},$$scope:{ctx:s}}}),{c(){C(t.$$.fragment)},m(r,i){x(t,r,i),n=!0,e||(o=bt(window,"message",s[2]),e=!0)},p(r,[i]){const c={};9&i&&(c.$$scope={dirty:i,ctx:r}),t.$set(c)},i(r){n||(f(t.$$.fragment,r),n=!0)},o(r){$(t.$$.fragment,r),n=!1},d(r){M(t,r),e=!1,o()}}}function f5(s,t,n){let e;return sn.postMessage({type:fe.signInLoaded}),[e,function(){sn.postMessage({type:fe.mainPanelPerformAction,data:"sign-in"})},o=>{const r=o.data;r.type===fe.signInLoadedResponse&&n(0,e=r.data.client)}]}class m5 extends nt{constructor(t){super(),ot(this,t,f5,d5,tt,{})}}function p5(s){let t,n;return{c(){t=Nt("svg"),n=Nt("path"),E(n,"d","M14.5 3H7.70996L6.85999 2.15002L6.51001 2H1.51001L1.01001 2.5V6.5V13.5L1.51001 14H14.51L15.01 13.5V9V3.5L14.5 3ZM13.99 11.49V13H1.98999V11.49V7.48999V7H6.47998L6.82996 6.84998L7.68994 5.98999H14V7.48999L13.99 11.49ZM13.99 5H7.48999L7.14001 5.15002L6.28003 6.01001H2V3.01001H6.29004L7.14001 3.85999L7.5 4.01001H14L13.99 5Z"),E(n,"fill","#C5C5C5"),E(t,"width","16"),E(t,"height","16"),E(t,"viewBox","0 0 16 16"),E(t,"fill","none"),E(t,"xmlns","http://www.w3.org/2000/svg")},m(e,o){_(e,t,o),U(t,n)},p:D,i:D,o:D,d(e){e&&y(t)}}}class $5 extends nt{constructor(t){super(),ot(this,t,null,p5,tt,{})}}function h5(s){let t,n,e;return t=new fd({}),{c(){C(t.$$.fragment),n=X(`
        Back`)},m(o,r){x(t,o,r),_(o,n,r),e=!0},i(o){e||(f(t.$$.fragment,o),e=!0)},o(o){$(t.$$.fragment,o),e=!1},d(o){o&&y(n),M(t,o)}}}function g5(s){let t;return{c(){t=X("Index Codebase")},m(n,e){_(n,t,e)},d(n){n&&y(t)}}}function v5(s){let t;return{c(){t=X(`Indexing allows Augment to make tailored code suggestions and explain common practices or
        patterns.`)},m(n,e){_(n,t,e)},d(n){n&&y(t)}}}function w5(s){let t;return{c(){t=F("a"),t.textContent="Learn More",E(t,"href","https://docs.augmentcode.com/setup-augment/workspace-indexing"),E(t,"class","svelte-f8zg6u")},m(n,e){_(n,t,e)},p:D,d(n){n&&y(t)}}}function y5(s){let t,n,e;return n=new Ot({props:{size:1,$$slots:{default:[w5]},$$scope:{ctx:s}}}),{c(){t=X(`Your data always stays secure, private and anonymized.
        `),C(n.$$.fragment)},m(o,r){_(o,t,r),x(n,o,r),e=!0},p(o,r){const i={};4096&r&&(i.$$scope={dirty:r,ctx:o}),n.$set(i)},i(o){e||(f(n.$$.fragment,o),e=!0)},o(o){$(n.$$.fragment,o),e=!1},d(o){o&&y(t),M(n,o)}}}function b5(s){let t,n=(s[2]??rl)+"";return{c(){t=X(n)},m(e,o){_(e,t,o)},p(e,o){4&o&&n!==(n=(e[2]??rl)+"")&&Lt(t,n)},d(e){e&&y(t)}}}function _5(s){let t,n;return t=new $5({props:{slot:"iconLeft"}}),{c(){C(t.$$.fragment)},m(e,o){x(t,e,o),n=!0},p:D,i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){M(t,e)}}}function C5(s){let t,n;return t=new pe({props:{variant:"outline",color:"neutral",size:2,$$slots:{iconLeft:[_5],default:[b5]},$$scope:{ctx:s}}}),t.$on("click",s[7]),{c(){C(t.$$.fragment)},m(e,o){x(t,e,o),n=!0},p(e,o){const r={};4100&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){M(t,e)}}}function x5(s){let t;return{c(){t=X("Index Codebase")},m(n,e){_(n,t,e)},d(n){n&&y(t)}}}function M5(s){let t,n,e,o,r,i,c,a,l,u,p,g,h,k=ul(),T=k&&function(b){let S,H,O;return H=new pe({props:{variant:"ghost",color:"neutral",size:1,$$slots:{default:[h5]},$$scope:{ctx:b}}}),H.$on("click",b[8]),{c(){S=F("div"),C(H.$$.fragment),E(S,"class","c-back-button-container svelte-f8zg6u")},m(B,ut){_(B,S,ut),x(H,S,null),O=!0},p(B,ut){const kt={};4096&ut&&(kt.$$scope={dirty:ut,ctx:B}),H.$set(kt)},i(B){O||(f(H.$$.fragment,B),O=!0)},o(B){$(H.$$.fragment,B),O=!1},d(B){B&&y(S),M(H)}}}(s);return e=new Ot({props:{size:2,weight:"bold",class:"c-awaiting-syncing-permission__title",$$slots:{default:[g5]},$$scope:{ctx:s}}}),i=new Ot({props:{size:1,$$slots:{default:[v5]},$$scope:{ctx:s}}}),a=new Ot({props:{size:1,$$slots:{default:[y5]},$$scope:{ctx:s}}}),u=new we({props:{content:"Open a new project",$$slots:{default:[C5]},$$scope:{ctx:s}}}),g=new pe({props:{variant:"solid",color:"accent",size:2,disabled:!s[2]||s[3],loading:s[1],$$slots:{default:[x5]},$$scope:{ctx:s}}}),g.$on("click",s[6]),{c(){T&&T.c(),t=W(),n=F("div"),C(e.$$.fragment),o=W(),r=F("div"),C(i.$$.fragment),c=W(),C(a.$$.fragment),l=W(),C(u.$$.fragment),p=W(),C(g.$$.fragment),E(r,"class","c-awaiting-syncing-permission__text svelte-f8zg6u"),E(n,"class","c-awaiting-syncing-permission svelte-f8zg6u")},m(b,S){T&&T.m(b,S),_(b,t,S),_(b,n,S),x(e,n,null),U(n,o),U(n,r),x(i,r,null),U(r,c),x(a,r,null),U(n,l),x(u,n,null),U(n,p),x(g,n,null),h=!0},p(b,S){k&&T.p(b,S);const H={};4096&S&&(H.$$scope={dirty:S,ctx:b}),e.$set(H);const O={};4096&S&&(O.$$scope={dirty:S,ctx:b}),i.$set(O);const B={};4096&S&&(B.$$scope={dirty:S,ctx:b}),a.$set(B);const ut={};4100&S&&(ut.$$scope={dirty:S,ctx:b}),u.$set(ut);const kt={};12&S&&(kt.disabled=!b[2]||b[3]),2&S&&(kt.loading=b[1]),4096&S&&(kt.$$scope={dirty:S,ctx:b}),g.$set(kt)},i(b){h||(f(T),f(e.$$.fragment,b),f(i.$$.fragment,b),f(a.$$.fragment,b),f(u.$$.fragment,b),f(g.$$.fragment,b),h=!0)},o(b){$(T),$(e.$$.fragment,b),$(i.$$.fragment,b),$(a.$$.fragment,b),$(u.$$.fragment,b),$(g.$$.fragment,b),h=!1},d(b){b&&(y(t),y(n)),T&&T.d(b),M(e),M(i),M(a),M(u),M(g)}}}function A5(s){let t,n,e;return n=new Ll({props:{card:s[0].currentCard,flagsModel:s[5]}}),{c(){t=F("div"),C(n.$$.fragment),E(t,"slot","error")},m(o,r){_(o,t,r),x(n,t,null),e=!0},p(o,r){const i={};1&r&&(i.card=o[0].currentCard),n.$set(i)},i(o){e||(f(n.$$.fragment,o),e=!0)},o(o){$(n.$$.fragment,o),e=!1},d(o){o&&y(t),M(n)}}}function E5(s){let t,n,e,o;return t=new fs({props:{$$slots:{error:[A5],default:[M5]},$$scope:{ctx:s}}}),{c(){C(t.$$.fragment)},m(r,i){x(t,r,i),n=!0,e||(o=bt(window,"message",s[9]),e=!0)},p(r,[i]){const c={};4111&i&&(c.$$scope={dirty:i,ctx:r}),t.$set(c)},i(r){n||(f(t.$$.fragment,r),n=!0)},o(r){$(t.$$.fragment,r),n=!1},d(r){M(t,r),e=!1,o()}}}const rl="Open a folder";function k5(s,t,n){let e;const o=new _r(sn);let r=new Al;Vt(s,r,p=>n(0,e=p)),o.registerConsumer(r);const i=new $l,c=new hl(sn,o,i);let a,l=!1,u=!1;return sn.postMessage({type:fe.awaitingSyncingPermissionLoaded}),s.$$.update=()=>{1&s.$$.dirty&&n(3,u=e.currentCard===Ge.workspaceTooLarge||e.currentCard===Ge.uploadingHomeDir)},[e,l,a,u,r,i,function(){n(1,l=!0),c.grantSyncPermission()},function(){c.openProjectFolder()},function(){c.closeProjectFolder()},function(p){const g=p.data;switch(g.type){case fe.awaitingSyncingPermissionInitialize:{const{enableDebugFeatures:h,maxTrackableFileCount:k,userTier:T}=g.data;n(2,a=g.data.workspaceName),i.update({enableDebugFeatures:h,maxTrackableFileCount:k,userTier:T});break}case fe.mainPanelActions:r.onActionsUpdates(function(h){const k=new Set([Ge.workspaceNotSelected,Ge.workspaceTooLarge,Ge.uploadingHomeDir]);return h.filter(T=>k.has(T))}(g.data))}}]}class T5 extends nt{constructor(t){super(),ot(this,t,k5,E5,tt,{})}}function L5(s){let t,n;return{c(){t=Nt("svg"),n=Nt("path"),E(n,"fill-rule","evenodd"),E(n,"clip-rule","evenodd"),E(n,"d","M8.14645 3.14645C8.34171 2.95118 8.65829 2.95118 8.85355 3.14645L12.8536 7.14645C13.0488 7.34171 13.0488 7.65829 12.8536 7.85355L8.85355 11.8536C8.65829 12.0488 8.34171 12.0488 8.14645 11.8536C7.95118 11.6583 7.95118 11.3417 8.14645 11.1464L11.2929 8H2.5C2.22386 8 2 7.77614 2 7.5C2 7.22386 2.22386 7 2.5 7H11.2929L8.14645 3.85355C7.95118 3.65829 7.95118 3.34171 8.14645 3.14645Z"),E(n,"fill","currentColor"),E(t,"width","15"),E(t,"height","15"),E(t,"viewBox","0 0 15 15"),E(t,"fill","none"),E(t,"xmlns","http://www.w3.org/2000/svg")},m(e,o){_(e,t,o),U(t,n)},p:D,i:D,o:D,d(e){e&&y(t)}}}class I5 extends nt{constructor(t){super(),ot(this,t,null,L5,tt,{})}}function S5(s){let t,n;return{c(){t=Nt("svg"),n=Nt("path"),E(n,"fill-rule","evenodd"),E(n,"clip-rule","evenodd"),E(n,"d","M2 3.5C2 3.22386 2.22386 3 2.5 3H12.5C12.7761 3 13 3.22386 13 3.5V9.5C13 9.77614 12.7761 10 12.5 10H2.5C2.22386 10 2 9.77614 2 9.5V3.5ZM2 10.9146C1.4174 10.7087 1 10.1531 1 9.5V3.5C1 2.67157 1.67157 2 2.5 2H12.5C13.3284 2 14 2.67157 14 3.5V9.5C14 10.1531 13.5826 10.7087 13 10.9146V11.5C13 12.3284 12.3284 13 11.5 13H3.5C2.67157 13 2 12.3284 2 11.5V10.9146ZM12 11V11.5C12 11.7761 11.7761 12 11.5 12H3.5C3.22386 12 3 11.7761 3 11.5V11H12ZM5 6.5C5 6.22386 5.22386 6 5.5 6H7V4.5C7 4.22386 7.22386 4 7.5 4C7.77614 4 8 4.22386 8 4.5V6H9.5C9.77614 6 10 6.22386 10 6.5C10 6.77614 9.77614 7 9.5 7H8V8.5C8 8.77614 7.77614 9 7.5 9C7.22386 9 7 8.77614 7 8.5V7H5.5C5.22386 7 5 6.77614 5 6.5Z"),E(n,"fill","currentColor"),E(t,"width","15"),E(t,"height","15"),E(t,"viewBox","0 0 15 15"),E(t,"fill","none"),E(t,"xmlns","http://www.w3.org/2000/svg")},m(e,o){_(e,t,o),U(t,n)},p:D,i:D,o:D,d(e){e&&y(t)}}}class R5 extends nt{constructor(t){super(),ot(this,t,null,S5,tt,{})}}function P5(s){let t;return{c(){t=X("Create a new project")},m(n,e){_(n,t,e)},d(n){n&&y(t)}}}function D5(s){let t,n;return t=new xl({props:{slot:"iconLeft"}}),{c(){C(t.$$.fragment)},m(e,o){x(t,e,o),n=!0},p:D,i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){M(t,e)}}}function sl(s){let t,n,e,o,r,i,c;function a(p){s[9](p)}function l(p){s[10](p)}let u={color:s[2]?"error":"neutral",placeholder:"Project Name"};return s[1]!==void 0&&(u.value=s[1]),s[3]!==void 0&&(u.textInput=s[3]),n=new xr({props:u}),ue.push(()=>Ye(n,"value",a)),ue.push(()=>Ye(n,"textInput",l)),n.$on("keydown",s[11]),i=new Me({props:{disabled:s[4],$$slots:{default:[N5]},$$scope:{ctx:s}}}),i.$on("click",s[12]),{c(){t=F("div"),C(n.$$.fragment),r=W(),C(i.$$.fragment),E(t,"class","c-folder-selection__project-name-input svelte-1hmau15")},m(p,g){_(p,t,g),x(n,t,null),U(t,r),x(i,t,null),c=!0},p(p,g){const h={};4&g&&(h.color=p[2]?"error":"neutral"),!e&&2&g&&(e=!0,h.value=p[1],Ze(()=>e=!1)),!o&&8&g&&(o=!0,h.textInput=p[3],Ze(()=>o=!1)),n.$set(h);const k={};16&g&&(k.disabled=p[4]),16384&g&&(k.$$scope={dirty:g,ctx:p}),i.$set(k)},i(p){c||(f(n.$$.fragment,p),f(i.$$.fragment,p),c=!0)},o(p){$(n.$$.fragment,p),$(i.$$.fragment,p),c=!1},d(p){p&&y(t),M(n),M(i)}}}function N5(s){let t,n;return t=new I5({}),{c(){C(t.$$.fragment)},m(e,o){x(t,e,o),n=!0},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){M(t,e)}}}function F5(s){let t;return{c(){t=X("Open a local folder")},m(n,e){_(n,t,e)},d(n){n&&y(t)}}}function O5(s){let t,n;return t=new rd({props:{slot:"iconLeft"}}),{c(){C(t.$$.fragment)},m(e,o){x(t,e,o),n=!0},p:D,i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){M(t,e)}}}function B5(s){let t;return{c(){t=X("Clone a repository")},m(n,e){_(n,t,e)},d(n){n&&y(t)}}}function z5(s){let t,n;return t=new R5({props:{slot:"iconLeft"}}),{c(){C(t.$$.fragment)},m(e,o){x(t,e,o),n=!0},p:D,i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){M(t,e)}}}function H5(s){let t,n,e,o,r,i,c,a,l,u,p,g,h;n=new Zl({props:{title:"Welcome back!",subtitle:"Please open a project folder to begin."}}),r=new pe({props:{variant:"outline",color:"neutral",size:2,alignment:"left",$$slots:{iconLeft:[D5],default:[P5]},$$scope:{ctx:s}}}),r.$on("click",s[8]);let k=s[0]&&sl(s);return a=new pe({props:{variant:"outline",color:"neutral",size:2,alignment:"left",$$slots:{iconLeft:[O5],default:[F5]},$$scope:{ctx:s}}}),a.$on("click",s[6]),u=new pe({props:{variant:"outline",color:"neutral",size:2,alignment:"left",$$slots:{iconLeft:[z5],default:[B5]},$$scope:{ctx:s}}}),u.$on("click",s[7]),g=new Kl({}),{c(){t=F("div"),C(n.$$.fragment),e=W(),o=F("div"),C(r.$$.fragment),i=W(),k&&k.c(),c=W(),C(a.$$.fragment),l=W(),C(u.$$.fragment),p=W(),C(g.$$.fragment),E(o,"class","c-folder-selection__buttons svelte-1hmau15"),E(t,"class","c-folder-selection svelte-1hmau15")},m(T,b){_(T,t,b),x(n,t,null),U(t,e),U(t,o),x(r,o,null),U(o,i),k&&k.m(o,null),U(o,c),x(a,o,null),U(o,l),x(u,o,null),U(t,p),x(g,t,null),h=!0},p(T,b){const S={};16384&b&&(S.$$scope={dirty:b,ctx:T}),r.$set(S),T[0]?k?(k.p(T,b),1&b&&f(k,1)):(k=sl(T),k.c(),f(k,1),k.m(o,c)):k&&(K(),$(k,1,1,()=>{k=null}),Z());const H={};16384&b&&(H.$$scope={dirty:b,ctx:T}),a.$set(H);const O={};16384&b&&(O.$$scope={dirty:b,ctx:T}),u.$set(O)},i(T){h||(f(n.$$.fragment,T),f(r.$$.fragment,T),f(k),f(a.$$.fragment,T),f(u.$$.fragment,T),f(g.$$.fragment,T),h=!0)},o(T){$(n.$$.fragment,T),$(r.$$.fragment,T),$(k),$(a.$$.fragment,T),$(u.$$.fragment,T),$(g.$$.fragment,T),h=!1},d(T){T&&y(t),M(n),M(r),k&&k.d(),M(a),M(u),M(g)}}}function j5(s){let t,n;return t=new _l({props:{slot:"logo"}}),{c(){C(t.$$.fragment)},m(e,o){x(t,e,o),n=!0},p:D,i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){M(t,e)}}}function il(s){let t,n;return t=new Pn({props:{variant:"soft",color:"error",size:1,$$slots:{icon:[q5],default:[U5]},$$scope:{ctx:s}}}),{c(){C(t.$$.fragment)},m(e,o){x(t,e,o),n=!0},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){M(t,e)}}}function U5(s){let t;return{c(){t=X("Must contain only letters, numbers, hyphens, underscores, and spaces")},m(n,e){_(n,t,e)},d(n){n&&y(t)}}}function q5(s){let t,n;return t=new Dn({props:{slot:"icon"}}),{c(){C(t.$$.fragment)},m(e,o){x(t,e,o),n=!0},p:D,i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){M(t,e)}}}function W5(s){let t,n,e=s[2]&&il(s);return{c(){t=F("div"),e&&e.c(),E(t,"slot","error")},m(o,r){_(o,t,r),e&&e.m(t,null),n=!0},p(o,r){o[2]?e?4&r&&f(e,1):(e=il(o),e.c(),f(e,1),e.m(t,null)):e&&(K(),$(e,1,1,()=>{e=null}),Z())},i(o){n||(f(e),n=!0)},o(o){$(e),n=!1},d(o){o&&y(t),e&&e.d()}}}function V5(s){let t,n;return t=new fs({props:{$$slots:{error:[W5],logo:[j5],default:[H5]},$$scope:{ctx:s}}}),{c(){C(t.$$.fragment)},m(e,o){x(t,e,o),n=!0},p(e,[o]){const r={};16415&o&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){M(t,e)}}}function G5(s,t,n){const e=new hl(sn,new _r(sn),new $l);function o(u){e.createProject(u)}let r,i=!1,c="",a=!0,l=!1;return s.$$.update=()=>{7&s.$$.dirty&&(n(2,l=!/^[a-zA-Z0-9\-_ ]+$/.test(c)&&c.trim().length>0),n(4,a=!i||!c.trim().length||l))},[i,c,l,r,a,o,function(){e.openProjectFolder()},function(){e.cloneRepository()},function(){i?n(0,i=!1):(n(0,i=!0),setTimeout(()=>{r==null||r.focus()},0))},function(u){c=u,n(1,c)},function(u){r=u,n(3,r)},u=>{u.key!=="Enter"||a||(u.preventDefault(),o(c.trim()))},()=>o(c.trim())]}class Y5 extends nt{constructor(t){super(),ot(this,t,G5,V5,tt,{})}}function X5(s){let t,n;return t=new Y5({}),{c(){C(t.$$.fragment)},m(e,o){x(t,e,o),n=!0},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){M(t,e)}}}function K5(s){let t,n;return t=new T5({}),{c(){C(t.$$.fragment)},m(e,o){x(t,e,o),n=!0},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){M(t,e)}}}function Z5(s){let t,n;return t=new qy({}),{c(){C(t.$$.fragment)},m(e,o){x(t,e,o),n=!0},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){M(t,e)}}}function J5(s){let t,n;return t=new m5({}),{c(){C(t.$$.fragment)},m(e,o){x(t,e,o),n=!0},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){$(t.$$.fragment,e),n=!1},d(e){M(t,e)}}}function Q5(s){let t,n,e,o;const r=[J5,Z5,K5,X5],i=[];function c(a,l){return a[0]===sr.signIn?0:a[0]===sr.chat?1:a[0]===sr.awaitingSyncingPermission?2:a[0]===sr.folderSelection?3:-1}return~(n=c(s))&&(e=i[n]=r[n](s)),{c(){t=F("main"),e&&e.c()},m(a,l){_(a,t,l),~n&&i[n].m(t,null),o=!0},p(a,l){let u=n;n=c(a),n!==u&&(e&&(K(),$(i[u],1,1,()=>{i[u]=null}),Z()),~n?(e=i[n],e||(e=i[n]=r[n](a),e.c()),f(e,1),e.m(t,null)):e=null)},i(a){o||(f(e),o=!0)},o(a){$(e),o=!1},d(a){a&&y(t),~n&&i[n].d()}}}function t6(s){let t,n,e,o;return t=new Su.Root({props:{$$slots:{default:[Q5]},$$scope:{ctx:s}}}),{c(){C(t.$$.fragment)},m(r,i){x(t,r,i),n=!0,e||(o=bt(window,"message",s[1]),e=!0)},p(r,[i]){const c={};5&i&&(c.$$scope={dirty:i,ctx:r}),t.$set(c)},i(r){n||(f(t.$$.fragment,r),n=!0)},o(r){$(t.$$.fragment,r),n=!1},d(r){M(t,r),e=!1,o()}}}function e6(s,t,n){let e;return sn.postMessage({type:fe.mainPanelLoaded}),[e,o=>{const r=o.data;r.type===fe.mainPanelDisplayApp&&n(0,e=r.data)}]}new class extends nt{constructor(s){super(),ot(this,s,e6,t6,tt,{})}}({target:document.getElementById("app")});export{Om as A,Wl as C,cp as D,us as E,co as G,gr as I,Dp as R,S6 as S,Oh as a,Mn as b,Og as c,R6 as f};
